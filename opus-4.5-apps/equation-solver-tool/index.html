<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equation Solver Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: #fafafa;
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: normal;
        }

        .subtitle {
            color: #7f8c8d;
            font-style: italic;
        }

        .input-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .equation-input {
            width: 100%;
            padding: 15px;
            font-size: 1.5rem;
            font-family: 'Courier New', monospace;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            text-align: center;
            outline: none;
            transition: border-color 0.3s;
        }

        .equation-input:focus {
            border-color: #3498db;
        }

        .equation-type {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .type-btn {
            padding: 10px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.2s;
        }

        .type-btn:hover {
            border-color: #3498db;
        }

        .type-btn.active {
            border-color: #3498db;
            background: #ebf5fb;
        }

        .solve-btn {
            width: 100%;
            padding: 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .solve-btn:hover {
            background: #2980b9;
        }

        .result-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .result-section h2 {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: normal;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .solution {
            font-size: 2rem;
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
            color: #27ae60;
        }

        .steps {
            counter-reset: step;
        }

        .step {
            display: flex;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .step-number {
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-desc {
            color: #666;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .step-equation {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            color: #2c3e50;
        }

        .examples {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .examples h2 {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: normal;
        }

        .example-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .example-btn {
            padding: 12px;
            border: 1px solid #e0e0e0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.2s;
            text-align: center;
        }

        .example-btn:hover {
            border-color: #3498db;
            background: #ebf5fb;
        }

        .export-btn {
            padding: 10px 20px;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 20px;
        }

        .export-btn:hover {
            background: #1a252f;
        }

        .error {
            color: #e74c3c;
            text-align: center;
            padding: 20px;
            font-style: italic;
        }

        @media (max-width: 600px) {
            .equation-input {
                font-size: 1.2rem;
            }

            .solution {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Equation Solver</h1>
            <p class="subtitle">Solve and understand mathematical equations step by step</p>
        </header>

        <div class="input-section">
            <div class="input-group">
                <label>Equation Type</label>
                <div class="equation-type">
                    <button class="type-btn active" data-type="linear">Linear (ax + b = c)</button>
                    <button class="type-btn" data-type="quadratic">Quadratic (ax² + bx + c = 0)</button>
                    <button class="type-btn" data-type="system">System of Equations</button>
                </div>
            </div>
            <div class="input-group">
                <label>Enter Equation</label>
                <input type="text" class="equation-input" id="equationInput" placeholder="2x + 5 = 13">
            </div>
            <div class="input-group" id="secondEquation" style="display: none;">
                <label>Second Equation (for systems)</label>
                <input type="text" class="equation-input" id="equationInput2" placeholder="x + y = 10">
            </div>
            <button class="solve-btn" onclick="solve()">Solve Equation</button>
        </div>

        <div class="result-section" id="resultSection" style="display: none;">
            <h2>Solution</h2>
            <div class="solution" id="solution"></div>
            <h2>Step-by-Step Breakdown</h2>
            <div class="steps" id="steps"></div>
            <button class="export-btn" onclick="exportResults()">Export Results</button>
        </div>

        <div class="examples">
            <h2>Try These Examples</h2>
            <div class="example-list">
                <button class="example-btn" onclick="loadExample('3x + 7 = 22', 'linear')">3x + 7 = 22</button>
                <button class="example-btn" onclick="loadExample('5x - 3 = 2x + 9', 'linear')">5x - 3 = 2x + 9</button>
                <button class="example-btn" onclick="loadExample('x² - 5x + 6 = 0', 'quadratic')">x² - 5x + 6 = 0</button>
                <button class="example-btn" onclick="loadExample('2x² + 4x - 6 = 0', 'quadratic')">2x² + 4x - 6 = 0</button>
                <button class="example-btn" onclick="loadExample('x² - 9 = 0', 'quadratic')">x² - 9 = 0</button>
                <button class="example-btn" onclick="loadSystem()">x + y = 10, 2x - y = 5</button>
            </div>
        </div>
    </div>

    <script>
        let currentType = 'linear';

        // Type selection
        document.querySelectorAll('.type-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentType = btn.dataset.type;
                document.getElementById('secondEquation').style.display =
                    currentType === 'system' ? 'block' : 'none';
            });
        });

        function loadExample(eq, type) {
            document.getElementById('equationInput').value = eq;
            document.querySelectorAll('.type-btn').forEach(b => {
                b.classList.toggle('active', b.dataset.type === type);
            });
            currentType = type;
            document.getElementById('secondEquation').style.display = 'none';
            solve();
        }

        function loadSystem() {
            document.getElementById('equationInput').value = 'x + y = 10';
            document.getElementById('equationInput2').value = '2x - y = 5';
            document.querySelectorAll('.type-btn').forEach(b => {
                b.classList.toggle('active', b.dataset.type === 'system');
            });
            currentType = 'system';
            document.getElementById('secondEquation').style.display = 'block';
            solve();
        }

        function solve() {
            const eq = document.getElementById('equationInput').value.trim();
            if (!eq) return;

            let solution, steps;

            try {
                switch (currentType) {
                    case 'linear':
                        ({ solution, steps } = solveLinear(eq));
                        break;
                    case 'quadratic':
                        ({ solution, steps } = solveQuadratic(eq));
                        break;
                    case 'system':
                        const eq2 = document.getElementById('equationInput2').value.trim();
                        ({ solution, steps } = solveSystem(eq, eq2));
                        break;
                }

                document.getElementById('solution').textContent = solution;
                document.getElementById('steps').innerHTML = steps.map((step, i) => `
                    <div class="step">
                        <div class="step-number">${i + 1}</div>
                        <div class="step-content">
                            <div class="step-desc">${step.desc}</div>
                            <div class="step-equation">${step.eq}</div>
                        </div>
                    </div>
                `).join('');
                document.getElementById('resultSection').style.display = 'block';
            } catch (e) {
                document.getElementById('solution').innerHTML = `<span class="error">${e.message}</span>`;
                document.getElementById('steps').innerHTML = '';
                document.getElementById('resultSection').style.display = 'block';
            }
        }

        function solveLinear(eq) {
            const steps = [];
            steps.push({ desc: 'Start with the given equation', eq });

            // Parse equation: ax + b = c or ax + b = dx + e
            const sides = eq.replace(/\s/g, '').split('=');
            if (sides.length !== 2) throw new Error('Invalid equation format');

            let leftCoeff = 0, leftConst = 0;
            let rightCoeff = 0, rightConst = 0;

            // Parse left side
            const leftTerms = sides[0].match(/[+-]?[^+-]+/g) || [];
            leftTerms.forEach(term => {
                if (term.includes('x')) {
                    const coeff = term.replace('x', '') || '1';
                    leftCoeff += coeff === '+' || coeff === '' ? 1 : coeff === '-' ? -1 : parseFloat(coeff);
                } else {
                    leftConst += parseFloat(term);
                }
            });

            // Parse right side
            const rightTerms = sides[1].match(/[+-]?[^+-]+/g) || [];
            rightTerms.forEach(term => {
                if (term.includes('x')) {
                    const coeff = term.replace('x', '') || '1';
                    rightCoeff += coeff === '+' || coeff === '' ? 1 : coeff === '-' ? -1 : parseFloat(coeff);
                } else {
                    rightConst += parseFloat(term);
                }
            });

            // Move x terms to left
            const xCoeff = leftCoeff - rightCoeff;
            const constant = rightConst - leftConst;

            if (xCoeff !== leftCoeff) {
                steps.push({
                    desc: 'Move all x terms to the left side and constants to the right',
                    eq: `${xCoeff}x = ${constant}`
                });
            } else if (constant !== rightConst) {
                steps.push({
                    desc: 'Move constant to the right side',
                    eq: `${xCoeff}x = ${constant}`
                });
            }

            if (xCoeff === 0) {
                throw new Error(constant === 0 ? 'Infinite solutions' : 'No solution');
            }

            const result = constant / xCoeff;
            steps.push({
                desc: `Divide both sides by ${xCoeff}`,
                eq: `x = ${constant} ÷ ${xCoeff} = ${result}`
            });

            return { solution: `x = ${result}`, steps };
        }

        function solveQuadratic(eq) {
            const steps = [];
            steps.push({ desc: 'Start with the quadratic equation', eq });

            // Parse: ax² + bx + c = 0
            const normalized = eq.replace(/\s/g, '').replace('=0', '');
            let a = 0, b = 0, c = 0;

            const terms = normalized.match(/[+-]?[^+-]+/g) || [];
            terms.forEach(term => {
                if (term.includes('x²') || term.includes('x^2')) {
                    const coeff = term.replace(/x[²^2]/, '') || '1';
                    a = coeff === '+' || coeff === '' ? 1 : coeff === '-' ? -1 : parseFloat(coeff);
                } else if (term.includes('x')) {
                    const coeff = term.replace('x', '') || '1';
                    b = coeff === '+' || coeff === '' ? 1 : coeff === '-' ? -1 : parseFloat(coeff);
                } else {
                    c = parseFloat(term) || 0;
                }
            });

            steps.push({
                desc: 'Identify coefficients',
                eq: `a = ${a}, b = ${b}, c = ${c}`
            });

            const discriminant = b * b - 4 * a * c;
            steps.push({
                desc: 'Calculate the discriminant (b² - 4ac)',
                eq: `Δ = ${b}² - 4(${a})(${c}) = ${discriminant}`
            });

            if (discriminant < 0) {
                steps.push({
                    desc: 'Discriminant is negative',
                    eq: 'No real solutions'
                });
                return { solution: 'No real solutions', steps };
            }

            const sqrtD = Math.sqrt(discriminant);
            const x1 = (-b + sqrtD) / (2 * a);
            const x2 = (-b - sqrtD) / (2 * a);

            steps.push({
                desc: 'Apply the quadratic formula: x = (-b ± √Δ) / 2a',
                eq: `x = (${-b} ± √${discriminant}) / ${2 * a}`
            });

            if (discriminant === 0) {
                steps.push({
                    desc: 'Single solution (discriminant = 0)',
                    eq: `x = ${x1}`
                });
                return { solution: `x = ${x1}`, steps };
            }

            steps.push({
                desc: 'Two solutions',
                eq: `x₁ = ${x1.toFixed(4)}, x₂ = ${x2.toFixed(4)}`
            });

            const sol1 = Number.isInteger(x1) ? x1 : x1.toFixed(4);
            const sol2 = Number.isInteger(x2) ? x2 : x2.toFixed(4);
            return { solution: `x₁ = ${sol1}, x₂ = ${sol2}`, steps };
        }

        function solveSystem(eq1, eq2) {
            const steps = [];
            steps.push({ desc: 'System of equations', eq: `${eq1} and ${eq2}` });

            // Simple parsing for ax + by = c format
            function parseSystemEq(eq) {
                const parts = eq.replace(/\s/g, '').split('=');
                const rhs = parseFloat(parts[1]);
                let a = 0, b = 0;

                const terms = parts[0].match(/[+-]?[^+-]+/g) || [];
                terms.forEach(term => {
                    if (term.includes('x')) {
                        const coeff = term.replace('x', '') || '1';
                        a = coeff === '+' || coeff === '' ? 1 : coeff === '-' ? -1 : parseFloat(coeff);
                    } else if (term.includes('y')) {
                        const coeff = term.replace('y', '') || '1';
                        b = coeff === '+' || coeff === '' ? 1 : coeff === '-' ? -1 : parseFloat(coeff);
                    }
                });
                return { a, b, c: rhs };
            }

            const e1 = parseSystemEq(eq1);
            const e2 = parseSystemEq(eq2);

            steps.push({
                desc: 'Identify coefficients',
                eq: `Eq1: ${e1.a}x + ${e1.b}y = ${e1.c}, Eq2: ${e2.a}x + ${e2.b}y = ${e2.c}`
            });

            // Using elimination method
            const det = e1.a * e2.b - e2.a * e1.b;
            if (det === 0) {
                throw new Error('System has no unique solution');
            }

            const x = (e1.c * e2.b - e2.c * e1.b) / det;
            const y = (e1.a * e2.c - e2.a * e1.c) / det;

            steps.push({
                desc: 'Use elimination/substitution method',
                eq: `Determinant = ${det}`
            });

            steps.push({
                desc: 'Solve for x and y',
                eq: `x = ${x}, y = ${y}`
            });

            return { solution: `x = ${x}, y = ${y}`, steps };
        }

        function exportResults() {
            const solution = document.getElementById('solution').textContent;
            const steps = document.getElementById('steps').innerText;
            const eq = document.getElementById('equationInput').value;

            const text = `Equation Solver Results\n${'='.repeat(30)}\n\nEquation: ${eq}\n\nSolution: ${solution}\n\nSteps:\n${steps}`;

            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'equation-solution.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Enter key to solve
        document.getElementById('equationInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') solve();
        });
    </script>
</body>
</html>
