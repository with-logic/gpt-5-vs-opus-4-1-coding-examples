<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Poll Board</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #E0F7FA 0%, #FFF8E1 50%, #F3E5F5 100%);
            min-height: 100vh;
            padding: 30px 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.8rem;
            font-weight: 800;
            color: #5E35B1;
            margin-bottom: 10px;
        }

        h1 span {
            color: #FF7043;
        }

        header p {
            color: #78909C;
            font-size: 1.1rem;
        }

        .polls-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .poll-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .poll-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.12);
        }

        .poll-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .poll-question {
            font-size: 1.4rem;
            font-weight: 700;
            color: #37474F;
            flex: 1;
        }

        .poll-meta {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
            color: #90A4AE;
        }

        .poll-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .poll-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .poll-option {
            position: relative;
            background: #F5F7FA;
            border-radius: 12px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.3s;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .poll-option:hover {
            border-color: #7E57C2;
        }

        .poll-option.voted {
            cursor: default;
        }

        .poll-option.voted:hover {
            border-color: transparent;
        }

        .poll-option.selected {
            border-color: #7E57C2;
            background: #EDE7F6;
        }

        .option-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            border-radius: 10px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 0;
        }

        .option-bar.color-1 { background: linear-gradient(90deg, rgba(126, 87, 194, 0.2), rgba(126, 87, 194, 0.1)); }
        .option-bar.color-2 { background: linear-gradient(90deg, rgba(255, 112, 67, 0.2), rgba(255, 112, 67, 0.1)); }
        .option-bar.color-3 { background: linear-gradient(90deg, rgba(38, 198, 218, 0.2), rgba(38, 198, 218, 0.1)); }
        .option-bar.color-4 { background: linear-gradient(90deg, rgba(102, 187, 106, 0.2), rgba(102, 187, 106, 0.1)); }

        .option-content {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1;
        }

        .option-text {
            font-weight: 600;
            color: #455A64;
        }

        .option-stats {
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .poll-option.voted .option-stats {
            opacity: 1;
        }

        .option-count {
            font-weight: 700;
            color: #7E57C2;
            font-size: 0.9rem;
        }

        .option-percent {
            background: #7E57C2;
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .poll-footer {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #ECEFF1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .total-votes {
            color: #78909C;
            font-size: 0.9rem;
        }

        .total-votes strong {
            color: #5E35B1;
            font-size: 1.1rem;
        }

        .vote-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #7E57C2, #5E35B1);
            color: white;
            border: none;
            border-radius: 25px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.5;
            pointer-events: none;
        }

        .vote-btn.active {
            opacity: 1;
            pointer-events: all;
        }

        .vote-btn.active:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(126, 87, 194, 0.4);
        }

        .vote-btn.voted {
            background: #66BB6A;
            opacity: 1;
            pointer-events: none;
        }

        .confetti {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
        }

        .add-poll-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #FF7043, #E64A19);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 5px 25px rgba(255, 112, 67, 0.4);
            transition: all 0.3s;
        }

        .add-poll-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 20px;
            padding: 35px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal h2 {
            color: #5E35B1;
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: #455A64;
            margin-bottom: 8px;
        }

        .form-group input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #E0E0E0;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #7E57C2;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-input-group {
            display: flex;
            gap: 10px;
        }

        .option-input-group input {
            flex: 1;
        }

        .remove-option {
            width: 44px;
            height: 44px;
            background: #FFEBEE;
            color: #E53935;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .remove-option:hover {
            background: #FFCDD2;
        }

        .add-option-btn {
            padding: 12px;
            background: #E8EAF6;
            color: #5E35B1;
            border: 2px dashed #7E57C2;
            border-radius: 10px;
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .add-option-btn:hover {
            background: #C5CAE9;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-actions button {
            flex: 1;
            padding: 14px;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .cancel-btn {
            background: #F5F5F5;
            border: none;
            color: #78909C;
        }

        .cancel-btn:hover {
            background: #ECEFF1;
        }

        .create-btn {
            background: linear-gradient(135deg, #7E57C2, #5E35B1);
            border: none;
            color: white;
        }

        .create-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(126, 87, 194, 0.4);
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }

            .poll-card {
                padding: 20px;
            }

            .poll-question {
                font-size: 1.2rem;
            }

            .poll-footer {
                flex-direction: column;
                gap: 15px;
            }

            .vote-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Poll<span>Board</span></h1>
            <p>Vote on trending topics and see what others think!</p>
        </header>

        <div class="polls-container" id="pollsContainer"></div>
    </div>

    <button class="add-poll-btn" onclick="openModal()">+</button>

    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <h2>Create New Poll</h2>
            <form onsubmit="createPoll(event)">
                <div class="form-group">
                    <label>Question</label>
                    <input type="text" id="pollQuestion" placeholder="What do you want to ask?" required>
                </div>
                <div class="form-group">
                    <label>Options</label>
                    <div class="options-list" id="optionsList">
                        <div class="option-input-group">
                            <input type="text" class="option-input" placeholder="Option 1" required>
                            <button type="button" class="remove-option" onclick="removeOption(this)">√ó</button>
                        </div>
                        <div class="option-input-group">
                            <input type="text" class="option-input" placeholder="Option 2" required>
                            <button type="button" class="remove-option" onclick="removeOption(this)">√ó</button>
                        </div>
                    </div>
                    <button type="button" class="add-option-btn" onclick="addOption()">+ Add Option</button>
                </div>
                <div class="modal-actions">
                    <button type="button" class="cancel-btn" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="create-btn">Create Poll</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let polls = [
            {
                id: 1,
                question: "What's your favorite programming language?",
                options: [
                    { text: "JavaScript", votes: 234 },
                    { text: "Python", votes: 189 },
                    { text: "TypeScript", votes: 156 },
                    { text: "Rust", votes: 78 }
                ],
                voted: false,
                selectedOption: null,
                createdAt: new Date(Date.now() - 86400000)
            },
            {
                id: 2,
                question: "Best way to start the morning?",
                options: [
                    { text: "Coffee ‚òï", votes: 312 },
                    { text: "Tea üçµ", votes: 145 },
                    { text: "Exercise üí™", votes: 98 },
                    { text: "Sleep more üò¥", votes: 267 }
                ],
                voted: false,
                selectedOption: null,
                createdAt: new Date(Date.now() - 172800000)
            },
            {
                id: 3,
                question: "Remote work or office?",
                options: [
                    { text: "Fully Remote", votes: 423 },
                    { text: "Hybrid", votes: 356 },
                    { text: "Office Only", votes: 89 }
                ],
                voted: false,
                selectedOption: null,
                createdAt: new Date(Date.now() - 43200000)
            },
            {
                id: 4,
                question: "Tabs or Spaces?",
                options: [
                    { text: "Tabs", votes: 198 },
                    { text: "Spaces", votes: 245 }
                ],
                voted: false,
                selectedOption: null,
                createdAt: new Date(Date.now() - 259200000)
            }
        ];

        function formatTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            if (seconds < 60) return 'Just now';
            if (seconds < 3600) return Math.floor(seconds / 60) + 'm ago';
            if (seconds < 86400) return Math.floor(seconds / 3600) + 'h ago';
            return Math.floor(seconds / 86400) + 'd ago';
        }

        function getTotalVotes(poll) {
            return poll.options.reduce((sum, opt) => sum + opt.votes, 0);
        }

        function getPercentage(votes, total) {
            return total === 0 ? 0 : Math.round((votes / total) * 100);
        }

        function renderPolls() {
            const container = document.getElementById('pollsContainer');
            container.innerHTML = polls.map(poll => {
                const total = getTotalVotes(poll);
                return `
                    <div class="poll-card" data-poll-id="${poll.id}">
                        <div class="poll-header">
                            <h2 class="poll-question">${poll.question}</h2>
                            <div class="poll-meta">
                                <span>üïê ${formatTimeAgo(poll.createdAt)}</span>
                            </div>
                        </div>
                        <div class="poll-options">
                            ${poll.options.map((opt, idx) => {
                                const percent = getPercentage(opt.votes, total);
                                return `
                                    <div class="poll-option ${poll.voted ? 'voted' : ''} ${poll.selectedOption === idx ? 'selected' : ''}"
                                         onclick="selectOption(${poll.id}, ${idx})"
                                         data-option-idx="${idx}">
                                        <div class="option-bar color-${(idx % 4) + 1}" style="width: ${poll.voted ? percent : 0}%"></div>
                                        <div class="option-content">
                                            <span class="option-text">${opt.text}</span>
                                            <div class="option-stats">
                                                <span class="option-count">${opt.votes.toLocaleString()} votes</span>
                                                <span class="option-percent">${percent}%</span>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        <div class="poll-footer">
                            <span class="total-votes"><strong>${total.toLocaleString()}</strong> total votes</span>
                            <button class="vote-btn ${poll.selectedOption !== null && !poll.voted ? 'active' : ''} ${poll.voted ? 'voted' : ''}"
                                    onclick="submitVote(${poll.id})">
                                ${poll.voted ? '‚úì Voted' : 'Cast Vote'}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function selectOption(pollId, optionIdx) {
            const poll = polls.find(p => p.id === pollId);
            if (poll.voted) return;

            poll.selectedOption = optionIdx;
            renderPolls();
        }

        function submitVote(pollId) {
            const poll = polls.find(p => p.id === pollId);
            if (poll.voted || poll.selectedOption === null) return;

            poll.options[poll.selectedOption].votes++;
            poll.voted = true;

            renderPolls();

            // Trigger confetti
            createConfetti();

            // Animate the bars
            setTimeout(() => {
                const card = document.querySelector(`[data-poll-id="${pollId}"]`);
                const total = getTotalVotes(poll);
                card.querySelectorAll('.poll-option').forEach((opt, idx) => {
                    const percent = getPercentage(poll.options[idx].votes, total);
                    opt.querySelector('.option-bar').style.width = percent + '%';
                });
            }, 50);
        }

        function createConfetti() {
            const colors = ['#7E57C2', '#FF7043', '#26C6DA', '#66BB6A', '#FFD54F'];
            const confettiCount = 50;

            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.cssText = `
                    position: fixed;
                    left: ${Math.random() * 100}vw;
                    top: -10px;
                    width: ${Math.random() * 10 + 5}px;
                    height: ${Math.random() * 10 + 5}px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
                    animation: fall ${Math.random() * 2 + 2}s linear forwards;
                    transform: rotate(${Math.random() * 360}deg);
                `;
                document.body.appendChild(confetti);

                setTimeout(() => confetti.remove(), 4000);
            }
        }

        // Add confetti animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fall {
                to {
                    transform: translateY(100vh) rotate(720deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        function openModal() {
            document.getElementById('modalOverlay').classList.add('active');
        }

        function closeModal(e) {
            if (!e || e.target === document.getElementById('modalOverlay')) {
                document.getElementById('modalOverlay').classList.remove('active');
                document.getElementById('pollQuestion').value = '';
                document.getElementById('optionsList').innerHTML = `
                    <div class="option-input-group">
                        <input type="text" class="option-input" placeholder="Option 1" required>
                        <button type="button" class="remove-option" onclick="removeOption(this)">√ó</button>
                    </div>
                    <div class="option-input-group">
                        <input type="text" class="option-input" placeholder="Option 2" required>
                        <button type="button" class="remove-option" onclick="removeOption(this)">√ó</button>
                    </div>
                `;
            }
        }

        function addOption() {
            const list = document.getElementById('optionsList');
            const count = list.children.length + 1;
            const div = document.createElement('div');
            div.className = 'option-input-group';
            div.innerHTML = `
                <input type="text" class="option-input" placeholder="Option ${count}" required>
                <button type="button" class="remove-option" onclick="removeOption(this)">√ó</button>
            `;
            list.appendChild(div);
        }

        function removeOption(btn) {
            const list = document.getElementById('optionsList');
            if (list.children.length > 2) {
                btn.parentElement.remove();
            }
        }

        function createPoll(e) {
            e.preventDefault();

            const question = document.getElementById('pollQuestion').value.trim();
            const optionInputs = document.querySelectorAll('.option-input');
            const options = Array.from(optionInputs)
                .map(input => ({ text: input.value.trim(), votes: 0 }))
                .filter(opt => opt.text);

            if (options.length < 2) {
                alert('Please add at least 2 options');
                return;
            }

            const newPoll = {
                id: Date.now(),
                question,
                options,
                voted: false,
                selectedOption: null,
                createdAt: new Date()
            };

            polls.unshift(newPoll);
            renderPolls();
            closeModal();
        }

        renderPolls();
    </script>
</body>
</html>
