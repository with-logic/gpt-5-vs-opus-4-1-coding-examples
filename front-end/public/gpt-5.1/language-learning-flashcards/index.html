<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Language Flashcards</title>
    <style>
      :root {
        color-scheme: light;
        --bg: #f3f0ff;
        --card: #fff;
        --accent: #6c63ff;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Nunito", system-ui, sans-serif;
        background: var(--bg);
        color: #1f1b2e;
        min-height: 100vh;
        padding: clamp(1rem, 5vw, 3rem);
      }
      header {
        text-align: center;
        margin-bottom: 2rem;
      }
      .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
        margin-bottom: 2rem;
      }
      select,
      button {
        border-radius: 999px;
        border: 1px solid rgba(0, 0, 0, 0.1);
        padding: 0.7rem 1.5rem;
        font: inherit;
      }
      button {
        background: var(--accent);
        color: #fff;
        cursor: pointer;
      }
      .grid {
        display: grid;
        gap: 1rem;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
      .card {
        perspective: 1000px;
      }
      .card-inner {
        position: relative;
        width: 100%;
        padding-top: 70%;
        transition: transform 0.6s;
        transform-style: preserve-3d;
        cursor: pointer;
      }
      .card-inner.learned {
        opacity: 0.4;
      }
      .card-inner.flipped {
        transform: rotateY(180deg);
      }
      .face {
        position: absolute;
        inset: 0;
        border-radius: 1.5rem;
        background: var(--card);
        box-shadow: 0 15px 35px rgba(108, 99, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        backface-visibility: hidden;
      }
      .face.back {
        transform: rotateY(180deg);
        background: #1f1b2e;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <header>
      <h1 id="title">Language Flashcards</h1>
      <p id="subtitle">Pick a language and tap cards to flip.</p>
    </header>
    <div class="controls">
      <label>
        <span id="languageLabel">Language</span>
        <select id="language">
          <option value="spanish">Español</option>
          <option value="french">Français</option>
          <option value="japanese">日本語</option>
          <option value="english">English</option>
        </select>
      </label>
      <button id="shuffle">Shuffle</button>
      <button id="markAll">Mark as learned</button>
    </div>
    <div class="grid" id="cards"></div>

    <script>
      const phrases = {
        spanish: [
          ["¿Dónde está el metro?", "Where is the subway?"],
          ["Una mesa para dos", "A table for two"],
          ["¿Cuánto cuesta?", "How much does it cost?"],
          ["Me encanta esta ciudad", "I love this city"],
          ["Necesito ayuda", "I need help"],
          ["Sin azúcar, por favor", "No sugar, please"],
          ["¿Tienen opciones veganas?", "Do you have vegan options?"],
          ["La llave de mi habitación", "My room key"],
          ["¿Puedo pagar con tarjeta?", "Can I pay by card?"],
          ["Nos vemos mañana", "See you tomorrow"],
        ],
        french: [
          ["Où est la station de métro ?", "Where is the metro station?"],
          ["Je voudrais un café", "I'd like a coffee"],
          ["Combien ça coûte ?", "How much does it cost?"],
          ["J'adore ce quartier", "I love this neighborhood"],
          ["Sans gluten, s'il vous plaît", "Gluten-free, please"],
          ["Parlez-vous anglais ?", "Do you speak English?"],
          ["Je cherche l'hôtel", "I'm looking for the hotel"],
          ["C'est délicieux", "It's delicious"],
          ["Bon voyage !", "Have a good trip!"],
          ["Merci pour votre aide", "Thank you for your help"],
        ],
        japanese: [
          ["駅はどこですか？", "Where is the station?"],
          ["二人です", "We are two people"],
          ["カードは使えますか？", "Can I use a card?"],
          ["おすすめは何ですか？", "What do you recommend?"],
          ["助けてください", "Please help"],
          ["英語のメニューはありますか？", "Do you have an English menu?"],
          ["とてもおいしい", "Very tasty"],
          ["写真を撮ってもいいですか？", "May I take a photo?"],
          ["また来ます", "I'll come again"],
          ["空港行きのバス", "Bus to the airport"],
        ],
        english: [
          ["Where is the restroom?", "¿Dónde está el baño?"],
          ["I'd like the check", "La cuenta, por favor"],
          ["Can you help me?", "¿Puedes ayudarme?"],
          ["This is delicious", "Esto está delicioso"],
          ["No plastic bag, please", "Sin bolsa, por favor"],
          ["What time is it?", "¿Qué hora es?"],
          ["I'm lost", "Estoy perdido"],
          ["Do you speak English?", "¿Hablas inglés?"],
          ["Cheers!", "¡Salud!"],
          ["See you soon", "Nos vemos pronto"],
        ],
      };

      const ui = {
        en: { title: "Language Flashcards", subtitle: "Pick a language and tap cards to flip.", language: "Language", shuffle: "Shuffle", mark: "Mark as learned" },
        es: { title: "Tarjetas de Idiomas", subtitle: "Elige un idioma y toca para voltear.", language: "Idioma", shuffle: "Barajar", mark: "Marcar como aprendido" },
        fr: { title: "Cartes linguistiques", subtitle: "Choisissez une langue et appuyez pour retourner.", language: "Langue", shuffle: "Mélanger", mark: "Marquer appris" },
        ja: { title: "ことばカード", subtitle: "言語を選んでカードをタップ", language: "言語", shuffle: "シャッフル", mark: "学習済みにする" },
      };

      const locale = navigator.language.slice(0, 2);
      const strings = ui[locale] || ui.en;
      document.getElementById("title").textContent = strings.title;
      document.getElementById("subtitle").textContent = strings.subtitle;
      document.getElementById("languageLabel").textContent = strings.language;
      document.getElementById("shuffle").textContent = strings.shuffle;
      document.getElementById("markAll").textContent = strings.mark;

      const cardsEl = document.getElementById("cards");
      const languageSelect = document.getElementById("language");
      const shuffleBtn = document.getElementById("shuffle");
      const markAllBtn = document.getElementById("markAll");

      function render(language) {
        cardsEl.innerHTML = "";
        phrases[language].forEach(([front, back], index) => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <div class="card-inner" data-index="${index}">
              <div class="face front">${front}</div>
              <div class="face back">${back}</div>
            </div>`;
          cardsEl.appendChild(card);
        });
        attachEvents();
      }

      function attachEvents() {
        document.querySelectorAll(".card-inner").forEach((inner) => {
          inner.addEventListener("click", () => inner.classList.toggle("flipped"));
        });
      }

      function shuffleCards() {
        const language = languageSelect.value;
        phrases[language] = phrases[language].sort(() => Math.random() - 0.5);
        render(language);
      }

      function markLearned() {
        document.querySelectorAll(".card-inner").forEach((inner) => inner.classList.add("learned"));
      }

      languageSelect.addEventListener("change", () => render(languageSelect.value));
      shuffleBtn.addEventListener("click", shuffleCards);
      markAllBtn.addEventListener("click", markLearned);

      const localeMap = { en: "english", es: "spanish", fr: "french", ja: "japanese" };
      if (localeMap[locale]) {
        languageSelect.value = localeMap[locale];
      }
      render(languageSelect.value);
    </script>
  </body>
</html>
