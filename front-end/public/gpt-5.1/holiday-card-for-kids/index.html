<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Snowy Cheer Card</title>
    <style>
      :root {
        color-scheme: light;
        --mint: #dbf6f0;
        --pink: #ffd8f0;
        --navy: #09326c;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Baloo 2", "Inter", sans-serif;
        background: linear-gradient(180deg, #9be0ff, #fef6ff);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem 1rem 4rem;
        color: var(--navy);
        overflow-x: hidden;
      }
      h1 {
        margin: 0 0 0.5rem;
      }
      .card {
        position: relative;
        width: min(90vw, 540px);
        height: 360px;
        background: white;
        border-radius: 2rem;
        box-shadow: 0 20px 80px rgba(9, 50, 108, 0.2);
        margin: 1.5rem 0;
        overflow: hidden;
      }
      .card-message {
        position: absolute;
        bottom: 1.5rem;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        background: rgba(255, 255, 255, 0.8);
        padding: 1rem 1.5rem;
        border-radius: 1.5rem;
        font-size: 1.3rem;
      }
      .palette {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        justify-content: center;
      }
      .token {
        border: none;
        border-radius: 999px;
        padding: 0.6rem 1rem;
        background: rgba(255, 255, 255, 0.7);
        font-size: 1.3rem;
        cursor: pointer;
        transition: transform 0.2s;
      }
      .token:hover {
        transform: scale(1.1);
      }
      .sticker {
        position: absolute;
        font-size: 2.5rem;
        cursor: grab;
        transition: transform 0.2s;
      }
      .snow {
        position: absolute;
        inset: 0;
        pointer-events: none;
      }
      .flake {
        position: absolute;
        top: -5%;
        font-size: 1rem;
        animation: fall 8s linear infinite;
      }
      @keyframes fall {
        to {
          transform: translateY(110vh) rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <h1>Snowy Cheer Card</h1>
    <p>Tap the goodies to drop them onto the card. Drag them around!</p>
    <div class="card" id="card">
      <div class="snow" id="snow"></div>
      <div class="card-message">Happy holidays! ‚ùÑÔ∏è Share kindness, cocoa & giggles.</div>
    </div>
    <div class="palette" id="palette"></div>

    <script>
      const card = document.getElementById("card");
      const palette = document.getElementById("palette");
      const stickers = ["‚õÑÔ∏è", "üéÅ", "ü¶ä", "üéÑ", "üõ∑", "‚ú®", "üç™", "üß∏", "‚ùÑÔ∏è"];

      function playPop() {
        const ctxAudio = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctxAudio.createOscillator();
        const gain = ctxAudio.createGain();
        osc.frequency.value = 800;
        gain.gain.value = 0.2;
        osc.connect(gain).connect(ctxAudio.destination);
        osc.start();
        osc.frequency.exponentialRampToValueAtTime(300, ctxAudio.currentTime + 0.2);
        gain.gain.exponentialRampToValueAtTime(0.001, ctxAudio.currentTime + 0.2);
        osc.stop(ctxAudio.currentTime + 0.25);
      }

      function createSticker(emoji, x = Math.random() * 400 + 40, y = Math.random() * 180 + 40) {
        const el = document.createElement("span");
        el.textContent = emoji;
        el.className = "sticker";
        el.style.left = `${x}px`;
        el.style.top = `${y}px`;
        makeDraggable(el);
        card.appendChild(el);
      }

      function makeDraggable(el) {
        let offsetX = 0;
        let offsetY = 0;
        function pointerDown(event) {
          playPop();
          el.setPointerCapture(event.pointerId);
          offsetX = event.clientX - el.offsetLeft;
          offsetY = event.clientY - el.offsetTop;
          el.style.cursor = "grabbing";
          el.addEventListener("pointermove", pointerMove);
          el.addEventListener("pointerup", pointerUp);
        }
        function pointerMove(event) {
          const x = event.clientX - offsetX;
          const y = event.clientY - offsetY;
          const bounds = card.getBoundingClientRect();
          const clampedX = Math.min(bounds.width - 40, Math.max(0, x));
          const clampedY = Math.min(bounds.height - 40, Math.max(0, y));
          el.style.left = `${clampedX}px`;
          el.style.top = `${clampedY}px`;
        }
        function pointerUp(event) {
          el.releasePointerCapture(event.pointerId);
          el.style.cursor = "grab";
          el.removeEventListener("pointermove", pointerMove);
        }
        el.addEventListener("pointerdown", pointerDown);
      }

      stickers.forEach((emoji) => {
        const button = document.createElement("button");
        button.className = "token";
        button.textContent = emoji;
        button.addEventListener("click", () => {
          createSticker(emoji);
          playPop();
        });
        palette.appendChild(button);
      });

      // default stickers
      createSticker("‚õÑÔ∏è", 80, 200);
      createSticker("üß∏", 220, 240);
      createSticker("üéÑ", 360, 180);

      // snow generator
      const snowLayer = document.getElementById("snow");
      for (let i = 0; i < 40; i++) {
        const flake = document.createElement("span");
        flake.className = "flake";
        flake.textContent = "‚ùÜ";
        flake.style.left = `${Math.random() * 100}%`;
        flake.style.animationDelay = `${Math.random() * 8}s`;
        flake.style.fontSize = `${Math.random() * 1 + 0.6}rem`;
        snowLayer.appendChild(flake);
      }
    </script>
  </body>
</html>
