<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Math Practice Drills</title>
    <style>
      :root {
        color-scheme: light;
        --bg: #f9fafb;
        --accent: #111827;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Inter", system-ui, sans-serif;
        background: var(--bg);
        color: var(--accent);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
      }
      .app {
        width: min(480px, 100%);
        padding: 2rem;
        border: 2px solid #e5e7eb;
        border-radius: 1.5rem;
        text-align: center;
        background: #fff;
      }
      h1 {
        margin-top: 0;
        font-size: 1.5rem;
        letter-spacing: 0.1em;
      }
      select,
      button,
      input {
        width: 100%;
        font: inherit;
        padding: 0.8rem;
        margin: 0.5rem 0;
        border-radius: 0.8rem;
        border: 1px solid #d1d5db;
      }
      button {
        background: var(--accent);
        color: #fff;
        border: none;
        cursor: pointer;
      }
      .problem {
        font-size: clamp(2.5rem, 10vw, 4rem);
        margin: 1rem 0;
      }
      .stats {
        display: flex;
        justify-content: space-between;
        font-size: 1rem;
      }
    </style>
  </head>
  <body>
    <div class="app">
      <h1>Math Practice Drills</h1>
      <select id="difficulty">
        <option value="easy">Easy · + -</option>
        <option value="medium">Medium · + - ×</option>
        <option value="hard">Hard · + - × ÷</option>
      </select>
      <button id="start">Start 60s drill</button>
      <div class="stats">
        <div>Time <strong id="time">60</strong>s</div>
        <div>Score <strong id="score">0</strong></div>
        <div>Accuracy <strong id="accuracy">0%</strong></div>
      </div>
      <div class="problem" id="problem">3 × 4</div>
      <input type="number" id="answer" placeholder="Your answer" autocomplete="off" />
      <p id="feedback"></p>
    </div>

    <script>
      const difficultySelect = document.getElementById("difficulty");
      const startBtn = document.getElementById("start");
      const timeEl = document.getElementById("time");
      const scoreEl = document.getElementById("score");
      const accuracyEl = document.getElementById("accuracy");
      const problemEl = document.getElementById("problem");
      const answerInput = document.getElementById("answer");
      const feedback = document.getElementById("feedback");
      let timer;
      let remaining = 60;
      let score = 0;
      let attempts = 0;
      let currentAnswer = 0;

      const operations = {
        easy: ["+", "-"],
        medium: ["+", "-", "×"],
        hard: ["+", "-", "×", "÷"],
      };

      function randomInt(max) {
        return Math.floor(Math.random() * max);
      }

      function nextProblem() {
        const difficulty = difficultySelect.value;
        const ops = operations[difficulty];
        const op = ops[randomInt(ops.length)];
        let a = randomInt(difficulty === "easy" ? 20 : 50) + 1;
        let b = randomInt(difficulty === "easy" ? 20 : 50) + 1;
        if (op === "-") {
          if (a < b) [a, b] = [b, a];
          currentAnswer = a - b;
        } else if (op === "×") {
          currentAnswer = a * b;
        } else if (op === "÷") {
          currentAnswer = Math.floor(a / b);
          b = Math.max(1, b);
          a = currentAnswer * b;
        } else {
          currentAnswer = a + b;
        }
        problemEl.textContent = `${a} ${op} ${b}`;
        answerInput.value = "";
        answerInput.focus();
      }

      function updateAccuracy() {
        accuracyEl.textContent = attempts ? `${Math.round((score / attempts) * 100)}%` : "0%";
      }

      function startDrill() {
        clearInterval(timer);
        remaining = 60;
        score = 0;
        attempts = 0;
        feedback.textContent = "";
        timeEl.textContent = remaining;
        scoreEl.textContent = score;
        updateAccuracy();
        nextProblem();
        timer = setInterval(() => {
          remaining -= 1;
          timeEl.textContent = remaining;
          if (remaining <= 0) {
            clearInterval(timer);
            feedback.textContent = `Time! You solved ${score} correctly.`;
            answerInput.disabled = true;
          }
        }, 1000);
        answerInput.disabled = false;
      }

      startBtn.addEventListener("click", startDrill);
      answerInput.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          const value = Number(answerInput.value);
          if (!Number.isFinite(value)) return;
          attempts += 1;
          if (value === currentAnswer) {
            score += 1;
            feedback.textContent = "Correct!";
            feedback.style.color = "green";
          } else {
            feedback.textContent = `Oops, ${currentAnswer}`;
            feedback.style.color = "red";
          }
          scoreEl.textContent = score;
          updateAccuracy();
          nextProblem();
        }
      });
      nextProblem();
    </script>
  </body>
</html>
