<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Equation Solver Tool</title>
    <style>
      :root {
        color-scheme: light;
        --bg: #f4f5f7;
        --paper: #fff;
        --ink: #0f172a;
        --accent: #1d4ed8;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Source Serif 4", "Inter", system-ui;
        background: var(--bg);
        color: var(--ink);
        padding: clamp(1rem, 5vw, 3rem);
      }
      header {
        text-align: center;
        margin-bottom: 2rem;
      }
      h1 {
        margin: 0;
        font-size: clamp(2rem, 6vw, 3.5rem);
      }
      main {
        max-width: 800px;
        margin: 0 auto;
        background: var(--paper);
        border-radius: 1.5rem;
        padding: clamp(1.5rem, 4vw, 3rem);
        box-shadow: 0 20px 60px rgba(15, 23, 42, 0.08);
      }
      label {
        display: block;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.2em;
        margin-bottom: 0.5rem;
      }
      input,
      button {
        font: inherit;
      }
      input[type="text"] {
        width: 100%;
        border-radius: 0.75rem;
        border: 1px solid rgba(15, 23, 42, 0.1);
        padding: 0.85rem 1rem;
        font-size: 1.1rem;
        margin-bottom: 1rem;
      }
      button {
        border: none;
        border-radius: 999px;
        padding: 0.9rem 1.4rem;
        background: var(--accent);
        color: #fff;
        cursor: pointer;
        font-weight: 600;
        margin-right: 0.5rem;
      }
      .steps {
        margin-top: 1.5rem;
        border-top: 1px solid rgba(15, 23, 42, 0.1);
        padding-top: 1.5rem;
      }
      .step {
        padding: 1rem 0;
        border-bottom: 1px solid rgba(15, 23, 42, 0.05);
      }
      .step:last-child {
        border-bottom: none;
      }
      .step h3 {
        margin: 0 0 0.5rem;
        font-size: 1rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      .result {
        font-size: 1.3rem;
        font-weight: 600;
        color: var(--accent);
      }
      .error {
        color: #b91c1c;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Equation Solver Tool</h1>
      <p>Provide a linear equation containing x — we’ll isolate, solve, and cite each algebraic move.</p>
    </header>
    <main>
      <label for="equation">Equation (e.g., 3x + 5 = 2x - 7)</label>
      <input type="text" id="equation" placeholder="Type an equation" />
      <div>
        <button id="solve">Solve & explain</button>
        <button id="export">Export steps</button>
      </div>
      <div class="steps" id="steps"></div>
    </main>

    <script>
      const equationInput = document.getElementById("equation");
      const stepsEl = document.getElementById("steps");

      function tokenize(side) {
        const tokens = side.replace(/\s+/g, "").match(/[+-]?[^+-]+/g);
        let coeff = 0;
        let constant = 0;
        if (!tokens) return { coeff, constant };
        tokens.forEach((token) => {
          if (token.includes("x")) {
            const value = token.replace("x", "");
            if (value === "" || value === "+") coeff += 1;
            else if (value === "-") coeff -= 1;
            else coeff += Number(value);
          } else {
            constant += Number(token);
          }
        });
        return { coeff, constant };
      }

      function solveEquation(input) {
        const parts = input.split("=");
        if (parts.length !== 2) throw new Error("Equation must contain '=' symbol");
        const left = tokenize(parts[0]);
        const right = tokenize(parts[1]);
        const a = left.coeff - right.coeff;
        const b = right.constant - left.constant;
        if (a === 0 && b === 0) return { result: "All real numbers", steps: [{ title: "Infinite solutions", detail: "Both sides reduce to the same expression." }] };
        if (a === 0) throw new Error("No solution — variable terms cancel out.");
        const x = b / a;
        return {
          result: `x = ${x}`,
          steps: [
            { title: "Collect x terms", detail: `${left.coeff}x on left and ${right.coeff}x on right → ${(left.coeff - right.coeff).toFixed(2)}x` },
            { title: "Collect constants", detail: `${right.constant} - ${left.constant} = ${(right.constant - left.constant).toFixed(2)}` },
            { title: "Divide", detail: `${b.toFixed(2)} ÷ ${a.toFixed(2)} = ${x}` },
          ],
        };
      }

      function renderSteps(payload) {
        if (!payload) return;
        stepsEl.innerHTML = `
          <div class="step">
            <h3>Solution</h3>
            <div class="result">${payload.result}</div>
          </div>
          ${payload.steps
            .map(
              (step, index) => `
                <div class="step">
                  <h3>Step ${index + 1} — ${step.title}</h3>
                  <p>${step.detail}</p>
                </div>`
            )
            .join("")}
        `;
      }

      document.getElementById("solve").addEventListener("click", () => {
        try {
          const payload = solveEquation(equationInput.value);
          renderSteps(payload);
        } catch (error) {
          stepsEl.innerHTML = `<p class="error">${error.message}</p>`;
        }
      });

      document.getElementById("export").addEventListener("click", () => {
        const text = stepsEl.innerText.trim();
        if (!text) return;
        const blob = new Blob([text], { type: "text/plain" });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "equation-steps.txt";
        link.click();
        URL.revokeObjectURL(link.href);
      });
    </script>
  </body>
</html>
