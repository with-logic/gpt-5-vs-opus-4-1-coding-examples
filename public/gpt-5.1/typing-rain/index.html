<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Typing Rain</title>
    <style>
      body {
        margin: 0;
        font-family: "Space Grotesk", system-ui;
        background: #030712;
        color: #f8fafc;
      }
      .hud {
        position: fixed;
        top: 1rem;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 1rem;
        background: rgba(0, 0, 0, 0.4);
        padding: 0.5rem 1rem;
        border-radius: 999px;
      }
      .city {
        position: relative;
        height: 100vh;
        background: url('https://images.unsplash.com/photo-1441829266145-b8242640d531?auto=format&fit=crop&w=1600&q=60') center/cover;
        overflow: hidden;
      }
      .word {
        position: absolute;
        font-size: 1.2rem;
        color: #7dd3fc;
        text-shadow: 0 0 10px rgba(125, 211, 252, 0.8);
      }
      .input-bar {
        position: fixed;
        bottom: 1rem;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 0.5rem;
        background: rgba(0, 0, 0, 0.6);
        padding: 0.5rem 1rem;
        border-radius: 999px;
      }
      input {
        border: none;
        background: transparent;
        border-bottom: 2px solid #7dd3fc;
        color: inherit;
        font-size: 1rem;
        padding: 0.3rem 0.6rem;
      }
    </style>
  </head>
  <body>
    <div class="hud">
      <span>Score: <strong id="score">0</strong></span>
      <span>Accuracy: <strong id="accuracy">100%</strong></span>
    </div>
    <div class="city" id="city"></div>
    <div class="input-bar">
      <input id="entry" placeholder="Type word & hit Enter" autocomplete="off" />
    </div>

    <script>
      const city = document.getElementById("city");
      const input = document.getElementById("entry");
      const scoreEl = document.getElementById("score");
      const accuracyEl = document.getElementById("accuracy");
      const words = ["rain", "storm", "cloud", "night", "city", "glow", "metro", "neon", "sky", "river", "light", "pulse"];
      let drops = [];
      let lastSpawn = 0;
      let spawnDelay = 1500;
      let score = 0;
      let typed = 0;
      let hits = 0;

      function spawnWord() {
        const text = words[Math.floor(Math.random() * words.length)];
        const el = document.createElement("div");
        el.className = "word";
        el.textContent = text;
        const x = Math.random() * (window.innerWidth - 80);
        el.style.left = `${x}px`;
        city.appendChild(el);
        drops.push({ el, y: -20, speed: 50 + Math.random() * 50 });
      }

      function update(timestamp) {
        if (!lastSpawn) lastSpawn = timestamp;
        if (timestamp - lastSpawn > spawnDelay) {
          spawnWord();
          lastSpawn = timestamp;
          spawnDelay = Math.max(600, spawnDelay - 15);
        }
        drops.forEach((drop) => {
          drop.y += (drop.speed * (16 / 1000));
          drop.el.style.top = `${drop.y}%`;
        });
        drops = drops.filter((drop) => {
          if (drop.y > 100) {
            drop.el.remove();
            return false;
          }
          return true;
        });
        requestAnimationFrame(update);
      }
      requestAnimationFrame(update);

      input.addEventListener("keydown", (event) => {
        if (event.key === "Enter" && input.value.trim()) {
          typed += 1;
          const typedWord = input.value.trim().toLowerCase();
          const match = drops.find((drop) => drop.el.textContent === typedWord);
          if (match) {
            hits += 1;
            score += 10;
            match.el.remove();
            drops = drops.filter((drop) => drop !== match);
          }
          accuracyEl.textContent = `${typed ? Math.round((hits / typed) * 100) : 100}%`;
          scoreEl.textContent = score;
          input.value = "";
        }
      });
      input.focus();
    </script>
  </body>
</html>
