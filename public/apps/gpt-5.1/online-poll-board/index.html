<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Online Poll Board</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --bg: #f5f7ff;
        --bg-alt: #ffffff;
        --accent: #6366f1;
        --accent-soft: rgba(99, 102, 241, 0.12);
        --accent-strong: #4f46e5;
        --accent-gradient: linear-gradient(135deg, #6366f1, #ec4899);
        --text-main: #111827;
        --text-muted: #6b7280;
        --border-subtle: rgba(148, 163, 184, 0.45);
        --chip-bg: rgba(15, 23, 42, 0.04);
        --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.16);
        --radius-lg: 18px;
        --radius-pill: 999px;
        --transition-fast: 160ms ease-out;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", sans-serif;
        color: var(--text-main);
        background:
          radial-gradient(circle at 0% 0%, #e0f2fe 0, rgba(224, 242, 254, 0) 55%),
          radial-gradient(circle at 100% 0%, #fce7f3 0, rgba(252, 231, 243, 0) 55%),
          radial-gradient(circle at 0% 100%, #d1fae5 0, rgba(209, 250, 229, 0) 55%),
          var(--bg);
        display: flex;
        align-items: stretch;
        justify-content: center;
        padding: 28px 16px 32px;
      }

      .app-shell {
        width: 100%;
        max-width: 1120px;
        background: radial-gradient(circle at top right, rgba(129, 140, 248, 0.09), transparent 55%),
          rgba(255, 255, 255, 0.9);
        border-radius: 26px;
        box-shadow: 0 28px 70px rgba(15, 23, 42, 0.16);
        border: 1px solid rgba(148, 163, 184, 0.35);
        backdrop-filter: blur(22px);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      header {
        padding: 22px 26px 14px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        border-bottom: 1px solid rgba(148, 163, 184, 0.35);
        background: linear-gradient(
          135deg,
          rgba(250, 250, 255, 0.96),
          rgba(239, 246, 255, 0.96)
        );
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 14px;
      }

      .brand-logo {
        position: relative;
        width: 40px;
        height: 40px;
        border-radius: 16px;
        background: conic-gradient(
          from 200deg,
          #6366f1,
          #8b5cf6,
          #ec4899,
          #22c55e,
          #6366f1
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        box-shadow: 0 14px 35px rgba(99, 102, 241, 0.55);
        overflow: hidden;
      }

      .brand-logo::before {
        content: "";
        position: absolute;
        inset: 3px;
        border-radius: 13px;
        background: radial-gradient(circle at 20% 0%, rgba(255, 255, 255, 0.7), transparent 52%),
          rgba(15, 23, 42, 0.98);
      }

      .brand-logo-icon {
        position: relative;
        width: 18px;
        height: 18px;
        border-radius: 6px;
        border: 2px solid rgba(248, 250, 252, 0.5);
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 2px;
        padding: 2px;
      }

      .brand-logo-icon span {
        border-radius: 3px;
        background: rgba(248, 250, 252, 0.9);
      }

      .brand-text-title {
        font-weight: 680;
        letter-spacing: -0.03em;
        font-size: 1.1rem;
      }

      .brand-text-subtitle {
        font-size: 0.78rem;
        color: var(--text-muted);
      }

      .header-right {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }

      .pill {
        padding: 5px 10px;
        border-radius: 999px;
        font-size: 0.72rem;
        border: 1px solid rgba(148, 163, 184, 0.7);
        color: var(--text-muted);
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: rgba(255, 255, 255, 0.9);
      }

      .pill-dot {
        width: 7px;
        height: 7px;
        border-radius: 999px;
        background: #22c55e;
        box-shadow: 0 0 0 6px rgba(34, 197, 94, 0.18);
      }

      .view-toggle {
        display: inline-flex;
        align-items: center;
        border-radius: 999px;
        padding: 2px;
        background: rgba(15, 23, 42, 0.04);
        border: 1px solid rgba(148, 163, 184, 0.7);
      }

      .view-toggle button {
        border: none;
        background: transparent;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 0.75rem;
        color: var(--text-muted);
        cursor: pointer;
        transition: background var(--transition-fast), color var(--transition-fast),
          transform 80ms ease-out;
      }

      .view-toggle button.active {
        background: white;
        color: var(--accent-strong);
        box-shadow: 0 8px 18px rgba(148, 163, 184, 0.55);
      }

      .view-toggle button:active {
        transform: translateY(1px) scale(0.99);
      }

      main {
        display: grid;
        grid-template-columns: minmax(0, 3fr) minmax(0, 2.2fr);
        gap: 18px;
        padding: 16px 18px 18px;
      }

      @media (max-width: 880px) {
        main {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      @media (max-width: 640px) {
        header {
          flex-direction: column;
          align-items: flex-start;
          gap: 10px;
        }
        .header-right {
          width: 100%;
          justify-content: space-between;
        }
        body {
          padding: 16px 10px 20px;
        }
      }

      .hero {
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
        gap: 12px;
        align-items: flex-start;
      }

      .hero-text {
        max-width: 460px;
      }

      .hero-title {
        font-size: clamp(1.55rem, 2vw + 1rem, 2rem);
        letter-spacing: -0.04em;
        margin: 0 0 4px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .hero-gradient-word {
        background-image: var(--accent-gradient);
        -webkit-background-clip: text;
        color: transparent;
      }

      .hero-subtitle {
        margin: 0;
        font-size: 0.86rem;
        color: var(--text-muted);
      }

      .hero-meta {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 10px;
        font-size: 0.78rem;
        color: var(--text-muted);
        flex-wrap: wrap;
      }

      .separator-dot {
        width: 3px;
        height: 3px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.9);
      }

      .hero-chip {
        padding: 4px 9px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.03);
        border: 1px solid rgba(148, 163, 184, 0.55);
      }

      .hero-insight {
        padding: 10px 14px;
        border-radius: 16px;
        background: radial-gradient(circle at 10% 0%, rgba(59, 130, 246, 0.1), transparent 65%),
          rgba(15, 23, 42, 0.96);
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.5);
        color: rgba(249, 250, 251, 0.97);
        min-width: 210px;
        max-width: 260px;
        position: relative;
        overflow: hidden;
      }

      .hero-insight::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 80% 0%, rgba(253, 224, 71, 0.2), transparent 60%);
        opacity: 0.85;
        pointer-events: none;
      }

      .hero-insight-inner {
        position: relative;
        z-index: 1;
      }

      .hero-insight-label {
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.13em;
        color: rgba(191, 219, 254, 0.9);
        margin-bottom: 4px;
      }

      .hero-insight-main {
        font-size: 0.92rem;
        font-weight: 600;
        margin-bottom: 2px;
      }

      .hero-insight-sub {
        font-size: 0.78rem;
        color: rgba(209, 213, 219, 0.96);
      }

      .hero-insight-pips {
        display: flex;
        gap: 4px;
        margin-top: 8px;
      }

      .pip {
        flex: 1;
        height: 4px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.3);
        overflow: hidden;
      }

      .pip-fill {
        height: 100%;
        border-radius: inherit;
        background: linear-gradient(90deg, #22c55e, #a3e635);
        transform-origin: left;
        transform: scaleX(0.7);
      }

      .pip:nth-child(2) .pip-fill {
        background: linear-gradient(90deg, #f97316, #fb7185);
        transform: scaleX(0.45);
      }

      .pip:nth-child(3) .pip-fill {
        background: linear-gradient(90deg, #3b82f6, #22d3ee);
        transform: scaleX(0.9);
      }

      .layout-main {
        background: radial-gradient(circle at 10% 0%, rgba(59, 130, 246, 0.08), transparent 60%),
          rgba(255, 255, 255, 0.96);
        border-radius: 20px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        box-shadow: var(--shadow-soft);
        padding: 12px 14px 14px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .toolbar {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .search-group {
        position: relative;
        flex: 1 1 180px;
        max-width: 260px;
      }

      .search-input {
        width: 100%;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        padding: 7px 26px 7px 26px;
        font-size: 0.78rem;
        background: rgba(248, 250, 252, 0.92);
        color: var(--text-main);
        outline: none;
        transition: border var(--transition-fast), box-shadow var(--transition-fast),
          background var(--transition-fast), transform 80ms ease-out;
      }

      .search-input::placeholder {
        color: rgba(148, 163, 184, 0.95);
      }

      .search-input:focus {
        border-color: var(--accent-strong);
        box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.3), 0 14px 30px rgba(148, 163, 184, 0.46);
        background: #ffffff;
        transform: translateY(-0.5px);
      }

      .search-icon {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        width: 12px;
        height: 12px;
        border-radius: 999px;
        border: 1.5px solid rgba(148, 163, 184, 0.9);
        box-sizing: border-box;
      }

      .search-icon::after {
        content: "";
        position: absolute;
        width: 7px;
        height: 1.5px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.9);
        right: -4px;
        bottom: -2px;
        transform: rotate(40deg);
        transform-origin: left center;
      }

      .toolbar-right {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }

      .toolbar-select {
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        padding: 6px 22px 6px 10px;
        font-size: 0.74rem;
        background: #f9fafb;
        color: var(--text-muted);
        outline: none;
        cursor: pointer;
        appearance: none;
        position: relative;
      }

      .toolbar-select-wrapper {
        position: relative;
      }

      .toolbar-select-wrapper::after {
        content: "▾";
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-55%);
        font-size: 0.6rem;
        color: rgba(148, 163, 184, 0.95);
        pointer-events: none;
      }

      .toolbar-badge {
        font-size: 0.74rem;
        padding: 5px 9px;
        border-radius: 999px;
        background: rgba(34, 197, 94, 0.06);
        color: #15803d;
        border: 1px solid rgba(22, 163, 74, 0.4);
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      .toolbar-badge-dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background: #22c55e;
      }

      .toolbar-badge span {
        font-variant-numeric: tabular-nums;
      }

      .poll-list {
        margin-top: 2px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        max-height: min(510px, 66vh);
        overflow: hidden auto;
        padding-right: 4px;
        scrollbar-width: thin;
        scrollbar-color: rgba(148, 163, 184, 0.65) transparent;
      }

      .poll-list::-webkit-scrollbar {
        width: 6px;
      }

      .poll-list::-webkit-scrollbar-track {
        background: transparent;
      }

      .poll-list::-webkit-scrollbar-thumb {
        background: rgba(148, 163, 184, 0.6);
        border-radius: 999px;
      }

      .poll-card {
        position: relative;
        border-radius: 16px;
        background: radial-gradient(
              circle at 0 0,
              rgba(129, 140, 248, 0.22),
              transparent 50%
            )
            var(--accent-soft),
          var(--bg-alt);
        border: 1px solid rgba(148, 163, 184, 0.65);
        padding: 10px 12px 11px;
        display: grid;
        grid-template-columns: minmax(0, 1.5fr) minmax(0, 1fr);
        gap: 10px;
        cursor: default;
        transition: transform 140ms ease-out, box-shadow 140ms ease-out, border-color 140ms ease-out,
          background 140ms ease-out;
        overflow: hidden;
      }

      .poll-card::after {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(
          circle at 100% 0,
          rgba(236, 72, 153, 0.1),
          transparent 50%
        );
        opacity: 0;
        pointer-events: none;
        transition: opacity 160ms ease-out;
      }

      .poll-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 20px 40px rgba(148, 163, 184, 0.6);
        border-color: rgba(99, 102, 241, 0.8);
        background: radial-gradient(
              circle at 0 0,
              rgba(129, 140, 248, 0.3),
              transparent 55%
            )
            var(--accent-soft),
          var(--bg-alt);
      }

      .poll-card:hover::after {
        opacity: 1;
      }

      @media (max-width: 720px) {
        .poll-card {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      .poll-header {
        display: flex;
        justify-content: space-between;
        gap: 6px;
        align-items: flex-start;
        margin-bottom: 4px;
      }

      .poll-title {
        font-weight: 620;
        font-size: 0.95rem;
        letter-spacing: -0.02em;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .poll-badge {
        padding: 3px 7px;
        border-radius: 999px;
        font-size: 0.68rem;
        border: 1px solid rgba(99, 102, 241, 0.8);
        color: var(--accent-strong);
        background: rgba(129, 140, 248, 0.1);
      }

      .poll-meta {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.7rem;
        color: var(--text-muted);
      }

      .poll-description {
        font-size: 0.78rem;
        color: var(--text-muted);
        margin-bottom: 6px;
      }

      .poll-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
        margin-bottom: 4px;
      }

      .poll-tag {
        padding: 2px 7px;
        border-radius: 999px;
        background: var(--chip-bg);
        font-size: 0.68rem;
        color: var(--text-muted);
      }

      .poll-options {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .option-row {
        display: grid;
        grid-template-columns: auto minmax(0, 1fr) auto;
        align-items: center;
        gap: 6px;
      }

      .option-input {
        position: relative;
        width: 16px;
        height: 16px;
      }

      .option-input input {
        position: absolute;
        inset: 0;
        opacity: 0;
        cursor: pointer;
      }

      .option-visual {
        position: absolute;
        inset: 0;
        border-radius: 999px;
        border: 1.5px solid rgba(148, 163, 184, 0.9);
        background: rgba(255, 255, 255, 0.85);
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
        transition: border-color var(--transition-fast), box-shadow var(--transition-fast),
          transform 80ms ease-out, background 120ms ease-out;
      }

      .option-dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: rgba(129, 140, 248, 0.98);
        transform: scale(0);
        transition: transform 120ms ease-out;
      }

      .option-input input:checked + .option-visual {
        border-color: rgba(129, 140, 248, 0.98);
        box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.26);
        background: rgba(248, 250, 252, 0.98);
      }

      .option-input input:checked + .option-visual .option-dot {
        transform: scale(1);
      }

      .option-input input:active + .option-visual {
        transform: scale(0.96) translateY(0.5px);
      }

      .option-label {
        font-size: 0.78rem;
        color: var(--text-main);
      }

      .option-percent {
        font-size: 0.76rem;
        color: var(--text-muted);
        min-width: 42px;
        text-align: right;
        font-variant-numeric: tabular-nums;
      }

      .option-bar-wrapper {
        grid-column: 2 / 4;
        height: 5px;
        border-radius: 999px;
        background: rgba(226, 232, 240, 0.9);
        overflow: hidden;
      }

      .option-bar {
        height: 100%;
        border-radius: inherit;
        background: linear-gradient(90deg, #6366f1, #ec4899);
        transform-origin: left;
        transform: scaleX(0);
        transition: transform 300ms cubic-bezier(0.16, 1, 0.3, 1);
      }

      .option-bar.accent-secondary {
        background: linear-gradient(90deg, #22c55e, #a3e635);
      }

      .poll-footer {
        margin-top: 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        flex-wrap: wrap;
      }

      .poll-footer-left {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.72rem;
        color: var(--text-muted);
        flex-wrap: wrap;
      }

      .poll-vote-count {
        font-variant-numeric: tabular-nums;
        display: inline-flex;
        align-items: baseline;
        gap: 2px;
      }

      .poll-vote-count span {
        min-width: 24px;
        text-align: right;
      }

      .poll-badge-soft {
        padding: 3px 7px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.03);
        border: 1px solid rgba(148, 163, 184, 0.5);
      }

      .poll-footer-actions {
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .btn {
        border: none;
        border-radius: 999px;
        font-size: 0.78rem;
        padding: 6px 10px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: transform 80ms ease-out, box-shadow 160ms ease-out, background 140ms ease-out,
          opacity 140ms ease-out;
        white-space: nowrap;
      }

      .btn-primary {
        background-image: var(--accent-gradient);
        color: #f9fafb;
        box-shadow: 0 14px 28px rgba(99, 102, 241, 0.75);
      }

      .btn-primary[disabled] {
        opacity: 0.7;
        cursor: default;
        box-shadow: none;
      }

      .btn-secondary {
        background: rgba(15, 23, 42, 0.04);
        color: var(--text-muted);
        border: 1px solid rgba(148, 163, 184, 0.7);
      }

      .btn:active:not(:disabled) {
        transform: translateY(1px) scale(0.99);
        box-shadow: 0 10px 18px rgba(15, 23, 42, 0.35);
      }

      .btn-primary-glow {
        position: relative;
        overflow: hidden;
      }

      .btn-primary-glow::after {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 10% 0, rgba(255, 255, 255, 0.5), transparent 60%);
        opacity: 0.85;
        mix-blend-mode: screen;
        pointer-events: none;
      }

      .btn-icon {
        width: 14px;
        height: 14px;
        border-radius: 4px;
        border: 1px solid rgba(248, 250, 252, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
      }

      .btn-label-ghost {
        background: rgba(255, 255, 255, 0.15);
        border-radius: 999px;
        padding: 1px 6px;
        font-size: 0.65rem;
        border: 1px solid rgba(248, 250, 252, 0.6);
      }

      .layout-side {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .summary-card {
        background: radial-gradient(circle at 100% 0, rgba(96, 165, 250, 0.25), transparent 60%),
          rgba(15, 23, 42, 0.98);
        border-radius: 20px;
        padding: 12px 14px 14px;
        color: #e5e7eb;
        box-shadow: 0 20px 48px rgba(15, 23, 42, 0.8);
        border: 1px solid rgba(148, 163, 184, 0.7);
        position: relative;
        overflow: hidden;
      }

      .summary-card::before {
        content: "";
        position: absolute;
        inset: -40%;
        background:
          radial-gradient(circle at 0 0, rgba(129, 140, 248, 0.2), transparent 55%),
          radial-gradient(circle at 100% 0, rgba(236, 72, 153, 0.18), transparent 60%),
          radial-gradient(circle at 0 100%, rgba(52, 211, 153, 0.2), transparent 60%);
        opacity: 0.9;
      }

      .summary-inner {
        position: relative;
        z-index: 1;
      }

      .summary-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 6px;
      }

      .summary-title {
        font-size: 0.9rem;
        font-weight: 600;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        color: rgba(191, 219, 254, 0.96);
      }

      .summary-subtitle {
        font-size: 0.8rem;
        color: rgba(229, 231, 235, 0.9);
      }

      .summary-badge {
        padding: 4px 8px;
        border-radius: 999px;
        font-size: 0.7rem;
        background: rgba(15, 23, 42, 0.75);
        border: 1px solid rgba(148, 163, 184, 0.9);
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .summary-badge-dot {
        width: 7px;
        height: 7px;
        border-radius: 999px;
        background: #22c55e;
        box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.4);
      }

      .summary-stats {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 8px;
        margin-top: 8px;
      }

      .summary-stat {
        padding: 7px 8px;
        border-radius: 12px;
        background: rgba(15, 23, 42, 0.78);
        border: 1px solid rgba(31, 41, 55, 0.95);
      }

      .summary-stat-label {
        font-size: 0.68rem;
        color: rgba(156, 163, 175, 0.95);
        margin-bottom: 1px;
      }

      .summary-stat-value {
        font-size: 0.98rem;
        font-weight: 600;
        font-variant-numeric: tabular-nums;
      }

      .summary-stat-pill {
        font-size: 0.65rem;
        margin-top: 2px;
        color: rgba(191, 219, 254, 0.98);
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }

      .summary-trend {
        font-size: 0.7rem;
        margin-top: 8px;
        color: rgba(209, 213, 219, 0.95);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .summary-trend-pill {
        padding: 2px 6px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.85);
        border: 1px solid rgba(55, 65, 81, 0.9);
        font-size: 0.68rem;
      }

      .summary-bar {
        margin-top: 10px;
        height: 7px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.8);
        overflow: hidden;
        display: flex;
      }

      .summary-bar-segment {
        height: 100%;
        transition: width 320ms cubic-bezier(0.16, 1, 0.3, 1);
      }

      .summary-bar-segment:nth-child(1) {
        background: linear-gradient(90deg, #22c55e, #a3e635);
      }

      .summary-bar-segment:nth-child(2) {
        background: linear-gradient(90deg, #6366f1, #22d3ee);
      }

      .summary-bar-segment:nth-child(3) {
        background: linear-gradient(90deg, #f97316, #ec4899);
      }

      .summary-footer {
        margin-top: 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        font-size: 0.7rem;
        color: rgba(209, 213, 219, 0.95);
      }

      .summary-footer a {
        color: rgba(191, 219, 254, 0.98);
        text-decoration: none;
        border-bottom: 1px dotted rgba(191, 219, 254, 0.7);
      }

      .summary-footer a:hover {
        border-bottom-style: solid;
      }

      .top-polls {
        background: rgba(255, 255, 255, 0.96);
        border-radius: 18px;
        border: 1px solid rgba(148, 163, 184, 0.6);
        box-shadow: 0 16px 34px rgba(148, 163, 184, 0.4);
        padding: 10px 12px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .top-polls-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 6px;
      }

      .top-polls-title {
        font-size: 0.78rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: var(--text-muted);
      }

      .top-polls-badge {
        padding: 3px 7px;
        border-radius: 999px;
        background: rgba(248, 250, 252, 0.9);
        border: 1px dashed rgba(148, 163, 184, 0.9);
        font-size: 0.7rem;
        color: var(--text-muted);
      }

      .top-polls-list {
        display: flex;
        flex-direction: column;
        gap: 4px;
        margin-top: 4px;
      }

      .top-poll-row {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.76rem;
      }

      .top-poll-rank {
        width: 18px;
        height: 18px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
        color: var(--text-muted);
        background: rgba(248, 250, 252, 0.9);
      }

      .top-poll-label {
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .top-poll-value {
        font-variant-numeric: tabular-nums;
        color: var(--text-muted);
      }

      .empty-state {
        text-align: center;
        font-size: 0.82rem;
        color: var(--text-muted);
        padding: 20px 0 10px;
      }

      .empty-chip {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 5px 10px;
        border-radius: 999px;
        border: 1px dashed rgba(148, 163, 184, 0.9);
        margin-top: 6px;
        font-size: 0.74rem;
      }

      .confetti-canvas {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 40;
      }

      @keyframes votePop {
        0% {
          transform: translateY(0) scale(1);
        }
        30% {
          transform: translateY(-2px) scale(1.06);
        }
        60% {
          transform: translateY(1px) scale(0.97);
        }
        100% {
          transform: translateY(0) scale(1);
        }
      }

      .vote-pop {
        animation: votePop 320ms cubic-bezier(0.16, 1, 0.3, 1);
      }

      @keyframes shimmerSweep {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(120%);
        }
      }

      .shimmer {
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          transparent 0%,
          rgba(255, 255, 255, 0.9) 25%,
          transparent 50%
        );
        opacity: 0;
        pointer-events: none;
      }

      .shimmer-active {
        opacity: 0.7;
        animation: shimmerSweep 640ms ease-out;
      }
    </style>
  </head>
  <body>
    <canvas class="confetti-canvas"></canvas>
    <div class="app-shell" aria-label="Online Poll Board">
      <header>
        <div class="brand">
          <div class="brand-logo" aria-hidden="true">
            <div class="brand-logo-icon">
              <span></span><span></span><span></span><span></span>
            </div>
          </div>
          <div>
            <div class="brand-text-title">Online Poll Board</div>
            <div class="brand-text-subtitle">Vote on ideas in real time</div>
          </div>
        </div>
        <div class="header-right">
          <span class="pill">
            <span class="pill-dot"></span>
            Live mock votes
          </span>
          <div class="view-toggle" aria-label="View density toggle">
            <button type="button" class="active" data-view-mode="cozy">Cozy</button>
            <button type="button" data-view-mode="compact">Compact</button>
          </div>
        </div>
      </header>
      <main>
        <section aria-label="Available polls">
          <div class="layout-main">
            <div class="hero">
              <div class="hero-text">
                <h1 class="hero-title">
                  Shape the
                  <span class="hero-gradient-word">next big thing.</span>
                </h1>
                <p class="hero-subtitle">
                  Cast instant votes on upcoming features, team rituals, and fun what‑ifs.
                  Numbers update live with delightful micro‑animations.
                </p>
                <div class="hero-meta">
                  <span class="hero-chip">Instant feedback</span>
                  <span class="separator-dot"></span>
                  <span>Mock data only &mdash; safe to explore</span>
                </div>
              </div>
              <aside class="hero-insight" aria-hidden="true">
                <div class="hero-insight-inner">
                  <div class="hero-insight-label">Today’s pulse</div>
                  <div class="hero-insight-main">
                    Async work weeks are trending up
                  </div>
                  <div class="hero-insight-sub">
                    Most voters favor flexibility with a sprinkle of structure.
                  </div>
                  <div class="hero-insight-pips">
                    <div class="pip"><div class="pip-fill"></div></div>
                    <div class="pip"><div class="pip-fill"></div></div>
                    <div class="pip"><div class="pip-fill"></div></div>
                  </div>
                </div>
              </aside>
            </div>
            <div class="toolbar">
              <div class="search-group">
                <span class="search-icon" aria-hidden="true"></span>
                <input
                  id="searchInput"
                  class="search-input"
                  type="search"
                  placeholder="Search polls (e.g. remote, launch, fun)"
                  aria-label="Search polls"
                />
              </div>
              <div class="toolbar-right">
                <div class="toolbar-select-wrapper">
                  <select id="sortSelect" class="toolbar-select" aria-label="Sort polls by">
                    <option value="hot">Sort by: Hottest</option>
                    <option value="latest">Sort by: Newest</option>
                    <option value="votes">Sort by: Most votes</option>
                    <option value="alpha">Sort by: A–Z</option>
                  </select>
                </div>
                <span class="toolbar-badge">
                  <span class="toolbar-badge-dot"></span>
                  <span id="totalVotesBadge">0</span> total votes
                </span>
              </div>
            </div>
            <div id="pollList" class="poll-list" aria-live="polite"></div>
            <div id="emptyState" class="empty-state" hidden>
              No polls match your filters.
              <div class="empty-chip">
                Try “remote”, “product launch”, or “team fun”.
              </div>
            </div>
          </div>
        </section>
        <aside class="layout-side" aria-label="Results summary">
          <div class="summary-card">
            <div class="summary-inner">
              <div class="summary-header">
                <div>
                  <div class="summary-title">Live snapshot</div>
                  <div class="summary-subtitle">
                    See how your board is trending as votes roll in.
                  </div>
                </div>
                <div class="summary-badge">
                  <span class="summary-badge-dot"></span>
                  <span>Real‑time mock data</span>
                </div>
              </div>
              <div class="summary-stats">
                <div class="summary-stat">
                  <div class="summary-stat-label">Total votes</div>
                  <div id="statTotalVotes" class="summary-stat-value">0</div>
                  <div class="summary-stat-pill">+<span id="statLastBurst">0</span> today</div>
                </div>
                <div class="summary-stat">
                  <div class="summary-stat-label">Active polls</div>
                  <div id="statPollCount" class="summary-stat-value">0</div>
                  <div class="summary-stat-pill">Visible after filters</div>
                </div>
                <div class="summary-stat">
                  <div class="summary-stat-label">Avg. votes / poll</div>
                  <div id="statAvgVotes" class="summary-stat-value">0.0</div>
                  <div class="summary-stat-pill">
                    <span>Balanced board</span>
                  </div>
                </div>
              </div>
              <div class="summary-trend">
                <span>Top themes right now:</span>
                <span class="summary-trend-pill" id="trendThemeOne">Remote work</span>
                <span class="summary-trend-pill" id="trendThemeTwo">Product bets</span>
              </div>
              <div class="summary-bar">
                <div id="summarySegment1" class="summary-bar-segment" style="width: 40%"></div>
                <div id="summarySegment2" class="summary-bar-segment" style="width: 35%"></div>
                <div id="summarySegment3" class="summary-bar-segment" style="width: 25%"></div>
              </div>
              <div class="summary-footer">
                <span>
                  Tip: hover any card to see it highlighted as it climbs the leaderboard.
                </span>
                <span>
                  <a href="#pollList">Jump to polls</a>
                </span>
              </div>
            </div>
          </div>
          <div class="top-polls">
            <div class="top-polls-header">
              <span class="top-polls-title">Top polls</span>
              <span class="top-polls-badge">Updated live as you vote</span>
            </div>
            <div id="topPollsList" class="top-polls-list"></div>
          </div>
        </aside>
      </main>
    </div>

    <script>
      (function () {
        "use strict";

        const POLLS = [
          {
            id: "remote-rituals",
            title: "Ideal remote collaboration rhythm for your team?",
            description:
              "Balance deep work with rituals that keep everyone aligned and energized.",
            tags: ["Remote work", "Team rituals", "Culture"],
            createdAt: Date.now() - 1000 * 60 * 60 * 20,
            options: [
              "Core hours + async standups",
              "Three collaboration days, two focus days",
              "Fully async, written updates only",
              "Co-working sprints once a month",
            ],
          },
          {
            id: "pmf-bets",
            title: "Where would you place your next big product bet?",
            description:
              "Imagine you have one quarter to double down on a single strategic area.",
            tags: ["Product", "Strategy", "Roadmap"],
            createdAt: Date.now() - 1000 * 60 * 60 * 48,
            options: [
              "AI‑assisted workflows for power users",
              "Onboarding & activation improvements",
              "Team collaboration & sharing tools",
              "Analytics & insights dashboard",
            ],
          },
          {
            id: "meeting-makeover",
            title: "Which meeting would you happily redesign first?",
            description:
              "A tiny tweak to a recurring meeting can unlock a huge amount of time.",
            tags: ["Meetings", "Efficiency", "Ops"],
            createdAt: Date.now() - 1000 * 60 * 60 * 5,
            options: [
              "Weekly status update",
              "Sprint planning & grooming",
              "Project kickoff sessions",
              "All‑hands / town hall",
            ],
          },
          {
            id: "learning-budget",
            title: "How would you invest a personal learning budget?",
            description:
              "You get an annual learning stipend — how would you most likely use it?",
            tags: ["Growth", "Skills", "People"],
            createdAt: Date.now() - 1000 * 60 * 60 * 10,
            options: [
              "Deep‑dive courses in my craft",
              "Conferences & community events",
              "1:1 coaching or mentorship",
              "Experimenting with side projects",
            ],
          },
          {
            id: "release-cadence",
            title: "Preferred release cadence for shipping features?",
            description:
              "Find the balance between safety, iteration speed, and clear communication.",
            tags: ["Engineering", "Delivery", "Process"],
            createdAt: Date.now() - 1000 * 60 * 60 * 72,
            options: [
              "Continuous delivery (ship when ready)",
              "Weekly release train",
              "Twice per month",
              "Predictable monthly releases",
            ],
          },
          {
            id: "fun-offsite",
            title: "Dream format for your next team offsite?",
            description:
              "Every great team story deserves a memorable chapter IRL every now and then.",
            tags: ["Culture", "Fun", "Offsites"],
            createdAt: Date.now() - 1000 * 60 * 60 * 30,
            options: [
              "City adventure with workshops",
              "Nature retreat with outdoor activities",
              "Hackathon‑style build week",
              "Cozy local meetup with great food",
            ],
          },
        ];

        const initialVotes = {
          "remote-rituals": [48, 62, 21, 33],
          "pmf-bets": [57, 39, 44, 29],
          "meeting-makeover": [36, 22, 18, 30],
          "learning-budget": [25, 30, 18, 24],
          "release-cadence": [31, 42, 26, 19],
          "fun-offsite": [20, 24, 16, 28],
        };

        const pollState = POLLS.map((poll) => ({
          ...poll,
          votes: initialVotes[poll.id].slice(),
          lastVotedOption: null,
          hasVoted: false,
        }));

        let lastBurst = 0;
        const dom = {};

        function cacheDom() {
          dom.confettiCanvas = document.querySelector(".confetti-canvas");
          dom.pollList = document.getElementById("pollList");
          dom.emptyState = document.getElementById("emptyState");
          dom.searchInput = document.getElementById("searchInput");
          dom.sortSelect = document.getElementById("sortSelect");
          dom.totalVotesBadge = document.getElementById("totalVotesBadge");
          dom.statTotalVotes = document.getElementById("statTotalVotes");
          dom.statPollCount = document.getElementById("statPollCount");
          dom.statAvgVotes = document.getElementById("statAvgVotes");
          dom.statLastBurst = document.getElementById("statLastBurst");
          dom.trendThemeOne = document.getElementById("trendThemeOne");
          dom.trendThemeTwo = document.getElementById("trendThemeTwo");
          dom.summarySegment1 = document.getElementById("summarySegment1");
          dom.summarySegment2 = document.getElementById("summarySegment2");
          dom.summarySegment3 = document.getElementById("summarySegment3");
          dom.topPollsList = document.getElementById("topPollsList");
          dom.viewToggleButtons = Array.from(
            document.querySelectorAll(".view-toggle button")
          );
        }

        function createPollCard(poll) {
          const totalVotes = poll.votes.reduce((sum, v) => sum + v, 0);
          const container = document.createElement("article");
          container.className = "poll-card";
          container.dataset.id = poll.id;

          const cardShimmer = document.createElement("div");
          cardShimmer.className = "shimmer";
          container.appendChild(cardShimmer);

          const left = document.createElement("div");
          const right = document.createElement("div");

          const titleRow = document.createElement("div");
          titleRow.className = "poll-header";

          const title = document.createElement("div");
          title.className = "poll-title";
          title.textContent = poll.title;

          const hotBadge = document.createElement("span");
          hotBadge.className = "poll-badge";
          hotBadge.textContent = "Open";

          titleRow.appendChild(title);
          titleRow.appendChild(hotBadge);

          const description = document.createElement("div");
          description.className = "poll-description";
          description.textContent = poll.description;

          const tags = document.createElement("div");
          tags.className = "poll-tags";
          poll.tags.forEach((tag) => {
            const chip = document.createElement("span");
            chip.className = "poll-tag";
            chip.textContent = tag;
            tags.appendChild(chip);
          });

          left.appendChild(titleRow);
          left.appendChild(description);
          left.appendChild(tags);

          const optionsWrap = document.createElement("div");
          optionsWrap.className = "poll-options";

          const radioName = "poll-option-" + poll.id;

          poll.options.forEach((labelText, index) => {
            const row = document.createElement("div");
            row.className = "option-row";
            row.dataset.index = String(index);

            const inputWrapper = document.createElement("label");
            inputWrapper.className = "option-input";

            const input = document.createElement("input");
            input.type = "radio";
            input.name = radioName;
            input.value = String(index);
            input.setAttribute("aria-label", labelText);

            const visual = document.createElement("div");
            visual.className = "option-visual";
            const dot = document.createElement("div");
            dot.className = "option-dot";
            visual.appendChild(dot);

            inputWrapper.appendChild(input);
            inputWrapper.appendChild(visual);

            const label = document.createElement("div");
            label.className = "option-label";
            label.textContent = labelText;

            const percent = document.createElement("div");
            percent.className = "option-percent";
            percent.textContent =
              totalVotes === 0
                ? "0%"
                : Math.round((poll.votes[index] / totalVotes) * 100) + "%";

            const barWrapper = document.createElement("div");
            barWrapper.className = "option-bar-wrapper";
            const bar = document.createElement("div");
            bar.className = "option-bar";
            if (index === 0) bar.classList.add("accent-secondary");
            const fraction = totalVotes === 0 ? 0 : poll.votes[index] / totalVotes;
            bar.style.transform = "scaleX(" + fraction.toFixed(3) + ")";
            barWrapper.appendChild(bar);

            row.appendChild(inputWrapper);
            row.appendChild(label);
            row.appendChild(percent);
            row.appendChild(barWrapper);

            optionsWrap.appendChild(row);
          });

          right.appendChild(optionsWrap);

          const footer = document.createElement("div");
          footer.className = "poll-footer";

          const footerLeft = document.createElement("div");
          footerLeft.className = "poll-footer-left";

          const voteCount = document.createElement("span");
          voteCount.className = "poll-vote-count";
          const voteNumber = document.createElement("span");
          voteNumber.textContent = String(totalVotes);
          voteNumber.dataset.raw = String(totalVotes);
          const label = document.createElement("span");
          label.textContent = totalVotes === 1 ? "vote" : "votes";
          footerLeft.appendChild(voteCount);
          voteCount.appendChild(voteNumber);
          voteCount.appendChild(label);

          const metaLabel = document.createElement("span");
          metaLabel.className = "poll-badge-soft";
          metaLabel.textContent = "Multi‑choice insights";
          footerLeft.appendChild(metaLabel);

          const footerActions = document.createElement("div");
          footerActions.className = "poll-footer-actions";

          const resetBtn = document.createElement("button");
          resetBtn.type = "button";
          resetBtn.className = "btn btn-secondary";
          resetBtn.textContent = "Reset";

          const voteBtn = document.createElement("button");
          voteBtn.type = "button";
          voteBtn.className = "btn btn-primary btn-primary-glow";
          voteBtn.disabled = true;
          voteBtn.innerHTML =
            '<span class="btn-icon">★</span> Vote <span class="btn-label-ghost">mock</span>';

          footerActions.appendChild(resetBtn);
          footerActions.appendChild(voteBtn);

          footer.appendChild(footerLeft);
          footer.appendChild(footerActions);

          right.appendChild(footer);

          container.appendChild(left);
          container.appendChild(right);

          container.__view = {
            voteNumber,
            voteLabel: label,
            optionsRows: Array.from(optionsWrap.querySelectorAll(".option-row")),
            voteButton: voteBtn,
            resetButton: resetBtn,
            shimmer: cardShimmer,
          };

          return container;
        }

        function renderPolls() {
          const list = dom.pollList;
          list.innerHTML = "";

          const query = (dom.searchInput.value || "").trim().toLowerCase();
          const sort = dom.sortSelect.value;

          let filtered = pollState.slice();
          if (query) {
            filtered = filtered.filter((p) => {
              return (
                p.title.toLowerCase().includes(query) ||
                p.description.toLowerCase().includes(query) ||
                p.tags.some((tag) => tag.toLowerCase().includes(query))
              );
            });
          }

          filtered.sort((a, b) => {
            const votesA = a.votes.reduce((sum, v) => sum + v, 0);
            const votesB = b.votes.reduce((sum, v) => sum + v, 0);
            switch (sort) {
              case "latest":
                return b.createdAt - a.createdAt;
              case "votes":
                return votesB - votesA;
              case "alpha":
                return a.title.localeCompare(b.title);
              case "hot":
              default: {
                const hotA = votesA + (a.hasVoted ? 6 : 0);
                const hotB = votesB + (b.hasVoted ? 6 : 0);
                return hotB - hotA;
              }
            }
          });

          if (filtered.length === 0) {
            dom.pollList.hidden = true;
            dom.emptyState.hidden = false;
            dom.statPollCount.textContent = "0";
            updateTopPolls();
            return;
          }

          dom.pollList.hidden = false;
          dom.emptyState.hidden = true;

          filtered.forEach((poll) => {
            const card = createPollCard(poll);
            attachPollHandlers(card, poll);
            list.appendChild(card);
          });

          dom.statPollCount.textContent = String(filtered.length);
          updateSummaryStats();
          updateTopPolls(filtered);
        }

        function attachPollHandlers(card, poll) {
          const view = card.__view;
          if (!view) return;

          const { optionsRows, voteButton, resetButton, shimmer } = view;

          let selectedIndex = null;

          optionsRows.forEach((row, index) => {
            const input = row.querySelector("input[type=radio]");
            input.addEventListener("change", function () {
              selectedIndex = index;
              voteButton.disabled = false;
            });
          });

          voteButton.addEventListener("click", function () {
            if (selectedIndex == null) return;

            shimmer.classList.remove("shimmer-active");
            void shimmer.offsetWidth;
            shimmer.classList.add("shimmer-active");

            const burst = Math.random() < 0.4 ? 2 : 1;
            voteOnPoll(poll.id, selectedIndex, burst);
            animateVoteCard(card, poll, selectedIndex, burst);

            lastBurst = burst;
            updateSummaryStats();
            updateTopPolls();

            selectedIndex = null;
            voteButton.disabled = true;
          });

          resetButton.addEventListener("click", function () {
            resetPollVotes(poll.id);
            updateCardView(card, poll);
            updateSummaryStats();
            updateTopPolls();
          });

          card.addEventListener("mouseenter", () => {
            card.style.zIndex = "3";
          });
          card.addEventListener("mouseleave", () => {
            card.style.zIndex = "";
          });
        }

        function voteOnPoll(id, optionIndex, amount) {
          const poll = pollState.find((p) => p.id === id);
          if (!poll) return;
          poll.votes[optionIndex] += amount;
          poll.lastVotedOption = optionIndex;
          poll.hasVoted = true;
          fireConfetti();
        }

        function resetPollVotes(id) {
          const poll = pollState.find((p) => p.id === id);
          if (!poll) return;
          const original = initialVotes[id];
          if (!original) return;
          poll.votes = original.slice();
          poll.lastVotedOption = null;
          poll.hasVoted = false;
        }

        function animateVoteCard(card, poll, votedIndex, amount) {
          const view = card.__view;
          if (!view) return;
          const totalVotes = poll.votes.reduce((sum, v) => sum + v, 0);
          const previousTotal = totalVotes - amount;

          const targetEl = view.voteNumber;
          const start = previousTotal;
          const end = totalVotes;
          targetEl.dataset.raw = String(end);

          const duration = 380;
          const startTime = performance.now();

          function step(now) {
            const t = Math.min(1, (now - startTime) / duration);
            const eased = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
            const current = Math.round(start + (end - start) * eased);
            targetEl.textContent = String(current);
            if (t < 1) {
              requestAnimationFrame(step);
            } else {
              view.voteLabel.textContent = end === 1 ? "vote" : "votes";
            }
          }

          requestAnimationFrame(step);

          view.optionsRows.forEach((row, index) => {
            const percentEl = row.querySelector(".option-percent");
            const barEl = row.querySelector(".option-bar");
            const votesForOption = poll.votes[index];
            const percent =
              totalVotes === 0 ? 0 : Math.round((votesForOption / totalVotes) * 100);
            percentEl.textContent = percent + "%";
            const fraction = totalVotes === 0 ? 0 : votesForOption / totalVotes;
            barEl.style.transform = "scaleX(" + fraction.toFixed(3) + ")";

            if (index === votedIndex) {
              row.classList.remove("vote-pop");
              void row.offsetWidth;
              row.classList.add("vote-pop");
            }
          });
        }

        function updateCardView(card, poll) {
          const view = card.__view;
          if (!view) return;
          const totalVotes = poll.votes.reduce((sum, v) => sum + v, 0);
          view.voteNumber.textContent = String(totalVotes);
          view.voteNumber.dataset.raw = String(totalVotes);
          view.voteLabel.textContent = totalVotes === 1 ? "vote" : "votes";

          view.optionsRows.forEach((row, index) => {
            const percentEl = row.querySelector(".option-percent");
            const barEl = row.querySelector(".option-bar");
            const votesForOption = poll.votes[index];
            const percent =
              totalVotes === 0 ? 0 : Math.round((votesForOption / totalVotes) * 100);
            percentEl.textContent = percent + "%";
            const fraction = totalVotes === 0 ? 0 : votesForOption / totalVotes;
            barEl.style.transform = "scaleX(" + fraction.toFixed(3) + ")";
          });
        }

        function computeTotals() {
          let totalVotes = 0;
          let visiblePolls = 0;
          const cards = Array.from(dom.pollList.children);
          cards.forEach((card) => {
            const poll = pollState.find((p) => p.id === card.dataset.id);
            if (!poll) return;
            visiblePolls += 1;
            totalVotes += poll.votes.reduce((sum, v) => sum + v, 0);
          });
          if (cards.length === 0) {
            visiblePolls = 0;
            totalVotes = pollState.reduce(
              (acc, p) => acc + p.votes.reduce((s, v) => s + v, 0),
              0
            );
          }
          return { totalVotes, visiblePolls };
        }

        function updateSummaryStats() {
          const { totalVotes, visiblePolls } = computeTotals();
          dom.totalVotesBadge.textContent = String(totalVotes);

          animateNumber(dom.statTotalVotes, totalVotes);
          animateNumber(dom.statLastBurst, lastBurst);

          const avg = visiblePolls === 0 ? 0 : totalVotes / visiblePolls;
          animateNumber(dom.statAvgVotes, avg, { decimals: 1 });

          const themes = [
            { label: "Remote work", keywords: ["remote", "async", "rituals"] },
            { label: "Product bets", keywords: ["product", "bet", "roadmap"] },
            { label: "Culture & fun", keywords: ["fun", "offsite", "culture"] },
            { label: "Delivery flow", keywords: ["release", "cadence", "delivery"] },
          ];

          const loweredTitles = pollState.map((p) => ({
            id: p.id,
            text: (p.title + " " + p.description).toLowerCase(),
          }));

          const themeScores = themes.map((theme) => {
            let score = 0;
            theme.keywords.forEach((kw) => {
              loweredTitles.forEach((entry) => {
                if (entry.text.includes(kw)) {
                  const poll = pollState.find((p) => p.id === entry.id);
                  if (poll) {
                    score += poll.votes.reduce((sum, v) => sum + v, 0);
                  }
                }
              });
            });
            return { ...theme, score };
          });

          themeScores.sort((a, b) => b.score - a.score);
          const topOne = themeScores[0] || themes[0];
          const topTwo = themeScores[1] || themes[1];
          dom.trendThemeOne.textContent = topOne.label;
          dom.trendThemeTwo.textContent = topTwo.label;

          const scores = [themeScores[0], themeScores[1], themeScores[2]]
            .filter(Boolean)
            .map((t) => t.score);
          const totalScore = scores.reduce((a, b) => a + b, 0) || 1;

          const percentages = scores.map((s) => (s / totalScore) * 100);
          const [p1, p2, p3] = [
            percentages[0] || 40,
            percentages[1] || 35,
            percentages[2] || 25,
          ];

          dom.summarySegment1.style.width = p1.toFixed(1) + "%";
          dom.summarySegment2.style.width = p2.toFixed(1) + "%";
          dom.summarySegment3.style.width = p3.toFixed(1) + "%";
        }

        function animateNumber(el, target, options) {
          const opts = Object.assign({ duration: 320, decimals: 0 }, options);
          const currentText = el.textContent || "0";
          const current = parseFloat(currentText.replace(/[^\d.]/g, "")) || 0;
          const start = current;
          const end = target;

          const startTime = performance.now();

          function step(now) {
            const t = Math.min(1, (now - startTime) / opts.duration);
            const eased = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
            const value = start + (end - start) * eased;
            el.textContent = value.toFixed(opts.decimals);
            if (t < 1) requestAnimationFrame(step);
          }

          requestAnimationFrame(step);
        }

        function updateTopPolls(source) {
          const list = dom.topPollsList;
          list.innerHTML = "";

          const sourcePolls =
            source && source.length
              ? source
              : Array.from(dom.pollList.children).map((card) =>
                  pollState.find((p) => p.id === card.dataset.id)
                );

          const ranked = sourcePolls
            .filter(Boolean)
            .map((p) => ({
              poll: p,
              total: p.votes.reduce((sum, v) => sum + v, 0),
            }))
            .sort((a, b) => b.total - a.total)
            .slice(0, 4);

          ranked.forEach(({ poll, total }, index) => {
            const row = document.createElement("div");
            row.className = "top-poll-row";
            const rank = document.createElement("div");
            rank.className = "top-poll-rank";
            rank.textContent = String(index + 1);

            const label = document.createElement("div");
            label.className = "top-poll-label";
            label.textContent = poll.title;

            const value = document.createElement("div");
            value.className = "top-poll-value";
            value.textContent = total + " votes";

            row.appendChild(rank);
            row.appendChild(label);
            row.appendChild(value);

            list.appendChild(row);
          });
        }

        function setupViewToggle() {
          dom.viewToggleButtons.forEach((btn) => {
            btn.addEventListener("click", () => {
              const mode = btn.dataset.viewMode;
              dom.viewToggleButtons.forEach((b) => b.classList.remove("active"));
              btn.classList.add("active");

              if (mode === "compact") {
                document.body.style.setProperty("--radius-lg", "14px");
                dom.pollList.style.maxHeight = "min(560px, 72vh)";
                document.querySelectorAll(".poll-card").forEach((card) => {
                  card.style.padding = "8px 10px 9px";
                });
              } else {
                document.body.style.setProperty("--radius-lg", "18px");
                dom.pollList.style.maxHeight = "min(510px, 66vh)";
                document.querySelectorAll(".poll-card").forEach((card) => {
                  card.style.padding = "10px 12px 11px";
                });
              }
            });
          });
        }

        function setupFilters() {
          dom.searchInput.addEventListener("input", debounce(renderPolls, 160));
          dom.sortSelect.addEventListener("change", renderPolls);
        }

        function debounce(fn, delay) {
          let t;
          return function (...args) {
            clearTimeout(t);
            t = setTimeout(() => fn.apply(this, args), delay);
          };
        }

        function setupKeyboardShortcuts() {
          document.addEventListener("keydown", (event) => {
            if (event.key.toLowerCase() === "k" && (event.metaKey || event.ctrlKey)) {
              event.preventDefault();
              dom.searchInput.focus();
              dom.searchInput.select();
            }
          });
        }

        function fireConfetti() {
          const canvas = dom.confettiCanvas;
          if (!canvas) return;
          const ctx = canvas.getContext("2d");
          if (!ctx) return;

          resizeCanvasToDisplaySize(canvas);

          const colors = [
            "#6366f1",
            "#22c55e",
            "#f97316",
            "#ec4899",
            "#06b6d4",
          ];
          const pieces = [];
          const count = 40;

          for (let i = 0; i < count; i++) {
            pieces.push({
              x: canvas.width * 0.2 + Math.random() * canvas.width * 0.6,
              y: canvas.height * 0.25,
              r: 4 + Math.random() * 6,
              c: colors[Math.floor(Math.random() * colors.length)],
              vy: 2 + Math.random() * 2,
              vx: -1 + Math.random() * 2,
              rotation: Math.random() * Math.PI * 2,
              vr: -0.2 + Math.random() * 0.4,
              alpha: 1,
            });
          }

          const start = performance.now();
          const duration = 700;

          function frame(now) {
            const t = (now - start) / duration;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            pieces.forEach((p) => {
              p.x += p.vx;
              p.y += p.vy;
              p.rotation += p.vr;
              p.alpha = 1 - t;
              ctx.save();
              ctx.globalAlpha = Math.max(0, p.alpha);
              ctx.translate(p.x, p.y);
              ctx.rotate(p.rotation);
              ctx.fillStyle = p.c;
              ctx.fillRect(-p.r / 2, -p.r / 2, p.r, p.r * 1.6);
              ctx.restore();
            });
            if (t < 1) {
              requestAnimationFrame(frame);
            } else {
              ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
          }

          requestAnimationFrame(frame);
        }

        function resizeCanvasToDisplaySize(canvas) {
          const rect = canvas.getBoundingClientRect();
          const { width, height } = rect;
          const dpr = window.devicePixelRatio || 1;
          if (canvas.width !== width * dpr || canvas.height !== height * dpr) {
            canvas.width = width * dpr;
            canvas.height = height * dpr;
            const ctx = canvas.getContext("2d");
            if (ctx) {
              ctx.scale(dpr, dpr);
            }
          }
        }

        function init() {
          cacheDom();
          window.addEventListener("resize", () =>
            resizeCanvasToDisplaySize(dom.confettiCanvas)
          );
          resizeCanvasToDisplaySize(dom.confettiCanvas);

          setupFilters();
          setupViewToggle();
          setupKeyboardShortcuts();

          renderPolls();
          updateSummaryStats();
        }

        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", init);
        } else {
          init();
        }
      })();
    </script>
  </body>
</html>

