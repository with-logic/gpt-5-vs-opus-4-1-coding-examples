<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ocean Wave Simulation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --panel-bg: rgba(15, 23, 42, 0.9);
      --panel-bg-alt: rgba(8, 47, 73, 0.88);
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.35);
      --accent-alt: #a5b4fc;
      --text-main: #e5f3ff;
      --text-muted: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.18);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", sans-serif;
      background:
        radial-gradient(circle at 10% -20%, rgba(56, 189, 248, 0.5), transparent 55%),
        radial-gradient(circle at 80% -10%, rgba(129, 140, 248, 0.45), transparent 55%),
        radial-gradient(circle at 50% 120%, rgba(15, 23, 42, 1), #020617 70%);
      color: var(--text-main);
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
    }

    #scene-container {
      position: fixed;
      inset: 0;
      overflow: hidden;
      z-index: 0;
    }

    canvas {
      display: block;
    }

    .overlay {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 24px 28px;
      pointer-events: none;
      z-index: 10;
      animation: overlay-fade-in 1200ms ease-out forwards;
      opacity: 0;
    }

    .title-block {
      max-width: 460px;
      pointer-events: none;
    }

    .title {
      font-size: clamp(1.6rem, 2vw + 1rem, 2.4rem);
      letter-spacing: 0.14em;
      text-transform: uppercase;
      font-weight: 600;
      color: #e0f2fe;
      text-shadow: 0 10px 35px rgba(15, 23, 42, 0.9);
    }

    .title span.accent-dot {
      color: var(--accent);
    }

    .subtitle {
      margin-top: 10px;
      max-width: 360px;
      font-size: 0.95rem;
      line-height: 1.6;
      color: rgba(226, 232, 240, 0.8);
    }

    .subtitle strong {
      color: var(--accent);
      font-weight: 500;
    }

    .controls {
      align-self: flex-start;
      margin-top: auto;
      max-width: 380px;
      width: 100%;
      background:
        linear-gradient(135deg, var(--panel-bg), var(--panel-bg-alt));
      border-radius: 18px;
      padding: 16px 18px 14px;
      box-shadow:
        0 18px 40px rgba(15, 23, 42, 0.95),
        0 0 0 1px rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(18px) saturate(1.4);
      border: 1px solid var(--border-subtle);
      pointer-events: auto;
    }

    .controls-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      font-size: 0.82rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: rgba(148, 163, 184, 0.9);
    }

    .controls-header span.status-pill {
      padding: 3px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 0.7rem;
      letter-spacing: 0.14em;
      color: rgba(148, 163, 184, 0.95);
    }

    .control-row {
      margin-top: 10px;
    }

    label {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      margin-bottom: 4px;
      color: rgba(203, 213, 225, 0.85);
    }

    label span.value {
      font-variant-numeric: tabular-nums;
      letter-spacing: 0.08em;
      color: rgba(226, 232, 240, 0.9);
    }

    input[type="range"] {
      width: 100%;
      -webkit-appearance: none;
      appearance: none;
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(30, 64, 175, 0.9), rgba(15, 23, 42, 0.4));
      outline: none;
      cursor: pointer;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: linear-gradient(145deg, var(--accent), var(--accent-alt));
      border: 2px solid rgba(15, 23, 42, 0.95);
      box-shadow:
        0 0 0 4px rgba(15, 23, 42, 0.7),
        0 0 0 0 rgba(56, 189, 248, 0.2);
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.2s ease;
    }

    input[type="range"]:hover::-webkit-slider-thumb {
      transform: scale(1.05);
      box-shadow:
        0 0 0 4px rgba(15, 23, 42, 0.7),
        0 0 18px 4px rgba(56, 189, 248, 0.45);
    }

    input[type="range"]:active::-webkit-slider-thumb {
      transform: scale(0.98);
      box-shadow:
        0 0 0 4px rgba(15, 23, 42, 0.7),
        0 0 14px 4px rgba(56, 189, 248, 0.5);
    }

    input[type="range"]::-moz-range-track {
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(30, 64, 175, 0.9), rgba(15, 23, 42, 0.4));
    }

    input[type="range"]::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      border: 2px solid rgba(15, 23, 42, 0.95);
      background: linear-gradient(145deg, var(--accent), var(--accent-alt));
      box-shadow:
        0 0 0 4px rgba(15, 23, 42, 0.7),
        0 0 0 0 rgba(56, 189, 248, 0.2);
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.2s ease;
      cursor: pointer;
    }

    input[type="range"]:hover::-moz-range-thumb {
      transform: scale(1.05);
      box-shadow:
        0 0 0 4px rgba(15, 23, 42, 0.7),
        0 0 18px 4px rgba(56, 189, 248, 0.45);
    }

    input[type="range"]:active::-moz-range-thumb {
      transform: scale(0.98);
      box-shadow:
        0 0 0 4px rgba(15, 23, 42, 0.7),
        0 0 14px 4px rgba(56, 189, 248, 0.5);
    }

    .hint {
      margin-top: 8px;
      font-size: 0.75rem;
      line-height: 1.4;
      color: var(--text-muted);
      letter-spacing: 0.04em;
    }

    .hint span {
      color: rgba(191, 219, 254, 0.9);
    }

    .gradient-haze {
      position: fixed;
      left: -10%;
      bottom: -35%;
      width: 60vw;
      height: 60vh;
      background:
        radial-gradient(circle at 30% 0%, rgba(56, 189, 248, 0.52), transparent 60%),
        radial-gradient(circle at 80% 15%, rgba(52, 211, 153, 0.35), transparent 55%);
      opacity: 0.9;
      filter: blur(12px);
      pointer-events: none;
      mix-blend-mode: screen;
      z-index: 1;
      transform: translate3d(0, 0, 0);
    }

    @keyframes overlay-fade-in {
      0% {
        opacity: 0;
        transform: translateY(8px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 720px) {
      .overlay {
        padding: 16px 16px 20px;
      }
      .controls {
        margin-left: -2px;
        margin-right: -2px;
        max-width: none;
      }
      .title {
        font-size: 1.4rem;
        letter-spacing: 0.18em;
      }
      .subtitle {
        max-width: none;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        scroll-behavior: auto !important;
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
      }
    }
  </style>
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
</head>
<body>
  <div id="scene-container"></div>
  <div class="gradient-haze" aria-hidden="true"></div>

  <div class="overlay" aria-hidden="false">
    <div class="title-block">
      <div class="title">Ocean Wave <span class="accent-dot">Simulation</span></div>
      <p class="subtitle">
        A quietly animating surface of <strong>deep ocean</strong>, shaped in real time by wind, swell, and light. Adjust the conditions to move from glassy calm to powerful open sea.
      </p>
    </div>

    <section class="controls" aria-label="Wave and light controls">
      <div class="controls-header">
        <span>Sea State</span>
        <span class="status-pill">Interactive</span>
      </div>

      <div class="control-row">
        <label for="wind">
          <span>Wind Speed</span>
          <span class="value" id="wind-value">Moderate</span>
        </label>
        <input type="range" id="wind" min="0" max="3" step="0.01" value="1.4" />
      </div>

      <div class="control-row">
        <label for="wave">
          <span>Wave Height</span>
          <span class="value" id="wave-value">Rolling sea</span>
        </label>
        <input type="range" id="wave" min="0.2" max="2.6" step="0.01" value="1.2" />
      </div>

      <div class="control-row">
        <label for="light">
          <span>Lighting</span>
          <span class="value" id="light-value">Soft daylight</span>
        </label>
        <input type="range" id="light" min="0.3" max="2" step="0.01" value="1" />
      </div>

      <p class="hint">
        Tip: lower <span>lighting</span> and raise <span>wave height</span> for a moody storm,
        or soften both for a duskâ€‘calm horizon.
      </p>
    </section>
  </div>

  <script>
    (function () {
      if (!window.THREE) {
        var fallback = document.createElement("div");
        fallback.style.position = "fixed";
        fallback.style.inset = "0";
        fallback.style.display = "flex";
        fallback.style.alignItems = "center";
        fallback.style.justifyContent = "center";
        fallback.style.padding = "24px";
        fallback.style.color = "#e5f3ff";
        fallback.style.background = "#020617";
        fallback.style.fontFamily = "system-ui, -apple-system, BlinkMacSystemFont, sans-serif";
        fallback.textContent = "Your browser does not support the graphics features required for the Ocean Wave Simulation.";
        document.body.innerHTML = "";
        document.body.appendChild(fallback);
        return;
      }

      var container = document.getElementById("scene-container");

      var renderer;
      try {
        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      } catch (error) {
        var message = document.createElement("div");
        message.style.position = "fixed";
        message.style.inset = "0";
        message.style.display = "flex";
        message.style.alignItems = "center";
        message.style.justifyContent = "center";
        message.style.padding = "24px";
        message.style.color = "#e5f3ff";
        message.style.background = "#020617";
        message.style.fontFamily = "system-ui, -apple-system, BlinkMacSystemFont, sans-serif";
        message.textContent = "WebGL appears to be unavailable, so the Ocean Wave Simulation cannot be displayed.";
        document.body.innerHTML = "";
        document.body.appendChild(message);
        return;
      }

      renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setClearColor(0x020617, 1);
      renderer.domElement.style.filter = "saturate(1.18) contrast(1.04)";
      container.appendChild(renderer.domElement);

      var scene = new THREE.Scene();
      scene.fog = new THREE.FogExp2(0x020617, 0.022);

      var camera = new THREE.PerspectiveCamera(
        55,
        window.innerWidth / window.innerHeight,
        0.1,
        500
      );
      var baseRadius = 80;
      var baseHeight = 22;
      camera.position.set(baseRadius, baseHeight, baseRadius * 0.6);

      var hemisphereLight = new THREE.HemisphereLight(0x9bdcfb, 0x02111f, 0.9);
      scene.add(hemisphereLight);

      var sunLight = new THREE.DirectionalLight(0xfff3d1, 1.1);
      sunLight.position.set(-40, 40, 25);
      scene.add(sunLight);

      var waterGeometry = new THREE.PlaneGeometry(220, 220, 160, 160);
      waterGeometry.rotateX(-Math.PI / 2);

      var waterMaterial = new THREE.MeshStandardMaterial({
        color: 0x0f172a,
        roughness: 0.26,
        metalness: 0.96,
        emissive: new THREE.Color(0x0b1120),
        emissiveIntensity: 0.75,
        transparent: true,
        opacity: 0.97
      });

      var water = new THREE.Mesh(waterGeometry, waterMaterial);
      water.receiveShadow = true;
      scene.add(water);

      var originalPositions = waterGeometry.attributes.position.array.slice();

      var parameters = {
        windSpeed: 1.4,
        waveHeight: 1.2,
        lightStrength: 1
      };

      var windInput = document.getElementById("wind");
      var waveInput = document.getElementById("wave");
      var lightInput = document.getElementById("light");

      var windValueLabel = document.getElementById("wind-value");
      var waveValueLabel = document.getElementById("wave-value");
      var lightValueLabel = document.getElementById("light-value");

      function updateWindLabel(value) {
        var valueNumber = parseFloat(value);
        var text;
        if (valueNumber < 0.4) {
          text = "Glass calm";
        } else if (valueNumber < 0.9) {
          text = "Gentle breeze";
        } else if (valueNumber < 1.6) {
          text = "Moderate";
        } else if (valueNumber < 2.3) {
          text = "Fresh wind";
        } else {
          text = "Strong wind";
        }
        windValueLabel.textContent = text;
      }

      function updateWaveLabel(value) {
        var valueNumber = parseFloat(value);
        var text;
        if (valueNumber < 0.45) {
          text = "Subtle ripples";
        } else if (valueNumber < 1) {
          text = "Gentle swell";
        } else if (valueNumber < 1.7) {
          text = "Rolling sea";
        } else if (valueNumber < 2.2) {
          text = "Deep swell";
        } else {
          text = "Powerful surf";
        }
        waveValueLabel.textContent = text;
      }

      function updateLightLabel(value) {
        var valueNumber = parseFloat(value);
        var text;
        if (valueNumber < 0.55) {
          text = "Moonlit";
        } else if (valueNumber < 0.9) {
          text = "Blue hour";
        } else if (valueNumber < 1.3) {
          text = "Soft daylight";
        } else if (valueNumber < 1.7) {
          text = "Golden hour";
        } else {
          text = "Bright sun";
        }
        lightValueLabel.textContent = text;
      }

      windInput.addEventListener("input", function (event) {
        var valueNumber = parseFloat(event.target.value);
        parameters.windSpeed = valueNumber;
        updateWindLabel(valueNumber);
      });

      waveInput.addEventListener("input", function (event) {
        var valueNumber = parseFloat(event.target.value);
        parameters.waveHeight = valueNumber;
        updateWaveLabel(valueNumber);
      });

      lightInput.addEventListener("input", function (event) {
        var valueNumber = parseFloat(event.target.value);
        parameters.lightStrength = valueNumber;
        updateLightLabel(valueNumber);
      });

      updateWindLabel(windInput.value);
      updateWaveLabel(waveInput.value);
      updateLightLabel(lightInput.value);

      var clock = new THREE.Clock();
      var globalTime = 0;
      var normalUpdateAccumulator = 0;

      function animate() {
        requestAnimationFrame(animate);

        var delta = clock.getDelta();
        var windFactor = 0.6 + parameters.windSpeed * 0.7;
        globalTime += delta * windFactor;

        var positions = waterGeometry.attributes.position.array;
        var length = positions.length;

        var choppiness = 0.75 + parameters.windSpeed * 0.3;
        var amplitudeBase = 0.35 + parameters.waveHeight * 0.65;

        for (var index = 0; index < length; index += 3) {
          var originalX = originalPositions[index];
          var originalY = originalPositions[index + 1];
          var originalZ = originalPositions[index + 2];

          var distanceWaveOne = originalX * 0.16 + originalZ * 0.12;
          var distanceWaveTwo = originalX * -0.08 + originalZ * 0.18;
          var distanceWaveThree = originalX * 0.22 - originalZ * 0.14;

          var waveOne = Math.sin(distanceWaveOne + globalTime * 1.3);
          var waveTwo = Math.sin(distanceWaveTwo * 1.3 + globalTime * 0.9);
          var waveThree = Math.sin(distanceWaveThree * 0.7 - globalTime * 1.7);

          var combined = waveOne * 0.6 + waveTwo * 0.35 + waveThree * 0.25;
          var crestShape = Math.pow(Math.abs(combined), choppiness) * (combined < 0 ? -1 : 1);

          positions[index] = originalX + waveTwo * 0.12 * parameters.waveHeight;
          positions[index + 1] = originalY + crestShape * amplitudeBase * 2;
          positions[index + 2] = originalZ + waveThree * 0.08 * parameters.waveHeight;
        }

        waterGeometry.attributes.position.needsUpdate = true;

        normalUpdateAccumulator += delta;
        if (normalUpdateAccumulator > 0.055) {
          waterGeometry.computeVertexNormals();
          normalUpdateAccumulator = 0;
        }

        var cameraTime = globalTime * 0.12;
        var radius = baseRadius * (0.9 + parameters.waveHeight * 0.08);

        camera.position.x = Math.cos(cameraTime) * radius;
        camera.position.z = Math.sin(cameraTime) * radius * (0.6 + parameters.windSpeed * 0.08);
        camera.position.y = baseHeight * (0.86 + parameters.waveHeight * 0.12);
        camera.lookAt(0, 0, 0);

        var baseLight = 0.5 + parameters.lightStrength * 0.5;
        var ambientBoost = 0.4 + parameters.lightStrength * 0.35;
        hemisphereLight.intensity = ambientBoost;
        sunLight.intensity = baseLight * 1.18;

        var warmTintHue = 0.09;
        var warmTintSaturation = 0.6;
        var warmTintLightness = 0.58 + parameters.lightStrength * 0.06;
        var warmTintColor = new THREE.Color().setHSL(
          warmTintHue,
          warmTintSaturation,
          warmTintLightness
        );
        sunLight.color.lerp(warmTintColor, 0.35);

        var skyTintHue = 0.58;
        var skyTintSaturation = 0.5;
        var skyTintLightness = 0.5 + parameters.lightStrength * 0.12;
        var skyTintColor = new THREE.Color().setHSL(
          skyTintHue,
          skyTintSaturation,
          skyTintLightness
        );
        hemisphereLight.color.lerp(skyTintColor, 0.22);

        var emissiveLevel = 0.55 + (1.7 - parameters.lightStrength) * 0.28;
        waterMaterial.emissiveIntensity = emissiveLevel;

        renderer.render(scene, camera);
      }

      function handleResize() {
        var width = window.innerWidth;
        var height = window.innerHeight;
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
        renderer.setSize(width, height);
      }

      window.addEventListener("resize", handleResize);
      animate();
    })();
  </script>
</body>
</html>

