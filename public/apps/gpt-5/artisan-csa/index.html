<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Artisan CSA — Hand-Drawn Farm Landing</title>
  <meta name="description" content="Artisan CSA: small-batch produce shares with a hand‑drawn, watercolor aesthetic. Check your ZIP, explore seasonal shares, choose a plan, and join the harvest." />
  <style>
    :root{
      --paper: #f6f1e7;
      --ink: #2b2a27;
      --ink-soft: rgba(43,42,39,.75);
      --sage: #8ea58f;
      --leaf: #7aa35d;
      --gold: #b78b45;
      --rust: #a35d3f;
      --sky: #9ec1c9;
      --plum: #6e4b5a;
      --soil: #4b3d2b;
      --carrot: #d57a1f;
      --wheat: #d2b48c;
      --cream: #fffaf3;
      --shadow: rgba(0,0,0,.08);
      --radius: 14px;
      --maxw: 1200px;
      --focus: 2px dashed var(--ink);
    }

    /* Base */
    html,body{height:100%}
    body{
      margin:0; color:var(--ink); background:var(--paper);
      font-family: Georgia, 'Iowan Old Style', Palatino, 'Times New Roman', serif;
      line-height:1.5; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
    }
    .wrapper{max-width:var(--maxw); margin-inline:auto; padding: clamp(16px, 4vw, 32px);}    
    a{color:inherit}
    img{max-width:100%; height:auto}
    :focus-visible{outline:var(--focus); outline-offset:2px}
    .sr-only{position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}

    /* Paper grain overlay using SVG turbulence (below in body) */
    #paper-noise{position:fixed; inset:0; z-index:-1; opacity:.07; pointer-events:none; mix-blend-mode:multiply}

    /* Header */
    header{position:sticky; top:0; z-index:10; backdrop-filter: blur(4px);}
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:10px 16px; border-bottom:1px solid rgba(0,0,0,.06); background: color-mix(in oklab, var(--paper) 92%, white 8%)}
    .brand{display:flex; gap:12px; align-items:center}
    .brand h1{font-size: clamp(20px, 2.6vw, 30px); margin:0; letter-spacing:.5px}
    .brand .tag{font-size:.85rem; color:#5d5b55}
    .nav a{padding:8px 10px; border-radius:10px; text-decoration:none}
    .nav a:hover{background:rgba(0,0,0,.03)}
    nav{display:flex; gap:6px; flex-wrap:wrap}

    /* Hero */
    .hero{position:relative; isolation:isolate}
    .hero-inner{display:grid; gap:28px; align-items:center; grid-template-columns: 1.2fr .8fr}
    .hero h2{font-size: clamp(28px, 4vw, 48px); line-height:1.1; margin:.2em 0}
    .hero p{max-width:60ch}
    .pill{display:inline-block; padding:6px 10px; border-radius:999px; background:var(--cream); border:1px solid rgba(0,0,0,.08); box-shadow:0 2px 0 var(--shadow)}
    .cta{display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-top:8px}
    .btn{border:1.2px solid var(--ink); background:linear-gradient(#fffdf9, #f1e8d9); border-radius:12px; padding:10px 14px; font-weight:700; box-shadow:2px 2px 0 0 var(--ink); cursor:pointer}
    .btn:hover{transform:translate(-1px,-1px); box-shadow:3px 3px 0 0 var(--ink)}
    .btn:active{transform:translate(1px,1px); box-shadow:1px 1px 0 0 var(--ink)}

    .zipbox{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .zipbox input{font: inherit; padding:10px 12px; border:1.2px solid var(--ink); border-radius:12px; background:var(--cream)}
    .zip-result{min-height:1.6em}

    /* Floating ink drawings in hero (parallax) */
    .floaty{position:absolute; opacity:.6; pointer-events:none; transform: translateY(0); will-change: transform;}
    .floaty svg{filter: drop-shadow(0 2px 0 rgba(0,0,0,.05))}
    .f1{left:-40px; top:-40px; width:300px}
    .f2{right:-18px; top:-30px; width:240px}
    .f3{left:35%; bottom:-60px; width:220px}

    /* Card utilities */
    .card{background:var(--cream); border:1.2px solid var(--ink); border-radius:var(--radius); box-shadow: 4px 4px 0 0 var(--ink); padding: clamp(14px, 2.2vw, 22px)}
    .section{padding-block: clamp(28px, 6vw, 72px)}
    .section h3{font-size: clamp(22px, 3vw, 36px); margin:0 0 16px}
    .muted{color:#5d5b55}

    /* Shares grid */
    .grid{display:grid; gap:16px; grid-template-columns: repeat(12, minmax(0,1fr))}
    .col-3{grid-column: span 3}
    .col-4{grid-column: span 4}
    .col-6{grid-column: span 6}
    .col-12{grid-column: span 12}
    .shares .card{position:relative}
    .season{display:flex; align-items:center; gap:12px}
    .season h4{font-size:1.2rem; margin:0}
    .allergens{display:flex; gap:8px; align-items:center; margin-top:8px}
    .allergens .i{display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; border:1px solid var(--ink); border-radius:50%; background:white}
    .tooltip{position:absolute; inset:auto 12px 12px auto; translate: 0 8px; opacity:0; visibility:hidden; transition:opacity .2s ease, translate .2s ease; background: #fffef9; border:1px solid var(--ink); border-radius:10px; box-shadow: 6px 6px 0 0 var(--ink); padding:10px; width:min(280px, 70vw); z-index:2}
    .season-card:hover .tooltip, .season-card:focus-within .tooltip{opacity:1; visibility:visible; translate:0 0}

    /* Plans */
    .plans .picker{display:grid; gap:12px; grid-template-columns: 1fr}
    .rangewrap{display:grid; gap:8px}
    .labels{display:flex; justify-content:space-between; font-weight:700}
    input[type=range]{width:100%}
    .addons{display:flex; gap:12px; flex-wrap:wrap; margin-top:4px}
    .addon{display:flex; align-items:center; gap:8px; padding:8px 10px; border:1px solid var(--ink); border-radius:999px; background: #fffef9}
    .summary{display:flex; flex-wrap:wrap; gap:12px; align-items:center; margin-top:10px}
    .pricebig{font-size: clamp(26px, 3.6vw, 40px); font-weight:900}
    .note{font-size:.9rem; color:#534}

    /* Map + pickups */
    .mapwrap{display:grid; gap:16px; grid-template-columns: 1.2fr .8fr; align-items:start}
    .pickups{display:grid; gap:10px}
    .pickup{display:flex; justify-content:space-between; align-items:center; background:#fffef9; border:1px solid var(--ink); border-radius:12px; padding:10px 12px}
    .badge{border:1px solid var(--ink); border-radius:999px; padding:4px 8px; font-weight:700; background:#fff}

    /* Carousel */
    .carousel{position:relative}
    .slides{display:grid; grid-auto-flow:column; grid-auto-columns: 100%; overflow:hidden; border-radius:var(--radius)}
    .slide{display:grid; gap:10px; grid-template-columns: 120px 1fr; align-items:center; padding:16px; background:#fffef9; border:1.2px solid var(--ink)}
    .c-ctrl{position:absolute; inset:0; display:flex; align-items:center; justify-content:space-between; pointer-events:none}
    .c-ctrl button{pointer-events:auto}
    .dots{display:flex; gap:6px; justify-content:center; margin-top:8px}
    .dot{width:10px; height:10px; border-radius:50%; border:1px solid var(--ink); background:#fff}
    .dot[aria-selected="true"]{background:var(--gold)}

    /* FAQ + Contact */
    .faq .q{display:block; width:100%; text-align:left; font:inherit; background:#fffef9; border:1.2px solid var(--ink); border-radius:12px; padding:10px 12px}
    .faq .a{border-left:3px solid var(--gold); padding:10px 12px; margin:4px 0 14px}
    .contact form{display:grid; gap:10px}
    .contact input, .contact textarea{font:inherit; padding:10px 12px; border:1.2px solid var(--ink); border-radius:12px; background:#fffef9}

    /* Responsive */
    @media (max-width: 900px){
      .hero-inner{grid-template-columns:1fr}
      .mapwrap{grid-template-columns:1fr}
      .col-3{grid-column: span 6}
      .col-4{grid-column: span 6}
      .slide{grid-template-columns: 1fr}
    }

    /* Motion preferences */
    @media (prefers-reduced-motion: reduce){
      *{animation:none!important; transition:none!important}
    }
  </style>
</head>
<body>
  <a class="sr-only" href="#main">Skip to content</a>

  <!-- Paper texture overlay (noise) -->
  <svg id="paper-noise" role="presentation" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
    <filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.95" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/><feComponentTransfer><feFuncA type="table" tableValues="0 0.055"/></feComponentTransfer></filter>
    <rect width="100%" height="100%" filter="url(#noise)" fill="#fff"></rect>
  </svg>

  <header>
    <div class="nav wrapper">
      <div class="brand">
        <svg aria-hidden="true" width="38" height="38" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g stroke="var(--ink)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 25c2-10 12-19 22-18 0 0-5 5-4 9 1 4 6 6 12 3-3 11-15 17-30 6Z" fill="#fff6d8"/>
            <path d="M10 34c8 6 20 6 28 0" fill="none"/>
          </g>
        </svg>
        <div>
          <h1>Artisan CSA</h1>
          <div class="tag">Small-batch, hand-harvested produce</div>
        </div>
      </div>
      <nav aria-label="Primary">
        <a href="#shares">Shares</a>
        <a href="#plans">Plans</a>
        <a href="#map">Map</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <main id="main" class="wrapper">
    <!-- Hero -->
    <section class="hero section" aria-labelledby="hero-title">
      <div class="hero-inner card">
        <div>
          <span class="pill" aria-hidden="true">Seasonal • Local • Regenerative</span>
          <h2 id="hero-title">Eat with the seasons. Know your farmers.</h2>
          <p>Fresh, sustainably grown produce harvested at peak flavor. Our watercolor world is hand-drawn because your food is too—by people who care about soil, pollinators, and community.</p>
          <div class="cta">
            <div class="zipbox" role="form" aria-labelledby="zip-label">
              <label id="zip-label" class="sr-only" for="zip">ZIP Code</label>
              <input id="zip" name="zip" inputmode="numeric" pattern="\\d{5}" placeholder="Enter ZIP (#####)" aria-describedby="zip-help" maxlength="5" size="12" />
              <button class="btn" id="zipCheck" type="button">Check delivery</button>
              <div id="zip-help" class="sr-only">Enter a 5‑digit US ZIP code to check if we deliver to you.</div>
            </div>
            <a href="#plans" class="btn" role="button">Join the harvest</a>
          </div>
          <div class="zip-result" id="zipResult" role="status" aria-live="polite"></div>
        </div>
        <!-- Hero Illustration: hand-drawn basket -->
        <div aria-hidden="true">
          <svg viewBox="0 0 560 360" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="w1" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0" stop-color="#fff7e3"/>
                <stop offset="1" stop-color="#f0e1c5"/>
              </linearGradient>
            </defs>
            <g fill="none" stroke="var(--ink)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
              <!-- basket -->
              <path d="M100 220c0 60 70 90 180 90s180-30 180-90" fill="url(#w1)"/>
              <path d="M88 220h384"/>
              <path d="M150 160c0-60 60-110 130-110s130 50 130 110"/>
              <!-- weave -->
              <path d="M130 240c40 10 80 10 120 0m40 0c40 10 80 10 120 0"/>
              <path d="M120 270c40 10 80 10 120 0m40 0c40 10 80 10 120 0"/>
              <!-- veggies -->
              <path d="M190 170c-12-30 18-52 35-48 8 2 10 10 9 18-2 20-24 36-44 30z" fill="#acd3a8"/>
              <path d="M230 170c8-22 40-22 46-10 4 8 0 18-10 22-18 8-38 2-36-12z" fill="#ffcf86"/>
              <path d="M300 150c12-16 38-20 54-4 10 12 8 30-2 40-14 14-44 10-54-6" fill="#b5dbe5"/>
              <path d="M360 170c16-32 56-26 66-8 6 12-4 24-16 30-20 10-44 0-50-22z" fill="#f5a26b"/>
              <!-- carrot tops -->
              <path d="M208 130c-10-18-24-28-40-30m20 26c-8-8-22-14-36-14m36 0c-10-10-18-16-32-18"/>
            </g>
          </svg>
        </div>

        <!-- Parallax floaty ink sketches -->
        <div class="floaty f1" data-parallax data-speed="0.25">
          <svg viewBox="0 0 180 120" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" stroke="var(--ink)" stroke-width="2.3" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 100c30-40 60-60 120-80-30 34-54 58-84 92-10 0-24-4-36-12z" fill="#e7f3ea"/>
            </g>
          </svg>
        </div>
        <div class="floaty f2" data-parallax data-speed="0.4">
          <svg viewBox="0 0 160 120" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" stroke="var(--ink)" stroke-width="2.3" stroke-linecap="round" stroke-linejoin="round">
              <path d="M80 16c-14 8-32 32-20 56 12 22 46 20 66 0C150 52 108 0 80 16z" fill="#ffecd1"/>
            </g>
          </svg>
        </div>
        <div class="floaty f3" data-parallax data-speed="0.18">
          <svg viewBox="0 0 160 120" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" stroke="var(--ink)" stroke-width="2.3" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 80c18-20 40-34 70-42 10 10 16 24 18 38-28 18-58 22-88 4z" fill="#e8f1f5"/>
            </g>
          </svg>
        </div>
      </div>
    </section>

    <!-- Shares -->
    <section id="shares" class="section shares" aria-labelledby="shares-title">
      <h3 id="shares-title">Seasonal Shares</h3>
      <div class="grid">
        <!-- Spring -->
        <article class="card season-card col-3" tabindex="0" aria-describedby="tip-spring">
          <div class="season">
            <svg aria-hidden="true" width="38" height="38" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g stroke="var(--ink)" stroke-width="2">
                <path d="M8 30c16 2 24-10 28-20 8 18-2 32-20 32-4 0-6-2-8-12z" fill="#e7f3ea"/>
              </g>
            </svg>
            <h4>Spring</h4>
          </div>
          <p class="muted">Tender greens, radishes, peas.</p>
          <div class="allergens" aria-label="Common allergens">
            <span class="i" title="Gluten-friendly"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--ink)" stroke-width="1.8"><path d="M6 18c2-6 6-10 12-12M4 10c4-4 8-6 12-6"/></svg></span>
            <span class="i" title="Contains nuts occasionally"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--ink)" stroke-width="1.8"><path d="M6 12c0-6 6-8 9-5s1 9-5 9c-3 0-4-2-4-4z"/></svg></span>
          </div>
          <div role="tooltip" id="tip-spring" class="tooltip"><strong>Typical produce</strong><br/>Little gems, spinach, sugar snaps, green garlic, radishes, chives, strawberries.</div>
        </article>
        <!-- Summer -->
        <article class="card season-card col-3" tabindex="0" aria-describedby="tip-summer">
          <div class="season">
            <svg aria-hidden="true" width="38" height="38" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g stroke="var(--ink)" stroke-width="2">
                <circle cx="24" cy="24" r="14" fill="#ffefd6"/>
                <path d="M24 5v6M24 37v6M5 24h6M37 24h6M10 10l4 4M34 34l4 4M34 14l4-4M10 38l4-4"/></g>
            </svg>
            <h4>Summer</h4>
          </div>
          <p class="muted">Tomatoes, cucumbers, stone fruit.</p>
          <div class="allergens" aria-label="Common allergens">
            <span class="i" title="Milk optional add-on"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--ink)" stroke-width="1.8"><path d="M8 4c0 4-4 4-4 8 0 6 2 8 8 8s8-2 8-8c0-4-4-4-4-8"/></svg></span>
            <span class="i" title="Gluten-friendly"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--ink)" stroke-width="1.8"><path d="M6 18c2-6 6-10 12-12"/></svg></span>
          </div>
          <div role="tooltip" id="tip-summer" class="tooltip"><strong>Typical produce</strong><br/>Heirloom tomatoes, cucumbers, basil, zucchini, peaches, melons, sweet corn.</div>
        </article>
        <!-- Fall -->
        <article class="card season-card col-3" tabindex="0" aria-describedby="tip-fall">
          <div class="season">
            <svg aria-hidden="true" width="38" height="38" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g stroke="var(--ink)" stroke-width="2" stroke-linecap="round">
                <path d="M20 36c12 2 16-6 12-14-2-6-8-8-12-4-6 6-10 14 0 18z" fill="#ffe1c7"/>
                <path d="M16 18c2-4 8-8 16-8"/>
              </g>
            </svg>
            <h4>Fall</h4>
          </div>
          <p class="muted">Roots, squash, hardy greens.</p>
          <div class="allergens" aria-label="Common allergens">
            <span class="i" title="Gluten-friendly"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--ink)" stroke-width="1.8"><path d="M6 18c2-6 6-10 12-12"/></svg></span>
            <span class="i" title="Nuts possible in granola add-on"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--ink)" stroke-width="1.8"><path d="M6 12c0-6 6-8 9-5s1 9-5 9c-3 0-4-2-4-4z"/></svg></span>
          </div>
          <div role="tooltip" id="tip-fall" class="tooltip"><strong>Typical produce</strong><br/>Kabocha, delicata, carrots, beets, apples, chicories, herbs.</div>
        </article>
        <!-- Winter -->
        <article class="card season-card col-3" tabindex="0" aria-describedby="tip-winter">
          <div class="season">
            <svg aria-hidden="true" width="38" height="38" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g stroke="var(--ink)" stroke-width="2" stroke-linecap="round">
                <path d="M24 10v28M12 18l24 12M36 18 12 30"/>
                <circle cx="24" cy="24" r="14" fill="#e8f1f5"/>
              </g>
            </svg>
            <h4>Winter</h4>
          </div>
          <p class="muted">Citrus, brassicas, storage crops.</p>
          <div class="allergens" aria-label="Common allergens">
            <span class="i" title="Gluten-friendly"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--ink)" stroke-width="1.8"><path d="M6 18c2-6 6-10 12-12"/></svg></span>
          </div>
          <div role="tooltip" id="tip-winter" class="tooltip"><strong>Typical produce</strong><br/>Broccoli, cauliflower, kale, oranges, leeks, potatoes, winter herbs.</div>
        </article>
      </div>
    </section>

    <!-- Plans -->
    <section id="plans" class="section plans" aria-labelledby="plans-title">
      <h3 id="plans-title">Choose Your Plan</h3>
      <div class="card picker">
        <div class="rangewrap">
          <div class="labels" aria-hidden="true"><span>Weekly</span><span>Bi‑weekly</span></div>
          <input type="range" id="freq" min="0" max="1" step="1" value="0" aria-label="Delivery frequency" />
        </div>
        <div class="addons" role="group" aria-label="Add-ons per delivery">
          <label class="addon"><input type="checkbox" class="addonBox" value="6" data-name="Farm Eggs"/> Farm Eggs <span class="badge">$6</span></label>
          <label class="addon"><input type="checkbox" class="addonBox" value="8" data-name="Seasonal Flowers"/> Flowers <span class="badge">$8</span></label>
          <label class="addon"><input type="checkbox" class="addonBox" value="5" data-name="Sourdough"/> Bread <span class="badge">$5</span></label>
        </div>
        <div class="summary" aria-live="polite">
          <div class="pricebig"><span id="pricePerBox">$34</span> <span class="muted" style="font-weight:500">per box</span></div>
          <div class="badge" id="deliveries">4 deliveries / month</div>
          <div class="badge" id="monthly">Est. monthly: $136</div>
          <div class="note" id="summaryText">Weekly Harvest Box. Add-ons: none.</div>
          <button class="btn" type="button">Join the harvest</button>
        </div>
      </div>
    </section>

    <!-- Map + Pickups -->
    <section id="map" class="section" aria-labelledby="map-title">
      <h3 id="map-title">Delivery Radius & Pickup Spots</h3>
      <div class="mapwrap">
        <div class="card" aria-label="Delivery area map">
          <!-- Stylized static map with radius overlay (centered at the farm) -->
          <svg viewBox="0 0 640 420" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="map-desc">
            <title id="map-desc">Hand-drawn map with a circle showing our delivery radius and nearby pickup locations</title>
            <defs>
              <pattern id="hatch" patternUnits="userSpaceOnUse" width="10" height="10">
                <path d="M0 10 L10 0" stroke="#c5d4d8" stroke-width="1"/>
              </pattern>
            </defs>
            <rect width="100%" height="100%" fill="#eef5f7"/>
            <g stroke="var(--ink)" stroke-width="2" fill="none" opacity=".8">
              <path d="M40 360c80-120 200-160 360-180 80-10 160-10 200-40"/>
              <path d="M80 300c120-40 240-60 360-20"/>
            </g>
            <!-- radius -->
            <g transform="translate(320,220)">
              <circle r="140" fill="url(#hatch)" stroke="var(--ink)" stroke-width="2"/>
              <circle r="3" fill="var(--rust)"/>
              <text x="8" y="-8" font-family="Georgia,serif" font-size="14" fill="var(--ink)">Farm</text>
            </g>
            <!-- pickup pins (positions approximate, updated by JS with labels) -->
            <g id="mapPins" fill="var(--leaf)" stroke="var(--ink)" stroke-width="2"></g>
          </svg>
        </div>
        <div class="pickups" aria-label="Pickup locations list">
          <div class="pickup"><div><strong>Downtown Market</strong><div class="muted">Saturday 9–1</div></div><span class="badge" data-dist="downtown">—</span></div>
          <div class="pickup"><div><strong>Riverside Co‑op</strong><div class="muted">Wed 4–7</div></div><span class="badge" data-dist="coop">—</span></div>
          <div class="pickup"><div><strong>Hillside Bakery</strong><div class="muted">Thu 3–6</div></div><span class="badge" data-dist="bakery">—</span></div>
          <div class="pickup"><div><strong>Library Parking</strong><div class="muted">Sun 10–12</div></div><span class="badge" data-dist="library">—</span></div>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="section" aria-labelledby="test-title">
      <h3 id="test-title">Neighbors love the harvest</h3>
      <div class="carousel" aria-roledescription="carousel" aria-label="Testimonials">
        <div class="slides" id="slides" aria-live="polite">
          <article class="slide" role="group" aria-roledescription="slide" aria-label="1 of 3">
            <svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <g fill="none" stroke="var(--ink)" stroke-width="2.3" stroke-linecap="round">
                <circle cx="60" cy="60" r="40" fill="#fffdf8"/>
                <path d="M40 54c6-6 12-6 18 0m24 0c-6-6-12-6-18 0"/>
                <path d="M44 78c10 8 22 8 32 0"/>
              </g>
            </svg>
            <div>
              <p>“Every box feels like a tiny art show. The carrots taste like sunshine.”</p>
              <div class="muted">— Maya, teacher</div>
            </div>
          </article>
          <article class="slide" role="group" aria-roledescription="slide" aria-label="2 of 3">
            <svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <g fill="none" stroke="var(--ink)" stroke-width="2.3" stroke-linecap="round">
                <rect x="22" y="26" width="76" height="76" rx="20" fill="#fffdf8"/>
                <path d="M46 60c6-8 22-8 28 0"/>
                <path d="M44 80c12 10 24 10 36 0"/>
              </g>
            </svg>
            <div>
              <p>“The bi‑weekly plan fits our rhythm. Add‑on flowers brighten the whole house.”</p>
              <div class="muted">— Luis, designer</div>
            </div>
          </article>
          <article class="slide" role="group" aria-roledescription="slide" aria-label="3 of 3">
            <svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <g fill="none" stroke="var(--ink)" stroke-width="2.3" stroke-linecap="round">
                <ellipse cx="60" cy="60" rx="44" ry="36" fill="#fffdf8"/>
                <path d="M42 58c8-6 16-6 24 0"/>
                <path d="M42 80c8 6 28 6 36 0"/>
              </g>
            </svg>
            <div>
              <p>“Pickup at the co‑op is easy, and the recipes are delicious.”</p>
              <div class="muted">— Anika, nurse</div>
            </div>
          </article>
        </div>
        <div class="c-ctrl" aria-hidden="true">
          <button class="btn" id="prev" aria-controls="slides">‹ Prev</button>
          <button class="btn" id="next" aria-controls="slides">Next ›</button>
        </div>
        <div class="dots" role="tablist" aria-label="Choose slide">
          <button class="dot" role="tab" aria-selected="true" aria-controls="slides" data-index="0"><span class="sr-only">Slide 1</span></button>
          <button class="dot" role="tab" aria-selected="false" aria-controls="slides" data-index="1"><span class="sr-only">Slide 2</span></button>
          <button class="dot" role="tab" aria-selected="false" aria-controls="slides" data-index="2"><span class="sr-only">Slide 3</span></button>
        </div>
      </div>
    </section>

    <!-- FAQ + Contact -->
    <section id="faq" class="section faq" aria-labelledby="faq-title">
      <h3 id="faq-title">FAQ</h3>
      <div class="card">
        <button class="q" aria-expanded="false" aria-controls="a1" id="q1">What’s in a Harvest Box?</button>
        <div id="a1" class="a" hidden>6–8 items, balanced across leafy greens, roots, fruit, and herbs, always seasonal and local.</div>
        <button class="q" aria-expanded="false" aria-controls="a2" id="q2">Can I pause or skip?</button>
        <div id="a2" class="a" hidden>Yes—skip weeks up to 24 hours before harvest. You’re always in control.</div>
        <button class="q" aria-expanded="false" aria-controls="a3" id="q3">Are you organic?</button>
        <div id="a3" class="a" hidden>We follow organic practices and go further: no synthetic inputs, soil‑first farming, habitat buffers.</div>
        <button class="q" aria-expanded="false" aria-controls="a4" id="q4">Do you offer SNAP/EBT?</button>
        <div id="a4" class="a" hidden>We partner with local programs. SNAP/EBT accepted at pickups with matching dollars when available.</div>
      </div>
    </section>

    <section id="contact" class="section contact" aria-labelledby="contact-title">
      <h3 id="contact-title">Say hello</h3>
      <div class="card">
        <form id="contactForm" novalidate>
          <label for="name">Name</label>
          <input id="name" name="name" autocomplete="name" />
          <label for="email">Email</label>
          <input id="email" name="email" type="email" autocomplete="email" required />
          <label for="msg">Message</label>
          <textarea id="msg" name="msg" rows="4" placeholder="I’m curious about…"></textarea>
          <div>
            <button class="btn" type="submit">Send</button>
            <span id="contactResult" class="muted" role="status" aria-live="polite" style="margin-left:8px"></span>
          </div>
        </form>
      </div>
    </section>
  </main>

  <footer class="wrapper" style="padding-bottom:40px">
    <div class="muted">© <span id="year"></span> Artisan CSA · Drawn with love · <a href="#top">Back to top</a></div>
  </footer>

  <script>
    (function(){
      const $ = (sel, root=document) => root.querySelector(sel);
      const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      // Footer year
      $('#year').textContent = new Date().getFullYear();

      // ZIP checker
      const farm = { lat: 37.8715, lon: -122.2730, label: 'Farm' }; // Berkeley-ish center
      const zipInput = $('#zip');
      const zipBtn = $('#zipCheck');
      const zipOut = $('#zipResult');
      const R = 3958.8; // miles
      function haversine(a,b){
        const toRad = x => x*Math.PI/180;
        const dLat = toRad(b.lat-a.lat), dLon = toRad(b.lon-a.lon);
        const lat1 = toRad(a.lat), lat2 = toRad(b.lat);
        const h = Math.sin(dLat/2)**2 + Math.cos(lat1)*Math.cos(lat2)*Math.sin(dLon/2)**2;
        return 2*R*Math.asin(Math.min(1, Math.sqrt(h)));
      }
      async function lookupZip(zip){
        // Attempt live lookup via Zippopotam (public). Fallback to heuristic if blocked.
        try{
          const res = await fetch('https://api.zippopotam.us/us/' + zip, {mode:'cors'});
          if(!res.ok) throw new Error('zip not found');
          const data = await res.json();
          const place = data.places && data.places[0];
          if(!place) throw new Error('no place');
          return { lat: parseFloat(place.latitude), lon: parseFloat(place.longitude), city: place['place name'], state: place['state abbreviation'] };
        }catch(err){
          // Heuristic fallback: assume Bay Area if ZIP starts with 94 or 95
          if(/^9[45]\\d{3}$/.test(zip)){
            return { lat: 37.7749, lon: -122.4194, city: 'SF Bay Area', state: 'CA' };
          }
          return null;
        }
      }
      async function checkZip(){
        const zip = (zipInput.value||'').trim();
        if(!/^\\d{5}$/.test(zip)){
          zipOut.textContent = 'Enter a valid 5‑digit US ZIP.'; return;
        }
        zipOut.textContent = 'Checking…';
        const pt = await lookupZip(zip);
        if(!pt){ zipOut.textContent = 'We couldn\'t verify this ZIP right now. Try again later, or choose a pickup spot.'; return; }
        const d = haversine(farm, pt);
        const within = d <= 25; // 25‑mile delivery radius
        zipOut.innerHTML = within
          ? `Yes! We deliver to <strong>${zip}</strong> — ~${d.toFixed(1)} mi from our farm. <a href="#plans">Pick your plan</a>.`
          : `You\'re about ${d.toFixed(1)} mi away, just outside our delivery radius. <a href='#map'>See pickup options</a>.`;
      }
      zipBtn.addEventListener('click', checkZip);
      zipInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); checkZip(); }});

      // Pricing calculator
      const freq = $('#freq');
      const addonBoxes = $$('.addonBox');
      const pricePerBoxEl = $('#pricePerBox');
      const deliveriesEl = $('#deliveries');
      const monthlyEl = $('#monthly');
      const summaryText = $('#summaryText');
      function calc(){
        const weekly = freq.value === '0';
        const base = weekly ? 34 : 36; // per box
        const deliveries = weekly ? 4 : 2; // approx per month
        let addons = 0; const list = [];
        addonBoxes.forEach(cb => { if(cb.checked){ addons += Number(cb.value); list.push(cb.dataset.name); }});
        const perBox = base + addons;
        const monthly = perBox * deliveries;
        pricePerBoxEl.textContent = `$${perBox}`;
        deliveriesEl.textContent = `${deliveries} deliveries / month`;
        monthlyEl.textContent = `Est. monthly: $${monthly}`;
        summaryText.textContent = `${weekly ? 'Weekly' : 'Bi‑weekly'} Harvest Box. Add‑ons: ${list.length? list.join(', ') : 'none'}.`;
      }
      freq.addEventListener('input', calc);
      addonBoxes.forEach(cb=>cb.addEventListener('change', calc));
      calc();

      // Parallax for floaty illustrations
      const floaties = $$('[data-parallax]');
      function onScroll(){
        if(prefersReduced) return; 
        const y = window.scrollY || 0;
        floaties.forEach(el=>{
          const speed = Number(el.dataset.speed||0.2);
          el.style.transform = `translateY(${y * speed * 0.2}px)`;
        });
      }
      document.addEventListener('scroll', onScroll, {passive:true});
      onScroll();

      // Map pins + distance badges (static coordinates around the center)
      const pinData = [
        {key:'downtown', label:'Downtown Market', lat:37.8044, lon:-122.2711, x: 380, y: 210},
        {key:'coop', label:'Riverside Co‑op', lat:37.7950, lon:-122.2420, x: 450, y: 240},
        {key:'bakery', label:'Hillside Bakery', lat:37.8890, lon:-122.2650, x: 300, y: 170},
        {key:'library', label:'Library Parking', lat:37.8400, lon:-122.2930, x: 260, y: 230}
      ];
      const pins = $('#mapPins');
      pinData.forEach(p=>{
        const g = document.createElementNS('http://www.w3.org/2000/svg','g');
        g.setAttribute('transform', `translate(${p.x},${p.y})`);
        g.innerHTML = `<circle r=\"6\" /><text x=\"10\" y=\"4\" font-family=\"Georgia,serif\" font-size=\"12\" fill=\"var(--ink)\">${p.label}</text>`;
        pins.appendChild(g);
        const miles = haversine(farm, p).toFixed(1);
        const badge = document.querySelector(`[data-dist=\"${p.key}\"]`);
        if(badge) badge.textContent = `${miles} mi`;
      });

      // Carousel logic
      const slides = $('#slides');
      const slideEls = $$('.slide', slides);
      const dots = $$('.dot');
      let idx = 0; let timer = null;
      function show(i){
        idx = (i + slideEls.length) % slideEls.length;
        slides.style.transform = `translateX(-${idx*100}%)`;
        dots.forEach((d,j)=> d.setAttribute('aria-selected', j===idx ? 'true' : 'false'));
        slideEls.forEach((el,j)=> el.setAttribute('aria-label', `${j+1} of ${slideEls.length}`));
      }
      function next(){ show(idx+1); }
      function prev(){ show(idx-1); }
      $('#next').addEventListener('click', next);
      $('#prev').addEventListener('click', prev);
      dots.forEach(d=> d.addEventListener('click', ()=> show(Number(d.dataset.index))));
      // Keyboard support
      slides.addEventListener('keydown', e=>{ if(e.key==='ArrowRight') next(); if(e.key==='ArrowLeft') prev(); });
      // Auto-advance
      function startAuto(){ if(prefersReduced) return; stopAuto(); timer = setInterval(next, 5000); }
      function stopAuto(){ if(timer) clearInterval(timer); }
      slides.addEventListener('focusin', stopAuto);
      slides.addEventListener('focusout', startAuto);
      startAuto(); show(0);

      // FAQ accordion
      $$('.faq .q').forEach(btn=>{
        const panel = document.getElementById(btn.getAttribute('aria-controls'));
        btn.addEventListener('click', ()=>{
          const expanded = btn.getAttribute('aria-expanded')==='true';
          btn.setAttribute('aria-expanded', String(!expanded));
          panel.hidden = expanded;
        });
        btn.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); btn.click(); }});
      });

      // Contact form
      const cf = $('#contactForm'); const cOut = $('#contactResult');
      cf.addEventListener('submit', e=>{
        e.preventDefault();
        const email = ($('#email').value||'').trim();
        if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){ cOut.textContent = 'Please enter a valid email.'; return; }
        cOut.textContent = 'Thanks! We\'ll be in touch soon.';
        cf.reset(); calc();
      });
    })();
  </script>
</body>
</html>
