<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Customer Case Study - XYZ Corp</title>
  <meta name="description" content="How XYZ Corp achieved faster activation, higher conversion, and lower support burden with a modern SaaS platform." />
  <meta property="og:title" content="Customer Case Study - XYZ Corp" />
  <meta property="og:description" content="A clean, persuasive breakdown of problem, solution, and results ‚Äî featuring metrics and a testimonial." />
  <meta name="theme-color" content="#0f172a" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%2394a3b8'/%3E%3Cstop offset='1' stop-color='%23636be8'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='22' fill='%23121a2b'/%3E%3Cpath d='M22 62c16 6 25-20 40-14 6 2 9 9 16 10 3 0 8-2 11-5v17c-3 3-8 6-13 6-8 0-12-6-20-8-12-3-22 14-34 10-3-1-7-4-10-7V57c2 2 6 4 10 5z' fill='url(%23g)'/%3E%3C/svg%3E"/>
  <style>
    :root {
      --bg: #0b1020;
      --surface: #0f172a;
      --card: #111a31;
      --card-2: #0d1326;
      --text: #e5e7eb;
      --muted: #a5b4fc;
      --accent: #6366f1;
      --accent-2: #22d3ee;
      --ok: #22c55e;
      --warn: #f59e0b;
      --danger: #ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,.4);
      --radius: 14px;
      --grid: rgba(99, 102, 241, 0.08);
    }
    [data-theme="light"] {
      --bg: #fbfbff;
      --surface: #ffffff;
      --card: #f4f6ff;
      --card-2: #eef2ff;
      --text: #0b1020;
      --muted: #535bf2;
      --accent: #4f46e5;
      --accent-2: #0ea5e9;
      --grid: rgba(79, 70, 229, 0.08);
      --shadow: 0 8px 24px rgba(2,6,23,.12);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
      color: var(--text);
      background: var(--bg);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .backdrop {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(34,211,238,.16), transparent 60%),
        radial-gradient(900px 600px at -20% 10%, rgba(99,102,241,.18), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.12));
      mask: linear-gradient(#000, transparent 85%);
      z-index: 0;
    }
    .grid-overlay {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background-image: linear-gradient(to right, var(--grid) 1px, transparent 1px), linear-gradient(to bottom, var(--grid) 1px, transparent 1px);
      background-size: 36px 36px;
      mask: linear-gradient(transparent 0, #000 15%, #000 70%, transparent 100%);
      z-index: 0;
    }
    .container {
      width: min(1120px, 92%);
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }
    header {
      position: sticky; top: 0; z-index: 10;
      backdrop-filter: saturate(140%) blur(10px);
      background: color-mix(in oklab, var(--bg) 85%, transparent);
      border-bottom: 1px solid color-mix(in srgb, var(--grid), transparent 75%);
    }
    .nav {
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 0;
    }
    .brand { display: flex; gap: 12px; align-items: center; }
    .brand svg { width: 32px; height: 32px; }
    .brand .name { font-weight: 700; letter-spacing: .2px; }
    .name small { opacity: .6; font-weight: 600; }

    .btn, button {
      appearance: none; border: 0; cursor: pointer;
      padding: 10px 14px; border-radius: 999px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #fff; font-weight: 700; letter-spacing: .2px;
      box-shadow: 0 8px 24px rgba(99,102,241,.35);
      transition: transform .2s ease, filter .2s ease, box-shadow .2s ease;
    }
    .btn:hover { transform: translateY(-1px); filter: saturate(110%);
      box-shadow: 0 16px 36px rgba(99,102,241,.45);
    }
    .btn-outline { background: transparent; color: var(--text);
      border: 1px solid color-mix(in srgb, var(--accent) 40%, transparent);
    }

    .hero { padding: 50px 0 26px; }
    .hero h1 {
      font-size: clamp(26px, 4.4vw, 48px);
      line-height: 1.12; margin: 8px 0 14px;
      letter-spacing: .2px;
      background: linear-gradient(180deg, #fff, color-mix(in srgb, var(--text), #fff 20%));
      background-clip: text; -webkit-background-clip: text; color: transparent;
    }
    .lead { color: color-mix(in srgb, var(--text), #fff 35%); font-size: clamp(15px, 2.2vw, 18px); }

    .split {
      display: grid; grid-template-columns: 1.2fr .9fr; gap: 26px; align-items: center;
    }
    @media (max-width: 900px) { .split { grid-template-columns: 1fr; } }

    .card {
      background: linear-gradient(180deg, color-mix(in oklab, var(--card), transparent 0%), color-mix(in oklab, var(--card-2), transparent 0%));
      border: 1px solid color-mix(in srgb, var(--grid), transparent 60%);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .panel { padding: 22px; }

    .kpis { display: grid; gap: 16px; grid-template-columns: repeat(4, 1fr); }
    @media (max-width: 900px) { .kpis { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 560px) { .kpis { grid-template-columns: 1fr; } }

    .kpi { position: relative; overflow: hidden; }
    .kpi .label { color: color-mix(in srgb, var(--text), #fff 45%); font-size: 13px; letter-spacing: .2px; }
    .kpi .value { font-size: clamp(26px, 4vw, 36px); font-weight: 800; margin-top: 2px; }
    .kpi .trend { font-size: 12px; display: inline-flex; gap: 6px; align-items: center; color: #a7f3d0; }

    .section { padding: 42px 0; }
    .section h2 { font-size: clamp(20px, 3.6vw, 28px); margin: 0 0 14px; }
    .section p { margin: 0; }

    .list { display: grid; gap: 12px; }
    .item { display: grid; grid-template-columns: 36px 1fr; gap: 12px; align-items: start; }
    .bullet {
      display: grid; place-items: center; width: 36px; height: 36px; border-radius: 9px;
      background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 65%, transparent), color-mix(in srgb, var(--accent-2) 45%, transparent));
      box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--accent) 40%, transparent);
    }

    .before-after { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; }
    @media (max-width: 800px) { .before-after { grid-template-columns: 1fr; } }

    .badge { display: inline-block; padding: 6px 10px; border-radius: 999px; font-size: 12px; font-weight: 700; letter-spacing: .3px; }
    .badge.ok { background: color-mix(in srgb, var(--ok) 20%, transparent); color: color-mix(in srgb, var(--ok) 85%, white 10%); }
    .badge.warn { background: color-mix(in srgb, var(--warn) 20%, transparent); color: color-mix(in srgb, var(--warn) 85%, white 10%); }
    .badge.bad { background: color-mix(in srgb, var(--danger) 20%, transparent); color: color-mix(in srgb, var(--danger) 85%, white 10%); }

    .quote {
      display: grid; grid-template-columns: 62px 1fr; gap: 14px; align-items: center;
      padding: 18px; border: 1px solid color-mix(in srgb, var(--grid), transparent 55%);
      background: linear-gradient(180deg, color-mix(in oklab, var(--card), transparent 0%), color-mix(in oklab, var(--card-2), transparent 0%));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .avatar {
      width: 62px; height: 62px; border-radius: 50%; overflow: hidden; display: grid; place-items: center;
      background: radial-gradient(circle at 30% 30%, #93c5fd, #a78bfa 45%, #f472b6 70%);
      color: rgba(255,255,255,.9); font-weight: 900; font-size: 22px; letter-spacing: .5px;
    }
    blockquote { margin: 0; }
    .stars { color: #fbbf24; }

    .cta { text-align: center; padding: 50px 0 70px; }
    .cta .panel { padding: 24px; }
    .cta h3 { margin: 8px 0 12px; font-size: clamp(18px, 3.4vw, 26px); }

    footer { color: color-mix(in srgb, var(--text), #fff 50%); font-size: 13px; padding: 34px 0 50px; text-align: center; }

    /* Reveal-on-scroll */
    .reveal-on-scroll { opacity: 0; transform: translateY(8px); transition: opacity .6s ease, transform .6s ease; }
    .reveal-on-scroll.revealed { opacity: 1; transform: translateY(0); }

    /* Print */
    @media print { header, .grid-overlay, .backdrop, .cta .actions { display: none !important; } body { background: #fff; } .card, .quote { box-shadow: none; } }
  </style>
</head>
<body>
  <div class="backdrop" aria-hidden="true"></div>
  <div class="grid-overlay" aria-hidden="true"></div>

  <header>
    <div class="container nav">
      <div class="brand" aria-label="Case study">
        <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img">
          <defs>
            <linearGradient id="lg" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#6366f1"/>
              <stop offset="1" stop-color="#22d3ee"/>
            </linearGradient>
          </defs>
          <rect x="4" y="6" width="40" height="36" rx="10" fill="#0b1225" stroke="url(#lg)"/>
          <path d="M12 30c6 2 9-7 14-5 2 .6 3 3 5 3 1 0 3-.6 4-1.6V34c-1.2 1-3.1 2-5 2-3.1 0-4.7-2.2-7.9-2.8C18.4 32.5 14.7 37 12 36c-1.2-.4-2.5-1.3-4-2.6V27c.8.7 2 1.3 4 1.9z" fill="url(#lg)"/>
        </svg>
        <div class="name">Customer Case Study<span class="sr-only"> ‚Äî </span> <small>XYZ Corp</small></div>
      </div>
      <div style="display:flex; gap:10px; align-items:center;">
        <button class="btn-outline" id="themeToggle" aria-label="Toggle color theme">Theme</button>
        <a class="btn" href="#contact">Replicate This Success</a>
      </div>
    </div>
  </header>

  <main>
    <section class="hero container reveal-on-scroll">
      <div class="split">
        <div>
          <div class="badge ok">Verified Results</div>
          <h1>XYZ Corp grew activation by <span style="background:linear-gradient(90deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;color:transparent;">47%</span> and cut time‚Äëto‚Äëvalue to 6 weeks.</h1>
          <p class="lead">By unifying customer telemetry and automating onboarding journeys, XYZ Corp turned trial friction into momentum ‚Äî reducing support tickets and boosting conversion without adding headcount.</p>
          <div style="margin-top:18px; display:flex; gap:10px; flex-wrap:wrap;">
            <a class="btn" href="#solution">How We Did It</a>
            <a class="btn-outline" href="#results">See the Numbers</a>
          </div>
        </div>
        <div>
          <div class="card panel" role="img" aria-label="Sparkline of growth and health score">
            <svg viewBox="0 0 640 360" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" style="display:block; border-radius: 10px; background: radial-gradient(120% 120% at 100% 0%, rgba(34,211,238,.18), transparent 40%), linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.12));">
              <defs>
                <linearGradient id="gradL" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="#818cf8"/>
                  <stop offset="1" stop-color="#22d3ee"/>
                </linearGradient>
                <linearGradient id="gradA" x1="0" y1="0" x2="0" y2="1">
                  <stop offset="0" stop-color="rgba(99,102,241,.35)"/>
                  <stop offset="1" stop-color="rgba(99,102,241,0)"/>
                </linearGradient>
              </defs>
              <g transform="translate(40,20)">
                <rect width="560" height="280" rx="10" fill="rgba(2,6,23,.25)" stroke="rgba(99,102,241,.35)"/>
                <g stroke="rgba(99,102,241,.18)" stroke-width="1">
                  <path d="M0 240 H560"/>
                  <path d="M0 180 H560"/>
                  <path d="M0 120 H560"/>
                  <path d="M0 60 H560"/>
                </g>
                <path d="M0 230 C 60 220, 120 200, 160 210 S 240 250, 300 210 360 140, 420 150 480 210, 560 120" fill="url(#gradA)" stroke="none"/>
                <path d="M0 230 C 60 220, 120 200, 160 210 S 240 250, 300 210 360 140, 420 150 480 210, 560 120" fill="none" stroke="url(#gradL)" stroke-width="3"/>
                <g>
                  <circle cx="520" cy="136" r="7" fill="#22c55e"/>
                  <text x="530" y="132" fill="#a7f3d0" font-size="12" font-weight="700">Health 92</text>
                </g>
              </g>
            </svg>
          </div>
        </div>
      </div>

      <div class="kpis section reveal-on-scroll" id="results">
        <div class="kpi card panel">
          <div class="label">Activation Rate</div>
          <div class="value"><span class="counter" data-suffix="%" data-target="47">0</span></div>
          <div class="trend">‚ñ≤ +18pts vs baseline</div>
        </div>
        <div class="kpi card panel">
          <div class="label">Support Tickets</div>
          <div class="value"><span class="counter" data-suffix="%" data-target="28">0</span> ‚Üì</div>
          <div class="trend" style="color:#fca5a5;">‚ñº -28% volume</div>
        </div>
        <div class="kpi card panel">
          <div class="label">Time to Value</div>
          <div class="value"><span class="counter" data-suffix=" wks" data-target="6">0</span></div>
          <div class="trend">From 12 ‚Üí 6 weeks</div>
        </div>
        <div class="kpi card panel">
          <div class="label">Year-1 ROI</div>
          <div class="value"><span class="counter" data-suffix="√ó" data-target="3.2" data-decimals="1">0</span></div>
          <div class="trend">Payback in 94 days</div>
        </div>
      </div>
    </section>

    <section class="container section reveal-on-scroll" id="problem">
      <h2>Problem</h2>
      <p>Rapid growth had left XYZ Corp with fragmented data and a manual onboarding process. Product-qualified leads stalled, and support absorbed routine ‚Äúgetting started‚Äù questions.</p>
      <div class="before-after" style="margin-top:16px;">
        <div class="card panel">
          <div class="badge bad">Before</div>
          <div class="list" style="margin-top:10px;">
            <div class="item">
              <div class="bullet" aria-hidden="true">‚ö†Ô∏è</div>
              <div>
                <strong>Fragmented telemetry</strong>
                <div style="opacity:.7">Events spread across tools; no single source of truth for activation.</div>
              </div>
            </div>
            <div class="item">
              <div class="bullet" aria-hidden="true">üß∞</div>
              <div>
                <strong>Manual onboarding</strong>
                <div style="opacity:.7">High‚Äëtouch setup drained CSM time and delayed value realization.</div>
              </div>
            </div>
            <div class="item">
              <div class="bullet" aria-hidden="true">üï≥Ô∏è</div>
              <div>
                <strong>Drop‚Äëoffs in week 1</strong>
                <div style="opacity:.7">Users struggled with first‚Äërun tasks; trial conversion lagged targets.</div>
              </div>
            </div>
          </div>
        </div>
        <div class="card panel">
          <div class="badge ok">After</div>
          <div class="list" style="margin-top:10px;">
            <div class="item">
              <div class="bullet" aria-hidden="true">üìä</div>
              <div>
                <strong>Unified data layer</strong>
                <div style="opacity:.7">Clean, trusted activation metrics for product, marketing, and success.</div>
              </div>
            </div>
            <div class="item">
              <div class="bullet" aria-hidden="true">ü§ñ</div>
              <div>
                <strong>Automated journeys</strong>
                <div style="opacity:.7">Lifecycle triggers guide users through first‚Äërun tasks with context.</div>
              </div>
            </div>
            <div class="item">
              <div class="bullet" aria-hidden="true">üß≠</div>
              <div>
                <strong>Proactive success</strong>
                <div style="opacity:.7">Health scoring flags risk early; CSMs focus where it matters.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="container section reveal-on-scroll" id="solution">
      <h2>Solution</h2>
      <div class="split" style="align-items:start;">
        <div class="card panel">
          <div class="list">
            <div class="item">
              <div class="bullet" aria-hidden="true">üß©</div>
              <div>
                <strong>Instrument once, use everywhere</strong>
                <div style="opacity:.75">Event schema mapped to core activation milestones; downstream tools read from the same source.</div>
              </div>
            </div>
            <div class="item">
              <div class="bullet" aria-hidden="true">üöÄ</div>
              <div>
                <strong>Guided first‚Äërun</strong>
                <div style="opacity:.75">Interactive checklists + in‚Äëproduct tips triggered by behavior, not time.</div>
              </div>
            </div>
            <div class="item">
              <div class="bullet" aria-hidden="true">üì¨</div>
              <div>
                <strong>Lifecycle automation</strong>
                <div style="opacity:.75">Personalized nudges via email, Slack, and in‚Äëapp messaging close gaps.</div>
              </div>
            </div>
            <div class="item">
              <div class="bullet" aria-hidden="true">üìà</div>
              <div>
                <strong>Activation dashboard</strong>
                <div style="opacity:.75">Cohort trends, health scores, and SLA alerts in one place.</div>
              </div>
            </div>
          </div>
        </div>
        <div class="card panel" role="img" aria-label="Onboarding journey diagram">
          <svg viewBox="0 0 680 380" width="100%" xmlns="http://www.w3.org/2000/svg" style="display:block">
            <defs>
              <linearGradient id="p1" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#4f46e5"/>
                <stop offset="1" stop-color="#06b6d4"/>
              </linearGradient>
              <filter id="f1" x="-20%" y="-20%" width="140%" height="140%">
                <feDropShadow dx="0" dy="3" stdDeviation="6" flood-color="rgba(0,0,0,.35)"/>
              </filter>
            </defs>
            <rect x="14" y="14" width="652" height="352" rx="16" fill="rgba(2,6,23,.25)" stroke="rgba(99,102,241,.35)"/>
            <g filter="url(#f1)" stroke="url(#p1)" stroke-width="2.5" fill="none" stroke-linecap="round">
              <path d="M80 220 C 160 120, 260 120, 340 220 S 520 320, 600 220"/>
            </g>
            <g fill="#0b1225" stroke="url(#p1)" stroke-width="1.5">
              <rect x="70" y="190" rx="10" width="110" height="60"/>
              <rect x="220" y="110" rx="10" width="120" height="60"/>
              <rect x="370" y="190" rx="10" width="120" height="60"/>
              <rect x="520" y="110" rx="10" width="120" height="60"/>
            </g>
            <g font-size="12" fill="#c7d2fe" text-anchor="middle">
              <text x="125" y="223">Sign Up</text>
              <text x="125" y="241">+ First Event</text>
              <text x="280" y="144">Checklist Started</text>
              <text x="430" y="222">Key Feature Used</text>
              <text x="580" y="144">Invite Team</text>
            </g>
            <g stroke="#22d3ee" stroke-width="1.8" marker-end="url(#arrow)">
              <defs>
                <marker id="arrow" markerWidth="8" markerHeight="8" refX="5" refY="4" orient="auto" markerUnits="strokeWidth">
                  <path d="M0,0 L0,8 L8,4 z" fill="#22d3ee" />
                </marker>
              </defs>
              <path d="M180 220 L220 160"/>
              <path d="M340 170 L370 210"/>
              <path d="M490 220 L520 160"/>
            </g>
          </svg>
        </div>
      </div>
    </section>

    <section class="container section reveal-on-scroll" aria-labelledby="testimonial-heading">
      <h2 id="testimonial-heading">Testimonial</h2>
      <div class="quote">
        <div class="avatar" aria-hidden="true">AM</div>
        <blockquote>
          <div class="stars" aria-hidden="true">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p style="margin:6px 0 8px; font-size: 16px;">
            ‚ÄúWe finally have a single, trusted view of activation. Automations nudged users at the right moments, and our team focuses on strategic work. The results spoke for themselves within weeks.‚Äù
          </p>
          <cite style="opacity:.8; font-style: normal; font-weight: 600;">Alex Morgan ‚Äî VP Growth, XYZ Corp</cite>
        </blockquote>
      </div>
    </section>

    <section class="container section reveal-on-scroll">
      <h2>What Changed</h2>
      <div class="before-after" style="margin-top:10px;">
        <div class="card panel">
          <div class="badge warn">Operational</div>
          <ul style="margin:10px 0 0 16px; padding:0 0 0 6px;">
            <li>Weekly activation reviews with shared definitions</li>
            <li>Risk‚Äëbased playbooks for CSM focus</li>
            <li>Self‚Äëserve setup checklists for new workspaces</li>
          </ul>
        </div>
        <div class="card panel">
          <div class="badge ok">Impact</div>
          <ul style="margin:10px 0 0 16px; padding:0 0 0 6px;">
            <li>47% increase in activation rate</li>
            <li>28% fewer week‚Äëone support tickets</li>
            <li>3.2√ó ROI in the first year</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="cta container reveal-on-scroll" id="contact">
      <div class="card panel" style="text-align:center;">
        <div class="badge ok">Let‚Äôs Do This</div>
        <h3>Ready to replicate XYZ Corp‚Äôs results?</h3>
        <p class="lead" style="margin:0 auto; max-width: 720px;">We‚Äôll assess your activation milestones, instrument the right events, and deploy high‚Äëimpact automations in weeks ‚Äî not quarters.</p>
        <div class="actions" style="margin-top:16px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
          <a class="btn" href="#" onclick="alert('Thanks! We\'ll be in touch.'); return false;">Request a Walkthrough</a>
          <a class="btn-outline" href="#" onclick="window.print(); return false;">Save as PDF</a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    ¬© <span id="year"></span> Case Study ‚Äî XYZ Corp. Metrics shown are illustrative of the engagement outcomes.
  </footer>

  <script>
    // Theme: honor saved preference or system, toggle with button
    (function() {
      const root = document.documentElement;
      const saved = localStorage.getItem('theme');
      const isDarkPreferred = window.matchMedia('(prefers-color-scheme: dark)').matches;
      function setTheme(t) { root.setAttribute('data-theme', t); localStorage.setItem('theme', t); }
      if (saved) root.setAttribute('data-theme', saved);
      else root.setAttribute('data-theme', isDarkPreferred ? 'dark' : 'light');
      document.getElementById('themeToggle').addEventListener('click', () => {
        const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        setTheme(next);
      });
    })();

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Reveal-on-scroll + counters
    (function() {
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const els = Array.from(document.querySelectorAll('.reveal-on-scroll'));
      const counters = Array.from(document.querySelectorAll('.counter'));

      function formatValue(v, decimals) {
        return Number(v).toLocaleString(undefined, { maximumFractionDigits: decimals, minimumFractionDigits: decimals });
      }

      function animateCounter(el) {
        const target = parseFloat(el.getAttribute('data-target'));
        const suffix = el.getAttribute('data-suffix') || '';
        const decimals = parseInt(el.getAttribute('data-decimals') || '0', 10);
        if (!isFinite(target)) return;
        if (prefersReduced) { el.textContent = formatValue(target, decimals) + suffix; return; }

        const duration = 1200 + Math.random()*600;
        const start = performance.now();
        const from = 0;
        function tick(now) {
          const p = Math.min(1, (now - start) / duration);
          const eased = 1 - Math.pow(1 - p, 3);
          const current = from + (target - from) * eased;
          el.textContent = formatValue(current, decimals) + suffix;
          if (p < 1) requestAnimationFrame(tick); else el.textContent = formatValue(target, decimals) + suffix;
        }
        requestAnimationFrame(tick);
      }

      if ('IntersectionObserver' in window) {
        const io = new IntersectionObserver((entries, obs) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('revealed');
              if (entry.target.classList.contains('kpis')) counters.forEach(animateCounter);
              obs.unobserve(entry.target);
            }
          });
        }, { threshold: 0.15 });
        els.forEach(el => io.observe(el));
      } else {
        // Fallback
        els.forEach(el => el.classList.add('revealed'));
        counters.forEach(animateCounter);
      }
    })();
  </script>
</body>
</html>