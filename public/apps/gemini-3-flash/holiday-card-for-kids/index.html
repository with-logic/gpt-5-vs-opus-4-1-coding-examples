<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magical Holiday Card</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Sniglet:wght@400;800&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Sniglet', cursive;
            background: #0f172a;
        }
        .font-fredoka { font-family: 'Fredoka One', cursive; }
        .canvas-bg {
            background: linear-gradient(to bottom, #1e3a8a, #3b82f6, #93c5fd);
            height: 100vh;
            width: 100vw;
            position: relative;
            overflow: hidden;
        }
        .snow-ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 150px;
            background: white;
            border-top-left-radius: 50% 20px;
            border-top-right-radius: 50% 20px;
            box-shadow: 0 -10px 20px rgba(255, 255, 255, 0.5);
        }
        .sticker-tray {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 20px;
            border-radius: 40px;
            display: flex;
            gap: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(59, 130, 246, 0.2);
            z-index: 100;
            border: 4px solid #3b82f6;
            max-width: 95vw;
        }
        .clear-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(239, 68, 68, 0.8);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            z-index: 100;
            font-weight: bold;
            border: 2px solid white;
            transition: all 0.2s;
        }
        .clear-btn:hover { background: #ef4444; transform: scale(1.1); }
        .sticker-item {
            width: 65px;
            height: 75px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            user-select: none;
            flex-shrink: 0;
        }
        .sticker-item:hover {
            transform: scale(1.2) rotate(5deg);
        }
        .placed-sticker {
            position: absolute;
            cursor: move;
            touch-action: none;
        }
        .holiday-text {
            position: absolute;
            top: 40px;
            width: 100%;
            text-align: center;
            color: white;
            text-shadow: 3px 3px 0px #ef4444, 6px 6px 0px rgba(0,0,0,0.1);
            font-size: 4rem;
            pointer-events: none;
            z-index: 10;
        }
        @media (max-width: 640px) {
            .holiday-text { font-size: 2.5rem; }
            .sticker-tray { width: 90%; overflow-x: auto; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const { motion, AnimatePresence } = Motion;

        // --- Audio Context for Fun Sounds ---
        const playSound = (type) => {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            
            osc.connect(gain);
            gain.connect(ctx.destination);
            
            const now = ctx.currentTime;
            
            if (type === 'pop') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(400, now);
                osc.frequency.exponentialRampToValueAtTime(800, now + 0.1);
                gain.gain.setValueAtTime(0.3, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                osc.start(now);
                osc.stop(now + 0.1);
            } else if (type === 'jingle') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(880, now);
                osc.frequency.exponentialRampToValueAtTime(1760, now + 0.05);
                osc.frequency.exponentialRampToValueAtTime(1320, now + 0.1);
                gain.gain.setValueAtTime(0.2, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.2);
                osc.start(now);
                osc.stop(now + 0.2);
            } else if (type === 'drop') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(200, now);
                osc.frequency.exponentialRampToValueAtTime(100, now + 0.2);
                gain.gain.setValueAtTime(0.5, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.2);
                osc.start(now);
                osc.stop(now + 0.2);
            }
        };

        const STICKER_DATA = [
            { id: 'santa', emoji: 'üéÖ', name: 'Santa' },
            { id: 'tree', emoji: 'üéÑ', name: 'Christmas Tree' },
            { id: 'reindeer', emoji: 'ü¶å', name: 'Rudolph' },
            { id: 'snowman', emoji: '‚òÉÔ∏è', name: 'Snowman' },
            { id: 'gift', emoji: 'üéÅ', name: 'Present' },
            { id: 'star', emoji: '‚≠ê', name: 'Star' },
            { id: 'cookie', emoji: 'üç™', name: 'Cookie' },
            { id: 'candy', emoji: 'üç≠', name: 'Candy' },
            { id: 'bell', emoji: 'üîî', name: 'Bell' },
            { id: 'penguin', emoji: 'üêß', name: 'Penguin' },
        ];

        const Snowfall = () => {
            const snowflakes = useMemo(() => {
                return Array.from({ length: 50 }).map((_, i) => ({
                    id: i,
                    left: Math.random() * 100 + '%',
                    duration: Math.random() * 5 + 5,
                    delay: Math.random() * 5,
                    size: Math.random() * 10 + 5,
                    opacity: Math.random() * 0.5 + 0.3
                }));
            }, []);

            return (
                <div className="absolute inset-0 pointer-events-none overflow-hidden">
                    {snowflakes.map(snow => (
                        <motion.div
                            key={snow.id}
                            initial={{ y: -20, opacity: 0 }}
                            animate={{ 
                                y: '100vh',
                                opacity: [0, snow.opacity, snow.opacity, 0],
                                x: ['-20px', '20px', '-20px']
                            }}
                            transition={{
                                y: { duration: snow.duration, repeat: Infinity, ease: "linear", delay: snow.delay },
                                opacity: { duration: snow.duration, repeat: Infinity, ease: "linear", delay: snow.delay },
                                x: { duration: 2, repeat: Infinity, ease: "easeInOut" }
                            }}
                            style={{
                                position: 'absolute',
                                left: snow.left,
                                width: snow.size,
                                height: snow.size,
                                backgroundColor: 'white',
                                borderRadius: '50%',
                                filter: 'blur(1px)',
                                zIndex: 5
                            }}
                        />
                    ))}
                </div>
            );
        };

        const App = () => {
            const [placedStickers, setPlacedStickers] = useState([
                { id: 'default-tree', emoji: 'üéÑ', x: '50%', y: '60%', size: 120 },
                { id: 'default-santa', emoji: 'üéÖ', x: '30%', y: '70%', size: 100 },
                { id: 'default-snowman', emoji: '‚òÉÔ∏è', x: '70%', y: '75%', size: 90 },
            ]);

            const addSticker = (emoji) => {
                const newSticker = {
                    id: Date.now(),
                    emoji,
                    x: (Math.random() * 60 + 20) + '%',
                    y: (Math.random() * 40 + 30) + '%',
                    size: 80
                };
                setPlacedStickers([...placedStickers, newSticker]);
                playSound('pop');
            };

            const removeSticker = (id) => {
                setPlacedStickers(placedStickers.filter(s => s.id !== id));
                playSound('drop');
            };

            return (
                <div className="canvas-bg">
                    <Snowfall />
                    
                    <motion.h1 
                        className="holiday-text font-fredoka"
                        initial={{ y: -100 }}
                        animate={{ y: 0 }}
                        transition={{ type: 'spring', damping: 10 }}
                    >
                        Happy Holidays!
                    </motion.h1>

                    <motion.button 
                        className="clear-btn font-fredoka shadow-lg"
                        whileHover={{ scale: 1.1 }}
                        whileTap={{ scale: 0.9 }}
                        onClick={() => {
                            setPlacedStickers([]);
                            playSound('drop');
                        }}
                    >
                        üóëÔ∏è Clear Card
                    </motion.button>

                    <div className="snow-ground"></div>

                    {/* Card Canvas */}
                    <div className="absolute inset-0 overflow-hidden">
                        {placedStickers.map((sticker) => (
                            <motion.div
                                key={sticker.id}
                                drag
                                dragMomentum={false}
                                onDragStart={() => playSound('pop')}
                                className="placed-sticker select-none"
                                style={{ 
                                    left: sticker.x, 
                                    top: sticker.y,
                                    fontSize: sticker.size + 'px',
                                    zIndex: 50
                                }}
                                whileHover={{ scale: 1.1 }}
                                whileTap={{ scale: 0.9, cursor: 'grabbing' }}
                                onDoubleClick={() => removeSticker(sticker.id)}
                            >
                                {sticker.emoji}
                            </motion.div>
                        ))}
                    </div>

                    {/* Sticker Tray */}
                    <motion.div 
                        className="sticker-tray"
                        initial={{ y: 150 }}
                        animate={{ y: 0 }}
                        transition={{ delay: 0.5, type: 'spring' }}
                    >
                        {STICKER_DATA.map((item) => (
                            <div 
                                key={item.id} 
                                className="sticker-item flex flex-col items-center justify-center bg-blue-50 rounded-2xl p-2 hover:bg-yellow-100 border-2 border-transparent hover:border-yellow-400"
                                onClick={() => addSticker(item.emoji)}
                            >
                                <span style={{ fontSize: '30px' }}>{item.emoji}</span>
                                <span className="text-[10px] font-bold text-blue-800 uppercase">{item.name}</span>
                            </div>
                        ))}
                    </motion.div>

                    {/* Instructions */}
                    <div className="absolute top-4 left-4 text-white opacity-60 text-sm pointer-events-none">
                        <p>‚ú® Tap to add stickers</p>
                        <p>‚ú® Drag them around</p>
                        <p>‚ú® Double-tap to remove</p>
                    </div>

                    {/* Floating Decorative Elements */}
                    <div className="absolute top-10 right-10">
                        <motion.div
                            animate={{ rotate: 360 }}
                            transition={{ duration: 20, repeat: Infinity, ease: "linear" }}
                            className="text-6xl opacity-20"
                        >
                            ‚ùÑÔ∏è
                        </motion.div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
