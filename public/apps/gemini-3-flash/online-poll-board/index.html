<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Poll Board | Vote & See Results</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Plus+Jakarta+Sans', sans-serif;
            background-color: #f8fafc;
            background-image: radial-gradient(#e2e8f0 0.5px, transparent 0.5px);
            background-size: 24px 24px;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .poll-option-transition {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .progress-bar-fill {
            transition: width 1s cubic-bezier(0.65, 0, 0.35, 1);
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-in {
            animation: slideIn 0.4s ease-out forwards;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#ec4899',
                        accent: '#8b5cf6',
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const INITIAL_POLLS = [
            {
                id: 1,
                question: "What's your favorite coding language?",
                description: "Choose the one you enjoy working with the most in 2026!",
                options: [
                    { id: 'a', text: 'TypeScript', votes: 124 },
                    { id: 'b', text: 'Rust', votes: 89 },
                    { id: 'c', text: 'Python', votes: 156 },
                    { id: 'd', text: 'Go', votes: 42 }
                ],
                totalVotes: 411,
                voted: false,
                category: "Technology"
            },
            {
                id: 2,
                question: "Best remote work setup?",
                description: "Where do you feel most productive during the day?",
                options: [
                    { id: 'a', text: 'Dedicated Home Office', votes: 210 },
                    { id: 'b', text: 'Co-working Space', votes: 45 },
                    { id: 'c', text: 'Digital Nomad / Coffee Shops', votes: 67 },
                    { id: 'd', text: 'Hybrid Office', votes: 112 }
                ],
                totalVotes: 434,
                voted: false,
                category: "Lifestyle"
            },
            {
                id: 3,
                question: "Future of AI in Software Engineering?",
                description: "How do you see AI affecting our roles in the next 5 years?",
                options: [
                    { id: 'a', text: 'Full Automation', votes: 23 },
                    { id: 'b', text: 'Augmented Productivity', votes: 342 },
                    { id: 'c', text: 'Minimal Impact', votes: 15 },
                    { id: 'd', text: 'Complete Paradigm Shift', votes: 98 }
                ],
                totalVotes: 478,
                voted: false,
                category: "Technology"
            }
        ];

        const Icon = ({ name, className = "w-5 h-5" }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const PollCard = ({ poll, onVote }) => {
            const [selectedOption, setSelectedOption] = useState(null);
            const [isVoting, setIsVoting] = useState(false);

            const handleVote = (optionId) => {
                if (poll.voted) return;
                setIsVoting(true);
                // Simulate network delay
                setTimeout(() => {
                    onVote(poll.id, optionId);
                    setIsVoting(false);
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ['#6366f1', '#ec4899', '#8b5cf6']
                    });
                }, 600);
            };

            return (
                <div className="glass-card rounded-3xl p-6 shadow-xl shadow-slate-200/50 flex flex-col h-full animate-slide-in">
                    <div className="flex justify-between items-start mb-4">
                        <span className="px-3 py-1 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-600">
                            {poll.category}
                        </span>
                        {poll.voted && (
                            <span className="flex items-center text-green-500 text-sm font-medium">
                                <Icon name="check-circle-2" className="w-4 h-4 mr-1" />
                                Voted
                            </span>
                        )}
                    </div>
                    
                    <h3 className="text-xl font-bold text-slate-800 mb-2 leading-tight">
                        {poll.question}
                    </h3>
                    <p className="text-slate-500 text-sm mb-6">
                        {poll.description}
                    </p>

                    <div className="space-y-3 flex-grow">
                        {poll.options.map((option) => {
                            const percentage = poll.totalVotes > 0 
                                ? Math.round((option.votes / poll.totalVotes) * 100) 
                                : 0;
                            
                            return (
                                <div key={option.id} className="relative">
                                    {!poll.voted ? (
                                        <button
                                            onClick={() => handleVote(option.id)}
                                            disabled={isVoting}
                                            className={`w-full text-left p-4 rounded-xl border-2 poll-option-transition group
                                                ${isVoting ? 'opacity-50 cursor-not-allowed' : 'hover:border-indigo-400 hover:bg-indigo-50'}
                                                border-slate-100 bg-white shadow-sm`}
                                        >
                                            <div className="flex justify-between items-center">
                                                <span className="font-medium text-slate-700 group-hover:text-indigo-700">
                                                    {option.text}
                                                </span>
                                                <Icon name="chevron-right" className="w-4 h-4 text-slate-300 group-hover:text-indigo-400" />
                                            </div>
                                        </button>
                                    ) : (
                                        <div className="bg-white rounded-xl border border-slate-100 p-4 overflow-hidden relative">
                                            <div 
                                                className="absolute left-0 top-0 bottom-0 bg-indigo-50 progress-bar-fill" 
                                                style={{ width: `${percentage}%` }}
                                            />
                                            <div className="relative flex justify-between items-center">
                                                <span className="font-semibold text-slate-700">{option.text}</span>
                                                <div className="text-right">
                                                    <span className="text-indigo-600 font-bold">{percentage}%</span>
                                                    <span className="text-slate-400 text-xs ml-2">({option.votes})</span>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            );
                        })}
                    </div>

                    <div className="mt-6 pt-6 border-t border-slate-100 flex justify-between items-center">
                        <div className="flex items-center text-slate-400 text-xs">
                            <Icon name="users" className="w-4 h-4 mr-1" />
                            {poll.totalVotes.toLocaleString()} votes
                        </div>
                        <button className="text-slate-400 hover:text-indigo-500 transition-colors">
                            <Icon name="share-2" className="w-4 h-4" />
                        </button>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [polls, setPolls] = useState(INITIAL_POLLS);
            const [filter, setFilter] = useState('All');
            const [searchQuery, setSearchQuery] = useState('');
            const [isAddingPoll, setIsAddingPoll] = useState(false);

            const categories = ['All', ...new Set(polls.map(p => p.category))];

            const filteredPolls = useMemo(() => {
                return polls.filter(poll => {
                    const matchesFilter = filter === 'All' || poll.category === filter;
                    const matchesSearch = poll.question.toLowerCase().includes(searchQuery.toLowerCase());
                    return matchesFilter && matchesSearch;
                });
            }, [polls, filter, searchQuery]);

            const handleVote = (pollId, optionId) => {
                setPolls(prevPolls => prevPolls.map(poll => {
                    if (poll.id === pollId) {
                        const newOptions = poll.options.map(opt => 
                            opt.id === optionId ? { ...opt, votes: opt.votes + 1 } : opt
                        );
                        return {
                            ...poll,
                            options: newOptions,
                            totalVotes: poll.totalVotes + 1,
                            voted: true
                        };
                    }
                    return poll;
                }));
            };

            const addNewPoll = (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const question = formData.get('question');
                const category = formData.get('category');
                const optionsStr = formData.get('options');
                
                if (!question || !category || !optionsStr) return;

                const options = optionsStr.split(',').map((opt, idx) => ({
                    id: String.fromCharCode(97 + idx),
                    text: opt.trim(),
                    votes: 0
                }));

                const newPoll = {
                    id: Date.now(),
                    question,
                    description: "User submitted poll",
                    options,
                    totalVotes: 0,
                    voted: false,
                    category
                };

                setPolls([newPoll, ...polls]);
                setIsAddingPoll(false);
            };

            return (
                <div className="min-h-screen pb-20">
                    {/* Header */}
                    <header className="sticky top-0 z-10 glass-card border-b border-slate-200">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between">
                            <div className="flex items-center space-x-2">
                                <div className="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-indigo-200">
                                    <Icon name="bar-chart-3" className="w-6 h-6" />
                                </div>
                                <h1 className="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600">
                                    PollBoard
                                </h1>
                            </div>
                            
                            <div className="hidden md:flex items-center bg-slate-100 rounded-2xl px-4 py-2 w-96">
                                <Icon name="search" className="w-4 h-4 text-slate-400 mr-2" />
                                <input 
                                    type="text" 
                                    placeholder="Search polls..." 
                                    className="bg-transparent border-none outline-none text-sm w-full"
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                />
                            </div>

                            <button 
                                onClick={() => setIsAddingPoll(true)}
                                className="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-2xl font-semibold transition-all shadow-md hover:shadow-indigo-200 flex items-center"
                            >
                                <Icon name="plus" className="w-4 h-4 mr-2" />
                                <span className="hidden sm:inline">Create Poll</span>
                            </button>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-12">
                        {/* Welcome Section */}
                        <div className="mb-12 text-center md:text-left">
                            <h2 className="text-4xl font-extrabold text-slate-900 mb-4">
                                Discover what the world thinks.
                            </h2>
                            <p className="text-slate-500 text-lg max-w-2xl">
                                Join our community of curious minds. Vote on trending topics or create your own poll to start a conversation.
                            </p>
                        </div>

                        {/* Filters */}
                        <div className="flex flex-wrap items-center gap-3 mb-8">
                            {categories.map(cat => (
                                <button
                                    key={cat}
                                    onClick={() => setFilter(cat)}
                                    className={`px-5 py-2 rounded-2xl text-sm font-semibold transition-all
                                        ${filter === cat 
                                            ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-100' 
                                            : 'bg-white text-slate-600 hover:bg-slate-50 border border-slate-200'}`}
                                >
                                    {cat}
                                </button>
                            ))}
                        </div>

                        {/* Poll Grid */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {filteredPolls.map(poll => (
                                <PollCard key={poll.id} poll={poll} onVote={handleVote} />
                            ))}
                            {filteredPolls.length === 0 && (
                                <div className="col-span-full py-20 text-center bg-white rounded-3xl border-2 border-dashed border-slate-200">
                                    <Icon name="search-x" className="w-12 h-12 text-slate-300 mx-auto mb-4" />
                                    <p className="text-slate-500 font-medium text-lg">No polls found matching your criteria.</p>
                                </div>
                            )}
                        </div>
                    </main>

                    {/* Add Poll Modal */}
                    {isAddingPoll && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
                            <div className="absolute inset-0 bg-slate-900/40 backdrop-blur-sm" onClick={() => setIsAddingPoll(false)}></div>
                            <div className="relative glass-card bg-white rounded-3xl p-8 w-full max-w-lg shadow-2xl animate-slide-in">
                                <div className="flex justify-between items-center mb-6">
                                    <h3 className="text-2xl font-bold text-slate-800">Create New Poll</h3>
                                    <button onClick={() => setIsAddingPoll(false)} className="text-slate-400 hover:text-slate-600">
                                        <Icon name="x" className="w-6 h-6" />
                                    </button>
                                </div>
                                <form onSubmit={addNewPoll} className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-semibold text-slate-700 mb-1">Question</label>
                                        <input 
                                            name="question"
                                            required
                                            placeholder="What would you like to ask?"
                                            className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-semibold text-slate-700 mb-1">Category</label>
                                        <input 
                                            name="category"
                                            required
                                            placeholder="e.g. Technology, Food, Travel"
                                            className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-semibold text-slate-700 mb-1">Options (comma separated)</label>
                                        <input 
                                            name="options"
                                            required
                                            placeholder="Option 1, Option 2, Option 3"
                                            className="w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"
                                        />
                                    </div>
                                    <button 
                                        type="submit"
                                        className="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-4 rounded-xl font-bold transition-all shadow-lg hover:shadow-indigo-200 mt-4"
                                    >
                                        Publish Poll
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
