<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InsightHub | Event Feedback Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- Icons ---
        const IconSearch = () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>;
        const IconChevronUp = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m18 15-6-6-6 6"/></svg>;
        const IconChevronDown = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m6 9 6 6 6-6"/></svg>;
        const IconSparkles = () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-indigo-500"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M3 5h4"/><path d="M21 17v4"/><path d="M19 19h4"/></svg>;
        const IconX = () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>;
        const IconStar = ({ filled }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill={filled ? "#f59e0b" : "none"} stroke={filled ? "#f59e0b" : "currentColor"} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
        );

        // --- Mock Data Generation ---
        const EVENTS = ["Global Tech Summit", "Leadership Forum 2026", "UX/UI Design Intensive", "Cloud Architecture Expo", "Digital Marketing Week", "Future of AI Workshop"];
        const NAMES = ["Sarah Johnson", "Michael Chen", "Emma Rodriguez", "David Smith", "Lisa Wang", "James Wilson", "Anna Muller", "Robert Taylor", "Sophie Martin", "Kevin Park", "Elena Rossi", "Thomas Brown", "Olivia Garcia", "Lucas Meyer", "Zoe Wright"];
        const FEEDBACK_SAMPLES = [
            "The keynote session was incredibly insightful. I appreciated the practical examples shared by the speakers. The venue was also excellent.",
            "Overall a well-organized event. However, the breakout sessions were a bit too short for the depth of the topics. More networking time would be appreciated.",
            "Great energy and fantastic speakers! The catering was a bit slow, but the content more than made up for it. Can't wait for next year.",
            "Very informative. I especially liked the hands-on workshop on the second day. It gave me real-world skills I can apply immediately.",
            "The event exceeded my expectations. The networking opportunities were top-notch and I met several potential collaborators.",
            "Good content, but the Wi-Fi at the venue was quite spotty, which made following along with the digital materials difficult.",
            "I found the panels to be very diverse and thought-provoking. A bit more focus on emerging markets would have been nice.",
            "Superb organization and high-quality production. The interactive elements kept everyone engaged throughout the day.",
            "The presentation materials were shared promptly, which was helpful. I wish there were more physical seating during the networking breaks.",
            "A must-attend for anyone in the industry. The depth of knowledge presented by the AI experts was truly world-class."
        ];

        const generateData = () => {
            const data = [];
            const today = new Date();
            for (let i = 0; i < 30; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() - Math.floor(Math.random() * 60));
                data.push({
                    id: i + 1,
                    date: date.toISOString().split('T')[0],
                    eventName: EVENTS[Math.floor(Math.random() * EVENTS.length)],
                    participantName: NAMES[Math.floor(Math.random() * NAMES.length)],
                    rating: Math.floor(Math.random() * 3) + 3, // 3-5 range for realistic "good" business event
                    feedback: FEEDBACK_SAMPLES[Math.floor(Math.random() * FEEDBACK_SAMPLES.length)]
                });
            }
            return data.sort((a, b) => new Date(b.date) - new Date(a.date));
        };

        // --- Components ---

        const RatingBadge = ({ rating }) => {
            const getColor = () => {
                if (rating >= 4.5) return "bg-emerald-100 text-emerald-700 border-emerald-200";
                if (rating >= 4) return "bg-blue-100 text-blue-700 border-blue-200";
                return "bg-amber-100 text-amber-700 border-amber-200";
            };
            return (
                <div className={`flex items-center gap-1 px-2 py-0.5 rounded-full border text-xs font-semibold ${getColor()}`}>
                    {rating.toFixed(1)} <IconStar filled />
                </div>
            );
        };

        const Dashboard = () => {
            const [data] = useState(generateData());
            const [searchTerm, setSearchTerm] = useState("");
            const [sortConfig, setSortConfig] = useState({ key: 'date', direction: 'desc' });
            const [showSummary, setShowSummary] = useState(true);

            const filteredData = useMemo(() => {
                return data.filter(item => 
                    item.eventName.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.participantName.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.feedback.toLowerCase().includes(searchTerm.toLowerCase())
                );
            }, [data, searchTerm]);

            const sortedData = useMemo(() => {
                const sortableItems = [...filteredData];
                if (sortConfig.key) {
                    sortableItems.sort((a, b) => {
                        if (a[sortConfig.key] < b[sortConfig.key]) {
                            return sortConfig.direction === 'asc' ? -1 : 1;
                        }
                        if (a[sortConfig.key] > b[sortConfig.key]) {
                            return sortConfig.direction === 'asc' ? 1 : -1;
                        }
                        return 0;
                    });
                }
                return sortableItems;
            }, [filteredData, sortConfig]);

            const requestSort = (key) => {
                let direction = 'asc';
                if (sortConfig.key === key && sortConfig.direction === 'asc') {
                    direction = 'desc';
                }
                setSortConfig({ key, direction });
            };

            const stats = useMemo(() => {
                const avg = data.reduce((acc, curr) => acc + curr.rating, 0) / data.length;
                const topEvent = EVENTS.map(e => ({
                    name: e,
                    avg: data.filter(d => d.eventName === e).reduce((acc, curr) => acc + curr.rating, 0) / 
                         (data.filter(d => d.eventName === e).length || 1)
                })).sort((a, b) => b.avg - a.avg)[0];

                return { avg, topEvent };
            }, [data]);

            return (
                <div className="max-w-7xl mx-auto px-4 py-8 md:px-8">
                    {/* Header */}
                    <div className="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
                        <div>
                            <h1 className="text-3xl font-bold text-slate-900 tracking-tight">Event Feedback</h1>
                            <p className="text-slate-500 mt-1 font-medium">Analyze and manage participant submissions.</p>
                        </div>
                        <div className="flex items-center gap-3">
                            <div className="bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center">
                                <span className="text-xs font-bold text-slate-400 uppercase tracking-wider">Avg Rating</span>
                                <span className="text-xl font-bold text-indigo-600">{stats.avg.toFixed(1)}</span>
                            </div>
                            <div className="bg-white px-4 py-2 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center">
                                <span className="text-xs font-bold text-slate-400 uppercase tracking-wider">Submissions</span>
                                <span className="text-xl font-bold text-slate-800">{data.length}</span>
                            </div>
                        </div>
                    </div>

                    {/* AI Summary Section */}
                    {showSummary && (
                        <div className="mb-8 relative animate-fade-in">
                            <div className="bg-gradient-to-br from-indigo-50 to-white border border-indigo-100 rounded-2xl p-6 shadow-sm overflow-hidden">
                                <div className="absolute top-0 right-0 p-2">
                                    <button 
                                        onClick={() => setShowSummary(false)}
                                        className="p-1.5 text-indigo-400 hover:text-indigo-600 hover:bg-indigo-100/50 rounded-lg transition-colors"
                                    >
                                        <IconX />
                                    </button>
                                </div>
                                <div className="flex items-center gap-2 mb-4">
                                    <IconSparkles />
                                    <h2 className="text-indigo-900 font-bold text-lg">AI Insight Summary</h2>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div className="space-y-2">
                                        <p className="text-indigo-900/70 text-sm font-medium">Overall Sentiment</p>
                                        <p className="text-indigo-900 text-sm leading-relaxed">
                                            The sentiment across all 30 entries is <span className="font-bold text-indigo-700 uppercase">Highly Positive (87%)</span>. Key themes include "exceptional speaker quality" and "actionable insights."
                                        </p>
                                    </div>
                                    <div className="space-y-2">
                                        <p className="text-indigo-900/70 text-sm font-medium">Top Performing Event</p>
                                        <div className="p-3 bg-white/60 rounded-xl border border-indigo-100">
                                            <p className="text-sm font-bold text-indigo-800">{stats.topEvent.name}</p>
                                            <div className="flex items-center gap-2 mt-1">
                                                <RatingBadge rating={stats.topEvent.avg} />
                                                <span className="text-xs text-indigo-500">Average Score</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="space-y-2">
                                        <p className="text-indigo-900/70 text-sm font-medium">Primary Recommendations</p>
                                        <ul className="text-xs text-indigo-900/80 space-y-1.5 list-disc pl-4">
                                            <li>Extend breakout sessions in <span className="font-semibold italic">Digital Marketing Week</span>.</li>
                                            <li>Improve Wi-Fi infrastructure for <span className="font-semibold italic">Future of AI Workshop</span>.</li>
                                            <li>Increase catering capacity for peak lunch hours.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Controls & Table */}
                    <div className="bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden flex flex-col">
                        <div className="p-4 border-b border-slate-100 bg-slate-50/50 flex flex-col sm:flex-row justify-between items-center gap-4">
                            <div className="relative w-full sm:w-96">
                                <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400">
                                    <IconSearch />
                                </div>
                                <input
                                    type="text"
                                    placeholder="Search by event, name, or feedback..."
                                    className="block w-full pl-10 pr-3 py-2 border border-slate-200 rounded-xl leading-5 bg-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm transition-all"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                />
                            </div>
                            <div className="text-sm text-slate-500 font-medium">
                                Showing {sortedData.length} of {data.length} entries
                            </div>
                        </div>

                        <div className="overflow-x-auto custom-scrollbar">
                            <table className="w-full text-left border-collapse">
                                <thead>
                                    <tr className="bg-slate-50/80 text-slate-500 text-xs font-bold uppercase tracking-wider">
                                        {[
                                            { label: 'Date', key: 'date' },
                                            { label: 'Event Name', key: 'eventName' },
                                            { label: 'Participant', key: 'participantName' },
                                            { label: 'Rating', key: 'rating' },
                                            { label: 'Feedback', key: 'feedback' }
                                        ].map(col => (
                                            <th 
                                                key={col.key}
                                                className={`px-6 py-4 cursor-pointer hover:bg-slate-100 hover:text-indigo-600 transition-colors ${col.key === 'feedback' ? 'min-w-[400px]' : ''}`}
                                                onClick={() => requestSort(col.key)}
                                            >
                                                <div className="flex items-center gap-2">
                                                    {col.label}
                                                    {sortConfig.key === col.key ? (
                                                        sortConfig.direction === 'asc' ? <IconChevronUp /> : <IconChevronDown />
                                                    ) : (
                                                        <div className="opacity-0 group-hover:opacity-100 transition-opacity"><IconChevronDown /></div>
                                                    )}
                                                </div>
                                            </th>
                                        ))}
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-100 text-sm">
                                    {sortedData.length > 0 ? sortedData.map((row, idx) => (
                                        <tr key={row.id} className="hover:bg-slate-50/50 transition-colors group">
                                            <td className="px-6 py-4 whitespace-nowrap text-slate-500 tabular-nums">
                                                {new Date(row.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap">
                                                <span className="font-semibold text-slate-800">{row.eventName}</span>
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap text-slate-600">
                                                {row.participantName}
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap">
                                                <RatingBadge rating={row.rating} />
                                            </td>
                                            <td className="px-6 py-4">
                                                <p className="text-slate-600 leading-relaxed max-w-2xl">
                                                    {row.feedback}
                                                </p>
                                            </td>
                                        </tr>
                                    )) : (
                                        <tr>
                                            <td colSpan="5" className="px-6 py-12 text-center text-slate-400 font-medium italic">
                                                No results found matching your search criteria.
                                            </td>
                                        </tr>
                                    )}
                                </tbody>
                            </table>
                        </div>
                        <div className="px-6 py-4 bg-slate-50 border-t border-slate-100 text-center text-xs text-slate-400 font-medium">
                            &copy; 2026 InsightHub Solutions &bull; All data is simulated for demonstration purposes.
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            return (
                <div className="min-h-screen pb-20">
                    <Dashboard />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
