<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camping Gear Checklist</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Mountains+of+Christmas:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f0;
            background-image: url("https://www.transparenttextures.com/patterns/cubes.png");
        }
        .outdoor-font {
            font-family: 'Mountains of Christmas', cursive;
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #e5e7eb;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #059669;
            border-radius: 10px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const CATEGORIES = [
            { id: 'shelter', name: 'Shelter & Sleeping', icon: 'Home' },
            { id: 'cooking', name: 'Cooking & Food', icon: 'Coffee' },
            { id: 'clothing', name: 'Clothing', icon: 'Shirt' },
            { id: 'essentials', name: 'Safety & Tools', icon: 'ShieldCheck' },
            { id: 'personal', name: 'Personal Items', icon: 'User' },
            { id: 'misc', name: 'Miscellaneous', icon: 'Package' }
        ];

        const INITIAL_GEAR = [
            { id: 1, name: 'Tent (3-person)', weight: 2.5, unit: 'kg', packed: false, category: 'shelter' },
            { id: 2, name: 'Sleeping Bag', weight: 1.2, unit: 'kg', packed: false, category: 'shelter' },
            { id: 3, name: 'Camp Stove', weight: 0.5, unit: 'kg', packed: false, category: 'cooking' },
            { id: 4, name: 'First Aid Kit', weight: 0.4, unit: 'kg', packed: false, category: 'essentials' },
            { id: 5, name: 'Rain Jacket', weight: 0.3, unit: 'kg', packed: false, category: 'clothing' }
        ];

        const Icon = ({ name, size = 20, className = "" }) => {
            const LucideIcon = lucide[name];
            return LucideIcon ? <i data-lucide={name} className={className} style={{ width: size, height: size }}></i> : null;
        };

        const App = () => {
            const [lists, setLists] = useState(() => {
                const saved = localStorage.getItem('camping_lists');
                return saved ? JSON.parse(saved) : [{ id: 'default', name: 'Mountain Expedition 2026', items: INITIAL_GEAR }];
            });
            const [currentListId, setCurrentListId] = useState('default');
            const [isAddingItem, setIsAddingItem] = useState(false);
            const [newItem, setNewItem] = useState({ name: '', weight: '', unit: 'kg', category: 'shelter' });

            const currentList = useMemo(() => 
                lists.find(l => l.id === currentListId) || lists[0], 
                [lists, currentListId]
            );

            useEffect(() => {
                localStorage.setItem('camping_lists', JSON.stringify(lists));
                lucide.createIcons();
            }, [lists]);

            useEffect(() => {
                lucide.createIcons();
            }, [currentListId, isAddingItem]);

            const togglePacked = (itemId) => {
                setLists(prev => prev.map(list => {
                    if (list.id === currentListId) {
                        return {
                            ...list,
                            items: list.items.map(item => 
                                item.id === itemId ? { ...item, packed: !item.packed } : item
                            )
                        };
                    }
                    return list;
                }));
            };

            const addItem = (e) => {
                e.preventDefault();
                if (!newItem.name) return;

                const itemToAdd = {
                    id: Date.now(),
                    name: newItem.name,
                    weight: parseFloat(newItem.weight) || 0,
                    unit: newItem.unit,
                    category: newItem.category,
                    packed: false
                };

                setLists(prev => prev.map(list => {
                    if (list.id === currentListId) {
                        return { ...list, items: [...list.items, itemToAdd] };
                    }
                    return list;
                }));

                setNewItem({ name: '', weight: '', unit: 'kg', category: 'shelter' });
                setIsAddingItem(false);
            };

            const deleteItem = (itemId) => {
                setLists(prev => prev.map(list => {
                    if (list.id === currentListId) {
                        return { ...list, items: list.items.filter(i => i.id !== itemId) };
                    }
                    return list;
                }));
            };

            const createNewList = () => {
                const name = prompt("Enter list name:");
                if (!name) return;
                const newList = { id: Date.now().toString(), name, items: [] };
                setLists([...lists, newList]);
                setCurrentListId(newList.id);
            };

            const totalWeight = currentList.items.reduce((acc, item) => {
                // Simplified weight calculation, assuming all in kg for now or converting
                return acc + (item.unit === 'kg' ? item.weight : item.weight * 0.453592);
            }, 0).toFixed(2);

            const packedWeight = currentList.items
                .filter(i => i.packed)
                .reduce((acc, item) => acc + (item.unit === 'kg' ? item.weight : item.weight * 0.453592), 0)
                .toFixed(2);

            const progress = currentList.items.length > 0 
                ? Math.round((currentList.items.filter(i => i.packed).length / currentList.items.length) * 100) 
                : 0;

            return (
                <div className="min-h-screen pb-12">
                    {/* Header */}
                    <header className="bg-emerald-800 text-white py-8 px-4 shadow-lg mb-6 relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
                            <svg viewBox="0 0 100 100" preserveAspectRatio="none" className="w-full h-full">
                                <path d="M0 100 L20 40 L40 80 L60 20 L80 90 L100 30 L100 100 Z" fill="currentColor" />
                            </svg>
                        </div>
                        
                        <div className="max-w-4xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4 relative z-10">
                            <div>
                                <h1 className="text-4xl outdoor-font flex items-center gap-2 mb-1">
                                    <Icon name="Mountain" size={32} />
                                    Camping Gear Checklist
                                </h1>
                                <p className="text-emerald-100 flex items-center gap-2">
                                    <Icon name="Compass" size={16} />
                                    Plan your adventure, don't forget the essentials.
                                </p>
                            </div>
                            
                            <div className="flex gap-2">
                                <select 
                                    className="bg-emerald-700 border border-emerald-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-emerald-400"
                                    value={currentListId}
                                    onChange={(e) => setCurrentListId(e.target.value)}
                                >
                                    {lists.map(l => <option key={l.id} value={l.id}>{l.name}</option>)}
                                </select>
                                <button 
                                    onClick={createNewList}
                                    className="bg-amber-600 hover:bg-amber-500 p-2 rounded-lg transition-colors"
                                    title="New List"
                                >
                                    <Icon name="Plus" />
                                </button>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-4xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-6">
                        {/* Sidebar Stats */}
                        <div className="md:col-span-1 space-y-6">
                            <div className="glass-panel rounded-2xl p-6 shadow-md border-t-4 border-emerald-600">
                                <h2 className="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                                    <Icon name="BarChart3" className="text-emerald-600" />
                                    Trip Stats
                                </h2>
                                
                                <div className="space-y-4">
                                    <div>
                                        <div className="flex justify-between text-sm mb-1 font-medium">
                                            <span>Progress</span>
                                            <span>{progress}%</span>
                                        </div>
                                        <div className="w-full bg-gray-200 rounded-full h-2.5">
                                            <div className="bg-emerald-600 h-2.5 rounded-full transition-all duration-500" style={{ width: `${progress}%` }}></div>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-emerald-50 rounded-xl p-4 flex items-center justify-between">
                                        <div className="flex items-center gap-3">
                                            <div className="p-2 bg-emerald-100 rounded-lg text-emerald-700">
                                                <Icon name="Scale" />
                                            </div>
                                            <div>
                                                <p className="text-xs text-emerald-600 uppercase font-bold">Total Weight</p>
                                                <p className="text-xl font-bold text-emerald-900">{totalWeight} kg</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="bg-amber-50 rounded-xl p-4 flex items-center justify-between">
                                        <div className="flex items-center gap-3">
                                            <div className="p-2 bg-amber-100 rounded-lg text-amber-700">
                                                <Icon name="Backpack" />
                                            </div>
                                            <div>
                                                <p className="text-xs text-amber-600 uppercase font-bold">Packed</p>
                                                <p className="text-xl font-bold text-amber-900">{packedWeight} kg</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="text-center pt-2">
                                        <p className="text-xs text-gray-500 italic">
                                            "Leave nothing but footprints, take nothing but photos."
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <button 
                                onClick={() => setIsAddingItem(true)}
                                className="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-4 rounded-2xl shadow-lg transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2"
                            >
                                <Icon name="PlusCircle" />
                                Add New Gear
                            </button>
                        </div>

                        {/* Checklist */}
                        <div className="md:col-span-2 space-y-6">
                            {CATEGORIES.map(cat => {
                                const catItems = currentList.items.filter(i => i.category === cat.id);
                                if (catItems.length === 0 && !isAddingItem) return null;

                                return (
                                    <div key={cat.id} className="glass-panel rounded-2xl overflow-hidden shadow-sm border border-gray-100">
                                        <div className="bg-gray-50 px-5 py-3 border-b flex items-center gap-2 text-gray-700 font-bold">
                                            <Icon name={cat.icon} size={18} className="text-emerald-600" />
                                            {cat.name}
                                            <span className="ml-auto bg-gray-200 text-gray-600 text-xs px-2 py-1 rounded-full">
                                                {catItems.length} items
                                            </span>
                                        </div>
                                        <div className="divide-y divide-gray-50">
                                            {catItems.map(item => (
                                                <div key={item.id} className={`flex items-center gap-4 px-5 py-3 hover:bg-emerald-50 transition-colors group animate-fade-in`}>
                                                    <button 
                                                        onClick={() => togglePacked(item.id)}
                                                        className={`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all ${
                                                            item.packed 
                                                            ? 'bg-emerald-600 border-emerald-600 text-white' 
                                                            : 'bg-white border-gray-300 text-transparent'
                                                        }`}
                                                    >
                                                        <Icon name="Check" size={14} />
                                                    </button>
                                                    <div className="flex-1 min-w-0">
                                                        <h3 className={`font-medium transition-all ${item.packed ? 'text-gray-400 line-through' : 'text-gray-800'}`}>
                                                            {item.name}
                                                        </h3>
                                                        <div className="flex items-center gap-2 text-xs text-gray-500 mt-0.5">
                                                            <Icon name="Weight" size={12} />
                                                            {item.weight} {item.unit}
                                                        </div>
                                                    </div>
                                                    <button 
                                                        onClick={() => deleteItem(item.id)}
                                                        className="opacity-0 group-hover:opacity-100 p-2 text-red-300 hover:text-red-500 transition-all"
                                                    >
                                                        <Icon name="Trash2" size={18} />
                                                    </button>
                                                </div>
                                            ))}
                                            {catItems.length === 0 && (
                                                <div className="px-5 py-8 text-center text-gray-400 text-sm italic">
                                                    No items in this category.
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                );
                            })}

                            {currentList.items.length === 0 && !isAddingItem && (
                                <div className="text-center py-20 bg-white bg-opacity-50 rounded-3xl border-2 border-dashed border-gray-300">
                                    <div className="bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-400">
                                        <Icon name="Backpack" size={32} />
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-600">Your list is empty</h3>
                                    <p className="text-gray-400">Start adding gear for your next trip!</p>
                                    <button 
                                        onClick={() => setIsAddingItem(true)}
                                        className="mt-4 text-emerald-600 font-bold hover:underline"
                                    >
                                        + Add your first item
                                    </button>
                                </div>
                            )}
                        </div>
                    </main>

                    {/* Modal Overlay */}
                    {isAddingItem && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
                            <div className="bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-fade-in">
                                <div className="bg-emerald-800 text-white p-6 flex justify-between items-center">
                                    <h2 className="text-xl font-bold flex items-center gap-2">
                                        <Icon name="Tag" />
                                        Add New Gear
                                    </h2>
                                    <button onClick={() => setIsAddingItem(false)} className="hover:rotate-90 transition-transform">
                                        <Icon name="X" />
                                    </button>
                                </div>
                                
                                <form onSubmit={addItem} className="p-6 space-y-4">
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-1">Item Name</label>
                                        <input 
                                            autoFocus
                                            type="text" 
                                            placeholder="e.g. Water Filter"
                                            className="w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none"
                                            value={newItem.name}
                                            onChange={e => setNewItem({...newItem, name: e.target.value})}
                                            required
                                        />
                                    </div>
                                    
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-1">Weight</label>
                                            <input 
                                                type="number" 
                                                step="0.01"
                                                placeholder="0.00"
                                                className="w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none"
                                                value={newItem.weight}
                                                onChange={e => setNewItem({...newItem, weight: e.target.value})}
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-1">Unit</label>
                                            <select 
                                                className="w-full px-4 py-2 border rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none"
                                                value={newItem.unit}
                                                onChange={e => setNewItem({...newItem, unit: e.target.value})}
                                            >
                                                <option value="kg">kg</option>
                                                <option value="lb">lb</option>
                                                <option value="oz">oz</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-1">Category</label>
                                        <div className="grid grid-cols-2 gap-2">
                                            {CATEGORIES.map(cat => (
                                                <button
                                                    key={cat.id}
                                                    type="button"
                                                    onClick={() => setNewItem({...newItem, category: cat.id})}
                                                    className={`px-3 py-2 rounded-lg text-sm flex items-center gap-2 border transition-all ${
                                                        newItem.category === cat.id 
                                                        ? 'bg-emerald-100 border-emerald-500 text-emerald-800' 
                                                        : 'bg-white border-gray-200 text-gray-600 hover:border-emerald-200'
                                                    }`}
                                                >
                                                    <Icon name={cat.icon} size={14} />
                                                    {cat.name.split(' ')[0]}
                                                </button>
                                            ))}
                                        </div>
                                    </div>

                                    <button 
                                        type="submit"
                                        className="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-xl shadow-lg mt-4 transition-all"
                                    >
                                        Add Item to List
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <footer className="mt-12 text-center text-gray-500 text-sm">
                        <p>Â© 2026 Trailblazer Gear. Happy Trails!</p>
                        <div className="flex justify-center gap-4 mt-2">
                            <Icon name="Trees" className="text-emerald-300" />
                            <Icon name="Tent" className="text-amber-300" />
                            <Icon name="Flame" className="text-orange-300" />
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>