<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Event Feedback Dashboard</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=IBM+Plex+Mono:wght@500&display=swap');

    :root {
      --bg: #eef3f7;
      --panel: #ffffff;
      --ink: #1b2a37;
      --muted: #5f7384;
      --line: #d3dde5;
      --accent: #0f6c7a;
      --accent-soft: #d8eef1;
      --good: #1f7a46;
      --warn: #9f5d00;
      --radius-lg: 16px;
      --radius-md: 12px;
      --shadow: 0 10px 26px rgba(20, 44, 63, 0.09);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Manrope', 'Segoe UI', sans-serif;
      color: var(--ink);
      background:
        radial-gradient(circle at 0% 0%, #dce8f2 0%, transparent 32%),
        radial-gradient(circle at 100% 100%, #d8e6ef 0%, transparent 28%),
        linear-gradient(165deg, #edf3f8 0%, #e8eff6 55%, #e3ebf3 100%);
      padding: 28px;
    }

    .dashboard {
      max-width: 1220px;
      margin: 0 auto;
      display: grid;
      gap: 18px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
    }

    .header {
      padding: 18px 22px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(180deg, #f8fcff, #f4f9fd);
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    }

    .title {
      margin: 0;
      font-size: 1.45rem;
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    .subtitle {
      margin: 4px 0 0;
      color: var(--muted);
      font-size: 0.95rem;
    }

    .summary {
      padding: 16px 18px;
      border-left: 4px solid var(--accent);
      background: linear-gradient(130deg, var(--accent-soft), #f2fafb 66%);
      border-radius: var(--radius-md);
      margin: 16px 22px;
      position: relative;
      animation: slideDown 380ms ease;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-8px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .summary h2 {
      margin: 0 0 8px;
      font-size: 1rem;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      color: #0d4f59;
    }

    .summary p {
      margin: 0;
      line-height: 1.5;
      color: #214457;
      padding-right: 40px;
      font-size: 0.97rem;
    }

    .close-btn {
      position: absolute;
      right: 10px;
      top: 10px;
      border: none;
      background: #ffffffcc;
      color: #385266;
      width: 30px;
      height: 30px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      line-height: 1;
      transition: 160ms ease;
    }

    .close-btn:hover {
      background: #ffffff;
      color: #14384a;
      transform: translateY(-1px);
    }

    .toolbar {
      padding: 0 22px 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      align-items: center;
    }

    .search-wrap {
      position: relative;
      flex: 1 1 420px;
      max-width: 580px;
    }

    .search-input {
      width: 100%;
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 12px 14px 12px 42px;
      font-size: 0.95rem;
      font-family: inherit;
      color: var(--ink);
      background: #fff;
      transition: border-color 150ms ease, box-shadow 150ms ease;
    }

    .search-input:focus {
      outline: none;
      border-color: #82afbe;
      box-shadow: 0 0 0 4px #d8edf3;
    }

    .search-icon {
      position: absolute;
      left: 13px;
      top: 50%;
      transform: translateY(-50%);
      color: #7791a3;
      font-size: 1rem;
      pointer-events: none;
    }

    .meta-chip {
      border: 1px solid #c7d4de;
      padding: 9px 12px;
      border-radius: 11px;
      background: #f7fbff;
      color: #3f5768;
      font-size: 0.86rem;
      font-family: 'IBM Plex Mono', monospace;
    }

    .table-wrap {
      padding: 0 12px 14px;
      overflow: auto;
      border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    }

    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      min-width: 940px;
    }

    thead th {
      position: sticky;
      top: 0;
      z-index: 2;
      background: #f5f9fc;
      border-bottom: 1px solid var(--line);
      color: #314b5d;
      font-size: 0.83rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      font-weight: 700;
      padding: 12px 10px;
      text-align: left;
      cursor: pointer;
      user-select: none;
      transition: background 140ms ease;
      white-space: nowrap;
    }

    thead th:hover {
      background: #ecf4fa;
    }

    tbody td {
      border-bottom: 1px solid #e2eaf1;
      padding: 12px 10px;
      vertical-align: top;
      font-size: 0.92rem;
      color: #243948;
    }

    tbody tr:nth-child(even) {
      background: #fbfdff;
    }

    tbody tr:hover {
      background: #f2f8fd;
    }

    .col-date {
      width: 130px;
      white-space: nowrap;
      color: #476071;
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.84rem;
    }

    .col-event {
      width: 190px;
      font-weight: 700;
    }

    .col-participant {
      width: 190px;
    }

    .rating-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 54px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.84rem;
      font-weight: 700;
      letter-spacing: 0.01em;
      background: #eff4f9;
      color: #2f4c60;
      border: 1px solid #d5e0e9;
    }

    .rating-good { background: #e8f6ee; color: var(--good); border-color: #b7e3c7; }
    .rating-mid { background: #fff6e8; color: var(--warn); border-color: #f1d4a7; }
    .rating-low { background: #fdecec; color: #a44141; border-color: #f4baba; }

    .feedback-cell {
      line-height: 1.44;
      color: #334d61;
      max-width: 560px;
    }

    .sort {
      margin-left: 6px;
      opacity: 0.58;
      font-size: 0.78rem;
    }

    .sort.active {
      opacity: 1;
      color: var(--accent);
    }

    .empty {
      text-align: center;
      padding: 32px 16px;
      color: var(--muted);
      font-size: 0.95rem;
    }

    @media (max-width: 760px) {
      body {
        padding: 14px;
      }

      .header,
      .toolbar {
        padding-left: 14px;
        padding-right: 14px;
      }

      .summary {
        margin: 14px;
      }

      .title {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="dashboard panel">
    <div class="header">
      <div>
        <h1 class="title">Event Feedback Dashboard</h1>
        <p class="subtitle">Business view of participant submissions across events</p>
      </div>
      <div class="meta-chip" id="updatedChip">Records: 0</div>
    </div>

    <section class="summary" id="aiSummary">
      <button class="close-btn" id="closeSummary" aria-label="Close AI summary">&times;</button>
      <h2>AI Summary</h2>
      <p id="summaryText"></p>
    </section>

    <div class="toolbar">
      <label class="search-wrap" for="searchInput">
        <span class="search-icon">ðŸ”Ž</span>
        <input id="searchInput" class="search-input" type="text" placeholder="Search by date, event, participant, rating, or feedback keyword..." />
      </label>
      <div class="meta-chip" id="filteredChip">Showing: 0</div>
    </div>

    <div class="table-wrap">
      <table aria-label="Event feedback table">
        <thead>
          <tr>
            <th data-key="date">Date <span class="sort" data-sort-icon="date">â†•</span></th>
            <th data-key="eventName">Event Name <span class="sort" data-sort-icon="eventName">â†•</span></th>
            <th data-key="participantName">Participant Name <span class="sort" data-sort-icon="participantName">â†•</span></th>
            <th data-key="rating">Rating <span class="sort" data-sort-icon="rating">â†•</span></th>
            <th data-key="feedback">Feedback <span class="sort" data-sort-icon="feedback">â†•</span></th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
      <div class="empty" id="emptyState" hidden>No entries match your search.</div>
    </div>
  </div>

  <script>
    (() => {
      const tableBody = document.getElementById('tableBody');
      const searchInput = document.getElementById('searchInput');
      const filteredChip = document.getElementById('filteredChip');
      const updatedChip = document.getElementById('updatedChip');
      const summaryText = document.getElementById('summaryText');
      const emptyState = document.getElementById('emptyState');
      const aiSummary = document.getElementById('aiSummary');
      const closeSummary = document.getElementById('closeSummary');
      const headerCells = Array.from(document.querySelectorAll('thead th[data-key]'));
      const sortIcons = Array.from(document.querySelectorAll('[data-sort-icon]'));

      const firstNames = ['Avery', 'Jordan', 'Taylor', 'Morgan', 'Riley', 'Jamie', 'Casey', 'Drew', 'Kendall', 'Reese', 'Cameron', 'Alex', 'Skyler', 'Parker', 'Quinn'];
      const lastNames = ['Nguyen', 'Patel', 'Garcia', 'Smith', 'Wong', 'Kim', 'Martinez', 'Johnson', 'Brown', 'Lopez', 'Reed', 'Carter', 'Davis', 'Miller', 'Allen'];
      const events = [
        'Customer Success Summit',
        'Data Strategy Roundtable',
        'Annual Sales Kickoff',
        'Leadership Accelerator',
        'Product Roadmap Briefing',
        'Operations Excellence Forum',
        'Innovation Lab Demo Day',
        'Quarterly All-Hands',
        'Partner Enablement Workshop',
        'Risk & Compliance Seminar'
      ];
      const openings = [
        'The sessions were clear and well-paced',
        'I appreciated the practical examples shared by the speakers',
        'The event was organized professionally from start to finish',
        'The content was relevant to my day-to-day responsibilities',
        'I found the discussions engaging and useful for my team'
      ];
      const mids = [
        'The networking segment helped me connect with peers facing similar challenges',
        'A few topics could have used more real-world case studies and measurable outcomes',
        'The breakout format made it easier to focus on the areas most important to me',
        'I would have liked slightly more time for Q&A at the end of each session',
        'The facilitator kept the group focused and encouraged balanced participation'
      ];
      const closings = [
        'Overall, I left with actionable ideas that I can apply this quarter.',
        'I would recommend this event to colleagues working across cross-functional teams.',
        'With minor timing adjustments, this could be an excellent recurring program.',
        'Thank you for a strong event experience and clear follow-up materials.',
        'I am looking forward to the next edition and deeper advanced sessions.'
      ];

      const random = (arr) => arr[Math.floor(Math.random() * arr.length)];
      const randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

      const buildDate = () => {
        const today = new Date();
        const daysBack = randomInt(1, 180);
        const d = new Date(today);
        d.setDate(today.getDate() - daysBack);
        return d;
      };

      const fmtDate = (d) => {
        const y = d.getFullYear();
        const m = String(d.getMonth() + 1).padStart(2, '0');
        const day = String(d.getDate()).padStart(2, '0');
        return `${y}-${m}-${day}`;
      };

      const generateFeedback = () => `${random(openings)}. ${random(mids)}. ${random(closings)}`;

      const dataset = Array.from({ length: 30 }, (_, i) => {
        const dateObj = buildDate();
        const rating = randomInt(2, 5);
        return {
          id: i + 1,
          date: fmtDate(dateObj),
          eventName: random(events),
          participantName: `${random(firstNames)} ${random(lastNames)}`,
          rating,
          feedback: generateFeedback()
        };
      });

      let state = {
        query: '',
        sortKey: 'date',
        sortDir: 'desc'
      };

      const compareBy = (a, b, key, dir) => {
        let x = a[key];
        let y = b[key];

        if (key === 'date') {
          x = new Date(x).getTime();
          y = new Date(y).getTime();
        }

        if (key === 'rating') {
          x = Number(x);
          y = Number(y);
        }

        if (typeof x === 'string') {
          x = x.toLowerCase();
          y = y.toLowerCase();
        }

        const result = x < y ? -1 : x > y ? 1 : 0;
        return dir === 'asc' ? result : -result;
      };

      const ratingClass = (r) => {
        if (r >= 4) return 'rating-good';
        if (r === 3) return 'rating-mid';
        return 'rating-low';
      };

      const getVisibleRows = () => {
        const query = state.query.trim().toLowerCase();

        const filtered = !query
          ? [...dataset]
          : dataset.filter((row) =>
              [row.date, row.eventName, row.participantName, String(row.rating), row.feedback]
                .join(' ')
                .toLowerCase()
                .includes(query)
            );

        filtered.sort((a, b) => compareBy(a, b, state.sortKey, state.sortDir));
        return filtered;
      };

      const summarize = (rows) => {
        const avg = rows.reduce((acc, row) => acc + row.rating, 0) / rows.length;
        const byEvent = rows.reduce((acc, row) => {
          acc[row.eventName] = (acc[row.eventName] || 0) + 1;
          return acc;
        }, {});
        const topEvent = Object.entries(byEvent).sort((a, b) => b[1] - a[1])[0];
        const high = rows.filter((r) => r.rating >= 4).length;
        const low = rows.filter((r) => r.rating <= 2).length;
        const tone = high >= low * 2 ? 'strongly positive' : high > low ? 'mostly positive' : 'mixed';

        return `Across ${rows.length} submissions, average satisfaction is ${avg.toFixed(1)} / 5 with ${high} high ratings and ${low} low ratings. Most feedback volume came from ${topEvent[0]} (${topEvent[1]} responses). Overall sentiment appears ${tone}, with repeated requests for deeper case studies and slightly longer Q&A windows.`;
      };

      const render = () => {
        const rows = getVisibleRows();
        tableBody.innerHTML = '';

        rows.forEach((row) => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td class="col-date">${row.date}</td>
            <td class="col-event">${row.eventName}</td>
            <td class="col-participant">${row.participantName}</td>
            <td><span class="rating-pill ${ratingClass(row.rating)}">${row.rating}.0</span></td>
            <td class="feedback-cell">${row.feedback}</td>
          `;
          tableBody.appendChild(tr);
        });

        emptyState.hidden = rows.length > 0;
        filteredChip.textContent = `Showing: ${rows.length}`;
        updatedChip.textContent = `Records: ${dataset.length}`;

        sortIcons.forEach((icon) => {
          icon.classList.remove('active');
          const key = icon.getAttribute('data-sort-icon');
          if (key === state.sortKey) {
            icon.classList.add('active');
            icon.textContent = state.sortDir === 'asc' ? 'â–²' : 'â–¼';
          } else {
            icon.textContent = 'â†•';
          }
        });
      };

      headerCells.forEach((th) => {
        th.addEventListener('click', () => {
          const key = th.getAttribute('data-key');
          if (state.sortKey === key) {
            state.sortDir = state.sortDir === 'asc' ? 'desc' : 'asc';
          } else {
            state.sortKey = key;
            state.sortDir = key === 'date' ? 'desc' : 'asc';
          }
          render();
        });
      });

      searchInput.addEventListener('input', (e) => {
        state.query = e.target.value;
        render();
      });

      closeSummary.addEventListener('click', () => {
        aiSummary.style.display = 'none';
      });

      summaryText.textContent = summarize(dataset);
      render();
    })();
  </script>
</body>
</html>
