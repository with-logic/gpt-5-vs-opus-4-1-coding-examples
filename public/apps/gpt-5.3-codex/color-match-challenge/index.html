<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Color Match Challenge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bungee:wght@400&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-top: #ffe7b8;
      --bg-bottom: #ffd6cc;
      --panel: rgba(255, 255, 255, 0.85);
      --text: #17202a;
      --muted: #5b6470;
      --accent: #112b3c;
      --ok: #0f9d58;
      --bad: #d93025;
      --shadow: 0 20px 40px rgba(19, 27, 35, 0.18);
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html,
    body {
      margin: 0;
      min-height: 100%;
    }

    body {
      font-family: "Space Grotesk", sans-serif;
      color: var(--text);
      background:
        radial-gradient(65vmax 65vmax at 10% 10%, #fff7d1 0%, transparent 60%),
        radial-gradient(55vmax 55vmax at 90% 15%, #ffd4c7 0%, transparent 62%),
        linear-gradient(145deg, var(--bg-top), var(--bg-bottom));
      display: grid;
      place-items: center;
      padding: 20px;
      overflow: hidden;
    }

    .blob {
      position: fixed;
      border-radius: 50%;
      filter: blur(28px);
      opacity: 0.32;
      pointer-events: none;
      animation: float 12s ease-in-out infinite;
    }

    .blob.b1 {
      width: 240px;
      height: 240px;
      background: #ff8a65;
      top: -30px;
      left: -40px;
    }

    .blob.b2 {
      width: 300px;
      height: 300px;
      background: #4fc3f7;
      right: -70px;
      bottom: -70px;
      animation-duration: 15s;
      animation-delay: -2s;
    }

    .app {
      width: min(920px, 100%);
      background: var(--panel);
      border: 1px solid rgba(255, 255, 255, 0.7);
      border-radius: 28px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      padding: clamp(18px, 2.5vw, 30px);
      position: relative;
      z-index: 2;
      animation: enter 550ms cubic-bezier(.2, .8, .2, 1);
    }

    .header {
      display: grid;
      gap: 14px;
      margin-bottom: 18px;
    }

    .title {
      margin: 0;
      font-family: "Bungee", sans-serif;
      font-size: clamp(1.5rem, 2.9vw, 2.3rem);
      line-height: 1;
      letter-spacing: 1px;
      color: var(--accent);
    }

    .hud {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    .stat {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 14px;
      padding: 12px 14px;
      box-shadow: inset 0 0 0 1px rgba(17, 43, 60, 0.08);
    }

    .stat-label {
      font-size: 0.76rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 4px;
      font-weight: 700;
    }

    .stat-value {
      font-size: clamp(1.15rem, 2.4vw, 1.65rem);
      font-weight: 700;
      line-height: 1;
    }

    .timer-wrap {
      margin-bottom: 16px;
    }

    .timer-track {
      height: 14px;
      border-radius: 999px;
      background: rgba(17, 43, 60, 0.12);
      overflow: hidden;
      box-shadow: inset 0 1px 3px rgba(17, 43, 60, 0.2);
    }

    .timer-fill {
      height: 100%;
      width: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #00c853, #ffee58, #ff7043);
      transition: width 100ms linear;
      transform-origin: left center;
    }

    .challenge {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 22px;
      padding: clamp(16px, 3vw, 26px);
      border: 1px solid rgba(17, 43, 60, 0.09);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8);
      margin-bottom: 18px;
      text-align: center;
    }

    .instruction {
      margin: 0 0 10px;
      color: var(--muted);
      font-weight: 500;
      letter-spacing: 0.02em;
      font-size: clamp(0.95rem, 2vw, 1.12rem);
    }

    .word {
      margin: 0;
      font-family: "Bungee", sans-serif;
      font-size: clamp(2.4rem, 10vw, 5.2rem);
      line-height: 1;
      letter-spacing: 2px;
      min-height: 1.15em;
      text-shadow: 0 5px 10px rgba(0, 0, 0, 0.08);
      transition: transform 150ms ease;
    }

    .word.pop {
      animation: pop 180ms ease;
    }

    .status {
      margin-top: 10px;
      min-height: 1.3em;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: 0.92rem;
    }

    .status.ok { color: var(--ok); }
    .status.bad { color: var(--bad); }

    .buttons {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
    }

    .btn {
      border: none;
      border-radius: 16px;
      min-height: 64px;
      color: white;
      font-family: "Space Grotesk", sans-serif;
      font-size: clamp(0.95rem, 1.8vw, 1.08rem);
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 8px 0 rgba(0, 0, 0, 0.18), 0 10px 18px rgba(0, 0, 0, 0.18);
      transform: translateY(0) scale(1);
      transition: transform 90ms ease, box-shadow 90ms ease, filter 160ms ease, opacity 160ms ease;
      position: relative;
      overflow: hidden;
    }

    .btn::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(255, 255, 255, 0.26), transparent 45%);
      pointer-events: none;
    }

    .btn:hover:not(:disabled) {
      transform: translateY(-1px) scale(1.015);
      filter: saturate(1.08) brightness(1.02);
    }

    .btn:active:not(:disabled),
    .btn.pressed {
      transform: translateY(5px) scale(0.985);
      box-shadow: 0 3px 0 rgba(0, 0, 0, 0.18), 0 5px 8px rgba(0, 0, 0, 0.12);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      filter: grayscale(0.2);
    }

    .overlay {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(11, 27, 37, 0.57);
      border-radius: 28px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 220ms ease;
      padding: 20px;
    }

    .overlay.show {
      opacity: 1;
      pointer-events: auto;
    }

    .panel {
      width: min(420px, 100%);
      background: white;
      border-radius: 22px;
      padding: 24px 22px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.23);
      animation: popIn 240ms ease;
    }

    .panel h2 {
      margin: 0 0 8px;
      font-family: "Bungee", sans-serif;
      font-size: clamp(1.3rem, 4vw, 1.8rem);
      letter-spacing: 1px;
      color: var(--accent);
    }

    .panel p {
      margin: 8px 0;
      color: #2a3742;
      font-weight: 600;
    }

    .restart {
      margin-top: 12px;
      border: none;
      border-radius: 14px;
      background: var(--accent);
      color: #fff;
      padding: 12px 18px;
      font: 700 1rem "Space Grotesk", sans-serif;
      letter-spacing: 0.03em;
      cursor: pointer;
      box-shadow: 0 7px 0 #08151d;
      transition: transform 90ms ease, box-shadow 90ms ease;
    }

    .restart:active {
      transform: translateY(4px);
      box-shadow: 0 3px 0 #08151d;
    }

    @keyframes enter {
      from { opacity: 0; transform: translateY(12px) scale(0.985); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    @keyframes float {
      0%, 100% { transform: translate3d(0, 0, 0); }
      50% { transform: translate3d(0, 18px, 0); }
    }

    @keyframes pop {
      0% { transform: scale(0.92); }
      70% { transform: scale(1.06); }
      100% { transform: scale(1); }
    }

    @keyframes popIn {
      from { transform: scale(0.92); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    @media (max-width: 700px) {
      .hud { grid-template-columns: repeat(3, minmax(0, 1fr)); }
      .buttons { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    @media (max-width: 430px) {
      body { padding: 14px; }
      .app { border-radius: 22px; padding: 14px; }
      .overlay { border-radius: 22px; }
      .buttons { gap: 10px; }
      .btn { min-height: 58px; }
    }
  </style>
</head>
<body>
  <div class="blob b1" aria-hidden="true"></div>
  <div class="blob b2" aria-hidden="true"></div>

  <main class="app" role="application" aria-label="Color Match Challenge">
    <section class="header">
      <h1 class="title">Color Match Challenge</h1>
      <div class="hud">
        <div class="stat">
          <div class="stat-label">Score</div>
          <div class="stat-value" id="score">0</div>
        </div>
        <div class="stat">
          <div class="stat-label">Best</div>
          <div class="stat-value" id="best">0</div>
        </div>
        <div class="stat">
          <div class="stat-label">Time</div>
          <div class="stat-value" id="time">30.0s</div>
        </div>
      </div>
    </section>

    <section class="timer-wrap" aria-label="Time remaining">
      <div class="timer-track">
        <div class="timer-fill" id="timerFill"></div>
      </div>
    </section>

    <section class="challenge">
      <p class="instruction">Tap the button matching the text color, not the word.</p>
      <p class="word" id="word" aria-live="polite">READY</p>
      <div class="status" id="status" aria-live="polite"></div>
    </section>

    <section class="buttons" id="buttons" aria-label="Color options"></section>

    <div class="overlay show" id="overlay" aria-hidden="false">
      <div class="panel">
        <h2 id="overlayTitle">Ready?</h2>
        <p id="overlayText">You have 30 seconds. Choose the button that matches the word color.</p>
        <p id="overlayStats"></p>
        <button class="restart" id="restartBtn">Start Game</button>
      </div>
    </div>
  </main>

  <script>
    (function () {
      const GAME_SECONDS = 30;
      const COLORS = [
        { name: "RED", hex: "#f44336" },
        { name: "BLUE", hex: "#2196f3" },
        { name: "GREEN", hex: "#4caf50" },
        { name: "YELLOW", hex: "#fbc02d" },
        { name: "PURPLE", hex: "#8e24aa" },
        { name: "ORANGE", hex: "#fb8c00" }
      ];

      const els = {
        score: document.getElementById("score"),
        best: document.getElementById("best"),
        time: document.getElementById("time"),
        timerFill: document.getElementById("timerFill"),
        word: document.getElementById("word"),
        status: document.getElementById("status"),
        buttons: document.getElementById("buttons"),
        overlay: document.getElementById("overlay"),
        overlayTitle: document.getElementById("overlayTitle"),
        overlayText: document.getElementById("overlayText"),
        overlayStats: document.getElementById("overlayStats"),
        restartBtn: document.getElementById("restartBtn")
      };

      let score = 0;
      let attempts = 0;
      let running = false;
      let roundDisplayColor = null;
      let deadline = 0;
      let timerRaf = 0;
      let best = Number(localStorage.getItem("cmc_best_score") || 0);
      els.best.textContent = String(best);

      function randItem(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }

      function showStatus(message, cls) {
        els.status.textContent = message;
        els.status.className = "status " + (cls || "");
      }

      function setRunning(state) {
        running = state;
        const buttons = els.buttons.querySelectorAll("button");
        buttons.forEach((btn) => {
          btn.disabled = !state;
        });
      }

      function nextRound() {
        const wordChoice = randItem(COLORS);
        roundDisplayColor = randItem(COLORS);
        els.word.textContent = wordChoice.name;
        els.word.style.color = roundDisplayColor.hex;

        els.word.classList.remove("pop");
        void els.word.offsetWidth;
        els.word.classList.add("pop");
      }

      function finishGame() {
        running = false;
        cancelAnimationFrame(timerRaf);
        setRunning(false);
        els.timerFill.style.width = "0%";
        els.time.textContent = "0.0s";

        if (score > best) {
          best = score;
          localStorage.setItem("cmc_best_score", String(best));
          els.best.textContent = String(best);
        }

        const accuracy = attempts ? Math.round((score / attempts) * 100) : 0;
        els.overlayTitle.textContent = "Time's Up";
        els.overlayText.textContent = "Push for a higher score on the next run.";
        els.overlayStats.textContent = "Score: " + score + " | Accuracy: " + accuracy + "%";
        els.restartBtn.textContent = "Play Again";
        els.overlay.classList.add("show");
        els.overlay.setAttribute("aria-hidden", "false");
        showStatus("Round over", "");
      }

      function updateTimer() {
        if (!running) return;

        const remaining = Math.max(0, deadline - performance.now());
        const seconds = remaining / 1000;
        const pct = (remaining / (GAME_SECONDS * 1000)) * 100;

        els.time.textContent = seconds.toFixed(1) + "s";
        els.timerFill.style.width = pct + "%";

        if (remaining <= 0) {
          finishGame();
          return;
        }

        timerRaf = requestAnimationFrame(updateTimer);
      }

      function startGame() {
        score = 0;
        attempts = 0;
        els.score.textContent = "0";
        showStatus("Go!", "ok");

        els.overlay.classList.remove("show");
        els.overlay.setAttribute("aria-hidden", "true");
        setRunning(true);
        nextRound();

        deadline = performance.now() + GAME_SECONDS * 1000;
        cancelAnimationFrame(timerRaf);
        running = true;
        updateTimer();
      }

      function onGuess(colorName, btn) {
        if (!running) return;

        btn.classList.add("pressed");
        setTimeout(() => btn.classList.remove("pressed"), 90);

        attempts += 1;
        if (colorName === roundDisplayColor.name) {
          score += 1;
          showStatus("Correct", "ok");
        } else {
          showStatus("Wrong", "bad");
        }

        els.score.textContent = String(score);
        nextRound();
      }

      function buildButtons() {
        const fragment = document.createDocumentFragment();

        COLORS.forEach((color) => {
          const btn = document.createElement("button");
          btn.className = "btn";
          btn.type = "button";
          btn.textContent = color.name;
          btn.style.background = "linear-gradient(165deg, " + color.hex + " 0%, " + shade(color.hex, -16) + " 100%)";
          btn.setAttribute("aria-label", color.name);
          btn.addEventListener("click", function () {
            onGuess(color.name, btn);
          });
          fragment.appendChild(btn);
        });

        els.buttons.appendChild(fragment);
        setRunning(false);
      }

      function shade(hex, amount) {
        const h = hex.replace("#", "");
        const num = parseInt(h, 16);
        let r = (num >> 16) + amount;
        let g = ((num >> 8) & 0x00ff) + amount;
        let b = (num & 0x0000ff) + amount;
        r = Math.max(0, Math.min(255, r));
        g = Math.max(0, Math.min(255, g));
        b = Math.max(0, Math.min(255, b));
        return "#" + ((r << 16) | (g << 8) | b).toString(16).padStart(6, "0");
      }

      buildButtons();

      els.restartBtn.addEventListener("click", startGame);

      window.addEventListener("keydown", function (event) {
        if (!running && (event.key === "Enter" || event.key === " ")) {
          event.preventDefault();
          startGame();
          return;
        }

        if (!running) return;

        const keyMap = {
          "1": 0,
          "2": 1,
          "3": 2,
          "4": 3,
          "5": 4,
          "6": 5
        };

        const idx = keyMap[event.key];
        if (idx === undefined) return;

        const btn = els.buttons.querySelectorAll("button")[idx];
        if (!btn) return;
        btn.click();
      });
    })();
  </script>
</body>
</html>
