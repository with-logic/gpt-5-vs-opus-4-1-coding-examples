<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Solar System Explorer</title>
  <style>
    :root {
      --bg-0: #05070f;
      --bg-1: #0a1020;
      --panel: rgba(10, 16, 32, 0.78);
      --panel-border: rgba(151, 173, 255, 0.2);
      --text-0: #ecf1ff;
      --text-1: #aab8df;
      --accent: #62b6ff;
      --accent-2: #8f78ff;
      --good: #5ae6a5;
      --warn: #ffd166;
      --shadow: 0 16px 45px rgba(0, 0, 0, 0.45);
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html,
    body {
      margin: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: "Segoe UI", "Inter", system-ui, -apple-system, sans-serif;
      color: var(--text-0);
      background: radial-gradient(circle at 20% 20%, #111c3a 0%, var(--bg-1) 30%, var(--bg-0) 100%);
    }

    #app {
      position: fixed;
      inset: 0;
    }

    #scene {
      position: absolute;
      inset: 0;
      touch-action: none;
      cursor: grab;
    }

    #scene:active {
      cursor: grabbing;
    }

    .hud {
      position: absolute;
      pointer-events: none;
      inset: 0;
      display: grid;
      grid-template-columns: minmax(270px, 360px) 1fr;
      gap: 16px;
      padding: 14px;
    }

    .panel {
      pointer-events: auto;
      align-self: start;
      background: linear-gradient(160deg, rgba(16, 24, 48, 0.88), var(--panel));
      border: 1px solid var(--panel-border);
      border-radius: 16px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 14px;
      color: var(--text-0);
    }

    .title {
      margin: 0;
      font-size: clamp(1.2rem, 2vw, 1.55rem);
      letter-spacing: 0.02em;
      font-weight: 700;
      display: flex;
      align-items: baseline;
      gap: 8px;
    }

    .title small {
      font-size: 0.78rem;
      color: var(--accent);
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .muted {
      margin: 8px 0 0;
      color: var(--text-1);
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .controls {
      margin-top: 14px;
      display: grid;
      gap: 12px;
    }

    .control-row {
      display: grid;
      gap: 8px;
    }

    .label-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--text-1);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    input[type="range"] {
      appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #fff;
      border: 2px solid #9cd0ff;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4);
      cursor: pointer;
    }

    input[type="range"]::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #fff;
      border: 2px solid #9cd0ff;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4);
      cursor: pointer;
    }

    .button-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    button {
      border: 1px solid rgba(177, 202, 255, 0.35);
      background: linear-gradient(180deg, rgba(48, 68, 120, 0.65), rgba(27, 37, 70, 0.8));
      color: var(--text-0);
      border-radius: 10px;
      padding: 8px 12px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 140ms ease, filter 140ms ease;
      font-size: 0.85rem;
    }

    button:hover {
      filter: brightness(1.1);
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0);
    }

    .planet-info {
      margin-top: 14px;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid rgba(177, 202, 255, 0.2);
      background: rgba(7, 12, 26, 0.58);
      display: grid;
      gap: 8px;
      min-height: 170px;
    }

    .planet-name {
      margin: 0;
      font-size: 1.1rem;
      letter-spacing: 0.02em;
    }

    .planet-meta {
      margin: 0;
      color: var(--text-1);
      line-height: 1.45;
      font-size: 0.9rem;
    }

    .planet-pill {
      justify-self: start;
      padding: 4px 9px;
      border-radius: 999px;
      font-size: 0.72rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #0d1326;
      background: linear-gradient(90deg, #9ad7ff, #b3a5ff);
      font-weight: 700;
    }

    .hint {
      position: absolute;
      bottom: 12px;
      right: 12px;
      pointer-events: auto;
      background: rgba(5, 8, 19, 0.72);
      border: 1px solid rgba(177, 202, 255, 0.2);
      color: var(--text-1);
      border-radius: 12px;
      padding: 10px 12px;
      font-size: 0.8rem;
      max-width: min(90vw, 440px);
      line-height: 1.4;
      backdrop-filter: blur(8px);
    }

    .status {
      margin-top: 4px;
      color: var(--good);
      font-size: 0.78rem;
      min-height: 1.1em;
    }

    @media (max-width: 850px) {
      .hud {
        grid-template-columns: 1fr;
        align-content: start;
        padding: 10px;
      }
      .panel {
        max-width: 100%;
      }
      .hint {
        left: 10px;
        right: 10px;
        bottom: 10px;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <canvas id="scene" aria-label="Solar System 3D scene"></canvas>

    <div class="hud">
      <section class="panel" aria-label="Controls and planet details">
        <h1 class="title">Solar System Explorer <small>Interactive 3D</small></h1>
        <p class="muted">Visualize planets orbiting the Sun. Click any planet for details, drag to rotate, and scroll/pinch to zoom.</p>

        <div class="controls">
          <div class="control-row">
            <div class="label-row">
              <span>Orbit Speed</span>
              <strong id="speedReadout">1.00x</strong>
            </div>
            <input id="speedControl" type="range" min="0" max="3" step="0.01" value="1" aria-label="Orbit speed control" />
          </div>

          <div class="button-row">
            <button id="pauseBtn" type="button">Pause Motion</button>
            <button id="resetViewBtn" type="button">Reset View</button>
            <button id="focusSunBtn" type="button">Focus Sun</button>
          </div>
          <div id="status" class="status" aria-live="polite">Running at real-time scale.</div>
        </div>

        <article class="planet-info" id="planetInfo">
          <span class="planet-pill" id="planetType">Star</span>
          <h2 class="planet-name" id="planetName">Sun</h2>
          <p class="planet-meta" id="planetDescription">The central star of our Solar System. Its gravity keeps every planet in orbit.</p>
          <p class="planet-meta" id="planetStats">Diameter: 1,392,700 km<br>Orbit Period: N/A<br>Distance from Sun: 0 AU</p>
        </article>
      </section>
    </div>

    <div class="hint">
      <strong>Navigation:</strong> Left-drag rotate • Right-drag pan • Wheel/pinch zoom • Click planet to inspect.
    </div>
  </div>

  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.162.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.162.0/examples/jsm/"
      }
    }
  </script>

  <script type="module">
    import * as THREE from "three";
    import { OrbitControls } from "three/addons/controls/OrbitControls.js";

    const canvas = document.getElementById("scene");
    const speedControl = document.getElementById("speedControl");
    const speedReadout = document.getElementById("speedReadout");
    const pauseBtn = document.getElementById("pauseBtn");
    const resetViewBtn = document.getElementById("resetViewBtn");
    const focusSunBtn = document.getElementById("focusSunBtn");
    const statusEl = document.getElementById("status");
    const planetTypeEl = document.getElementById("planetType");
    const planetNameEl = document.getElementById("planetName");
    const planetDescriptionEl = document.getElementById("planetDescription");
    const planetStatsEl = document.getElementById("planetStats");

    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.outputColorSpace = THREE.SRGBColorSpace;

    const scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x03050d, 0.0012);

    const camera = new THREE.PerspectiveCamera(48, window.innerWidth / window.innerHeight, 0.1, 2200);
    camera.position.set(0, 65, 165);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.minDistance = 18;
    controls.maxDistance = 520;
    controls.target.set(0, 0, 0);

    scene.add(new THREE.AmbientLight(0x6f86b5, 0.25));

    const sunLight = new THREE.PointLight(0xfff0b3, 2.8, 0, 2);
    sunLight.position.set(0, 0, 0);
    scene.add(sunLight);

    const rimLight = new THREE.DirectionalLight(0x7ba8ff, 0.45);
    rimLight.position.set(-120, 80, 70);
    scene.add(rimLight);

    const starGeo = new THREE.BufferGeometry();
    const starCount = 4500;
    const starPositions = new Float32Array(starCount * 3);

    for (let i = 0; i < starCount; i++) {
      const r = 650 + Math.random() * 1200;
      const theta = Math.random() * Math.PI * 2;
      const phi = Math.acos(2 * Math.random() - 1);
      starPositions[i * 3] = r * Math.sin(phi) * Math.cos(theta);
      starPositions[i * 3 + 1] = r * Math.cos(phi);
      starPositions[i * 3 + 2] = r * Math.sin(phi) * Math.sin(theta);
    }

    starGeo.setAttribute("position", new THREE.BufferAttribute(starPositions, 3));
    const stars = new THREE.Points(
      starGeo,
      new THREE.PointsMaterial({ color: 0xc7d5ff, size: 1.4, sizeAttenuation: true, transparent: true, opacity: 0.92 })
    );
    scene.add(stars);

    const sunGroup = new THREE.Group();
    scene.add(sunGroup);

    const sun = new THREE.Mesh(
      new THREE.SphereGeometry(8, 64, 64),
      new THREE.MeshStandardMaterial({
        color: 0xffbb55,
        emissive: 0xff8800,
        emissiveIntensity: 1.15,
        roughness: 0.4,
        metalness: 0.05,
      })
    );
    sunGroup.add(sun);

    const glow = new THREE.Mesh(
      new THREE.SphereGeometry(11.5, 48, 48),
      new THREE.MeshBasicMaterial({
        color: 0xff9f3d,
        transparent: true,
        opacity: 0.22,
        blending: THREE.AdditiveBlending,
        depthWrite: false,
      })
    );
    sunGroup.add(glow);

    const corona = new THREE.Mesh(
      new THREE.RingGeometry(10.8, 13.2, 100),
      new THREE.MeshBasicMaterial({
        color: 0xffcf72,
        transparent: true,
        opacity: 0.33,
        blending: THREE.AdditiveBlending,
        side: THREE.DoubleSide,
        depthWrite: false,
      })
    );
    corona.rotation.x = Math.PI / 2;
    sunGroup.add(corona);

    const planetData = [
      { name: "Mercury", radius: 1.25, distance: 14, speed: 1.55, color: 0xb7aba1, type: "Rocky", diameter: "4,879 km", orbitPeriod: "88 days", au: "0.39 AU", desc: "A cratered, airless world and the smallest planet in our Solar System." },
      { name: "Venus", radius: 2.15, distance: 19, speed: 1.2, color: 0xe4bf82, type: "Rocky", diameter: "12,104 km", orbitPeriod: "225 days", au: "0.72 AU", desc: "A scorching world with thick clouds and the hottest surface temperatures of any planet." },
      { name: "Earth", radius: 2.3, distance: 26, speed: 1.0, color: 0x5ca2ff, type: "Rocky", diameter: "12,742 km", orbitPeriod: "365 days", au: "1.00 AU", desc: "Our home planet and the only known world with abundant surface liquid water." },
      { name: "Mars", radius: 1.75, distance: 33, speed: 0.8, color: 0xc66e45, type: "Rocky", diameter: "6,779 km", orbitPeriod: "687 days", au: "1.52 AU", desc: "The red planet, home to giant volcanoes and deep canyon systems." },
      { name: "Jupiter", radius: 5.35, distance: 47, speed: 0.44, color: 0xd3ad7a, type: "Gas Giant", diameter: "139,820 km", orbitPeriod: "11.86 years", au: "5.20 AU", desc: "The largest planet, a gas giant with powerful storms and many moons." },
      { name: "Saturn", radius: 4.7, distance: 62, speed: 0.33, color: 0xe5d39c, type: "Gas Giant", diameter: "116,460 km", orbitPeriod: "29.45 years", au: "9.58 AU", desc: "Known for its stunning rings made of ice and rock particles." },
      { name: "Uranus", radius: 3.6, distance: 76, speed: 0.24, color: 0x90d8df, type: "Ice Giant", diameter: "50,724 km", orbitPeriod: "84 years", au: "19.22 AU", desc: "An ice giant that rotates on its side, likely due to a past massive impact." },
      { name: "Neptune", radius: 3.55, distance: 89, speed: 0.2, color: 0x5f7cff, type: "Ice Giant", diameter: "49,244 km", orbitPeriod: "164.8 years", au: "30.05 AU", desc: "A deep-blue, windy world at the outer edge of the planetary system." },
    ];

    const planets = [];
    const orbitMaterial = new THREE.LineBasicMaterial({ color: 0x5070c9, transparent: true, opacity: 0.32 });

    function createOrbit(distance) {
      const points = [];
      const segments = 256;
      for (let i = 0; i <= segments; i++) {
        const t = (i / segments) * Math.PI * 2;
        points.push(new THREE.Vector3(Math.cos(t) * distance, 0, Math.sin(t) * distance));
      }
      const geo = new THREE.BufferGeometry().setFromPoints(points);
      const line = new THREE.LineLoop(geo, orbitMaterial);
      line.rotation.x = (Math.random() * 0.05) - 0.025;
      scene.add(line);
    }

    function makePlanet(data, index) {
      createOrbit(data.distance);

      const pivot = new THREE.Group();
      scene.add(pivot);

      const mat = new THREE.MeshStandardMaterial({ color: data.color, roughness: 0.9, metalness: 0.05 });
      const mesh = new THREE.Mesh(new THREE.SphereGeometry(data.radius, 40, 40), mat);
      mesh.position.x = data.distance;
      mesh.userData = { data, kind: "planet", index };

      const atmosphere = new THREE.Mesh(
        new THREE.SphereGeometry(data.radius * 1.08, 30, 30),
        new THREE.MeshBasicMaterial({
          color: data.color,
          transparent: true,
          opacity: 0.12,
          side: THREE.DoubleSide,
          depthWrite: false,
        })
      );
      mesh.add(atmosphere);

      if (data.name === "Saturn") {
        const rings = new THREE.Mesh(
          new THREE.RingGeometry(data.radius * 1.35, data.radius * 2.15, 64),
          new THREE.MeshStandardMaterial({
            color: 0xceb68c,
            roughness: 1,
            metalness: 0,
            side: THREE.DoubleSide,
            transparent: true,
            opacity: 0.9,
          })
        );
        rings.rotation.x = Math.PI / 2.8;
        mesh.add(rings);
      }

      pivot.add(mesh);

      const spin = 0.15 + index * 0.03;
      const angle = Math.random() * Math.PI * 2;

      planets.push({ ...data, mesh, pivot, spin, angle, baseSpeed: data.speed });
    }

    planetData.forEach(makePlanet);

    let speedMultiplier = 1;
    let paused = false;
    let selected = null;

    function setInfo(target) {
      if (!target) {
        planetTypeEl.textContent = "Star";
        planetNameEl.textContent = "Sun";
        planetDescriptionEl.textContent = "The central star of our Solar System. Its gravity keeps every planet in orbit.";
        planetStatsEl.innerHTML = "Diameter: 1,392,700 km<br>Orbit Period: N/A<br>Distance from Sun: 0 AU";
        return;
      }
      planetTypeEl.textContent = target.type;
      planetNameEl.textContent = target.name;
      planetDescriptionEl.textContent = target.desc;
      planetStatsEl.innerHTML = `Diameter: ${target.diameter}<br>Orbit Period: ${target.orbitPeriod}<br>Distance from Sun: ${target.au}`;
    }

    setInfo(null);

    const raycaster = new THREE.Raycaster();
    const pointer = new THREE.Vector2();

    function onPointerDown(e) {
      pointer.x = (e.clientX / window.innerWidth) * 2 - 1;
      pointer.y = -(e.clientY / window.innerHeight) * 2 + 1;

      raycaster.setFromCamera(pointer, camera);
      const hits = raycaster.intersectObjects(planets.map((p) => p.mesh), false);
      if (!hits.length) return;

      const data = hits[0].object.userData.data;
      selected = planets.find((p) => p.name === data.name) || null;
      setInfo(data);

      planets.forEach((p) => {
        p.mesh.material.emissive.setHex(0x000000);
        p.mesh.material.emissiveIntensity = 0;
      });
      if (selected) {
        selected.mesh.material.emissive.setHex(0x3f5fff);
        selected.mesh.material.emissiveIntensity = 0.35;
      }

      statusEl.textContent = `Selected: ${data.name}`;
      statusEl.style.color = "#8fd4ff";
    }

    window.addEventListener("pointerdown", onPointerDown);

    speedControl.addEventListener("input", () => {
      speedMultiplier = Number(speedControl.value);
      speedReadout.textContent = `${speedMultiplier.toFixed(2)}x`;
      if (!paused) {
        statusEl.textContent = speedMultiplier === 0 ? "Motion stopped (speed set to 0)." : `Running at ${speedMultiplier.toFixed(2)}x speed.`;
        statusEl.style.color = speedMultiplier === 0 ? "#ffd166" : "#5ae6a5";
      }
    });

    pauseBtn.addEventListener("click", () => {
      paused = !paused;
      pauseBtn.textContent = paused ? "Resume Motion" : "Pause Motion";
      statusEl.textContent = paused ? "Simulation paused." : `Running at ${speedMultiplier.toFixed(2)}x speed.`;
      statusEl.style.color = paused ? "#ffd166" : "#5ae6a5";
    });

    resetViewBtn.addEventListener("click", () => {
      camera.position.set(0, 65, 165);
      controls.target.set(0, 0, 0);
      controls.update();
      statusEl.textContent = "Camera reset.";
      statusEl.style.color = "#9dd2ff";
    });

    focusSunBtn.addEventListener("click", () => {
      controls.target.set(0, 0, 0);
      camera.position.lerp(new THREE.Vector3(0, 42, 108), 0.85);
      controls.update();
      setInfo(null);
      selected = null;
      planets.forEach((p) => {
        p.mesh.material.emissive.setHex(0x000000);
        p.mesh.material.emissiveIntensity = 0;
      });
      statusEl.textContent = "Focused on Sun.";
      statusEl.style.color = "#9dd2ff";
    });

    const clock = new THREE.Clock();

    function animate() {
      requestAnimationFrame(animate);
      const dt = Math.min(clock.getDelta(), 0.04);

      sun.rotation.y += dt * 0.45;
      corona.rotation.z += dt * 0.23;
      glow.scale.setScalar(1 + Math.sin(performance.now() * 0.0016) * 0.02);
      stars.rotation.y += dt * 0.004;

      const timeScale = paused ? 0 : speedMultiplier;

      for (const planet of planets) {
        planet.angle += dt * planet.baseSpeed * timeScale * 0.45;
        planet.pivot.rotation.y = planet.angle;
        planet.mesh.rotation.y += dt * planet.spin;
      }

      if (selected) {
        const targetWorld = new THREE.Vector3();
        selected.mesh.getWorldPosition(targetWorld);
        controls.target.lerp(targetWorld, 0.04);
      }

      controls.update();
      renderer.render(scene, camera);
    }

    animate();

    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
