<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Target Clicker</title>
  <style>
    :root {
      --bg-a: #f7fbff;
      --bg-b: #eef5ff;
      --ink: #1e2a44;
      --muted: #6c7da7;
      --accent: #3478f6;
      --good: #0ea76b;
      --bad: #df3d5d;
      --panel: rgba(255, 255, 255, 0.84);
      --panel-border: rgba(102, 128, 204, 0.24);
      --shadow: 0 12px 34px rgba(41, 72, 152, 0.16);
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }

    html,
    body {
      margin: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: "Avenir Next", "SF Pro Text", "Segoe UI", sans-serif;
      color: var(--ink);
      background: linear-gradient(145deg, var(--bg-a), var(--bg-b));
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      border-radius: 50%;
      pointer-events: none;
      z-index: 0;
      filter: blur(3px);
    }

    body::before {
      width: 42vmax;
      height: 42vmax;
      left: -12vmax;
      top: -8vmax;
      background: radial-gradient(circle, rgba(126, 185, 255, 0.22), rgba(126, 185, 255, 0));
      animation: driftA 16s ease-in-out infinite alternate;
    }

    body::after {
      width: 38vmax;
      height: 38vmax;
      right: -10vmax;
      bottom: -10vmax;
      background: radial-gradient(circle, rgba(255, 153, 196, 0.2), rgba(255, 153, 196, 0));
      animation: driftB 14s ease-in-out infinite alternate;
    }

    @keyframes driftA {
      to {
        transform: translate(8vmax, 5vmax);
      }
    }

    @keyframes driftB {
      to {
        transform: translate(-7vmax, -6vmax);
      }
    }

    #app {
      position: relative;
      width: 100%;
      height: 100%;
      z-index: 1;
      cursor: crosshair;
    }

    #hud {
      position: fixed;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      width: min(860px, calc(100% - 24px));
      padding: 10px 14px;
      border-radius: 18px;
      border: 1px solid var(--panel-border);
      background: var(--panel);
      backdrop-filter: blur(8px);
      box-shadow: var(--shadow);
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
      align-items: center;
      z-index: 5;
    }

    .stat {
      background: rgba(255, 255, 255, 0.78);
      border: 1px solid rgba(111, 137, 211, 0.2);
      border-radius: 12px;
      padding: 7px 10px;
      min-height: 56px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .label {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      margin-bottom: 2px;
    }

    .value {
      font-size: clamp(18px, 2.4vw, 26px);
      font-weight: 800;
      line-height: 1.15;
      font-variant-numeric: tabular-nums;
    }

    #gameZone {
      position: absolute;
      inset: 0;
      overflow: hidden;
    }

    .target {
      position: absolute;
      border-radius: 50%;
      border: 0;
      padding: 0;
      cursor: pointer;
      transform: translate(-50%, -50%) scale(0.68);
      animation: popIn 150ms ease-out forwards, pulse 640ms ease-in-out infinite alternate;
      box-shadow: 0 10px 24px rgba(40, 50, 90, 0.22), inset 0 0 0 1px rgba(255, 255, 255, 0.22);
      pointer-events: auto;
    }

    .target::before,
    .target::after {
      content: "";
      position: absolute;
      border-radius: 50%;
      inset: 0;
      pointer-events: none;
    }

    .target::before {
      inset: 16%;
      background: rgba(255, 255, 255, 0.9);
      mix-blend-mode: screen;
    }

    .target::after {
      inset: 38%;
      background: rgba(16, 29, 76, 0.78);
    }

    @keyframes popIn {
      to {
        transform: translate(-50%, -50%) scale(1);
      }
    }

    @keyframes pulse {
      to {
        transform: translate(-50%, -50%) scale(1.08);
      }
    }

    .target.hit {
      animation: hitOut 200ms ease forwards;
      pointer-events: none;
    }

    @keyframes hitOut {
      to {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 0;
      }
    }

    .ring {
      position: absolute;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      border: 2px solid rgba(31, 88, 216, 0.36);
      transform: translate(-50%, -50%);
      pointer-events: none;
      animation: ringOut 320ms ease-out forwards;
      z-index: 2;
    }

    @keyframes ringOut {
      to {
        width: 70px;
        height: 70px;
        opacity: 0;
      }
    }

    #overlay {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(244, 249, 255, 0.66);
      backdrop-filter: blur(7px);
      z-index: 7;
      transition: opacity 240ms ease;
    }

    #overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .panel {
      width: min(560px, calc(100% - 30px));
      background: linear-gradient(170deg, rgba(255, 255, 255, 0.98), rgba(248, 252, 255, 0.95));
      border: 1px solid rgba(125, 149, 214, 0.34);
      border-radius: 22px;
      box-shadow: 0 24px 54px rgba(41, 72, 152, 0.2);
      padding: 28px 24px 22px;
      text-align: center;
    }

    h1 {
      margin: 0 0 8px;
      font-size: clamp(30px, 4vw, 44px);
      line-height: 1.1;
      letter-spacing: -0.02em;
    }

    p {
      margin: 0;
      color: #546791;
      font-size: clamp(14px, 2vw, 17px);
    }

    .summary {
      margin-top: 16px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      text-align: left;
    }

    .summary .value {
      font-size: clamp(18px, 3vw, 28px);
    }

    .actions {
      margin-top: 18px;
      display: flex;
      justify-content: center;
    }

    button#playBtn {
      border: 0;
      border-radius: 999px;
      padding: 12px 26px;
      font-size: 16px;
      font-weight: 800;
      color: #fff;
      background: linear-gradient(130deg, #3b84ff, #5f63ff, #7d4dff);
      box-shadow: 0 12px 25px rgba(51, 95, 224, 0.34);
      cursor: pointer;
      transition: transform 120ms ease, box-shadow 120ms ease;
    }

    button#playBtn:hover {
      transform: translateY(-1px);
      box-shadow: 0 15px 28px rgba(51, 95, 224, 0.4);
    }

    button#playBtn:active {
      transform: translateY(1px) scale(0.99);
    }

    @media (max-width: 740px) {
      #hud {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .summary {
        grid-template-columns: 1fr;
      }

      .panel {
        padding: 22px 18px 18px;
      }
    }
  </style>
</head>
<body>
  <div id="app" aria-label="Target Clicker game area">
    <div id="hud" role="status" aria-live="polite">
      <div class="stat">
        <div class="label">Time</div>
        <div class="value" id="timeValue">20.0s</div>
      </div>
      <div class="stat">
        <div class="label">Score</div>
        <div class="value" id="scoreValue">0</div>
      </div>
      <div class="stat">
        <div class="label">Shots</div>
        <div class="value" id="shotsValue">0</div>
      </div>
      <div class="stat">
        <div class="label">Accuracy</div>
        <div class="value" id="accValue">0%</div>
      </div>
    </div>

    <div id="gameZone"></div>

    <div id="overlay">
      <div class="panel">
        <h1 id="title">Target Clicker</h1>
        <p id="subtitle">Click as many targets as possible in 20 seconds.</p>

        <div class="summary" id="summary" hidden>
          <div class="stat">
            <div class="label">Final Score</div>
            <div class="value" id="finalScore">0</div>
          </div>
          <div class="stat">
            <div class="label">Accuracy</div>
            <div class="value" id="finalAcc">0%</div>
          </div>
          <div class="stat">
            <div class="label">Hits / Shots</div>
            <div class="value" id="finalRatio">0 / 0</div>
          </div>
        </div>

        <div class="actions">
          <button id="playBtn" type="button">Start Game</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    (() => {
      const GAME_SECONDS = 20;
      const MIN_SIZE = 46;
      const MAX_SIZE = 92;

      const palette = [
        ["#ff6b8a", "#ff3e66"],
        ["#4dd2ff", "#1ea9ff"],
        ["#ffd166", "#ffb347"],
        ["#6ee7a0", "#35c57a"],
        ["#c69bff", "#9a6dff"],
        ["#ff8a5b", "#ff5e32"]
      ];

      const hudTime = document.getElementById("timeValue");
      const hudScore = document.getElementById("scoreValue");
      const hudShots = document.getElementById("shotsValue");
      const hudAcc = document.getElementById("accValue");

      const zone = document.getElementById("gameZone");
      const overlay = document.getElementById("overlay");
      const playBtn = document.getElementById("playBtn");
      const title = document.getElementById("title");
      const subtitle = document.getElementById("subtitle");
      const summary = document.getElementById("summary");
      const finalScore = document.getElementById("finalScore");
      const finalAcc = document.getElementById("finalAcc");
      const finalRatio = document.getElementById("finalRatio");

      let score = 0;
      let hits = 0;
      let shots = 0;
      let running = false;
      let endAt = 0;

      let spawnTimer = null;
      let rafId = null;
      const activeTargets = new Map();

      function random(min, max) {
        return Math.random() * (max - min) + min;
      }

      function clamp(n, min, max) {
        return Math.max(min, Math.min(max, n));
      }

      function accuracyPercent() {
        return shots > 0 ? Math.round((hits / shots) * 100) : 0;
      }

      function updateHud(timeLeft = GAME_SECONDS) {
        hudTime.textContent = `${timeLeft.toFixed(1)}s`;
        hudScore.textContent = String(score);
        hudShots.textContent = String(shots);
        hudAcc.textContent = `${accuracyPercent()}%`;
      }

      function clearTargets() {
        for (const [, t] of activeTargets) {
          if (t.timeout) clearTimeout(t.timeout);
          t.el.remove();
        }
        activeTargets.clear();
      }

      function spawnRipple(x, y, good) {
        const ring = document.createElement("div");
        ring.className = "ring";
        ring.style.left = `${x}px`;
        ring.style.top = `${y}px`;
        ring.style.borderColor = good ? "rgba(14, 167, 107, 0.55)" : "rgba(223, 61, 93, 0.5)";
        zone.appendChild(ring);
        ring.addEventListener("animationend", () => ring.remove(), { once: true });
      }

      function removeTarget(id) {
        const target = activeTargets.get(id);
        if (!target) return;
        if (target.timeout) clearTimeout(target.timeout);
        target.el.remove();
        activeTargets.delete(id);
      }

      function spawnTarget() {
        if (!running) return;

        const width = window.innerWidth;
        const height = window.innerHeight;
        const size = random(MIN_SIZE, MAX_SIZE);
        const margin = size * 0.6;
        const x = random(margin, width - margin);
        const y = random(margin + 70, height - margin - 6);

        const [c1, c2] = palette[(Math.random() * palette.length) | 0];
        const ttl = random(650, 1200);
        const id = `${Date.now()}-${Math.random().toString(36).slice(2, 7)}`;

        const el = document.createElement("button");
        el.className = "target";
        el.type = "button";
        el.style.left = `${x}px`;
        el.style.top = `${y}px`;
        el.style.width = `${size}px`;
        el.style.height = `${size}px`;
        el.style.background = `radial-gradient(circle at 28% 26%, ${c1}, ${c2})`;
        el.style.animationDuration = `160ms, ${random(520, 760).toFixed(0)}ms`;
        el.setAttribute("aria-label", "target");

        const targetData = { el, hit: false, timeout: null };
        activeTargets.set(id, targetData);

        el.addEventListener("click", (event) => {
          event.stopPropagation();
          if (!running || targetData.hit) return;

          targetData.hit = true;
          hits += 1;
          shots += 1;
          score += 10;
          updateHud(clamp((endAt - performance.now()) / 1000, 0, GAME_SECONDS));

          spawnRipple(x, y, true);
          el.classList.add("hit");
          setTimeout(() => removeTarget(id), 180);
        });

        zone.appendChild(el);

        targetData.timeout = setTimeout(() => {
          if (!activeTargets.has(id)) return;
          removeTarget(id);
        }, ttl);
      }

      function scheduleSpawns() {
        const next = () => {
          if (!running) return;
          spawnTarget();
          spawnTimer = setTimeout(next, random(165, 360));
        };
        next();
      }

      function tick() {
        if (!running) return;
        const now = performance.now();
        const left = clamp((endAt - now) / 1000, 0, GAME_SECONDS);
        updateHud(left);

        if (left <= 0) {
          endGame();
          return;
        }

        rafId = requestAnimationFrame(tick);
      }

      function startGame() {
        score = 0;
        hits = 0;
        shots = 0;
        running = true;
        endAt = performance.now() + GAME_SECONDS * 1000;

        overlay.classList.add("hidden");
        summary.hidden = true;
        title.textContent = "Target Clicker";
        subtitle.textContent = "Click targets fast. Misses hurt your accuracy.";
        playBtn.textContent = "Restart";

        clearTargets();
        updateHud(GAME_SECONDS);
        scheduleSpawns();
        rafId = requestAnimationFrame(tick);
      }

      function endGame() {
        running = false;
        if (spawnTimer) {
          clearTimeout(spawnTimer);
          spawnTimer = null;
        }
        if (rafId) {
          cancelAnimationFrame(rafId);
          rafId = null;
        }

        clearTargets();
        updateHud(0);

        const acc = accuracyPercent();
        finalScore.textContent = String(score);
        finalAcc.textContent = `${acc}%`;
        finalRatio.textContent = `${hits} / ${shots}`;

        title.textContent = "Time Up";
        subtitle.textContent = acc >= 70
          ? "Sharp shooting. Can you push your score even higher?"
          : "Good run. Focus on precision for a stronger finish.";
        summary.hidden = false;
        overlay.classList.remove("hidden");
      }

      zone.addEventListener("pointerdown", (event) => {
        if (!running) return;
        if (event.target.closest(".target")) return;
        shots += 1;
        updateHud(clamp((endAt - performance.now()) / 1000, 0, GAME_SECONDS));
        spawnRipple(event.clientX, event.clientY, false);
      });

      playBtn.addEventListener("click", startGame);

      window.addEventListener("blur", () => {
        if (!running) return;
        endGame();
      });

      window.addEventListener("resize", () => {
        for (const [id, t] of activeTargets) {
          if (!document.body.contains(t.el)) {
            activeTargets.delete(id);
          }
        }
      });

      updateHud(GAME_SECONDS);
    })();
  </script>
</body>
</html>
