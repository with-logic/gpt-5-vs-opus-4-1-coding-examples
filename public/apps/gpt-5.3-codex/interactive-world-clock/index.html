<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive World Clock</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Fraunces:opsz,wght@9..144,600;9..144,700&display=swap');

    :root {
      --bg-1: #f6efe2;
      --bg-2: #e8eef8;
      --ink: #122133;
      --muted: #4b5c73;
      --surface: rgba(255, 255, 255, 0.66);
      --border: rgba(255, 255, 255, 0.4);
      --shadow: 0 14px 38px rgba(24, 48, 86, 0.16);
      --radius: 18px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Space Grotesk", system-ui, -apple-system, Segoe UI, sans-serif;
      color: var(--ink);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(255, 196, 123, 0.32), transparent 65%),
        radial-gradient(900px 500px at 110% 20%, rgba(132, 179, 255, 0.34), transparent 60%),
        linear-gradient(140deg, var(--bg-1), var(--bg-2));
      padding: clamp(14px, 2.2vw, 28px);
      overflow-x: hidden;
    }

    .layout {
      width: min(1100px, 100%);
      margin: 0 auto;
      display: grid;
      gap: 18px;
    }

    .panel {
      background: var(--surface);
      backdrop-filter: blur(14px);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
    }

    .top {
      padding: clamp(16px, 2.6vw, 24px);
      display: grid;
      gap: 12px;
    }

    .headline {
      margin: 0;
      font-family: "Fraunces", Georgia, serif;
      font-weight: 700;
      letter-spacing: 0.2px;
      font-size: clamp(1.6rem, 3.8vw, 2.6rem);
      line-height: 1.06;
    }

    .subline {
      margin: 0;
      color: var(--muted);
      font-size: clamp(0.93rem, 1.6vw, 1rem);
    }

    .controls {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 4px;
    }

    .input-row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
    }

    select,
    button,
    .toggle {
      border: 0;
      border-radius: 12px;
      font: inherit;
    }

    select {
      width: 100%;
      padding: 12px 14px;
      background: rgba(255, 255, 255, 0.88);
      color: var(--ink);
      box-shadow: inset 0 0 0 1px rgba(26, 50, 85, 0.12);
      outline: none;
    }

    select:focus-visible,
    button:focus-visible,
    .toggle input:focus-visible + .track {
      box-shadow: 0 0 0 3px rgba(45, 109, 239, 0.25);
    }

    button {
      cursor: pointer;
      padding: 12px 16px;
      font-weight: 700;
      color: #fff;
      background: linear-gradient(135deg, #0f4eb8, #0a67db 58%, #2a8ced);
      transition: transform .16s ease, filter .16s ease;
      white-space: nowrap;
    }

    button:hover { filter: brightness(1.06); }
    button:active { transform: translateY(1px); }

    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .toggle-wrap {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--muted);
      font-weight: 500;
      font-size: 0.93rem;
    }

    .toggle {
      position: relative;
      width: 58px;
      height: 32px;
      display: inline-block;
    }

    .toggle input {
      position: absolute;
      width: 1px;
      height: 1px;
      margin: -1px;
      overflow: hidden;
      clip: rect(0 0 0 0);
      white-space: nowrap;
      border: 0;
    }

    .track {
      position: absolute;
      inset: 0;
      border-radius: 100px;
      background: linear-gradient(145deg, #ffcf89, #79b8ff);
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);
      transition: filter .2s ease;
    }

    .thumb {
      position: absolute;
      top: 4px;
      left: 4px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 4px 10px rgba(0,0,0,.18);
      transition: transform .2s ease;
    }

    .toggle input:checked + .track .thumb { transform: translateX(26px); }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 12px;
    }

    .card {
      --phase-a: #ffe7bf;
      --phase-b: #ffd99a;
      --phase-ink: #573f0d;
      border-radius: 16px;
      padding: 14px 14px 12px;
      background:
        radial-gradient(130% 120% at 100% 0%, rgba(255, 255, 255, 0.56), transparent 45%),
        linear-gradient(155deg, var(--phase-a), var(--phase-b));
      color: var(--phase-ink);
      min-height: 154px;
      display: grid;
      align-content: space-between;
      gap: 8px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.42), 0 10px 24px rgba(0, 0, 0, 0.08);
    }

    .card.enter {
      transform: translateY(6px);
      opacity: 0;
      animation: cardIn .42s ease forwards;
    }

    @keyframes cardIn {
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .card-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 8px;
    }

    .city {
      font-size: 1.04rem;
      font-weight: 700;
      line-height: 1.1;
    }

    .zone {
      font-size: 0.78rem;
      opacity: 0.82;
      margin-top: 3px;
    }

    .icon-badge {
      font-size: 1.35rem;
      line-height: 1;
      background: rgba(255,255,255,.35);
      border-radius: 10px;
      padding: 6px 8px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.45);
    }

    .time {
      font-family: "Fraunces", Georgia, serif;
      font-variant-numeric: tabular-nums;
      font-size: clamp(1.56rem, 3.4vw, 2rem);
      letter-spacing: 0.4px;
      line-height: 1;
      margin: 0;
    }

    .meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 0.79rem;
      opacity: 0.92;
    }

    .remove {
      border: 0;
      border-radius: 999px;
      font: inherit;
      font-size: 0.76rem;
      font-weight: 700;
      padding: 7px 10px;
      color: inherit;
      background: rgba(255,255,255,.38);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.46);
    }

    .remove:hover { filter: brightness(1.05); }

    .empty {
      border-radius: 14px;
      padding: 18px;
      border: 1px dashed rgba(34, 61, 96, 0.26);
      color: var(--muted);
      background: rgba(255, 255, 255, 0.42);
      font-size: 0.94rem;
    }

    .morning { --phase-a: #ffe8be; --phase-b: #ffc98e; --phase-ink: #593708; }
    .afternoon { --phase-a: #fff0b8; --phase-b: #ffdc6f; --phase-ink: #5d4600; }
    .evening { --phase-a: #ffd0b9; --phase-b: #f39ba2; --phase-ink: #5a1f2b; }
    .night { --phase-a: #2d3f69; --phase-b: #1f2746; --phase-ink: #eff4ff; }

    @media (max-width: 620px) {
      .input-row {
        grid-template-columns: 1fr;
      }

      button.add-btn { width: 100%; }
    }
  </style>
</head>
<body>
  <main class="layout" aria-live="polite">
    <section class="panel top">
      <h1 class="headline">Interactive World Clock</h1>
      <p class="subline">Track global time at a glance. Each city shifts colors by its local day phase.</p>

      <div class="controls">
        <div class="input-row">
          <select id="citySelect" aria-label="Select city to add"></select>
          <button class="add-btn" id="addCity" type="button">Add City</button>
        </div>

        <div class="toolbar">
          <div class="subline" id="summary">Loading times...</div>
          <label class="toggle-wrap">
            <span id="modeLabel">24-hour</span>
            <span class="toggle">
              <input type="checkbox" id="hourMode" aria-label="Toggle 12 and 24 hour time" />
              <span class="track"><span class="thumb"></span></span>
            </span>
            <span>12-hour</span>
          </label>
        </div>
      </div>
    </section>

    <section class="panel" style="padding: 12px;">
      <div id="clockGrid" class="grid"></div>
    </section>
  </main>

  <script>
    const CITY_OPTIONS = [
      { city: "New York", country: "USA", tz: "America/New_York" },
      { city: "Los Angeles", country: "USA", tz: "America/Los_Angeles" },
      { city: "Chicago", country: "USA", tz: "America/Chicago" },
      { city: "Denver", country: "USA", tz: "America/Denver" },
      { city: "Toronto", country: "Canada", tz: "America/Toronto" },
      { city: "Mexico City", country: "Mexico", tz: "America/Mexico_City" },
      { city: "Sao Paulo", country: "Brazil", tz: "America/Sao_Paulo" },
      { city: "Buenos Aires", country: "Argentina", tz: "America/Argentina/Buenos_Aires" },
      { city: "London", country: "United Kingdom", tz: "Europe/London" },
      { city: "Paris", country: "France", tz: "Europe/Paris" },
      { city: "Berlin", country: "Germany", tz: "Europe/Berlin" },
      { city: "Madrid", country: "Spain", tz: "Europe/Madrid" },
      { city: "Rome", country: "Italy", tz: "Europe/Rome" },
      { city: "Cairo", country: "Egypt", tz: "Africa/Cairo" },
      { city: "Lagos", country: "Nigeria", tz: "Africa/Lagos" },
      { city: "Nairobi", country: "Kenya", tz: "Africa/Nairobi" },
      { city: "Dubai", country: "UAE", tz: "Asia/Dubai" },
      { city: "Mumbai", country: "India", tz: "Asia/Kolkata" },
      { city: "Bangkok", country: "Thailand", tz: "Asia/Bangkok" },
      { city: "Singapore", country: "Singapore", tz: "Asia/Singapore" },
      { city: "Hong Kong", country: "Hong Kong", tz: "Asia/Hong_Kong" },
      { city: "Tokyo", country: "Japan", tz: "Asia/Tokyo" },
      { city: "Seoul", country: "South Korea", tz: "Asia/Seoul" },
      { city: "Beijing", country: "China", tz: "Asia/Shanghai" },
      { city: "Sydney", country: "Australia", tz: "Australia/Sydney" },
      { city: "Melbourne", country: "Australia", tz: "Australia/Melbourne" },
      { city: "Auckland", country: "New Zealand", tz: "Pacific/Auckland" },
      { city: "Honolulu", country: "USA", tz: "Pacific/Honolulu" }
    ];

    const DEFAULT_CITIES = [
      "America/New_York",
      "Europe/London",
      "Asia/Tokyo",
      "Australia/Sydney"
    ];

    const PHASES = {
      morning: { icon: "ðŸŒ…", label: "Morning" },
      afternoon: { icon: "â˜€ï¸", label: "Afternoon" },
      evening: { icon: "ðŸŒ‡", label: "Evening" },
      night: { icon: "ðŸŒ™", label: "Night" }
    };

    const store = {
      loadCities() {
        try {
          const data = JSON.parse(localStorage.getItem("iwc.cities") || "null");
          if (Array.isArray(data) && data.length) {
            return data.filter(tz => CITY_OPTIONS.some(c => c.tz === tz));
          }
        } catch (_) {}
        return [...DEFAULT_CITIES];
      },
      saveCities(cities) {
        localStorage.setItem("iwc.cities", JSON.stringify(cities));
      },
      loadHour12() {
        return localStorage.getItem("iwc.hour12") === "1";
      },
      saveHour12(value) {
        localStorage.setItem("iwc.hour12", value ? "1" : "0");
      }
    };

    const citySelect = document.getElementById("citySelect");
    const addCityBtn = document.getElementById("addCity");
    const hourModeToggle = document.getElementById("hourMode");
    const modeLabel = document.getElementById("modeLabel");
    const summaryEl = document.getElementById("summary");
    const grid = document.getElementById("clockGrid");

    const state = {
      cities: store.loadCities(),
      hour12: store.loadHour12(),
      initialized: false
    };

    function syncModeLabel() {
      modeLabel.textContent = `Mode: ${state.hour12 ? "12-hour" : "24-hour"}`;
    }

    function fillSelect() {
      citySelect.innerHTML = "";
      CITY_OPTIONS.forEach((item) => {
        const option = document.createElement("option");
        option.value = item.tz;
        option.textContent = `${item.city}, ${item.country} (${item.tz})`;
        citySelect.appendChild(option);
      });

      const firstAvailable = CITY_OPTIONS.find(c => !state.cities.includes(c.tz));
      if (firstAvailable) citySelect.value = firstAvailable.tz;
    }

    function getPhase(hour) {
      if (hour >= 5 && hour < 12) return "morning";
      if (hour >= 12 && hour < 17) return "afternoon";
      if (hour >= 17 && hour < 21) return "evening";
      return "night";
    }

    function getPart(formatter, date, type) {
      const part = formatter.formatToParts(date).find(p => p.type === type);
      return part ? part.value : "";
    }

    function getOffsetLabel(date, tz) {
      try {
        const value = getPart(new Intl.DateTimeFormat(undefined, {
          timeZone: tz,
          timeZoneName: "shortOffset",
          hour: "2-digit"
        }), date, "timeZoneName");

        return value.replace("GMT", "UTC");
      } catch (_) {
        return "UTC";
      }
    }

    function render() {
      const now = new Date();
      grid.innerHTML = "";

      if (!state.cities.length) {
        const empty = document.createElement("div");
        empty.className = "empty";
        empty.textContent = "No cities selected. Add one above to begin tracking world time.";
        grid.appendChild(empty);
      }

      const localTz = Intl.DateTimeFormat().resolvedOptions().timeZone;
      const localParts = new Intl.DateTimeFormat(undefined, {
        timeZone: localTz,
        hour: "2-digit",
        minute: "2-digit",
        hour12: state.hour12
      }).format(now);

      summaryEl.textContent = `Local time (${localTz}): ${localParts}`;

      state.cities.forEach((tz, idx) => {
        const cityData = CITY_OPTIONS.find(item => item.tz === tz);
        if (!cityData) return;

        const hour24 = parseInt(getPart(new Intl.DateTimeFormat("en-US", {
          timeZone: tz,
          hour: "2-digit",
          hour12: false
        }), now, "hour"), 10);

        const phase = getPhase(hour24);
        const phaseInfo = PHASES[phase];

        const timeLabel = new Intl.DateTimeFormat(undefined, {
          timeZone: tz,
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          hour12: state.hour12
        }).format(now);

        const dateLabel = new Intl.DateTimeFormat(undefined, {
          timeZone: tz,
          weekday: "short",
          month: "short",
          day: "numeric"
        }).format(now);

        const offsetLabel = getOffsetLabel(now, tz);

        const card = document.createElement("article");
        card.className = `card ${phase}${state.initialized ? "" : " enter"}`;
        card.style.animationDelay = `${idx * 35}ms`;

        card.innerHTML = `
          <div class="card-top">
            <div>
              <div class="city">${cityData.city}</div>
              <div class="zone">${cityData.country}</div>
            </div>
            <div class="icon-badge" title="${phaseInfo.label}">${phaseInfo.icon}</div>
          </div>

          <p class="time">${timeLabel}</p>

          <div class="meta">
            <span>${dateLabel} â€¢ ${offsetLabel}</span>
            <button class="remove" type="button" data-remove="${tz}">Remove</button>
          </div>
        `;

        grid.appendChild(card);
      });

      state.initialized = true;
    }

    function addCity(tz) {
      if (!tz || state.cities.includes(tz)) return;
      state.cities.push(tz);
      store.saveCities(state.cities);
      const nextAvailable = CITY_OPTIONS.find(c => !state.cities.includes(c.tz));
      if (nextAvailable) citySelect.value = nextAvailable.tz;
      render();
    }

    function removeCity(tz) {
      state.cities = state.cities.filter(cityTz => cityTz !== tz);
      store.saveCities(state.cities);
      render();
    }

    addCityBtn.addEventListener("click", () => addCity(citySelect.value));
    citySelect.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        addCity(citySelect.value);
      }
    });

    grid.addEventListener("click", (event) => {
      const target = event.target;
      if (!(target instanceof HTMLElement)) return;
      const tz = target.dataset.remove;
      if (tz) removeCity(tz);
    });

    hourModeToggle.checked = state.hour12;
    syncModeLabel();

    hourModeToggle.addEventListener("change", () => {
      state.hour12 = hourModeToggle.checked;
      store.saveHour12(state.hour12);
      syncModeLabel();
      render();
    });

    fillSelect();
    render();
    setInterval(render, 1000);
  </script>
</body>
</html>
