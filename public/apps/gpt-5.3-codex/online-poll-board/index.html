<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Online Poll Board</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@500;700;800&family=Sora:wght@400;600;700&display=swap');

    :root {
      --bg-1: #fffaf0;
      --bg-2: #e8fff9;
      --bg-3: #eef4ff;
      --ink: #24304a;
      --muted: #5f6b84;
      --panel: rgba(255, 255, 255, 0.8);
      --line: rgba(79, 94, 131, 0.16);
      --shadow: 0 20px 60px rgba(40, 62, 110, 0.15);
      --a: #56b6ff;
      --b: #6fe39d;
      --c: #ffbe5d;
      --d: #ff7fa3;
      --e: #a48dff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Sora', system-ui, sans-serif;
      color: var(--ink);
      background:
        radial-gradient(70rem 30rem at -10% -10%, #fff4ce 0%, transparent 70%),
        radial-gradient(65rem 28rem at 105% 0%, #d9f7ff 0%, transparent 72%),
        linear-gradient(140deg, var(--bg-1), var(--bg-2) 45%, var(--bg-3));
      overflow-x: hidden;
    }

    .orb {
      position: fixed;
      border-radius: 50%;
      z-index: 0;
      pointer-events: none;
      filter: blur(3px);
      opacity: 0.45;
      animation: drift 14s ease-in-out infinite;
    }

    .orb.one {
      width: 180px;
      height: 180px;
      left: 6%;
      top: 18%;
      background: #ffe08f;
    }

    .orb.two {
      width: 220px;
      height: 220px;
      right: 8%;
      top: 55%;
      background: #9befff;
      animation-delay: -5s;
    }

    .orb.three {
      width: 140px;
      height: 140px;
      right: 24%;
      top: 12%;
      background: #c8d1ff;
      animation-delay: -9s;
    }

    @keyframes drift {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-14px) scale(1.05); }
    }

    .app {
      width: min(1060px, calc(100% - 2rem));
      margin: 2rem auto 2.4rem;
      position: relative;
      z-index: 1;
    }

    .hero {
      border: 1px solid var(--line);
      background: var(--panel);
      box-shadow: var(--shadow);
      border-radius: 24px;
      padding: 1.4rem 1.4rem 1.2rem;
      backdrop-filter: blur(8px);
      display: grid;
      gap: 1rem;
    }

    .hero-head {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .title-group h1 {
      margin: 0;
      font-family: 'Nunito', sans-serif;
      font-weight: 800;
      letter-spacing: 0.01em;
      font-size: clamp(1.5rem, 3.8vw, 2.3rem);
    }

    .title-group p {
      margin: .45rem 0 0;
      color: var(--muted);
      font-size: .98rem;
    }

    .meta {
      display: flex;
      gap: .7rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .chip {
      border: 1px solid var(--line);
      background: rgba(255,255,255,.95);
      border-radius: 999px;
      padding: .5rem .85rem;
      font-weight: 600;
      font-size: .8rem;
      color: #33415f;
    }

    .stats-row {
      display: grid;
      gap: .75rem;
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .stat {
      background: rgba(255,255,255,.9);
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: .9rem .95rem;
    }

    .stat .label {
      font-size: .76rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: .06em;
      color: #6c7993;
      margin-bottom: .45rem;
      display: block;
    }

    .stat .value {
      font-size: clamp(1.1rem, 3vw, 1.45rem);
      font-weight: 800;
      font-family: 'Nunito', sans-serif;
    }

    .poll-grid {
      margin-top: 1.1rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: .9rem;
    }

    .poll-card {
      position: relative;
      border: 1px solid var(--line);
      background: rgba(255, 255, 255, 0.82);
      box-shadow: var(--shadow);
      border-radius: 18px;
      padding: 1rem;
      display: grid;
      gap: .75rem;
      overflow: hidden;
      isolation: isolate;
    }

    .poll-card::before {
      content: '';
      position: absolute;
      inset: 0;
      z-index: -1;
      background: linear-gradient(135deg, rgba(255,255,255,.35), rgba(255,255,255,0));
      pointer-events: none;
    }

    .poll-top {
      display: flex;
      justify-content: space-between;
      gap: .75rem;
      align-items: flex-start;
    }

    .poll-title {
      margin: 0;
      font-weight: 700;
      font-size: 1rem;
      line-height: 1.3;
    }

    .tiny {
      font-size: .76rem;
      color: var(--muted);
      font-weight: 600;
      white-space: nowrap;
    }

    .options {
      display: grid;
      gap: .55rem;
    }

    .option-btn {
      position: relative;
      border: 1px solid var(--line);
      border-radius: 12px;
      background: rgba(255,255,255,.95);
      color: #2f3a55;
      padding: .65rem .75rem;
      width: 100%;
      text-align: left;
      font: inherit;
      font-size: .92rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform .16s ease, border-color .2s ease, box-shadow .2s ease;
    }

    .option-btn:hover {
      transform: translateY(-1px);
      border-color: rgba(56, 116, 255, .35);
      box-shadow: 0 8px 18px rgba(56, 116, 255, .15);
    }

    .option-btn:active { transform: translateY(1px) scale(.995); }

    .option-btn:focus-visible {
      outline: 3px solid rgba(68, 131, 255, .35);
      outline-offset: 1px;
    }

    .result-list {
      display: grid;
      gap: .55rem;
    }

    .result-item {
      display: grid;
      gap: .3rem;
    }

    .result-head {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: .75rem;
      font-size: .82rem;
    }

    .result-name {
      color: #42506f;
      font-weight: 700;
    }

    .result-meta {
      color: #6f7e9e;
      font-weight: 700;
    }

    .bar-track {
      width: 100%;
      height: 9px;
      border-radius: 999px;
      background: rgba(181, 197, 232, .35);
      overflow: hidden;
      border: 1px solid rgba(103, 120, 158, .12);
    }

    .bar-fill {
      height: 100%;
      width: 0;
      border-radius: inherit;
      transition: width .6s cubic-bezier(.2, .8, .2, 1);
    }

    .actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .8rem;
      margin-top: .15rem;
    }

    .vote-pulse {
      color: #3d4d71;
      font-size: .8rem;
      font-weight: 700;
      min-height: 1.2em;
    }

    .reset-btn {
      border: 1px solid var(--line);
      background: rgba(255,255,255,.95);
      border-radius: 10px;
      padding: .42rem .68rem;
      font: inherit;
      font-size: .79rem;
      font-weight: 700;
      color: #42506f;
      cursor: pointer;
    }

    .reset-btn:hover { border-color: rgba(90, 107, 154, .38); }

    .burst {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .dot {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      opacity: 0;
      animation: pop .8s ease-out forwards;
    }

    @keyframes pop {
      0% { transform: translate(0, 0) scale(.2); opacity: .95; }
      100% { transform: translate(var(--x), var(--y)) scale(1); opacity: 0; }
    }

    @media (max-width: 760px) {
      .app { margin-top: 1rem; }
      .stats-row { grid-template-columns: 1fr; }
      .hero { padding: 1rem; }
    }
  </style>
</head>
<body>
  <div class="orb one"></div>
  <div class="orb two"></div>
  <div class="orb three"></div>

  <main class="app">
    <section class="hero" aria-label="Poll board dashboard">
      <div class="hero-head">
        <div class="title-group">
          <h1>Online Poll Board</h1>
          <p>Cast votes on community topics and watch results update instantly.</p>
        </div>
        <div class="meta">
          <span class="chip" id="liveBadge">Live • Mock Voting</span>
          <span class="chip" id="activityBadge">0 recent votes</span>
        </div>
      </div>

      <div class="stats-row">
        <article class="stat" aria-live="polite">
          <span class="label">Total Votes</span>
          <span class="value" id="totalVotes">0</span>
        </article>
        <article class="stat">
          <span class="label">Active Polls</span>
          <span class="value" id="activePolls">0</span>
        </article>
        <article class="stat" aria-live="polite">
          <span class="label">Most Voted Poll</span>
          <span class="value" id="topPoll">-</span>
        </article>
      </div>
    </section>

    <section class="poll-grid" id="pollGrid" aria-label="List of polls"></section>
  </main>

  <script>
    const palette = ['var(--a)', 'var(--b)', 'var(--c)', 'var(--d)', 'var(--e)'];

    const polls = [
      {
        id: 'p1',
        question: 'Which feature should we build next for the community app?',
        topic: 'Product',
        options: [
          { label: 'Offline mode', votes: 14 },
          { label: 'Group chat', votes: 9 },
          { label: 'Custom themes', votes: 18 },
          { label: 'Voice notes', votes: 7 }
        ]
      },
      {
        id: 'p2',
        question: 'What is your favorite time for live events?',
        topic: 'Events',
        options: [
          { label: 'Morning', votes: 8 },
          { label: 'Afternoon', votes: 16 },
          { label: 'Evening', votes: 21 },
          { label: 'Late night', votes: 5 }
        ]
      },
      {
        id: 'p3',
        question: 'Pick the next workshop topic:',
        topic: 'Learning',
        options: [
          { label: 'Design systems', votes: 11 },
          { label: 'Testing strategies', votes: 13 },
          { label: 'Web performance', votes: 19 },
          { label: 'AI integrations', votes: 22 }
        ]
      }
    ];

    const state = {
      recentVotes: 0,
      lastRecentTick: Date.now()
    };

    const refs = {
      grid: document.getElementById('pollGrid'),
      totalVotes: document.getElementById('totalVotes'),
      activePolls: document.getElementById('activePolls'),
      topPoll: document.getElementById('topPoll'),
      activityBadge: document.getElementById('activityBadge'),
      liveBadge: document.getElementById('liveBadge')
    };

    function sumVotes(poll) {
      return poll.options.reduce((sum, option) => sum + option.votes, 0);
    }

    function getTotalVotes() {
      return polls.reduce((sum, poll) => sum + sumVotes(poll), 0);
    }

    function getTopPoll() {
      return polls
        .map((poll) => ({ question: poll.question, total: sumVotes(poll) }))
        .sort((a, b) => b.total - a.total)[0];
    }

    function animateNumber(element, nextValue) {
      const current = Number(element.dataset.value || 0);
      const duration = 460;
      const start = performance.now();

      function frame(now) {
        const progress = Math.min((now - start) / duration, 1);
        const eased = 1 - Math.pow(1 - progress, 3);
        const value = Math.round(current + (nextValue - current) * eased);
        element.textContent = value.toLocaleString();
        if (progress < 1) {
          requestAnimationFrame(frame);
        } else {
          element.dataset.value = String(nextValue);
        }
      }

      requestAnimationFrame(frame);
    }

    function createPollCard(poll, index) {
      const card = document.createElement('article');
      card.className = 'poll-card';
      card.dataset.id = poll.id;

      const top = document.createElement('div');
      top.className = 'poll-top';

      const title = document.createElement('h2');
      title.className = 'poll-title';
      title.textContent = poll.question;

      const meta = document.createElement('span');
      meta.className = 'tiny';
      meta.textContent = poll.topic;

      top.append(title, meta);

      const optionsWrap = document.createElement('div');
      optionsWrap.className = 'options';

      poll.options.forEach((option, optionIndex) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.type = 'button';
        btn.textContent = `Vote: ${option.label}`;
        btn.addEventListener('click', () => vote(poll.id, optionIndex, card, option.label));
        optionsWrap.appendChild(btn);
      });

      const results = document.createElement('div');
      results.className = 'result-list';

      poll.options.forEach((option, optionIndex) => {
        const result = document.createElement('div');
        result.className = 'result-item';

        const head = document.createElement('div');
        head.className = 'result-head';

        const name = document.createElement('span');
        name.className = 'result-name';
        name.textContent = option.label;

        const stats = document.createElement('span');
        stats.className = 'result-meta';
        stats.dataset.role = 'meta';
        stats.dataset.optionIndex = String(optionIndex);

        const track = document.createElement('div');
        track.className = 'bar-track';

        const fill = document.createElement('div');
        fill.className = 'bar-fill';
        fill.style.background = palette[(index + optionIndex) % palette.length];
        fill.dataset.role = 'bar';
        fill.dataset.optionIndex = String(optionIndex);

        head.append(name, stats);
        track.appendChild(fill);
        result.append(head, track);
        results.appendChild(result);
      });

      const actions = document.createElement('div');
      actions.className = 'actions';

      const pulse = document.createElement('div');
      pulse.className = 'vote-pulse';
      pulse.dataset.role = 'pulse';
      pulse.textContent = 'Pick an option to cast a mock vote.';

      const resetBtn = document.createElement('button');
      resetBtn.className = 'reset-btn';
      resetBtn.type = 'button';
      resetBtn.textContent = 'Reset Poll';
      resetBtn.addEventListener('click', () => resetPoll(poll.id, card));

      actions.append(pulse, resetBtn);

      const burstLayer = document.createElement('div');
      burstLayer.className = 'burst';
      burstLayer.dataset.role = 'burst';

      card.append(top, optionsWrap, results, actions, burstLayer);
      return card;
    }

    function renderPolls() {
      refs.grid.innerHTML = '';
      polls.forEach((poll, i) => refs.grid.appendChild(createPollCard(poll, i)));
      refs.activePolls.textContent = polls.length;
      updateAllResults();
      updateSummary();
    }

    function updateSummary() {
      animateNumber(refs.totalVotes, getTotalVotes());
      refs.activePolls.textContent = String(polls.length);
      const top = getTopPoll();
      refs.topPoll.textContent = top ? `${top.total} votes` : '-';
      refs.topPoll.title = top ? top.question : '';

      const active = (Date.now() / 500) % 2 > 1;
      refs.liveBadge.style.opacity = active ? '1' : '.85';
      refs.liveBadge.style.transform = active ? 'translateY(0)' : 'translateY(-1px)';
    }

    function updatePollCard(poll, card) {
      const total = sumVotes(poll) || 1;
      const bars = card.querySelectorAll('[data-role="bar"]');
      const metas = card.querySelectorAll('[data-role="meta"]');

      bars.forEach((bar) => {
        const i = Number(bar.dataset.optionIndex);
        const votes = poll.options[i].votes;
        const percent = (votes / total) * 100;
        bar.style.width = `${percent.toFixed(1)}%`;
      });

      metas.forEach((meta) => {
        const i = Number(meta.dataset.optionIndex);
        const votes = poll.options[i].votes;
        const percent = Math.round((votes / total) * 100);
        meta.textContent = `${votes} • ${percent}%`;
      });
    }

    function updateAllResults() {
      polls.forEach((poll) => {
        const card = refs.grid.querySelector(`[data-id="${poll.id}"]`);
        if (card) updatePollCard(poll, card);
      });
    }

    function spawnBurst(card) {
      const layer = card.querySelector('[data-role="burst"]');
      if (!layer) return;

      const colors = ['#56b6ff', '#6fe39d', '#ffbe5d', '#ff7fa3'];
      for (let i = 0; i < 12; i++) {
        const dot = document.createElement('span');
        dot.className = 'dot';
        dot.style.left = `${44 + Math.random() * 12}%`;
        dot.style.top = `${62 + Math.random() * 12}%`;
        dot.style.background = colors[i % colors.length];
        dot.style.setProperty('--x', `${(Math.random() - 0.5) * 140}px`);
        dot.style.setProperty('--y', `${-16 - Math.random() * 95}px`);
        dot.style.animationDelay = `${Math.random() * 90}ms`;
        layer.appendChild(dot);
        setTimeout(() => dot.remove(), 900);
      }
    }

    function setPulse(card, message) {
      const pulse = card.querySelector('[data-role="pulse"]');
      if (!pulse) return;
      pulse.textContent = message;
      pulse.style.opacity = '0';
      requestAnimationFrame(() => {
        pulse.style.transition = 'opacity .25s ease';
        pulse.style.opacity = '1';
      });
    }

    function markRecentVote() {
      const now = Date.now();
      if (now - state.lastRecentTick > 5000) {
        state.recentVotes = 0;
      }
      state.lastRecentTick = now;
      state.recentVotes += 1;
      refs.activityBadge.textContent = `${state.recentVotes} recent vote${state.recentVotes === 1 ? '' : 's'}`;
    }

    function vote(pollId, optionIndex, card, label) {
      const poll = polls.find((p) => p.id === pollId);
      if (!poll) return;

      poll.options[optionIndex].votes += 1;
      updatePollCard(poll, card);
      updateSummary();
      markRecentVote();
      spawnBurst(card);
      setPulse(card, `Vote counted for "${label}"`);
    }

    function resetPoll(pollId, card) {
      const poll = polls.find((p) => p.id === pollId);
      if (!poll) return;

      poll.options.forEach((option) => {
        option.votes = Math.max(1, Math.floor(option.votes * (0.35 + Math.random() * 0.25)));
      });

      updatePollCard(poll, card);
      updateSummary();
      setPulse(card, 'Poll reset with fresh mock values.');
    }

    renderPolls();

    // Subtle autonomous activity to keep the board lively.
    setInterval(() => {
      const poll = polls[Math.floor(Math.random() * polls.length)];
      const option = Math.floor(Math.random() * poll.options.length);
      poll.options[option].votes += 1;
      const card = refs.grid.querySelector(`[data-id="${poll.id}"]`);
      if (card) updatePollCard(poll, card);
      updateSummary();
    }, 4500);
  </script>
</body>
</html>
