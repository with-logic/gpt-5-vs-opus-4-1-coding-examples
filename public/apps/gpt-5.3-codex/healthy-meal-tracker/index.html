<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Healthy Meal Tracker</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@500;700;800&family=DM+Sans:wght@400;500;700&display=swap');

    :root {
      --bg: #fffaf2;
      --bg-alt: #fff4e3;
      --card: #ffffff;
      --ink: #293241;
      --muted: #5f6b7a;
      --line: #eadfcb;
      --accent: #ee7f2d;
      --accent-2: #2a9d8f;
      --danger: #d34f4f;
      --shadow: 0 16px 40px rgba(87, 65, 22, 0.11);
      --radius: 18px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: 'DM Sans', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color: var(--ink);
      background:
        radial-gradient(circle at 8% 10%, #ffe3b3 0%, transparent 35%),
        radial-gradient(circle at 90% 90%, #c8f1d9 0%, transparent 35%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg-alt) 100%);
      padding: 24px;
    }

    .app {
      max-width: 1080px;
      margin: 0 auto;
      display: grid;
      gap: 20px;
      grid-template-columns: 1.1fr 1fr;
      align-items: start;
    }

    .panel {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .hero {
      grid-column: 1 / -1;
      padding: 26px;
      display: grid;
      gap: 16px;
      position: relative;
      isolation: isolate;
    }

    .hero::after {
      content: '';
      position: absolute;
      inset: auto -40px -70px auto;
      width: 220px;
      height: 220px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(238, 127, 45, 0.25), rgba(238, 127, 45, 0));
      z-index: -1;
    }

    .title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: 'Nunito', sans-serif;
      font-size: clamp(1.6rem, 2.5vw, 2.1rem);
      line-height: 1.1;
    }

    .title .icon {
      font-size: 1.8rem;
    }

    .subtitle {
      color: var(--muted);
      font-size: 0.98rem;
      max-width: 58ch;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
    }

    .stat {
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 12px;
      background: linear-gradient(180deg, #fffdf8 0%, #fff7eb 100%);
    }

    .stat .label {
      color: var(--muted);
      font-size: 0.78rem;
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 7px;
    }

    .stat .value {
      font-weight: 800;
      font-family: 'Nunito', sans-serif;
      font-size: 1.38rem;
      line-height: 1;
    }

    .goal-bar-wrap {
      margin-top: 4px;
      height: 9px;
      background: #f2e8d6;
      border-radius: 999px;
      overflow: hidden;
    }

    .goal-bar {
      width: 0;
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), #f2bd3f);
      transition: width 320ms ease;
    }

    .left, .right {
      padding: 20px;
      display: grid;
      gap: 16px;
    }

    .section-title {
      font-family: 'Nunito', sans-serif;
      font-weight: 800;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hint {
      color: var(--muted);
      font-size: 0.83rem;
      margin-top: -10px;
    }

    .field-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    label {
      font-size: 0.82rem;
      color: var(--muted);
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
    }

    input, select {
      width: 100%;
      border: 1px solid #dccfb7;
      background: #fffefc;
      border-radius: 12px;
      padding: 10px 12px;
      font-size: 0.95rem;
      outline: none;
      transition: border-color 160ms ease, box-shadow 160ms ease;
      color: var(--ink);
    }

    input:focus, select:focus {
      border-color: #e8a24d;
      box-shadow: 0 0 0 3px rgba(238, 127, 45, 0.2);
    }

    .btn {
      border: 0;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      padding: 10px 14px;
      font-family: inherit;
      color: #fff;
      background: var(--accent);
      transition: transform 120ms ease, filter 120ms ease;
    }

    .btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.04);
    }

    .btn.secondary {
      background: var(--accent-2);
    }

    .btn.ghost {
      color: var(--ink);
      background: #efe3ce;
    }

    .ingredient-pending {
      border: 1px dashed #d8c8a9;
      border-radius: 14px;
      padding: 10px;
      background: #fffcf5;
      display: grid;
      gap: 8px;
      min-height: 54px;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
    }

    .chip {
      background: #f7ebd7;
      border: 1px solid #e7d9bd;
      padding: 5px 9px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
    }

    .chip button {
      border: 0;
      background: transparent;
      color: var(--danger);
      cursor: pointer;
      font-size: 0.85rem;
      line-height: 1;
      padding: 0;
    }

    .list {
      display: grid;
      gap: 12px;
      max-height: 540px;
      overflow: auto;
      padding-right: 2px;
    }

    .meal-card {
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 12px;
      background: linear-gradient(180deg, #fff 0%, #fffaf2 100%);
      animation: reveal 280ms ease;
    }

    @keyframes reveal {
      from {
        opacity: 0;
        transform: translateY(6px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .meal-head {
      display: flex;
      align-items: start;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 8px;
    }

    .meal-title {
      font-family: 'Nunito', sans-serif;
      font-size: 1.03rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .meal-meta {
      color: var(--muted);
      font-size: 0.8rem;
      margin-top: 2px;
    }

    .meal-cal {
      font-weight: 800;
      font-size: 1rem;
      color: var(--accent);
      white-space: nowrap;
    }

    .meal-actions {
      display: flex;
      justify-content: end;
      margin-top: 8px;
    }

    .delete-btn {
      border: 0;
      background: #f9e2e2;
      color: #9f2929;
      border-radius: 8px;
      padding: 6px 8px;
      cursor: pointer;
      font-size: 0.8rem;
      font-weight: 700;
    }

    .empty {
      border: 1px dashed #decfb4;
      border-radius: 14px;
      padding: 18px;
      text-align: center;
      color: var(--muted);
      background: #fffdf8;
    }

    .footer-note {
      color: var(--muted);
      font-size: 0.78rem;
      text-align: center;
      margin-top: 2px;
    }

    @media (max-width: 930px) {
      .app {
        grid-template-columns: 1fr;
      }
      .summary-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 560px) {
      body {
        padding: 14px;
      }
      .hero,
      .left,
      .right {
        padding: 14px;
      }
      .field-row {
        grid-template-columns: 1fr;
      }
      .summary-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <main class="app" aria-label="Healthy Meal Tracker App">
    <section class="panel hero">
      <h1 class="title"><span class="icon" aria-hidden="true">ü•ó</span>Healthy Meal Tracker</h1>
      <p class="subtitle">Track meals, ingredients, and calories throughout your day. Build balanced choices with a quick, visual daily nutrition summary.</p>
      <div class="summary-grid">
        <article class="stat">
          <div class="label">üçΩÔ∏è Meals Logged</div>
          <div class="value" id="statMeals">0</div>
        </article>
        <article class="stat">
          <div class="label">üî• Total Calories</div>
          <div class="value" id="statCalories">0</div>
        </article>
        <article class="stat">
          <div class="label">ü•Ñ Ingredients Used</div>
          <div class="value" id="statIngredients">0</div>
        </article>
        <article class="stat">
          <div class="label">üéØ Goal Progress</div>
          <div class="value" id="statGoal">0%</div>
          <div class="goal-bar-wrap" aria-hidden="true"><div class="goal-bar" id="goalBar"></div></div>
        </article>
      </div>
    </section>

    <section class="panel left">
      <h2 class="section-title">üìù Log a Meal</h2>
      <p class="hint">Add ingredients first, then save the meal.</p>

      <div class="field-row">
        <div>
          <label for="mealName">Meal Name</label>
          <input id="mealName" type="text" maxlength="48" placeholder="e.g. Grilled Chicken Bowl" />
        </div>
        <div>
          <label for="mealType">Meal Type</label>
          <select id="mealType">
            <option value="Breakfast">üåÖ Breakfast</option>
            <option value="Lunch">‚òÄÔ∏è Lunch</option>
            <option value="Dinner">üåô Dinner</option>
            <option value="Snack">üçé Snack</option>
          </select>
        </div>
      </div>

      <div class="field-row">
        <div>
          <label for="ingredientName">Ingredient</label>
          <input id="ingredientName" type="text" maxlength="32" placeholder="e.g. Avocado" />
        </div>
        <div>
          <label for="ingredientCalories">Calories</label>
          <input id="ingredientCalories" type="number" min="0" max="2000" placeholder="e.g. 120" />
        </div>
      </div>

      <div class="field-row">
        <button id="addIngredientBtn" class="btn secondary" type="button">+ Add Ingredient</button>
        <button id="clearIngredientsBtn" class="btn ghost" type="button">Clear Ingredients</button>
      </div>

      <div class="ingredient-pending">
        <div class="hint">Current ingredient list</div>
        <div class="chip-row" id="pendingIngredients"></div>
      </div>

      <div class="field-row">
        <div>
          <label for="dailyGoal">Daily Calorie Goal</label>
          <input id="dailyGoal" type="number" min="500" max="10000" value="2200" />
        </div>
        <div>
          <label for="mealTime">Time</label>
          <input id="mealTime" type="time" />
        </div>
      </div>

      <button id="saveMealBtn" class="btn" type="button">Save Meal</button>
      <p class="footer-note">Data is saved locally in your browser.</p>
    </section>

    <section class="panel right">
      <h2 class="section-title">üìä Today's Meals</h2>
      <div class="list" id="mealList"></div>
    </section>
  </main>

  <script>
    (function () {
      const STORAGE_KEY = 'healthy-meal-tracker-v1';

      const state = {
        meals: [],
        draftIngredients: [],
        dailyGoal: 2200,
      };

      const $ = (id) => document.getElementById(id);

      const el = {
        mealName: $('mealName'),
        mealType: $('mealType'),
        ingredientName: $('ingredientName'),
        ingredientCalories: $('ingredientCalories'),
        pendingIngredients: $('pendingIngredients'),
        addIngredientBtn: $('addIngredientBtn'),
        clearIngredientsBtn: $('clearIngredientsBtn'),
        saveMealBtn: $('saveMealBtn'),
        mealList: $('mealList'),
        dailyGoal: $('dailyGoal'),
        mealTime: $('mealTime'),
        statMeals: $('statMeals'),
        statCalories: $('statCalories'),
        statIngredients: $('statIngredients'),
        statGoal: $('statGoal'),
        goalBar: $('goalBar'),
      };

      function nowTime() {
        const date = new Date();
        const h = String(date.getHours()).padStart(2, '0');
        const m = String(date.getMinutes()).padStart(2, '0');
        return h + ':' + m;
      }

      function mealIcon(type) {
        if (type === 'Breakfast') return 'üç≥';
        if (type === 'Lunch') return 'ü•™';
        if (type === 'Dinner') return 'üç≤';
        return 'üçè';
      }

      function fmtNum(v) {
        return Number(v).toLocaleString();
      }

      function saveState() {
        const payload = {
          meals: state.meals,
          dailyGoal: state.dailyGoal,
        };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));
      }

      function loadState() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          if (!raw) return;
          const parsed = JSON.parse(raw);
          if (Array.isArray(parsed.meals)) state.meals = parsed.meals;
          if (Number.isFinite(parsed.dailyGoal) && parsed.dailyGoal > 0) state.dailyGoal = parsed.dailyGoal;
        } catch (_) {
          // Ignore malformed local storage.
        }
      }

      function pushDraftIngredient() {
        const name = el.ingredientName.value.trim();
        const calories = Number(el.ingredientCalories.value);

        if (!name) {
          el.ingredientName.focus();
          return;
        }

        if (!Number.isFinite(calories) || calories < 0) {
          el.ingredientCalories.focus();
          return;
        }

        state.draftIngredients.push({
          id: crypto.randomUUID(),
          name,
          calories: Math.round(calories),
        });

        el.ingredientName.value = '';
        el.ingredientCalories.value = '';
        el.ingredientName.focus();
        renderDraftIngredients();
      }

      function removeDraftIngredient(id) {
        state.draftIngredients = state.draftIngredients.filter((i) => i.id !== id);
        renderDraftIngredients();
      }

      function clearDraftIngredients() {
        state.draftIngredients = [];
        renderDraftIngredients();
      }

      function renderDraftIngredients() {
        if (state.draftIngredients.length === 0) {
          el.pendingIngredients.innerHTML = '<span class="hint">No ingredients added yet.</span>';
          return;
        }

        el.pendingIngredients.innerHTML = state.draftIngredients.map((item) => (
          '<span class="chip">ü•¨ ' +
          escapeHtml(item.name) +
          ' ‚Ä¢ ' +
          fmtNum(item.calories) +
          ' cal <button type="button" data-remove-draft="' +
          item.id +
          '" aria-label="Remove ingredient">√ó</button></span>'
        )).join('');
      }

      function mealTotalCalories(meal) {
        return meal.ingredients.reduce((sum, i) => sum + i.calories, 0);
      }

      function addMeal() {
        const name = el.mealName.value.trim();
        const type = el.mealType.value;
        const time = el.mealTime.value || nowTime();

        if (!name) {
          el.mealName.focus();
          return;
        }

        if (state.draftIngredients.length === 0) {
          el.ingredientName.focus();
          return;
        }

        const meal = {
          id: crypto.randomUUID(),
          name,
          type,
          time,
          ingredients: state.draftIngredients.map((i) => ({ ...i })),
          createdAt: new Date().toISOString(),
        };

        state.meals.unshift(meal);
        state.draftIngredients = [];

        el.mealName.value = '';
        el.mealTime.value = nowTime();
        renderDraftIngredients();
        renderMeals();
        updateSummary();
        saveState();
      }

      function removeMeal(id) {
        state.meals = state.meals.filter((m) => m.id !== id);
        renderMeals();
        updateSummary();
        saveState();
      }

      function renderMeals() {
        if (state.meals.length === 0) {
          el.mealList.innerHTML = '<div class="empty">üçΩÔ∏è No meals logged yet. Start by adding ingredients and saving your first meal.</div>';
          return;
        }

        el.mealList.innerHTML = state.meals.map((meal) => {
          const total = mealTotalCalories(meal);
          const ingredients = meal.ingredients.map((i) => (
            '<span class="chip">' + escapeHtml(i.name) + ' ‚Ä¢ ' + fmtNum(i.calories) + ' cal</span>'
          )).join('');

          return (
            '<article class="meal-card">' +
              '<div class="meal-head">' +
                '<div>' +
                  '<div class="meal-title">' + mealIcon(meal.type) + ' ' + escapeHtml(meal.name) + '</div>' +
                  '<div class="meal-meta">' + escapeHtml(meal.type) + ' ‚Ä¢ ' + escapeHtml(meal.time) + '</div>' +
                '</div>' +
                '<div class="meal-cal">üî• ' + fmtNum(total) + ' cal</div>' +
              '</div>' +
              '<div class="chip-row">' + ingredients + '</div>' +
              '<div class="meal-actions"><button type="button" class="delete-btn" data-remove-meal="' + meal.id + '">Remove</button></div>' +
            '</article>'
          );
        }).join('');
      }

      function updateSummary() {
        const mealCount = state.meals.length;
        const totalCalories = state.meals.reduce((sum, meal) => sum + mealTotalCalories(meal), 0);
        const ingredientCount = state.meals.reduce((sum, meal) => sum + meal.ingredients.length, 0);
        const goal = Number(state.dailyGoal) || 1;
        const progress = Math.min(100, Math.round((totalCalories / goal) * 100));

        el.statMeals.textContent = fmtNum(mealCount);
        el.statCalories.textContent = fmtNum(totalCalories);
        el.statIngredients.textContent = fmtNum(ingredientCount);
        el.statGoal.textContent = fmtNum(progress) + '%';
        el.goalBar.style.width = progress + '%';
      }

      function setGoal(value) {
        const parsed = Number(value);
        if (!Number.isFinite(parsed) || parsed < 500) return;
        state.dailyGoal = Math.round(parsed);
        updateSummary();
        saveState();
      }

      function escapeHtml(str) {
        return String(str)
          .replaceAll('&', '&amp;')
          .replaceAll('<', '&lt;')
          .replaceAll('>', '&gt;')
          .replaceAll('"', '&quot;')
          .replaceAll("'", '&#39;');
      }

      function bindEvents() {
        el.addIngredientBtn.addEventListener('click', pushDraftIngredient);
        el.clearIngredientsBtn.addEventListener('click', clearDraftIngredients);
        el.saveMealBtn.addEventListener('click', addMeal);

        el.ingredientName.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            e.preventDefault();
            pushDraftIngredient();
          }
        });

        el.ingredientCalories.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            e.preventDefault();
            pushDraftIngredient();
          }
        });

        el.dailyGoal.addEventListener('input', () => setGoal(el.dailyGoal.value));

        el.pendingIngredients.addEventListener('click', (e) => {
          const target = e.target;
          if (!(target instanceof HTMLElement)) return;
          const id = target.getAttribute('data-remove-draft');
          if (id) removeDraftIngredient(id);
        });

        el.mealList.addEventListener('click', (e) => {
          const target = e.target;
          if (!(target instanceof HTMLElement)) return;
          const id = target.getAttribute('data-remove-meal');
          if (id) removeMeal(id);
        });
      }

      function init() {
        loadState();
        el.dailyGoal.value = String(state.dailyGoal);
        el.mealTime.value = nowTime();
        bindEvents();
        renderDraftIngredients();
        renderMeals();
        updateSummary();
      }

      init();
    })();
  </script>
</body>
</html>
