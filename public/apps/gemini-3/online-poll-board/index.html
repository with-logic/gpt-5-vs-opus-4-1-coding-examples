<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Poll Board</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <!-- Tailwind Config for Custom Colors/Fonts -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            /* Override with a more colorful delightful background */
            background: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);
            background: linear-gradient(to top left, #accbee 0%, #e7f0fd 100%);
            min-height: 100vh;
        }
        /* Hide scrollbar for cleaner look if needed, but keeping it accessible is better */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { motion, AnimatePresence } = window.Motion;

        // Mock Initial Data
        const INITIAL_POLLS = [
            {
                id: 1,
                question: "What's your favorite coding environment?",
                totalVotes: 1240,
                options: [
                    { id: 'opt1', text: "Dark Mode ðŸŒ™", votes: 850, color: "bg-indigo-500" },
                    { id: 'opt2', text: "Light Mode â˜€ï¸", votes: 120, color: "bg-amber-400" },
                    { id: 'opt3', text: "Cyberpunk Neon ðŸ¤–", votes: 270, color: "bg-pink-500" }
                ],
                voted: false
            },
            {
                id: 2,
                question: "Best companion for a coding session?",
                totalVotes: 892,
                options: [
                    { id: 'opt1', text: "Coffee â˜•", votes: 500, color: "bg-amber-700" },
                    { id: 'opt2', text: "Tea ðŸµ", votes: 250, color: "bg-green-500" },
                    { id: 'opt3', text: "Water ðŸ’§", votes: 100, color: "bg-blue-400" },
                    { id: 'opt4', text: "Energy Drink âš¡", votes: 42, color: "bg-red-500" }
                ],
                voted: false
            },
            {
                id: 3,
                question: "Which frontend framework do you prefer?",
                totalVotes: 3421,
                options: [
                    { id: 'opt1', text: "React", votes: 2100, color: "bg-cyan-500" },
                    { id: 'opt2', text: "Vue", votes: 800, color: "bg-emerald-500" },
                    { id: 'opt3', text: "Angular", votes: 300, color: "bg-red-600" },
                    { id: 'opt4', text: "Svelte", votes: 221, color: "bg-orange-500" }
                ],
                voted: false
            },
            {
                id: 4,
                question: "Where do you dream of working remotely?",
                totalVotes: 567,
                options: [
                    { id: 'opt1', text: "Beach House ðŸ–ï¸", votes: 200, color: "bg-blue-300" },
                    { id: 'opt2', text: "Mountain Cabin ðŸ”ï¸", votes: 250, color: "bg-stone-500" },
                    { id: 'opt3', text: "Bustling City ðŸ™ï¸", votes: 80, color: "bg-purple-500" },
                    { id: 'opt4', text: "Space Station ðŸš€", votes: 37, color: "bg-indigo-800" }
                ],
                voted: false
            }
        ];

        const Header = () => (
            <motion.header 
                initial={{ y: -50, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                transition={{ duration: 0.6 }}
                className="text-center py-10 px-4"
            >
                <div className="inline-block p-3 rounded-2xl bg-white/30 backdrop-blur-md shadow-sm mb-4">
                    <span className="text-2xl">ðŸ“Š</span>
                </div>
                <h1 className="text-4xl md:text-5xl font-bold text-slate-800 mb-2 tracking-tight">
                    Online Poll Board
                </h1>
                <p className="text-slate-600 text-lg max-w-xl mx-auto">
                    Cast your vote and see what the world thinks in real-time.
                </p>
            </motion.header>
        );

        const PollOption = ({ option, totalVotes, onClick, showResults, isLeading }) => {
            const percentage = totalVotes > 0 ? ((option.votes / totalVotes) * 100).toFixed(1) : 0;
            
            return (
                <motion.div 
                    layout
                    whileHover={!showResults ? { scale: 1.02, backgroundColor: "rgba(248, 250, 252, 1)" } : {}}
                    whileTap={!showResults ? { scale: 0.98 } : {}}
                    onClick={!showResults ? onClick : undefined}
                    className={`
                        relative overflow-hidden rounded-xl border p-4 cursor-pointer transition-colors
                        ${showResults ? 'border-transparent bg-slate-50' : 'border-slate-200 bg-white hover:border-blue-400 hover:shadow-md'}
                    `}
                >
                    {/* Progress Bar Background (Only visible in results mode) */}
                    {showResults && (
                        <motion.div 
                            initial={{ width: 0 }}
                            animate={{ width: `${percentage}%` }}
                            transition={{ duration: 1, ease: "easeOut" }}
                            className={`absolute top-0 left-0 h-full opacity-20 ${option.color}`}
                        />
                    )}

                    <div className="relative z-10 flex justify-between items-center">
                        <div className="flex items-center gap-3">
                            {/* Checkbox circle for voting state */}
                            {!showResults && (
                                <div className="w-5 h-5 rounded-full border-2 border-slate-300 flex items-center justify-center group-hover:border-blue-500">
                                    <div className="w-2.5 h-2.5 rounded-full bg-blue-500 opacity-0 group-hover:opacity-100 transition-opacity" />
                                </div>
                            )}
                            <span className={`font-medium ${showResults ? 'text-slate-800' : 'text-slate-700'}`}>
                                {option.text}
                            </span>
                        </div>

                        {showResults && (
                            <div className="text-right">
                                <motion.span 
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    className="block font-bold text-slate-800"
                                >
                                    {percentage}%
                                </motion.span>
                                <motion.span 
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    transition={{ delay: 0.2 }}
                                    className="text-xs text-slate-500"
                                >
                                    {option.votes.toLocaleString()} votes
                                </motion.span>
                            </div>
                        )}
                    </div>
                </motion.div>
            );
        };

        const PollCard = ({ poll, onVote }) => {
            const handleOptionClick = (optionId) => {
                if (poll.voted) return;
                onVote(poll.id, optionId);
            };

            const leadingOptionId = poll.options.reduce((prev, current) => 
                (prev.votes > current.votes) ? prev : current
            ).id;

            return (
                <motion.div
                    layout
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ duration: 0.5 }}
                    className="glass-panel rounded-2xl p-6 shadow-xl shadow-slate-200/50 flex flex-col h-full"
                >
                    <div className="mb-6">
                        <h2 className="text-xl font-bold text-slate-800 mb-2">{poll.question}</h2>
                        <div className="flex items-center gap-2 text-sm text-slate-500">
                            <span>{poll.totalVotes.toLocaleString()} votes</span>
                            <span>â€¢</span>
                            <span className={poll.voted ? "text-green-600 font-medium" : "text-amber-600"}>
                                {poll.voted ? "You voted" : "Poll open"}
                            </span>
                        </div>
                    </div>

                    <div className="space-y-3 flex-grow">
                        {poll.options.map(option => (
                            <PollOption 
                                key={option.id}
                                option={option}
                                totalVotes={poll.totalVotes}
                                onClick={() => handleOptionClick(option.id)}
                                showResults={poll.voted}
                                isLeading={poll.voted && option.id === leadingOptionId}
                            />
                        ))}
                    </div>

                    {poll.voted && (
                        <motion.div 
                            initial={{ opacity: 0 }}
                            animate={{ opacity: 1 }}
                            className="mt-6 text-center"
                        >
                            <button 
                                className="text-sm text-slate-400 hover:text-slate-600 underline decoration-dotted transition-colors"
                                onClick={(e) => {
                                    e.preventDefault();
                                    // In a real app this might retract votes, here we just show a message or do nothing
                                    // For this demo, let's keep it simple.
                                }}
                            >
                                Share this poll
                            </button>
                        </motion.div>
                    )}
                </motion.div>
            );
        };

        const Footer = () => (
            <footer className="py-12 text-center text-slate-500 text-sm">
                <p>Â© {new Date().getFullYear()} Online Poll Board. Mock Application.</p>
            </footer>
        );

        const App = () => {
            const [polls, setPolls] = useState(INITIAL_POLLS);

            const handleVote = (pollId, optionId) => {
                setPolls(prevPolls => prevPolls.map(poll => {
                    if (poll.id !== pollId) return poll;

                    // Increment votes
                    const updatedOptions = poll.options.map(opt => {
                        if (opt.id === optionId) {
                            return { ...opt, votes: opt.votes + 1 };
                        }
                        return opt;
                    });

                    return {
                        ...poll,
                        options: updatedOptions,
                        totalVotes: poll.totalVotes + 1,
                        voted: true
                    };
                }));
            };

            return (
                <div className="min-h-screen flex flex-col">
                    <Header />
                    
                    <main className="flex-grow container mx-auto px-4 py-8">
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8 max-w-5xl mx-auto">
                            <AnimatePresence>
                                {polls.map(poll => (
                                    <PollCard 
                                        key={poll.id} 
                                        poll={poll} 
                                        onVote={handleVote} 
                                    />
                                ))}
                            </AnimatePresence>
                        </div>
                    </main>

                    <Footer />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
