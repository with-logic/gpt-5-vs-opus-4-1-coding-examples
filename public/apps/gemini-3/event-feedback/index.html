<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback Central</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5;
            --bg: #f3f4f6;
            --surface: #ffffff;
            --border: #e5e7eb;
            --text-main: #111827;
            --text-sub: #6b7280;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* AI Summary */
        .ai-summary {
            background: linear-gradient(135deg, #e0e7ff 0%, #fae8ff 100%);
            border: 1px solid #c7d2fe;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 24px;
            position: relative;
        }

        .ai-title {
            font-weight: 600;
            color: #4338ca;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            cursor: pointer;
            color: #6b7280;
            font-size: 1.2rem;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        h1 { margin: 0; font-size: 1.5rem; }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 10px 16px 10px 40px;
            border: 1px solid var(--border);
            border-radius: 6px;
            width: 300px;
            font-size: 0.9rem;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-sub);
        }

        /* Table */
        .table-container {
            background: var(--surface);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            text-align: left;
        }

        thead {
            background-color: #f9fafb;
            border-bottom: 1px solid var(--border);
        }

        th {
            padding: 12px 24px;
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text-sub);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            user-select: none;
        }

        th:hover { background-color: #f3f4f6; }

        td {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            vertical-align: top;
            font-size: 0.95rem;
        }

        tr:last-child td { border-bottom: none; }
        tr:hover { background-color: #f9fafb; }

        .rating-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .rating-high { background: #dcfce7; color: #166534; }
        .rating-med { background: #fef9c3; color: #854d0e; }
        .rating-low { background: #fee2e2; color: #991b1b; }

        .feedback-text {
            max-width: 400px;
            color: var(--text-sub);
            line-height: 1.5;
        }

        .sort-icon::after {
            content: '‚Üï';
            font-size: 0.8em;
            margin-left: 5px;
            opacity: 0.3;
        }
        
        .sort-asc::after { content: '‚Üë'; opacity: 1; }
        .sort-desc::after { content: '‚Üì'; opacity: 1; }

    </style>
</head>
<body>

    <div class="container">
        
        <div class="ai-summary" id="aiBanner">
            <div class="ai-title">‚ú® AI Summary</div>
            <p>Overall sentiment is positive (4.2/5). Attendees praised the "Networking Session" but 15% mentioned the WiFi was spotty. Key suggestion: Increase break times.</p>
            <button class="close-btn" onclick="document.getElementById('aiBanner').style.display='none'">&times;</button>
        </div>

        <div class="controls">
            <h1>Participant Feedback</h1>
            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input type="text" id="searchInput" placeholder="Search events, names, or feedback..." onkeyup="filterTable()">
            </div>
        </div>

        <div class="table-container">
            <table id="feedbackTable">
                <thead>
                    <tr>
                        <th onclick="sortTable(0)">Date <span class="sort-icon"></span></th>
                        <th onclick="sortTable(1)">Event Name <span class="sort-icon"></span></th>
                        <th onclick="sortTable(2)">Participant <span class="sort-icon"></span></th>
                        <th onclick="sortTable(3)">Rating <span class="sort-icon"></span></th>
                        <th onclick="sortTable(4)">Feedback <span class="sort-icon"></span></th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- JS Rows -->
                </tbody>
            </table>
        </div>

    </div>

    <script>
        // Mock Data
        const events = ['Q3 Town Hall', 'Product Launch', 'Sales Kickoff', 'Team Retreat', 'Dev Conference'];
        const names = ['Alice Smith', 'Bob Jones', 'Charlie Brown', 'Diana Prince', 'Evan Wright', 'Fiona Lee', 'George King', 'Hannah Scott'];
        const feedbacks = [
            "Great session, learned a lot about the roadmap.",
            "The food was amazing, but the room was a bit cold.",
            "Slides were hard to read from the back.",
            "Excellent speakers, very inspiring keynote.",
            "Networking time was too short.",
            "I loved the interactive workshop part.",
            "WiFi connectivity issues were frustrating.",
            "Very well organized event.",
            "Can we have more Q&A time next time?",
            "The venue was perfect."
        ];

        let data = [];

        function generateData() {
            for (let i = 0; i < 30; i++) {
                const date = new Date(2025, Math.floor(Math.random() * 12), Math.floor(Math.random() * 28) + 1);
                const rating = Math.floor(Math.random() * 3) + 3; // 3 to 5
                data.push({
                    date: date.toISOString().split('T')[0],
                    event: events[Math.floor(Math.random() * events.length)],
                    name: names[Math.floor(Math.random() * names.length)],
                    rating: rating,
                    feedback: feedbacks[Math.floor(Math.random() * feedbacks.length)] + " " + feedbacks[Math.floor(Math.random() * feedbacks.length)]
                });
            }
        }

        function renderTable(rows) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            rows.forEach(row => {
                const tr = document.createElement('tr');
                
                let badgeClass = 'rating-med';
                if (row.rating >= 4.5) badgeClass = 'rating-high';
                if (row.rating <= 3) badgeClass = 'rating-low';

                tr.innerHTML = `
                    <td style="white-space:nowrap;">${row.date}</td>
                    <td style="font-weight:500;">${row.event}</td>
                    <td>
                        <div style="display:flex; align-items:center; gap:8px;">
                            <div style="width:24px; height:24px; background:#e0e7ff; border-radius:50%; color:#4f46e5; display:flex; align-items:center; justify-content:center; font-size:10px; font-weight:bold;">${row.name.charAt(0)}</div>
                            ${row.name}
                        </div>
                    </td>
                    <td><span class="rating-badge ${badgeClass}">${row.rating}/5</span></td>
                    <td class="feedback-text">${row.feedback}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function filterTable() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = data.filter(row => 
                row.event.toLowerCase().includes(query) ||
                row.name.toLowerCase().includes(query) ||
                row.feedback.toLowerCase().includes(query)
            );
            renderTable(filtered);
        }

        let currentSort = { col: -1, dir: 'asc' };

        function sortTable(colIndex) {
            const keys = ['date', 'event', 'name', 'rating', 'feedback'];
            const key = keys[colIndex];
            
            // Toggle direction
            if (currentSort.col === colIndex) {
                currentSort.dir = currentSort.dir === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.col = colIndex;
                currentSort.dir = 'asc';
            }

            // Update UI Icons
            document.querySelectorAll('th').forEach(th => th.classList.remove('sort-asc', 'sort-desc'));
            document.querySelectorAll('th')[colIndex].classList.add(currentSort.dir === 'asc' ? 'sort-asc' : 'sort-desc');

            // Sort
            data.sort((a, b) => {
                let valA = a[key];
                let valB = b[key];
                
                if (key === 'rating') {
                    // Number sort
                    return currentSort.dir === 'asc' ? valA - valB : valB - valA;
                } else {
                    // String sort
                    valA = valA.toLowerCase();
                    valB = valB.toLowerCase();
                    if (valA < valB) return currentSort.dir === 'asc' ? -1 : 1;
                    if (valA > valB) return currentSort.dir === 'asc' ? 1 : -1;
                    return 0;
                }
            });

            filterTable(); // Re-render with current filter
        }

        // Init
        generateData();
        renderTable(data);

    </script>
</body>
</html>
