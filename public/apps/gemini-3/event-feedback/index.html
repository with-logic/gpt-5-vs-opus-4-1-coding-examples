<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Feedback Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8; 
        }

        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .sort-icon {
            transition: transform 0.2s;
        }
    </style>
</head>
<body class="text-gray-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // --- Data Generation ---
        const generateData = () => {
            const events = [
                "Q1 All-Hands Meeting", "Product Strategy Workshop", "Team Building Retreat", 
                "Agile Training Session", "Customer Success Summit", "Annual Tech Conference", 
                "Leadership Offsite", "Hackathon 2025", "Marketing Kickoff", "Sales Enablement Webinar"
            ];
            
            const firstNames = [
                "Alex", "Jordan", "Taylor", "Morgan", "Casey", "Riley", "Jamie", "Quinn", "Avery", "Sam",
                "Sarah", "Michael", "Jessica", "David", "Emily", "Robert", "Jennifer", "William", "Elizabeth", "John"
            ];
            
            const lastNames = [
                "Smith", "Johnson", "Williams", "Brown", "Jones", "Garcia", "Miller", "Davis", "Rodriguez", "Martinez",
                "Hernandez", "Lopez", "Gonzalez", "Wilson", "Anderson", "Thomas", "Taylor", "Moore", "Jackson", "Martin"
            ];

            const feedbacks = [
                "The content was incredibly relevant to our current projects. I particularly enjoyed the breakout sessions.",
                "Overall good, but the audio quality during the keynote was a bit spotty. Hope to see that improved next time.",
                "Fantastic organization! The venue was perfect and the speakers were top-notch. I learned so much.",
                "It was okay, but I felt the agenda was too packed. We didn't have enough time for networking.",
                "I loved the interactive elements. It kept everyone engaged throughout the day. Great job team!",
                "The food options were a bit limited for vegetarians, but the sessions themselves were very informative.",
                "A bit too long. Could have been done in half a day. Some presentations felt repetitive.",
                "Truly inspiring. I'm going back to my team with a lot of new ideas to implement immediately.",
                "The pacing was perfect. Not too fast, not too slow. Appreciated the clear takeaways at the end.",
                "Technical difficulties delayed the start, which was frustrating. Content was fine though.",
                "One of the best events I've attended this year. The keynote speaker was absolutely brilliant.",
                "I found the workshops to be a bit basic. was expecting more advanced topics given the audience.",
                "Great energy in the room! The facilitators did a wonderful job keeping us on track.",
                "Please provide slides beforehand next time. It's hard to take notes and listen at the same time.",
                "Excellent networking opportunities. I met several key potential partners."
            ];

            const data = [];
            for (let i = 0; i < 30; i++) {
                const date = new Date(2025, Math.floor(Math.random() * 12), Math.floor(Math.random() * 28) + 1);
                data.push({
                    id: i + 1,
                    date: date.toISOString().split('T')[0],
                    eventName: events[Math.floor(Math.random() * events.length)],
                    participant: `${firstNames[Math.floor(Math.random() * firstNames.length)]} ${lastNames[Math.floor(Math.random() * lastNames.length)]}`,
                    rating: Math.floor(Math.random() * 3) + 3, // Skew towards 3-5 for realism
                    feedback: feedbacks[Math.floor(Math.random() * feedbacks.length)] + (Math.random() > 0.5 ? " " + feedbacks[Math.floor(Math.random() * feedbacks.length)] : "")
                });
            }
            // Sort by date initially
            return data.sort((a, b) => new Date(b.date) - new Date(a.date));
        };

        // --- Components ---

        const StarRating = ({ rating }) => {
            return (
                <div className="flex text-yellow-400 text-sm">
                    {[...Array(5)].map((_, i) => (
                        <i key={i} className={`fas fa-star ${i < rating ? "" : "text-gray-300"}`}></i>
                    ))}
                </div>
            );
        };

        const SummaryCard = ({ onClose }) => {
            return (
                <div className="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg shadow-lg p-6 mb-8 text-white relative animate-fade-in">
                    <button 
                        onClick={onClose}
                        className="absolute top-4 right-4 text-white/70 hover:text-white transition-colors"
                    >
                        <i className="fas fa-times"></i>
                    </button>
                    
                    <div className="flex items-start gap-4">
                        <div className="bg-white/20 p-3 rounded-full shrink-0">
                            <i className="fas fa-robot text-2xl"></i>
                        </div>
                        <div>
                            <h2 className="text-lg font-bold mb-2">AI Summary & Insights</h2>
                            <p className="text-white/90 leading-relaxed max-w-3xl">
                                Analysis of recent feedback indicates a <span className="font-semibold text-white">Strong Positive Sentiment (4.2/5)</span> across all events. 
                                Participants frequently praise "networking opportunities" and "interactive sessions." 
                                However, several mentions of "audio quality" and "dietary options" suggest areas for logistical improvement in upcoming Q3 events.
                            </p>
                            <div className="flex gap-3 mt-4">
                                <span className="px-3 py-1 bg-white/20 rounded-full text-xs font-medium">üî• High Engagement</span>
                                <span className="px-3 py-1 bg-white/20 rounded-full text-xs font-medium">‚ö†Ô∏è Logistics Check</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [data, setData] = useState([]);
            const [searchTerm, setSearchTerm] = useState("");
            const [sortConfig, setSortConfig] = useState({ key: 'date', direction: 'desc' });
            const [showSummary, setShowSummary] = useState(true);
            const [expandedRows, setExpandedRows] = useState(new Set());

            useEffect(() => {
                setData(generateData());
            }, []);

            const toggleRow = (id) => {
                const newExpanded = new Set(expandedRows);
                if (newExpanded.has(id)) {
                    newExpanded.delete(id);
                } else {
                    newExpanded.add(id);
                }
                setExpandedRows(newExpanded);
            };

            const handleSort = (key) => {
                let direction = 'asc';
                if (sortConfig.key === key && sortConfig.direction === 'asc') {
                    direction = 'desc';
                }
                setSortConfig({ key, direction });
            };

            const filteredData = useMemo(() => {
                const lowerSearch = searchTerm.toLowerCase();
                let processedData = data.filter(item => 
                    item.eventName.toLowerCase().includes(lowerSearch) ||
                    item.participant.toLowerCase().includes(lowerSearch) ||
                    item.feedback.toLowerCase().includes(lowerSearch)
                );

                if (sortConfig.key) {
                    processedData.sort((a, b) => {
                        if (a[sortConfig.key] < b[sortConfig.key]) {
                            return sortConfig.direction === 'asc' ? -1 : 1;
                        }
                        if (a[sortConfig.key] > b[sortConfig.key]) {
                            return sortConfig.direction === 'asc' ? 1 : -1;
                        }
                        return 0;
                    });
                }

                return processedData;
            }, [data, searchTerm, sortConfig]);

            const SortIcon = ({ columnKey }) => {
                if (sortConfig.key !== columnKey) return <i className="fas fa-sort text-gray-300 ml-2 text-xs"></i>;
                return sortConfig.direction === 'asc' 
                    ? <i className="fas fa-sort-up text-indigo-600 ml-2 text-xs"></i> 
                    : <i className="fas fa-sort-down text-indigo-600 ml-2 text-xs"></i>;
            };

            const TableHeader = ({ label, columnKey, className = "" }) => (
                <th 
                    className={`px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-50 transition-colors select-none ${className}`}
                    onClick={() => handleSort(columnKey)}
                >
                    <div className="flex items-center">
                        {label}
                        <SortIcon columnKey={columnKey} />
                    </div>
                </th>
            );

            return (
                <div className="min-h-screen p-6 md:p-10 max-w-7xl mx-auto">
                    
                    {/* Header */}
                    <header className="mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4">
                        <div>
                            <h1 className="text-3xl font-bold text-gray-900 tracking-tight">Feedback Dashboard</h1>
                            <p className="text-gray-500 mt-1">Real-time insights from participant surveys</p>
                        </div>
                        <div className="flex items-center gap-3">
                             <button className="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-50 shadow-sm transition-all">
                                <i className="fas fa-download mr-2"></i> Export CSV
                            </button>
                            <button className="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 shadow-sm transition-all shadow-indigo-200">
                                <i className="fas fa-plus mr-2"></i> New Event
                            </button>
                        </div>
                    </header>

                    {/* AI Summary */}
                    {showSummary && <SummaryCard onClose={() => setShowSummary(false)} />}

                    {/* Controls & Search */}
                    <div className="bg-white rounded-t-xl border border-b-0 border-gray-200 p-4 flex flex-col sm:flex-row justify-between items-center gap-4">
                        <div className="relative w-full sm:max-w-md">
                            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i className="fas fa-search text-gray-400"></i>
                            </div>
                            <input
                                type="text"
                                className="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 text-gray-900 placeholder-gray-400 focus:outline-none focus:bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition duration-150 ease-in-out"
                                placeholder="Search events, participants, or keywords..."
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                            />
                        </div>
                        <div className="text-sm text-gray-500 font-medium">
                            Showing {filteredData.length} entries
                        </div>
                    </div>

                    {/* Table */}
                    <div className="bg-white shadow-xl rounded-b-xl overflow-hidden border border-gray-200">
                        <div className="overflow-x-auto">
                            <table className="min-w-full divide-y divide-gray-200">
                                <thead className="bg-gray-50">
                                    <tr>
                                        <TableHeader label="Date" columnKey="date" className="w-32" />
                                        <TableHeader label="Event Name" columnKey="eventName" className="w-48" />
                                        <TableHeader label="Participant" columnKey="participant" className="w-48" />
                                        <TableHeader label="Rating" columnKey="rating" className="w-32" />
                                        <TableHeader label="Feedback" columnKey="feedback" />
                                    </tr>
                                </thead>
                                <tbody className="bg-white divide-y divide-gray-200">
                                    {filteredData.map((row) => (
                                        <tr key={row.id} className="hover:bg-indigo-50/30 transition-colors group">
                                            <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-medium">
                                                {row.date}
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap">
                                                <div className="text-sm font-semibold text-gray-900">{row.eventName}</div>
                                                <div className="text-xs text-gray-400">ID: EVT-{1000 + row.id}</div>
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap">
                                                <div className="flex items-center">
                                                    <div className="h-8 w-8 rounded-full bg-gradient-to-tr from-blue-400 to-indigo-500 flex items-center justify-center text-white text-xs font-bold mr-3 shadow-sm">
                                                        {row.participant.split(' ').map(n => n[0]).join('')}
                                                    </div>
                                                    <div className="text-sm font-medium text-gray-900">{row.participant}</div>
                                                </div>
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap">
                                                <StarRating rating={row.rating} />
                                                <span className="text-xs text-gray-400 mt-1 block">
                                                    {row.rating >= 4 ? "Satisfied" : row.rating === 3 ? "Neutral" : "Dissatisfied"}
                                                </span>
                                            </td>
                                            <td className="px-6 py-4 text-sm text-gray-600 relative min-w-[300px]">
                                                <div 
                                                    className={`cursor-pointer ${!expandedRows.has(row.id) ? "line-clamp-2" : ""}`}
                                                    onClick={() => toggleRow(row.id)}
                                                >
                                                    {row.feedback}
                                                </div>
                                                {row.feedback.length > 80 && (
                                                    <button 
                                                        onClick={(e) => { e.stopPropagation(); toggleRow(row.id); }}
                                                        className="text-indigo-600 hover:text-indigo-800 text-xs font-medium mt-1 focus:outline-none"
                                                    >
                                                        {expandedRows.has(row.id) ? "Show less" : "Read more"}
                                                    </button>
                                                )}
                                            </td>
                                        </tr>
                                    ))}
                                    {filteredData.length === 0 && (
                                        <tr>
                                            <td colSpan="5" className="px-6 py-10 text-center text-gray-500">
                                                <i className="fas fa-search text-4xl mb-3 text-gray-300"></i>
                                                <p>No results found matching "{searchTerm}"</p>
                                            </td>
                                        </tr>
                                    )}
                                </tbody>
                            </table>
                        </div>
                        
                        {/* Pagination Placeholder */}
                        <div className="bg-gray-50 px-6 py-3 border-t border-gray-200 flex items-center justify-between">
                             <div className="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                                <div>
                                    <p className="text-sm text-gray-700">
                                        Showing <span className="font-medium">1</span> to <span className="font-medium">{filteredData.length}</span> of <span className="font-medium">{filteredData.length}</span> results
                                    </p>
                                </div>
                                <div>
                                    <nav className="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                        <a href="#" className="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                            <span className="sr-only">Previous</span>
                                            <i className="fas fa-chevron-left h-5 w-5 p-1"></i>
                                        </a>
                                        <a href="#" aria-current="page" className="z-10 bg-indigo-50 border-indigo-500 text-indigo-600 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                                            1
                                        </a>
                                        <a href="#" className="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                                            2
                                        </a>
                                        <a href="#" className="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                                            3
                                        </a>
                                        <a href="#" className="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                            <span className="sr-only">Next</span>
                                            <i className="fas fa-chevron-right h-5 w-5 p-1"></i>
                                        </a>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
