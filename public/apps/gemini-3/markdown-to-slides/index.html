<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown → Slides</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Fira Code', 'monospace'],
                    },
                    colors: {
                        brand: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            900: '#1e3a8a',
                        }
                    },
                    typography: (theme) => ({
                        DEFAULT: {
                            css: {
                                maxWidth: 'none',
                                color: 'inherit',
                                h1: { color: 'inherit' },
                                h2: { color: 'inherit' },
                                h3: { color: 'inherit' },
                                h4: { color: 'inherit' },
                                code: { color: 'inherit' },
                                strong: { color: 'inherit' },
                                blockquote: { color: 'inherit' },
                            }
                        }
                    })
                }
            }
        }
    </script>

    <!-- Marked.js for Markdown Parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Fira+Code&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons (as SVG components in React to avoid extra dependencies) -->

    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Prevent body scroll, handle in components */
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #475569; 
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #64748b; 
        }

        /* Slide Transition Animations */
        .slide-enter {
            opacity: 0;
            transform: scale(0.98) translateY(10px);
        }
        .slide-enter-active {
            opacity: 1;
            transform: scale(1) translateY(0);
            transition: opacity 300ms ease-out, transform 300ms cubic-bezier(0.16, 1, 0.3, 1);
        }
        .slide-exit {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
        .slide-exit-active {
            opacity: 0;
            transform: scale(1.02);
            transition: opacity 200ms ease-in, transform 200ms ease-in;
        }

        /* Markdown Content Styling overrides for slides */
        .slide-content h1 {
            font-size: 3.5rem;
            line-height: 1.1;
            font-weight: 800;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
        }
        .slide-content h2 {
            font-size: 2.25rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1rem;
            letter-spacing: -0.01em;
            border-bottom: 2px solid currentColor;
            padding-bottom: 0.5rem;
            display: inline-block;
        }
        .slide-content h3 {
            font-size: 1.75rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .slide-content p {
            font-size: 1.5rem;
            line-height: 1.6;
            margin-bottom: 1.25rem;
            opacity: 0.9;
        }
        .slide-content ul, .slide-content ol {
            font-size: 1.5rem;
            line-height: 1.6;
            margin-left: 2rem;
            margin-bottom: 1.25rem;
            list-style-position: outside;
        }
        .slide-content ul { list-style-type: disc; }
        .slide-content li { margin-bottom: 0.5rem; }
        .slide-content blockquote {
            border-left: 6px solid currentColor;
            padding-left: 1.5rem;
            font-style: italic;
            opacity: 0.8;
            font-size: 1.5rem;
            margin: 2rem 0;
        }
        .slide-content pre {
            background: rgba(0,0,0,0.05);
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Fira Code', monospace;
            font-size: 1rem;
            overflow-x: auto;
            border: 1px solid rgba(0,0,0,0.1);
        }
        .dark .slide-content pre {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .slide-content code {
            font-family: 'Fira Code', monospace;
            background: rgba(0,0,0,0.05);
            padding: 0.1em 0.3em;
            border-radius: 0.2em;
            font-size: 0.8em;
        }
        .dark .slide-content code {
            background: rgba(255,255,255,0.15);
        }
        .slide-content img {
            max-width: 100%;
            max-height: 60vh;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            margin: 1rem auto;
            display: block;
        }
        .slide-content a {
            text-decoration: underline;
            text-underline-offset: 4px;
            opacity: 0.9;
        }
        .slide-content a:hover {
            opacity: 1;
        }
        
        /* Utility */
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .dark .glass-panel {
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- Icons ---
        const Icons = {
            Play: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>,
            Maximize: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>,
            Minimize: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path></svg>,
            Moon: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>,
            Sun: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>,
            ChevronLeft: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>,
            ChevronRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>,
            FileText: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
        };

        // --- Sample Data ---
        const SAMPLE_MARKDOWN = `# Present with Confidence
## Transform Markdown into Slides Instantly

---

# Why Markdown?

*   **Fast**: Just type, don't fiddle with layout.
*   **Portable**: It's just text.
*   **Version Control**: Easy to diff in Git.
*   **Focus**: Content first, design second.

---

## Code Highlighting

Great for technical demos.

    function helloWorld() {
      console.log("Hello, Presentation!");
      return true;
    }

> "Simplicity is the ultimate sophistication." 
> — Leonardo da Vinci

---

## Rich Content

We support:
1.  **Bold** and *Italic* text
2.  Lists (Ordered & Unordered)
3.  Images
4.  Links like [Google](https://google.com)

---

# The End

Thank you for watching!

Created with ❤️ by **Markdown → Slides**
`;

        // --- Components ---

        const Slide = ({ content, theme, isActive }) => {
            const htmlContent = useMemo(() => marked.parse(content), [content]);
            
            return (
                <div 
                    className={`
                        w-full h-full flex flex-col justify-center px-16 py-12 transition-all duration-300
                        ${isActive ? 'opacity-100 scale-100' : 'opacity-0 scale-95 pointer-events-none absolute inset-0'}
                        slide-content
                    `}
                    dangerouslySetInnerHTML={{ __html: htmlContent }} 
                />
            );
        };

        const ThemeButton = ({ onClick, active, children, color }) => (
            <button 
                onClick={onClick}
                className={`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 ${active ? 'ring-2 ring-offset-2 ring-blue-500 scale-110' : ''}`}
                style={{ backgroundColor: color, borderColor: active ? color : 'transparent' }}
            />
        );

        const App = () => {
            const [markdown, setMarkdown] = useState(SAMPLE_MARKDOWN);
            const [slides, setSlides] = useState([]);
            const [currentSlide, setCurrentSlide] = useState(0);
            const [themeMode, setThemeMode] = useState('light'); // 'light' or 'dark'
            const [presentationMode, setPresentationMode] = useState(false);
            const [colorTheme, setColorTheme] = useState('blue'); // 'blue', 'purple', 'emerald', 'slate'

            const textAreaRef = useRef(null);

            // Parse Markdown
            useEffect(() => {
                const rawSlides = markdown.split(/^---$/m);
                setSlides(rawSlides);
                // Adjust current slide index if it exceeds new count
                if (currentSlide >= rawSlides.length) {
                    setCurrentSlide(Math.max(0, rawSlides.length - 1));
                }
            }, [markdown]);

            // Theme Management
            useEffect(() => {
                if (themeMode === 'dark') {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }, [themeMode]);

            // Keyboard Navigation
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.target.tagName === 'TEXTAREA' && !presentationMode) return;

                    if (e.key === 'ArrowRight' || e.key === 'ArrowDown' || e.key === ' ') {
                        e.preventDefault();
                        nextSlide();
                    } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                        e.preventDefault();
                        prevSlide();
                    } else if (e.key === 'Escape') {
                        setPresentationMode(false);
                    }
                };

                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [currentSlide, slides.length, presentationMode]);

            const nextSlide = () => setCurrentSlide(curr => Math.min(curr + 1, slides.length - 1));
            const prevSlide = () => setCurrentSlide(curr => Math.max(curr - 1, 0));

            const togglePresentation = () => {
                setPresentationMode(!presentationMode);
            };

            const loadSample = () => {
                if(confirm("Load sample deck? This will overwrite your current text.")) {
                    setMarkdown(SAMPLE_MARKDOWN);
                    setCurrentSlide(0);
                }
            };

            const getThemeClasses = () => {
                // Background and text colors based on themeMode and colorTheme
                const base = themeMode === 'dark' ? 'bg-slate-900 text-white' : 'bg-white text-slate-800';
                
                // We can add subtle gradients or accents based on colorTheme
                let accent = '';
                switch(colorTheme) {
                    case 'purple': accent = themeMode === 'dark' ? 'selection:bg-purple-500' : 'selection:bg-purple-300'; break;
                    case 'emerald': accent = themeMode === 'dark' ? 'selection:bg-emerald-500' : 'selection:bg-emerald-300'; break;
                    case 'slate': accent = themeMode === 'dark' ? 'selection:bg-gray-500' : 'selection:bg-gray-300'; break;
                    default: accent = themeMode === 'dark' ? 'selection:bg-blue-500' : 'selection:bg-blue-300'; break;
                }
                
                return `${base} ${accent}`;
            };

            const getSlideBackground = () => {
                if (themeMode === 'light') {
                    switch(colorTheme) {
                        case 'purple': return 'bg-gradient-to-br from-fuchsia-50 to-purple-100';
                        case 'emerald': return 'bg-gradient-to-br from-emerald-50 to-teal-100';
                        case 'slate': return 'bg-gradient-to-br from-gray-50 to-slate-200';
                        default: return 'bg-gradient-to-br from-blue-50 to-indigo-100'; // Default Blue
                    }
                } else {
                     switch(colorTheme) {
                        case 'purple': return 'bg-gradient-to-br from-slate-900 to-purple-900';
                        case 'emerald': return 'bg-gradient-to-br from-slate-900 to-emerald-900';
                        case 'slate': return 'bg-gradient-to-br from-slate-900 to-black';
                        default: return 'bg-gradient-to-br from-slate-900 to-blue-900'; // Default Blue
                    }
                }
            };
            
            // Progress Bar Calculation
            const progress = ((currentSlide + 1) / slides.length) * 100;

            return (
                <div className={`flex h-screen flex-col ${getThemeClasses()} transition-colors duration-300`}>
                    
                    {/* Toolbar - Only visible when not presenting */} 
                    {!presentationMode && (
                        <header className="glass-panel sticky top-0 z-50 flex items-center justify-between px-6 py-3 shadow-sm">
                            <div className="flex items-center gap-3">
                                <div className="p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg text-white shadow-lg">
                                    <Icons.FileText />
                                </div>
                                <h1 className="text-lg font-bold tracking-tight hidden sm:block">Markdown → Slides</h1>
                            </div>

                            <div className="flex items-center gap-4">
                                {/* Color Theme Picker */}
                                <div className="flex gap-2 mr-4 border-r border-gray-300 dark:border-gray-700 pr-4">
                                    <ThemeButton color="#3b82f6" active={colorTheme === 'blue'} onClick={() => setColorTheme('blue')} />
                                    <ThemeButton color="#a855f7" active={colorTheme === 'purple'} onClick={() => setColorTheme('purple')} />
                                    <ThemeButton color="#10b981" active={colorTheme === 'emerald'} onClick={() => setColorTheme('emerald')} />
                                    <ThemeButton color="#64748b" active={colorTheme === 'slate'} onClick={() => setColorTheme('slate')} />
                                </div>

                                <button 
                                    onClick={() => setThemeMode(themeMode === 'light' ? 'dark' : 'light')}
                                    className="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
                                    title="Toggle Theme"
                                >
                                    {themeMode === 'light' ? <Icons.Moon /> : <Icons.Sun />}
                                </button>
                                
                                <button 
                                    onClick={loadSample}
                                    className="hidden md:block text-sm font-medium px-4 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
                                >
                                    Reset Sample
                                </button>

                                <button 
                                    onClick={togglePresentation}
                                    className="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg font-medium shadow-md transition-all hover:shadow-lg active:scale-95"
                                >
                                    <Icons.Play /> Present
                                </button>
                            </div>
                        </header>
                    )}

                    {/* Main Content Area */}
                    <main className="flex-1 flex overflow-hidden relative">
                        
                        {/* Editor Pane */}
                        <div className={`flex-1 flex flex-col border-r border-gray-200 dark:border-gray-800 transition-all duration-300 ${presentationMode ? 'hidden' : ''}`}>
                            <div className="flex-none px-4 py-2 bg-gray-50 dark:bg-slate-800 text-xs font-mono uppercase tracking-wider text-gray-500 border-b border-gray-200 dark:border-gray-700">
                                Markdown Source
                            </div>
                            <textarea
                                ref={textAreaRef}
                                className="flex-1 w-full p-6 resize-none focus:outline-none bg-transparent font-mono text-sm leading-relaxed"
                                value={markdown}
                                onChange={(e) => setMarkdown(e.target.value)}
                                placeholder="Write your slide content here using Markdown..."
                                spellCheck="false"
                            />
                        </div>

                        {/* Preview / Presentation Pane */}
                        <div className={`flex-1 relative flex flex-col ${presentationMode ? 'fixed inset-0 z-50' : 'bg-gray-100 dark:bg-black'}`}>
                            
                            {/* Slide Container */}
                            <div className={`flex-1 flex items-center justify-center p-4 ${presentationMode ? 'h-screen w-screen p-0' : ''}`}>
                                <div className={`
                                    aspect-video bg-white dark:bg-slate-900 shadow-2xl relative overflow-hidden flex flex-col
                                    ${presentationMode ? 'w-full h-full rounded-none' : 'w-full max-w-4xl rounded-xl border border-gray-200 dark:border-gray-700'}
                                    ${getSlideBackground()}
                                    transition-all duration-500
                                `}>
                                    
                                    {/* Slide Content Wrapper */}
                                    <div className="flex-1 relative overflow-y-auto">
                                         {slides.map((content, idx) => (
                                            <Slide 
                                                key={idx} 
                                                content={content} 
                                                theme={themeMode}
                                                isActive={idx === currentSlide}
                                            />
                                        ))}
                                    </div>

                                    {/* Slide Footer / Progress */}
                                    <div className="flex-none p-6 flex justify-between items-end text-sm opacity-50">
                                        <div className="font-mono">{currentSlide + 1} / {slides.length}</div>
                                        {presentationMode && (
                                            <div className="text-xs uppercase tracking-widest font-semibold">Markdown → Slides</div>
                                        )}
                                    </div>
                                    
                                    {/* Progress Bar */}
                                    <div className="h-1 bg-black/10 dark:bg-white/10 w-full">
                                        <div 
                                            className="h-full bg-blue-500 transition-all duration-300 ease-out"
                                            style={{ width: `${progress}%` }}
                                        />
                                    </div>

                                </div>
                            </div>

                            {/* Presentation Controls Overlay (visible on hover or movement in fullscreen) */}
                            {presentationMode && (
                                <button 
                                    onClick={() => setPresentationMode(false)}
                                    className="absolute top-4 right-4 p-3 bg-black/50 hover:bg-black/70 text-white rounded-full backdrop-blur-sm transition-all opacity-0 hover:opacity-100 focus:opacity-100 group-hover:opacity-100"
                                >
                                    <Icons.Minimize />
                                </button>
                            )}
                            
                            {/* Navigation Overlay (Mobile/Click friendly) */}
                            <div className="absolute inset-x-0 bottom-8 flex justify-center gap-4 pointer-events-none opacity-0 hover:opacity-100 transition-opacity duration-300">
                                <button onClick={prevSlide} className="pointer-events-auto p-3 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-md shadow-lg border border-white/10 text-current transition-transform active:scale-95 disabled:opacity-30" disabled={currentSlide === 0}>
                                    <Icons.ChevronLeft />
                                </button>
                                <button onClick={nextSlide} className="pointer-events-auto p-3 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-md shadow-lg border border-white/10 text-current transition-transform active:scale-95 disabled:opacity-30" disabled={currentSlide === slides.length - 1}>
                                    <Icons.ChevronRight />
                                </button>
                            </div>

                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>