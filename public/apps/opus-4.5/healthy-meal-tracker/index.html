<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthy Meal Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }

        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --secondary: #f59e0b;
            --danger: #ef4444;
            --bg-light: #f0fdf4;
        }

        body {
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 50%, #d1fae5 100%);
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .meal-card {
            transition: all 0.3s ease;
        }

        .meal-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .food-icon {
            font-size: 1.5rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .progress-ring {
            transition: stroke-dashoffset 0.5s ease;
        }

        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stat-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
        }

        .btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.4);
        }

        .ingredient-tag {
            transition: all 0.2s ease;
        }

        .ingredient-tag:hover {
            transform: scale(1.05);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }

        .scrollbar-thin::-webkit-scrollbar {
            width: 6px;
        }

        .scrollbar-thin::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #10b981;
            border-radius: 10px;
        }

        .modal-backdrop {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }

        .nutrient-bar {
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            background: #e5e7eb;
        }

        .nutrient-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="pb-8">
    <div id="app" class="max-w-6xl mx-auto px-4 py-6">
        <!-- Header -->
        <header class="text-center mb-8">
            <div class="flex items-center justify-center gap-3 mb-2">
                <span class="text-4xl">ü•ó</span>
                <h1 class="text-4xl font-bold text-gray-800">Healthy Meal Tracker</h1>
                <span class="text-4xl">üçé</span>
            </div>
            <p class="text-gray-600">Track your meals, monitor nutrition, achieve your health goals</p>
        </header>

        <!-- Daily Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <div class="stat-card glass-card rounded-2xl p-5 text-center">
                <div class="text-3xl mb-2">üî•</div>
                <div class="text-3xl font-bold text-emerald-600" id="totalCalories">0</div>
                <div class="text-gray-500 text-sm">Calories Today</div>
                <div class="mt-2 nutrient-bar">
                    <div class="nutrient-fill bg-emerald-500" id="calorieBar" style="width: 0%"></div>
                </div>
                <div class="text-xs text-gray-400 mt-1"><span id="calorieGoalDisplay">2000</span> cal goal</div>
            </div>
            <div class="stat-card glass-card rounded-2xl p-5 text-center">
                <div class="text-3xl mb-2">ü•©</div>
                <div class="text-3xl font-bold text-blue-600" id="totalProtein">0g</div>
                <div class="text-gray-500 text-sm">Protein</div>
                <div class="mt-2 nutrient-bar">
                    <div class="nutrient-fill bg-blue-500" id="proteinBar" style="width: 0%"></div>
                </div>
                <div class="text-xs text-gray-400 mt-1">50g goal</div>
            </div>
            <div class="stat-card glass-card rounded-2xl p-5 text-center">
                <div class="text-3xl mb-2">üçû</div>
                <div class="text-3xl font-bold text-amber-600" id="totalCarbs">0g</div>
                <div class="text-gray-500 text-sm">Carbs</div>
                <div class="mt-2 nutrient-bar">
                    <div class="nutrient-fill bg-amber-500" id="carbsBar" style="width: 0%"></div>
                </div>
                <div class="text-xs text-gray-400 mt-1">250g goal</div>
            </div>
            <div class="stat-card glass-card rounded-2xl p-5 text-center">
                <div class="text-3xl mb-2">ü•ë</div>
                <div class="text-3xl font-bold text-purple-600" id="totalFat">0g</div>
                <div class="text-gray-500 text-sm">Fat</div>
                <div class="mt-2 nutrient-bar">
                    <div class="nutrient-fill bg-purple-500" id="fatBar" style="width: 0%"></div>
                </div>
                <div class="text-xs text-gray-400 mt-1">65g goal</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Add Meal Form -->
            <div class="lg:col-span-1">
                <div class="glass-card rounded-2xl p-6 sticky top-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
                        <span>‚ûï</span> Add New Meal
                    </h2>
                    <form id="mealForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Meal Name</label>
                            <input type="text" id="mealName" required
                                class="w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:border-emerald-500"
                                placeholder="e.g., Breakfast Bowl">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Meal Type</label>
                            <select id="mealType"
                                class="w-full px-4 py-2.5 rounded-xl border border-gray-200 focus:border-emerald-500">
                                <option value="breakfast">üåÖ Breakfast</option>
                                <option value="lunch">‚òÄÔ∏è Lunch</option>
                                <option value="dinner">üåô Dinner</option>
                                <option value="snack">üçø Snack</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ingredients</label>
                            <div id="ingredientsList" class="flex flex-wrap gap-2 mb-2"></div>
                            <div class="flex gap-2">
                                <input type="text" id="ingredientInput"
                                    class="flex-1 px-4 py-2.5 rounded-xl border border-gray-200"
                                    placeholder="Add ingredient...">
                                <button type="button" id="addIngredientBtn"
                                    class="px-4 py-2.5 bg-emerald-100 text-emerald-700 rounded-xl hover:bg-emerald-200 transition">
                                    +
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Calories</label>
                                <input type="number" id="calories" required min="0"
                                    class="w-full px-4 py-2.5 rounded-xl border border-gray-200"
                                    placeholder="kcal">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Protein (g)</label>
                                <input type="number" id="protein" min="0" step="0.1"
                                    class="w-full px-4 py-2.5 rounded-xl border border-gray-200"
                                    placeholder="grams">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Carbs (g)</label>
                                <input type="number" id="carbs" min="0" step="0.1"
                                    class="w-full px-4 py-2.5 rounded-xl border border-gray-200"
                                    placeholder="grams">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Fat (g)</label>
                                <input type="number" id="fat" min="0" step="0.1"
                                    class="w-full px-4 py-2.5 rounded-xl border border-gray-200"
                                    placeholder="grams">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Notes (optional)</label>
                            <textarea id="mealNotes" rows="2"
                                class="w-full px-4 py-2.5 rounded-xl border border-gray-200"
                                placeholder="Any additional notes..."></textarea>
                        </div>

                        <button type="submit"
                            class="w-full btn-primary text-white font-semibold py-3 rounded-xl shadow-lg">
                            üçΩÔ∏è Log Meal
                        </button>
                    </form>

                    <!-- Quick Add Presets -->
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <h3 class="text-sm font-semibold text-gray-600 mb-3">Quick Add Presets</h3>
                        <div class="grid grid-cols-2 gap-2" id="presetButtons">
                            <button class="preset-btn px-3 py-2 bg-gray-50 rounded-xl text-sm hover:bg-emerald-50 hover:text-emerald-700 transition flex items-center gap-1"
                                data-name="Apple" data-calories="95" data-protein="0.5" data-carbs="25" data-fat="0.3" data-type="snack">
                                üçé Apple
                            </button>
                            <button class="preset-btn px-3 py-2 bg-gray-50 rounded-xl text-sm hover:bg-emerald-50 hover:text-emerald-700 transition flex items-center gap-1"
                                data-name="Banana" data-calories="105" data-protein="1.3" data-carbs="27" data-fat="0.4" data-type="snack">
                                üçå Banana
                            </button>
                            <button class="preset-btn px-3 py-2 bg-gray-50 rounded-xl text-sm hover:bg-emerald-50 hover:text-emerald-700 transition flex items-center gap-1"
                                data-name="Greek Yogurt" data-calories="100" data-protein="17" data-carbs="6" data-fat="0.7" data-type="breakfast">
                                ü•õ Yogurt
                            </button>
                            <button class="preset-btn px-3 py-2 bg-gray-50 rounded-xl text-sm hover:bg-emerald-50 hover:text-emerald-700 transition flex items-center gap-1"
                                data-name="Chicken Breast" data-calories="165" data-protein="31" data-carbs="0" data-fat="3.6" data-type="lunch">
                                üçó Chicken
                            </button>
                            <button class="preset-btn px-3 py-2 bg-gray-50 rounded-xl text-sm hover:bg-emerald-50 hover:text-emerald-700 transition flex items-center gap-1"
                                data-name="Salad Bowl" data-calories="250" data-protein="8" data-carbs="20" data-fat="15" data-type="lunch">
                                ü•ó Salad
                            </button>
                            <button class="preset-btn px-3 py-2 bg-gray-50 rounded-xl text-sm hover:bg-emerald-50 hover:text-emerald-700 transition flex items-center gap-1"
                                data-name="Oatmeal" data-calories="150" data-protein="5" data-carbs="27" data-fat="3" data-type="breakfast">
                                ü•£ Oatmeal
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Meals List -->
            <div class="lg:col-span-2">
                <div class="glass-card rounded-2xl p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-semibold text-gray-800 flex items-center gap-2">
                            <span>üìã</span> Today's Meals
                        </h2>
                        <div class="flex items-center gap-2">
                            <input type="date" id="dateFilter"
                                class="px-3 py-2 rounded-xl border border-gray-200 text-sm">
                            <button id="clearAllBtn"
                                class="px-3 py-2 bg-red-50 text-red-600 rounded-xl text-sm hover:bg-red-100 transition">
                                Clear All
                            </button>
                        </div>
                    </div>

                    <!-- Meal Sections -->
                    <div id="mealsContainer" class="space-y-6 scrollbar-thin max-h-[600px] overflow-y-auto pr-2">
                        <!-- Breakfast Section -->
                        <div class="meal-section" id="breakfastSection">
                            <h3 class="text-lg font-medium text-gray-700 mb-3 flex items-center gap-2">
                                <span class="text-2xl">üåÖ</span> Breakfast
                                <span class="text-sm text-gray-400" id="breakfastCal">(0 cal)</span>
                            </h3>
                            <div id="breakfastMeals" class="space-y-3"></div>
                        </div>

                        <!-- Lunch Section -->
                        <div class="meal-section" id="lunchSection">
                            <h3 class="text-lg font-medium text-gray-700 mb-3 flex items-center gap-2">
                                <span class="text-2xl">‚òÄÔ∏è</span> Lunch
                                <span class="text-sm text-gray-400" id="lunchCal">(0 cal)</span>
                            </h3>
                            <div id="lunchMeals" class="space-y-3"></div>
                        </div>

                        <!-- Dinner Section -->
                        <div class="meal-section" id="dinnerSection">
                            <h3 class="text-lg font-medium text-gray-700 mb-3 flex items-center gap-2">
                                <span class="text-2xl">üåô</span> Dinner
                                <span class="text-sm text-gray-400" id="dinnerCal">(0 cal)</span>
                            </h3>
                            <div id="dinnerMeals" class="space-y-3"></div>
                        </div>

                        <!-- Snacks Section -->
                        <div class="meal-section" id="snackSection">
                            <h3 class="text-lg font-medium text-gray-700 mb-3 flex items-center gap-2">
                                <span class="text-2xl">üçø</span> Snacks
                                <span class="text-sm text-gray-400" id="snackCal">(0 cal)</span>
                            </h3>
                            <div id="snackMeals" class="space-y-3"></div>
                        </div>

                        <!-- Empty State -->
                        <div id="emptyState" class="text-center py-12">
                            <div class="text-6xl mb-4">üçΩÔ∏è</div>
                            <h3 class="text-xl font-medium text-gray-600 mb-2">No meals logged yet</h3>
                            <p class="text-gray-400">Start by adding your first meal of the day!</p>
                        </div>
                    </div>
                </div>

                <!-- Weekly Summary -->
                <div class="glass-card rounded-2xl p-6 mt-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
                        <span>üìä</span> Weekly Overview
                    </h2>
                    <div class="grid grid-cols-7 gap-2" id="weeklyChart">
                        <!-- Generated by JS -->
                    </div>
                    <div class="flex justify-between mt-3 text-xs text-gray-400">
                        <span id="weekStart"></span>
                        <span id="weekEnd"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 bg-emerald-600 text-white px-6 py-3 rounded-xl shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 z-50">
        <span id="toastMessage">Meal added successfully!</span>
    </div>

    <script>
        // App State
        let meals = JSON.parse(localStorage.getItem('healthyMeals') || '[]');
        let ingredients = [];
        const CALORIE_GOAL = 2000;
        const PROTEIN_GOAL = 50;
        const CARBS_GOAL = 250;
        const FAT_GOAL = 65;

        // Food icons mapping
        const foodIcons = {
            'apple': 'üçé', 'banana': 'üçå', 'orange': 'üçä', 'grape': 'üçá', 'strawberry': 'üçì',
            'watermelon': 'üçâ', 'peach': 'üçë', 'mango': 'ü•≠', 'pineapple': 'üçç', 'coconut': 'ü••',
            'avocado': 'ü•ë', 'tomato': 'üçÖ', 'eggplant': 'üçÜ', 'potato': 'ü•î', 'carrot': 'ü•ï',
            'corn': 'üåΩ', 'pepper': 'üå∂Ô∏è', 'cucumber': 'ü•í', 'lettuce': 'ü•¨', 'broccoli': 'ü•¶',
            'garlic': 'üßÑ', 'onion': 'üßÖ', 'mushroom': 'üçÑ', 'peanut': 'ü•ú', 'chestnut': 'üå∞',
            'bread': 'üçû', 'croissant': 'ü•ê', 'baguette': 'ü•ñ', 'bagel': 'ü•Ø', 'pancake': 'ü•û',
            'waffle': 'üßá', 'cheese': 'üßÄ', 'egg': 'ü•ö', 'butter': 'üßà', 'bacon': 'ü•ì',
            'meat': 'ü•©', 'steak': 'ü•©', 'chicken': 'üçó', 'turkey': 'ü¶É', 'fish': 'üêü',
            'shrimp': 'ü¶ê', 'squid': 'ü¶ë', 'lobster': 'ü¶û', 'crab': 'ü¶Ä', 'oyster': 'ü¶™',
            'rice': 'üçö', 'pasta': 'üçù', 'ramen': 'üçú', 'soup': 'üç≤', 'curry': 'üçõ',
            'sushi': 'üç£', 'pizza': 'üçï', 'burger': 'üçî', 'fries': 'üçü', 'hotdog': 'üå≠',
            'sandwich': 'ü•™', 'taco': 'üåÆ', 'burrito': 'üåØ', 'salad': 'ü•ó', 'popcorn': 'üçø',
            'donut': 'üç©', 'cookie': 'üç™', 'cake': 'üéÇ', 'pie': 'ü•ß', 'chocolate': 'üç´',
            'candy': 'üç¨', 'ice cream': 'üç®', 'honey': 'üçØ', 'milk': 'ü•õ', 'coffee': '‚òï',
            'tea': 'üçµ', 'juice': 'üßÉ', 'smoothie': 'ü•§', 'yogurt': 'ü•õ', 'oatmeal': 'ü•£',
            'default': 'üç¥'
        };

        // Get icon for food
        function getFoodIcon(name) {
            const lowerName = name.toLowerCase();
            for (const [key, icon] of Object.entries(foodIcons)) {
                if (lowerName.includes(key)) return icon;
            }
            return foodIcons.default;
        }

        // Initialize date filter
        const dateFilter = document.getElementById('dateFilter');
        dateFilter.value = new Date().toISOString().split('T')[0];
        dateFilter.addEventListener('change', renderMeals);

        // Form elements
        const mealForm = document.getElementById('mealForm');
        const ingredientInput = document.getElementById('ingredientInput');
        const addIngredientBtn = document.getElementById('addIngredientBtn');
        const ingredientsList = document.getElementById('ingredientsList');

        // Add ingredient
        function addIngredient(name) {
            if (name && !ingredients.includes(name)) {
                ingredients.push(name);
                renderIngredients();
            }
        }

        // Render ingredients
        function renderIngredients() {
            ingredientsList.innerHTML = ingredients.map((ing, idx) => `
                <span class="ingredient-tag inline-flex items-center gap-1 px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm cursor-pointer"
                    onclick="removeIngredient(${idx})">
                    ${getFoodIcon(ing)} ${ing}
                    <span class="text-emerald-400 hover:text-emerald-600">√ó</span>
                </span>
            `).join('');
        }

        // Remove ingredient
        function removeIngredient(idx) {
            ingredients.splice(idx, 1);
            renderIngredients();
        }

        // Add ingredient button handler
        addIngredientBtn.addEventListener('click', () => {
            addIngredient(ingredientInput.value.trim());
            ingredientInput.value = '';
        });

        // Add ingredient on Enter
        ingredientInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                addIngredient(ingredientInput.value.trim());
                ingredientInput.value = '';
            }
        });

        // Form submit
        mealForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const meal = {
                id: Date.now(),
                name: document.getElementById('mealName').value,
                type: document.getElementById('mealType').value,
                ingredients: [...ingredients],
                calories: parseInt(document.getElementById('calories').value) || 0,
                protein: parseFloat(document.getElementById('protein').value) || 0,
                carbs: parseFloat(document.getElementById('carbs').value) || 0,
                fat: parseFloat(document.getElementById('fat').value) || 0,
                notes: document.getElementById('mealNotes').value,
                date: dateFilter.value,
                timestamp: new Date().toISOString()
            };

            meals.push(meal);
            saveMeals();
            renderMeals();
            updateSummary();
            updateWeeklyChart();

            // Reset form
            mealForm.reset();
            document.getElementById('mealType').value = 'breakfast';
            ingredients = [];
            renderIngredients();
            dateFilter.value = new Date().toISOString().split('T')[0];

            showToast('Meal logged successfully! üéâ');
        });

        // Preset buttons
        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const meal = {
                    id: Date.now(),
                    name: btn.dataset.name,
                    type: btn.dataset.type,
                    ingredients: [btn.dataset.name],
                    calories: parseInt(btn.dataset.calories),
                    protein: parseFloat(btn.dataset.protein),
                    carbs: parseFloat(btn.dataset.carbs),
                    fat: parseFloat(btn.dataset.fat),
                    notes: '',
                    date: dateFilter.value,
                    timestamp: new Date().toISOString()
                };

                meals.push(meal);
                saveMeals();
                renderMeals();
                updateSummary();
                updateWeeklyChart();
                showToast(`${btn.dataset.name} added! ${getFoodIcon(btn.dataset.name)}`);
            });
        });

        // Save meals to localStorage
        function saveMeals() {
            localStorage.setItem('healthyMeals', JSON.stringify(meals));
        }

        // Render meals
        function renderMeals() {
            const selectedDate = dateFilter.value;
            const filteredMeals = meals.filter(m => m.date === selectedDate);

            const sections = {
                breakfast: [],
                lunch: [],
                dinner: [],
                snack: []
            };

            filteredMeals.forEach(meal => {
                sections[meal.type].push(meal);
            });

            // Render each section
            Object.keys(sections).forEach(type => {
                const container = document.getElementById(`${type}Meals`);
                const section = document.getElementById(`${type}Section`);
                const calSpan = document.getElementById(`${type}Cal`);

                const sectionCals = sections[type].reduce((sum, m) => sum + m.calories, 0);
                calSpan.textContent = `(${sectionCals} cal)`;

                if (sections[type].length === 0) {
                    container.innerHTML = `
                        <div class="text-gray-400 text-sm italic py-2">No ${type} logged</div>
                    `;
                } else {
                    container.innerHTML = sections[type].map(meal => `
                        <div class="meal-card bg-white rounded-xl p-4 shadow-sm fade-in">
                            <div class="flex items-start justify-between">
                                <div class="flex items-start gap-3">
                                    <span class="text-3xl">${getFoodIcon(meal.name)}</span>
                                    <div>
                                        <h4 class="font-semibold text-gray-800">${meal.name}</h4>
                                        <div class="flex flex-wrap gap-1 mt-1">
                                            ${meal.ingredients.map(ing => `
                                                <span class="text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full">
                                                    ${getFoodIcon(ing)} ${ing}
                                                </span>
                                            `).join('')}
                                        </div>
                                        ${meal.notes ? `<p class="text-xs text-gray-400 mt-1">${meal.notes}</p>` : ''}
                                    </div>
                                </div>
                                <button onclick="deleteMeal(${meal.id})"
                                    class="text-gray-300 hover:text-red-500 transition p-1">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="mt-3 pt-3 border-t border-gray-100 flex items-center gap-4 text-sm">
                                <span class="text-emerald-600 font-medium">üî• ${meal.calories} cal</span>
                                <span class="text-blue-600">P: ${meal.protein}g</span>
                                <span class="text-amber-600">C: ${meal.carbs}g</span>
                                <span class="text-purple-600">F: ${meal.fat}g</span>
                            </div>
                        </div>
                    `).join('');
                }
            });

            // Show/hide empty state
            const emptyState = document.getElementById('emptyState');
            emptyState.style.display = filteredMeals.length === 0 ? 'block' : 'none';

            updateSummary();
        }

        // Delete meal
        function deleteMeal(id) {
            meals = meals.filter(m => m.id !== id);
            saveMeals();
            renderMeals();
            updateSummary();
            updateWeeklyChart();
            showToast('Meal removed');
        }

        // Update summary
        function updateSummary() {
            const selectedDate = dateFilter.value;
            const filteredMeals = meals.filter(m => m.date === selectedDate);

            const totals = filteredMeals.reduce((acc, meal) => {
                acc.calories += meal.calories;
                acc.protein += meal.protein;
                acc.carbs += meal.carbs;
                acc.fat += meal.fat;
                return acc;
            }, { calories: 0, protein: 0, carbs: 0, fat: 0 });

            document.getElementById('totalCalories').textContent = totals.calories;
            document.getElementById('totalProtein').textContent = `${totals.protein.toFixed(1)}g`;
            document.getElementById('totalCarbs').textContent = `${totals.carbs.toFixed(1)}g`;
            document.getElementById('totalFat').textContent = `${totals.fat.toFixed(1)}g`;

            // Update progress bars
            document.getElementById('calorieBar').style.width = `${Math.min(100, (totals.calories / CALORIE_GOAL) * 100)}%`;
            document.getElementById('proteinBar').style.width = `${Math.min(100, (totals.protein / PROTEIN_GOAL) * 100)}%`;
            document.getElementById('carbsBar').style.width = `${Math.min(100, (totals.carbs / CARBS_GOAL) * 100)}%`;
            document.getElementById('fatBar').style.width = `${Math.min(100, (totals.fat / FAT_GOAL) * 100)}%`;

            // Update calorie goal display
            document.getElementById('calorieGoalDisplay').textContent = CALORIE_GOAL;
        }

        // Clear all meals
        document.getElementById('clearAllBtn').addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all meals?')) {
                meals = [];
                saveMeals();
                renderMeals();
                updateSummary();
                updateWeeklyChart();
                showToast('All meals cleared');
            }
        });

        // Update weekly chart
        function updateWeeklyChart() {
            const chart = document.getElementById('weeklyChart');
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const today = new Date();
            const weekData = [];

            // Get data for last 7 days
            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                const dateStr = date.toISOString().split('T')[0];
                const dayMeals = meals.filter(m => m.date === dateStr);
                const totalCals = dayMeals.reduce((sum, m) => sum + m.calories, 0);
                weekData.push({
                    day: days[date.getDay()],
                    date: dateStr,
                    calories: totalCals,
                    isToday: i === 0
                });
            }

            const maxCals = Math.max(...weekData.map(d => d.calories), CALORIE_GOAL);

            chart.innerHTML = weekData.map(day => `
                <div class="text-center">
                    <div class="h-24 bg-gray-100 rounded-lg relative mb-1 overflow-hidden">
                        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t ${day.isToday ? 'from-emerald-500 to-emerald-300' : 'from-emerald-300 to-emerald-200'} transition-all duration-500"
                            style="height: ${(day.calories / maxCals) * 100}%">
                        </div>
                        <div class="absolute inset-0 flex items-end justify-center pb-1">
                            <span class="text-xs font-medium ${day.calories > 0 ? 'text-white' : 'text-gray-400'}">
                                ${day.calories > 0 ? day.calories : '-'}
                            </span>
                        </div>
                    </div>
                    <span class="text-xs ${day.isToday ? 'font-bold text-emerald-600' : 'text-gray-500'}">${day.day}</span>
                </div>
            `).join('');

            // Update week labels
            const startDate = weekData[0].date;
            const endDate = weekData[6].date;
            document.getElementById('weekStart').textContent = new Date(startDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            document.getElementById('weekEnd').textContent = new Date(endDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            toastMessage.textContent = message;
            toast.classList.remove('translate-y-20', 'opacity-0');
            toast.classList.add('translate-y-0', 'opacity-100');

            setTimeout(() => {
                toast.classList.remove('translate-y-0', 'opacity-100');
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        // Initialize
        renderMeals();
        updateSummary();
        updateWeeklyChart();
    </script>
</body>
</html>
