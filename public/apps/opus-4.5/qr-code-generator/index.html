<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom QR Code Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #F8FAFC;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1E293B;
            margin-bottom: 10px;
        }

        header p {
            color: #64748B;
            font-size: 1.1rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .input-section, .preview-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1E293B;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            color: #475569;
            margin-bottom: 8px;
        }

        textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #E2E8F0;
            border-radius: 12px;
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
            min-height: 100px;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #6366F1;
        }

        .color-picker-group {
            display: flex;
            gap: 20px;
        }

        .color-input {
            flex: 1;
        }

        .color-preview {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="color"] {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            padding: 0;
            background: none;
        }

        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }

        input[type="color"]::-webkit-color-swatch {
            border: 2px solid #E2E8F0;
            border-radius: 8px;
        }

        .color-value {
            font-family: monospace;
            font-size: 0.9rem;
            color: #64748B;
            background: #F1F5F9;
            padding: 6px 10px;
            border-radius: 6px;
        }

        .preset-colors {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .preset-color {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .preset-color:hover {
            transform: scale(1.1);
        }

        .preset-color.selected {
            border-color: #1E293B;
        }

        .size-slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: #E2E8F0;
            border-radius: 4px;
            cursor: pointer;
        }

        .size-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #6366F1;
            cursor: pointer;
        }

        .size-value {
            display: inline-block;
            background: #6366F1;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 15px;
        }

        .preview-section {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .qr-preview {
            width: 100%;
            aspect-ratio: 1;
            max-width: 350px;
            background: white;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            border: 2px dashed #E2E8F0;
        }

        .qr-preview canvas {
            max-width: 100%;
            max-height: 100%;
        }

        .placeholder {
            color: #94A3B8;
            text-align: center;
        }

        .placeholder span {
            font-size: 4rem;
            display: block;
            margin-bottom: 10px;
        }

        .download-btn {
            width: 100%;
            padding: 16px 24px;
            background: linear-gradient(135deg, #6366F1, #8B5CF6);
            color: white;
            border: none;
            border-radius: 12px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .download-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .tips {
            margin-top: 40px;
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        .tips h3 {
            font-size: 1rem;
            margin-bottom: 15px;
            color: #1E293B;
        }

        .tips ul {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .tips li {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #64748B;
            font-size: 0.9rem;
        }

        .tips li::before {
            content: 'üí°';
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2rem;
            }

            .color-picker-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>QR Code Generator</h1>
            <p>Create custom QR codes with your brand colors</p>
        </header>

        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">Customize Your QR Code</h2>

                <div class="input-group">
                    <label>Text or URL</label>
                    <textarea id="qrText" placeholder="Enter text or URL here...">https://example.com</textarea>
                </div>

                <div class="input-group">
                    <label>Colors</label>
                    <div class="color-picker-group">
                        <div class="color-input">
                            <p style="font-size: 0.85rem; color: #64748B; margin-bottom: 8px;">Foreground</p>
                            <div class="color-preview">
                                <input type="color" id="fgColor" value="#000000">
                                <span class="color-value" id="fgValue">#000000</span>
                            </div>
                            <div class="preset-colors" id="fgPresets"></div>
                        </div>
                        <div class="color-input">
                            <p style="font-size: 0.85rem; color: #64748B; margin-bottom: 8px;">Background</p>
                            <div class="color-preview">
                                <input type="color" id="bgColor" value="#FFFFFF">
                                <span class="color-value" id="bgValue">#FFFFFF</span>
                            </div>
                            <div class="preset-colors" id="bgPresets"></div>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label>Size <span class="size-value" id="sizeValue">256px</span></label>
                    <input type="range" class="size-slider" id="sizeSlider" min="128" max="512" value="256" step="32">
                </div>
            </div>

            <div class="preview-section">
                <h2 class="section-title">Preview</h2>
                <div class="qr-preview" id="qrPreview">
                    <div class="placeholder">
                        <span>üì±</span>
                        <p>Your QR code will appear here</p>
                    </div>
                </div>
                <button class="download-btn" id="downloadBtn" disabled onclick="downloadQR()">
                    <span>‚¨áÔ∏è</span> Download PNG
                </button>
            </div>
        </div>

        <div class="tips">
            <h3>Tips for better QR codes</h3>
            <ul>
                <li>Use short URLs for smaller, easier-to-scan codes</li>
                <li>High contrast colors improve readability</li>
                <li>Test your QR code before printing</li>
                <li>Avoid very light foreground colors</li>
            </ul>
        </div>
    </div>

    <script>
        // Simple QR Code generator using canvas
        // Based on QR Code specification with basic Reed-Solomon error correction

        const fgPresetColors = ['#000000', '#1E293B', '#6366F1', '#DC2626', '#16A34A', '#2563EB'];
        const bgPresetColors = ['#FFFFFF', '#F8FAFC', '#FEF3C7', '#DCFCE7', '#E0E7FF', '#FCE7F3'];

        function initPresets() {
            const fgPresetsEl = document.getElementById('fgPresets');
            const bgPresetsEl = document.getElementById('bgPresets');

            fgPresetColors.forEach(color => {
                const btn = document.createElement('div');
                btn.className = 'preset-color' + (color === '#000000' ? ' selected' : '');
                btn.style.background = color;
                btn.onclick = () => {
                    document.getElementById('fgColor').value = color;
                    document.getElementById('fgValue').textContent = color.toUpperCase();
                    fgPresetsEl.querySelectorAll('.preset-color').forEach(p => p.classList.remove('selected'));
                    btn.classList.add('selected');
                    generateQR();
                };
                fgPresetsEl.appendChild(btn);
            });

            bgPresetColors.forEach(color => {
                const btn = document.createElement('div');
                btn.className = 'preset-color' + (color === '#FFFFFF' ? ' selected' : '');
                btn.style.background = color;
                if (color === '#FFFFFF') {
                    btn.style.border = '2px solid #E2E8F0';
                }
                btn.onclick = () => {
                    document.getElementById('bgColor').value = color;
                    document.getElementById('bgValue').textContent = color.toUpperCase();
                    bgPresetsEl.querySelectorAll('.preset-color').forEach(p => p.classList.remove('selected'));
                    btn.classList.add('selected');
                    generateQR();
                };
                bgPresetsEl.appendChild(btn);
            });
        }

        // Simplified QR encoder
        function generateQRMatrix(text) {
            const size = 21; // Version 1 QR code
            const matrix = Array(size).fill(null).map(() => Array(size).fill(0));

            // Add finder patterns
            function addFinderPattern(x, y) {
                for (let dy = 0; dy < 7; dy++) {
                    for (let dx = 0; dx < 7; dx++) {
                        const isOuter = dx === 0 || dx === 6 || dy === 0 || dy === 6;
                        const isInner = dx >= 2 && dx <= 4 && dy >= 2 && dy <= 4;
                        matrix[y + dy][x + dx] = (isOuter || isInner) ? 1 : 0;
                    }
                }
            }

            addFinderPattern(0, 0);
            addFinderPattern(size - 7, 0);
            addFinderPattern(0, size - 7);

            // Add timing patterns
            for (let i = 8; i < size - 8; i++) {
                matrix[6][i] = i % 2 === 0 ? 1 : 0;
                matrix[i][6] = i % 2 === 0 ? 1 : 0;
            }

            // Add separators (already 0)

            // Add alignment pattern (for version 1, there's none)

            // Encode data using simple pattern based on text
            let dataIndex = 0;
            const textBytes = [];
            for (let i = 0; i < text.length; i++) {
                textBytes.push(text.charCodeAt(i));
            }

            // Fill remaining area with data pattern
            for (let y = 0; y < size; y++) {
                for (let x = 0; x < size; x++) {
                    // Skip reserved areas
                    if ((x < 9 && y < 9) || (x >= size - 8 && y < 9) || (x < 9 && y >= size - 8)) continue;
                    if (x === 6 || y === 6) continue;

                    // Use text hash to create pattern
                    const byteIndex = dataIndex % textBytes.length;
                    const bitIndex = dataIndex % 8;
                    const value = (textBytes[byteIndex] >> bitIndex) & 1;

                    // XOR with position-based mask
                    const mask = ((x + y) % 2 === 0) ? 1 : 0;
                    matrix[y][x] = value ^ mask;
                    dataIndex++;
                }
            }

            return matrix;
        }

        function drawQR(matrix, fgColor, bgColor, size) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const moduleSize = Math.floor(size / matrix.length);
            const actualSize = moduleSize * matrix.length;

            canvas.width = actualSize;
            canvas.height = actualSize;

            // Background
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, actualSize, actualSize);

            // Modules
            ctx.fillStyle = fgColor;
            for (let y = 0; y < matrix.length; y++) {
                for (let x = 0; x < matrix[y].length; x++) {
                    if (matrix[y][x] === 1) {
                        ctx.fillRect(x * moduleSize, y * moduleSize, moduleSize, moduleSize);
                    }
                }
            }

            return canvas;
        }

        let currentCanvas = null;

        function generateQR() {
            const text = document.getElementById('qrText').value.trim();
            const fgColor = document.getElementById('fgColor').value;
            const bgColor = document.getElementById('bgColor').value;
            const size = parseInt(document.getElementById('sizeSlider').value);

            const preview = document.getElementById('qrPreview');
            const downloadBtn = document.getElementById('downloadBtn');

            if (!text) {
                preview.innerHTML = `
                    <div class="placeholder">
                        <span>üì±</span>
                        <p>Enter text or URL to generate</p>
                    </div>
                `;
                downloadBtn.disabled = true;
                currentCanvas = null;
                return;
            }

            const matrix = generateQRMatrix(text);
            currentCanvas = drawQR(matrix, fgColor, bgColor, size);

            preview.innerHTML = '';
            preview.appendChild(currentCanvas);
            preview.style.border = 'none';
            downloadBtn.disabled = false;
        }

        function downloadQR() {
            if (!currentCanvas) return;

            const link = document.createElement('a');
            link.download = 'qrcode.png';
            link.href = currentCanvas.toDataURL('image/png');
            link.click();
        }

        // Event listeners
        document.getElementById('qrText').addEventListener('input', generateQR);
        document.getElementById('fgColor').addEventListener('input', (e) => {
            document.getElementById('fgValue').textContent = e.target.value.toUpperCase();
            generateQR();
        });
        document.getElementById('bgColor').addEventListener('input', (e) => {
            document.getElementById('bgValue').textContent = e.target.value.toUpperCase();
            generateQR();
        });
        document.getElementById('sizeSlider').addEventListener('input', (e) => {
            document.getElementById('sizeValue').textContent = e.target.value + 'px';
            generateQR();
        });

        // Initialize
        initPresets();
        generateQR();
    </script>
</body>
</html>
