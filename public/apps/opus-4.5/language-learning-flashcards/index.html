<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Learning Flashcards</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --bg-gradient-start: #0f172a;
            --bg-gradient-end: #1e1b4b;
            --card-bg: rgba(255, 255, 255, 0.1);
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Language Selection Screen */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .language-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .language-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .language-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }

        .language-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(99, 102, 241, 0.3);
        }

        .language-card:hover::before {
            opacity: 0.1;
        }

        .language-card > * {
            position: relative;
            z-index: 1;
        }

        .language-flag {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: block;
        }

        .language-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .language-native {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Flashcard Screen */
        .flashcard-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 0;
        }

        .progress-bar {
            width: 100%;
            max-width: 500px;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 4px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .progress-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 2rem;
        }

        .card-wrapper {
            perspective: 1000px;
            width: 100%;
            max-width: 500px;
            height: 320px;
            margin-bottom: 2rem;
        }

        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard.shuffle-out {
            animation: shuffleOut 0.3s ease forwards;
        }

        .flashcard.shuffle-in {
            animation: shuffleIn 0.3s ease forwards;
        }

        .flashcard.learned {
            animation: learnedAnim 0.5s ease forwards;
        }

        @keyframes shuffleOut {
            0% { transform: translateX(0) rotateY(0); opacity: 1; }
            100% { transform: translateX(-100%) rotateY(-15deg); opacity: 0; }
        }

        @keyframes shuffleIn {
            0% { transform: translateX(100%) rotateY(15deg); opacity: 0; }
            100% { transform: translateX(0) rotateY(0); opacity: 1; }
        }

        @keyframes learnedAnim {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: translateY(-20px) scale(0.9); opacity: 0; }
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .card-front {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.3) 0%, rgba(236, 72, 153, 0.3) 100%);
            backdrop-filter: blur(10px);
        }

        .card-back {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.3) 0%, rgba(99, 102, 241, 0.3) 100%);
            backdrop-filter: blur(10px);
            transform: rotateY(180deg);
        }

        .card-label {
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .card-text {
            font-size: 2rem;
            font-weight: 600;
            line-height: 1.4;
            margin-bottom: 1rem;
        }

        .card-pronunciation {
            font-size: 1rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .tap-hint {
            position: absolute;
            bottom: 1.5rem;
            font-size: 0.75rem;
            color: var(--text-secondary);
            opacity: 0.7;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 1rem;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 1rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.5);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .nav-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--primary);
            border-color: var(--primary);
            transform: scale(1.1);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Completion Screen */
        .completion-screen {
            text-align: center;
            padding: 3rem;
        }

        .completion-icon {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .completion-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--success) 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .completion-message {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* Back button */
        .back-btn {
            position: absolute;
            top: 2rem;
            left: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
            padding: 0.75rem 1.25rem;
            border-radius: 0.75rem;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: inherit;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-3px);
        }

        /* Responsive */
        @media (max-width: 640px) {
            .container {
                padding: 1rem;
            }

            .logo {
                font-size: 2rem;
            }

            .card-wrapper {
                height: 280px;
            }

            .card-text {
                font-size: 1.5rem;
            }

            .btn {
                padding: 0.875rem 1.5rem;
                font-size: 0.9rem;
            }

            .language-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .language-card {
                padding: 1.5rem 1rem;
            }

            .language-flag {
                font-size: 3rem;
            }

            .language-name {
                font-size: 1.2rem;
            }

            .back-btn {
                top: 1rem;
                left: 1rem;
                padding: 0.5rem 1rem;
                font-size: 0.8rem;
            }
        }

        /* Floating particles background */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>

    <div class="container">
        <header>
            <h1 class="logo">üåç FlashLingo</h1>
            <p class="subtitle" id="subtitle">Master a new language, one card at a time</p>
        </header>

        <!-- Language Selection Screen -->
        <div class="screen active" id="language-screen">
            <h2 style="text-align: center; margin-bottom: 0.5rem;" id="choose-title">Choose Your Language</h2>
            <p style="text-align: center; color: var(--text-secondary);" id="choose-subtitle">Select the language you want to learn</p>
            <div class="language-grid" id="language-grid">
                <!-- Languages will be populated by JavaScript -->
            </div>
        </div>

        <!-- Flashcard Screen -->
        <div class="screen" id="flashcard-screen">
            <button class="back-btn" onclick="goBack()">
                ‚Üê <span id="back-text">Back</span>
            </button>

            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-value" id="cards-remaining">10</div>
                    <div class="stat-label" id="remaining-label">Remaining</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="cards-learned">0</div>
                    <div class="stat-label" id="learned-label">Learned</div>
                </div>
            </div>

            <div class="flashcard-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <p class="progress-text" id="progress-text">Card 1 of 10</p>

                <div class="card-wrapper">
                    <div class="flashcard" id="flashcard" onclick="flipCard()">
                        <div class="card-face card-front">
                            <span class="card-label" id="front-label">English</span>
                            <span class="card-text" id="front-text">Hello</span>
                            <span class="tap-hint" id="tap-hint">Tap to flip</span>
                        </div>
                        <div class="card-face card-back">
                            <span class="card-label" id="back-label">Spanish</span>
                            <span class="card-text" id="back-text">Hola</span>
                            <span class="card-pronunciation" id="pronunciation"></span>
                            <span class="tap-hint" id="tap-hint-back">Tap to flip back</span>
                        </div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="nav-btn" id="prev-btn" onclick="prevCard()">‚Üê</button>
                    <button class="nav-btn" id="next-btn" onclick="nextCard()">‚Üí</button>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="shuffleCards()">
                        üîÄ <span id="shuffle-text">Shuffle</span>
                    </button>
                    <button class="btn btn-success" onclick="markAsLearned()">
                        ‚úì <span id="learned-text">Learned</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Completion Screen -->
        <div class="screen" id="completion-screen">
            <div class="completion-screen">
                <div class="completion-icon">üéâ</div>
                <h2 class="completion-title" id="completion-title">Congratulations!</h2>
                <p class="completion-message" id="completion-message">You've learned all the flashcards!</p>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="restartCards()">
                        üîÑ <span id="restart-text">Start Over</span>
                    </button>
                    <button class="btn btn-secondary" onclick="goBack()">
                        üåç <span id="new-language-text">New Language</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Flashcard data for each language
        const flashcardData = {
            english: {
                name: 'English',
                nativeName: 'English',
                flag: 'üá¨üáß',
                cards: [
                    { front: 'Hola', back: 'Hello', pronunciation: 'heh-LOH' },
                    { front: 'Gracias', back: 'Thank you', pronunciation: 'THANK yoo' },
                    { front: 'Por favor', back: 'Please', pronunciation: 'pleez' },
                    { front: '¬øD√≥nde est√°...?', back: 'Where is...?', pronunciation: 'wair iz' },
                    { front: '¬øCu√°nto cuesta?', back: 'How much does it cost?', pronunciation: 'how much duz it kost' },
                    { front: 'Necesito ayuda', back: 'I need help', pronunciation: 'eye need help' },
                    { front: 'No entiendo', back: "I don't understand", pronunciation: 'eye dohnt un-der-STAND' },
                    { front: 'El ba√±o', back: 'The bathroom', pronunciation: 'thuh BATH-room' },
                    { front: 'La cuenta, por favor', back: 'The check, please', pronunciation: 'thuh chek pleez' },
                    { front: 'Mucho gusto', back: 'Nice to meet you', pronunciation: 'nys too meet yoo' }
                ]
            },
            spanish: {
                name: 'Spanish',
                nativeName: 'Espa√±ol',
                flag: 'üá™üá∏',
                cards: [
                    { front: 'Hello', back: 'Hola', pronunciation: 'OH-lah' },
                    { front: 'Thank you', back: 'Gracias', pronunciation: 'GRAH-syahs' },
                    { front: 'Please', back: 'Por favor', pronunciation: 'por fah-VOR' },
                    { front: 'Where is...?', back: '¬øD√≥nde est√°...?', pronunciation: 'DOHN-deh ehs-TAH' },
                    { front: 'How much does it cost?', back: '¬øCu√°nto cuesta?', pronunciation: 'KWAHN-toh KWES-tah' },
                    { front: 'I need help', back: 'Necesito ayuda', pronunciation: 'neh-seh-SEE-toh ah-YOO-dah' },
                    { front: "I don't understand", back: 'No entiendo', pronunciation: 'noh ehn-TYEHN-doh' },
                    { front: 'The bathroom', back: 'El ba√±o', pronunciation: 'el BAH-nyoh' },
                    { front: 'The check, please', back: 'La cuenta, por favor', pronunciation: 'lah KWEHN-tah por fah-VOR' },
                    { front: 'Nice to meet you', back: 'Mucho gusto', pronunciation: 'MOO-choh GOOS-toh' }
                ]
            },
            french: {
                name: 'French',
                nativeName: 'Fran√ßais',
                flag: 'üá´üá∑',
                cards: [
                    { front: 'Hello', back: 'Bonjour', pronunciation: 'bohn-ZHOOR' },
                    { front: 'Thank you', back: 'Merci', pronunciation: 'mehr-SEE' },
                    { front: 'Please', back: "S'il vous pla√Æt", pronunciation: 'seel voo PLEH' },
                    { front: 'Where is...?', back: 'O√π est...?', pronunciation: 'oo eh' },
                    { front: 'How much does it cost?', back: "Combien √ßa co√ªte?", pronunciation: 'kohm-BYEHN sah KOOT' },
                    { front: 'I need help', back: "J'ai besoin d'aide", pronunciation: 'zhay beh-ZWAHN dehd' },
                    { front: "I don't understand", back: 'Je ne comprends pas', pronunciation: 'zhuh nuh kohm-PRAHN pah' },
                    { front: 'The bathroom', back: 'Les toilettes', pronunciation: 'lay twah-LET' },
                    { front: 'The check, please', back: "L'addition, s'il vous pla√Æt", pronunciation: 'lah-dee-SYOHN seel voo PLEH' },
                    { front: 'Nice to meet you', back: 'Enchant√©(e)', pronunciation: 'ahn-shahn-TAY' }
                ]
            },
            japanese: {
                name: 'Japanese',
                nativeName: 'Êó•Êú¨Ë™û',
                flag: 'üáØüáµ',
                cards: [
                    { front: 'Hello', back: '„Åì„Çì„Å´„Å°„ÅØ', pronunciation: 'kon-NEE-chee-wah' },
                    { front: 'Thank you', back: '„ÅÇ„Çä„Åå„Å®„ÅÜ', pronunciation: 'ah-ree-GAH-toh' },
                    { front: 'Please', back: '„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô', pronunciation: 'oh-neh-GYE-shee-mahs' },
                    { front: 'Where is...?', back: '...„ÅØ„Å©„Åì„Åß„Åô„ÅãÔºü', pronunciation: '...wah DOH-koh deh-soo-kah' },
                    { front: 'How much does it cost?', back: '„ÅÑ„Åè„Çâ„Åß„Åô„ÅãÔºü', pronunciation: 'ee-KOO-rah deh-soo-kah' },
                    { front: 'I need help', back: 'Âä©„Åë„Å¶„Åè„Å†„Åï„ÅÑ', pronunciation: 'tah-soo-KEH-teh koo-dah-SYE' },
                    { front: "I don't understand", back: '„Çè„Åã„Çä„Åæ„Åõ„Çì', pronunciation: 'wah-kah-ree-MAH-sehn' },
                    { front: 'The bathroom', back: '„Éà„Ç§„É¨', pronunciation: 'TOY-reh' },
                    { front: 'The check, please', back: '„Åä‰ºöË®à„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô', pronunciation: 'oh-KYE-keh oh-neh-GYE-shee-mahs' },
                    { front: 'Nice to meet you', back: '„ÅØ„Åò„ÇÅ„Åæ„Åó„Å¶', pronunciation: 'hah-jee-MEH-mahsh-teh' }
                ]
            }
        };

        // UI Translations
        const uiTranslations = {
            en: {
                subtitle: 'Master a new language, one card at a time',
                chooseTitle: 'Choose Your Language',
                chooseSubtitle: 'Select the language you want to learn',
                back: 'Back',
                remaining: 'Remaining',
                learned: 'Learned',
                tapHint: 'Tap to flip',
                tapHintBack: 'Tap to flip back',
                shuffle: 'Shuffle',
                learnedBtn: 'Learned',
                congratulations: 'Congratulations!',
                completionMessage: "You've learned all the flashcards!",
                startOver: 'Start Over',
                newLanguage: 'New Language',
                cardOf: 'Card {current} of {total}'
            },
            es: {
                subtitle: 'Domina un nuevo idioma, una tarjeta a la vez',
                chooseTitle: 'Elige Tu Idioma',
                chooseSubtitle: 'Selecciona el idioma que quieres aprender',
                back: 'Volver',
                remaining: 'Restantes',
                learned: 'Aprendidas',
                tapHint: 'Toca para voltear',
                tapHintBack: 'Toca para voltear',
                shuffle: 'Mezclar',
                learnedBtn: 'Aprendida',
                congratulations: '¬°Felicitaciones!',
                completionMessage: '¬°Has aprendido todas las tarjetas!',
                startOver: 'Empezar de Nuevo',
                newLanguage: 'Nuevo Idioma',
                cardOf: 'Tarjeta {current} de {total}'
            },
            fr: {
                subtitle: 'Ma√Ætrisez une nouvelle langue, une carte √† la fois',
                chooseTitle: 'Choisissez Votre Langue',
                chooseSubtitle: 'S√©lectionnez la langue que vous souhaitez apprendre',
                back: 'Retour',
                remaining: 'Restantes',
                learned: 'Apprises',
                tapHint: 'Touchez pour retourner',
                tapHintBack: 'Touchez pour retourner',
                shuffle: 'M√©langer',
                learnedBtn: 'Apprise',
                congratulations: 'F√©licitations !',
                completionMessage: 'Vous avez appris toutes les cartes !',
                startOver: 'Recommencer',
                newLanguage: 'Nouvelle Langue',
                cardOf: 'Carte {current} sur {total}'
            },
            ja: {
                subtitle: '‰∏ÄÊûö„Åö„Å§„ÄÅÊñ∞„Åó„ÅÑË®ÄË™û„Çí„Éû„Çπ„Çø„Éº„Åó„Çà„ÅÜ',
                chooseTitle: 'Ë®ÄË™û„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ',
                chooseSubtitle: 'Â≠¶„Å≥„Åü„ÅÑË®ÄË™û„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                back: 'Êàª„Çã',
                remaining: 'ÊÆã„Çä',
                learned: 'ÁøíÂæóÊ∏à„Åø',
                tapHint: '„Çø„ÉÉ„Éó„Åó„Å¶Ë£èËøî„Åô',
                tapHintBack: '„Çø„ÉÉ„Éó„Åó„Å¶Êàª„Åô',
                shuffle: '„Ç∑„É£„ÉÉ„Éï„É´',
                learnedBtn: 'ÁøíÂæó',
                congratulations: '„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ',
                completionMessage: '„Åô„Åπ„Å¶„ÅÆ„Ç´„Éº„Éâ„ÇíÁøíÂæó„Åó„Åæ„Åó„ÅüÔºÅ',
                startOver: '„ÇÇ„ÅÜ‰∏ÄÂ∫¶',
                newLanguage: '‰ªñ„ÅÆË®ÄË™û',
                cardOf: '{total}Êûö‰∏≠{current}ÊûöÁõÆ'
            }
        };

        // App State
        let currentLanguage = null;
        let currentCards = [];
        let learnedCards = [];
        let currentIndex = 0;
        let isFlipped = false;
        let userLocale = 'en';

        // Detect user locale
        function detectLocale() {
            const browserLang = navigator.language || navigator.userLanguage;
            const langCode = browserLang.substring(0, 2).toLowerCase();

            if (langCode === 'es') return 'es';
            if (langCode === 'fr') return 'fr';
            if (langCode === 'ja') return 'ja';
            return 'en';
        }

        // Apply UI translations
        function applyTranslations(locale) {
            const t = uiTranslations[locale] || uiTranslations.en;

            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('choose-title').textContent = t.chooseTitle;
            document.getElementById('choose-subtitle').textContent = t.chooseSubtitle;
            document.getElementById('back-text').textContent = t.back;
            document.getElementById('remaining-label').textContent = t.remaining;
            document.getElementById('learned-label').textContent = t.learned;
            document.getElementById('tap-hint').textContent = t.tapHint;
            document.getElementById('tap-hint-back').textContent = t.tapHintBack;
            document.getElementById('shuffle-text').textContent = t.shuffle;
            document.getElementById('learned-text').textContent = t.learnedBtn;
            document.getElementById('completion-title').textContent = t.congratulations;
            document.getElementById('completion-message').textContent = t.completionMessage;
            document.getElementById('restart-text').textContent = t.startOver;
            document.getElementById('new-language-text').textContent = t.newLanguage;
        }

        // Create particles
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        // Initialize language grid
        function initLanguageGrid() {
            const grid = document.getElementById('language-grid');
            grid.innerHTML = '';

            Object.keys(flashcardData).forEach(langKey => {
                const lang = flashcardData[langKey];
                const card = document.createElement('div');
                card.className = 'language-card';
                card.onclick = () => selectLanguage(langKey);
                card.innerHTML = `
                    <span class="language-flag">${lang.flag}</span>
                    <div class="language-name">${lang.name}</div>
                    <div class="language-native">${lang.nativeName}</div>
                `;
                grid.appendChild(card);
            });
        }

        // Select language
        function selectLanguage(langKey) {
            currentLanguage = flashcardData[langKey];
            currentCards = [...currentLanguage.cards];
            learnedCards = [];
            currentIndex = 0;
            isFlipped = false;

            document.getElementById('language-screen').classList.remove('active');
            document.getElementById('flashcard-screen').classList.add('active');
            document.getElementById('completion-screen').classList.remove('active');

            updateCard();
            updateStats();
        }

        // Go back to language selection
        function goBack() {
            document.getElementById('flashcard-screen').classList.remove('active');
            document.getElementById('completion-screen').classList.remove('active');
            document.getElementById('language-screen').classList.add('active');
            currentLanguage = null;
        }

        // Flip card
        function flipCard() {
            const flashcard = document.getElementById('flashcard');
            isFlipped = !isFlipped;
            flashcard.classList.toggle('flipped', isFlipped);
        }

        // Update card display
        function updateCard() {
            if (currentCards.length === 0) {
                showCompletion();
                return;
            }

            const card = currentCards[currentIndex];
            const flashcard = document.getElementById('flashcard');

            // Reset flip state
            isFlipped = false;
            flashcard.classList.remove('flipped');

            // Determine which is native language based on user locale
            const isLearningEnglish = currentLanguage.name === 'English';

            document.getElementById('front-label').textContent = isLearningEnglish ? 'Spanish' : 'English';
            document.getElementById('front-text').textContent = card.front;
            document.getElementById('back-label').textContent = currentLanguage.name;
            document.getElementById('back-text').textContent = card.back;
            document.getElementById('pronunciation').textContent = card.pronunciation ? `[${card.pronunciation}]` : '';

            // Update navigation buttons
            document.getElementById('prev-btn').disabled = currentIndex === 0;
            document.getElementById('next-btn').disabled = currentIndex === currentCards.length - 1;

            updateProgress();
        }

        // Update progress bar and text
        function updateProgress() {
            const total = currentCards.length + learnedCards.length;
            const current = currentIndex + 1;
            const progressPercent = ((learnedCards.length) / total) * 100;

            document.getElementById('progress-fill').style.width = progressPercent + '%';

            const t = uiTranslations[userLocale] || uiTranslations.en;
            document.getElementById('progress-text').textContent =
                t.cardOf.replace('{current}', current).replace('{total}', currentCards.length);
        }

        // Update stats
        function updateStats() {
            document.getElementById('cards-remaining').textContent = currentCards.length;
            document.getElementById('cards-learned').textContent = learnedCards.length;
        }

        // Next card
        function nextCard() {
            if (currentIndex < currentCards.length - 1) {
                currentIndex++;
                animateCardTransition('next');
            }
        }

        // Previous card
        function prevCard() {
            if (currentIndex > 0) {
                currentIndex--;
                animateCardTransition('prev');
            }
        }

        // Animate card transition
        function animateCardTransition(direction) {
            const flashcard = document.getElementById('flashcard');
            flashcard.classList.add('shuffle-out');

            setTimeout(() => {
                flashcard.classList.remove('shuffle-out');
                updateCard();
                flashcard.classList.add('shuffle-in');

                setTimeout(() => {
                    flashcard.classList.remove('shuffle-in');
                }, 300);
            }, 300);
        }

        // Shuffle cards
        function shuffleCards() {
            const flashcard = document.getElementById('flashcard');
            flashcard.classList.add('shuffle-out');

            setTimeout(() => {
                // Fisher-Yates shuffle
                for (let i = currentCards.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [currentCards[i], currentCards[j]] = [currentCards[j], currentCards[i]];
                }
                currentIndex = 0;

                flashcard.classList.remove('shuffle-out');
                updateCard();
                flashcard.classList.add('shuffle-in');

                setTimeout(() => {
                    flashcard.classList.remove('shuffle-in');
                }, 300);
            }, 300);
        }

        // Mark as learned
        function markAsLearned() {
            if (currentCards.length === 0) return;

            const flashcard = document.getElementById('flashcard');
            flashcard.classList.add('learned');

            setTimeout(() => {
                flashcard.classList.remove('learned');

                // Move card to learned
                const learnedCard = currentCards.splice(currentIndex, 1)[0];
                learnedCards.push(learnedCard);

                // Adjust index if needed
                if (currentIndex >= currentCards.length && currentCards.length > 0) {
                    currentIndex = currentCards.length - 1;
                }

                updateStats();

                if (currentCards.length === 0) {
                    showCompletion();
                } else {
                    updateCard();
                }
            }, 500);
        }

        // Show completion screen
        function showCompletion() {
            document.getElementById('flashcard-screen').classList.remove('active');
            document.getElementById('completion-screen').classList.add('active');
        }

        // Restart cards
        function restartCards() {
            currentCards = [...currentLanguage.cards];
            learnedCards = [];
            currentIndex = 0;
            isFlipped = false;

            document.getElementById('completion-screen').classList.remove('active');
            document.getElementById('flashcard-screen').classList.add('active');

            updateCard();
            updateStats();
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (!document.getElementById('flashcard-screen').classList.contains('active')) return;

            switch(e.key) {
                case ' ':
                case 'Enter':
                    e.preventDefault();
                    flipCard();
                    break;
                case 'ArrowLeft':
                    prevCard();
                    break;
                case 'ArrowRight':
                    nextCard();
                    break;
                case 's':
                case 'S':
                    shuffleCards();
                    break;
                case 'l':
                case 'L':
                    markAsLearned();
                    break;
                case 'Escape':
                    goBack();
                    break;
            }
        });

        // Initialize app
        function init() {
            userLocale = detectLocale();
            applyTranslations(userLocale);
            createParticles();
            initLanguageGrid();
        }

        // Start the app
        init();
    </script>
</body>
</html>
