<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farewell Message Board - Until We Meet Again</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'display': ['Playfair Display', 'serif'],
                        'body': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'warm': {
                            50: '#fef7ed',
                            100: '#fdecd3',
                            200: '#fad5a6',
                            300: '#f6b76e',
                            400: '#f19135',
                            500: '#ee7410',
                            600: '#df5a09',
                            700: '#b9420b',
                            800: '#933510',
                            900: '#772d10',
                        },
                        'sage': {
                            50: '#f6f7f4',
                            100: '#e3e7dd',
                            200: '#c8d0bd',
                            300: '#a5b395',
                            400: '#839572',
                            500: '#657856',
                            600: '#4e5f43',
                            700: '#3f4b37',
                            800: '#343e2f',
                            900: '#2d3529',
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'pulse-soft': 'pulseSoft 2s ease-in-out infinite',
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulseSoft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .card-hover {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-hover:hover {
            transform: translateY(-8px) rotate(1deg);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
        }

        .gradient-bg {
            background: linear-gradient(135deg, #fef7ed 0%, #fdecd3 25%, #f6f7f4 50%, #e3e7dd 100%);
        }

        .message-card {
            background: linear-gradient(145deg, #ffffff 0%, #fefcfa 100%);
        }

        .decorative-blob {
            filter: blur(80px);
            opacity: 0.5;
        }

        .modal-backdrop {
            backdrop-filter: blur(8px);
        }

        .btn-primary {
            background: linear-gradient(135deg, #ee7410 0%, #f19135 100%);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #df5a09 0%, #ee7410 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(238, 116, 16, 0.4);
        }

        .btn-secondary {
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
        }

        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
        .stagger-4 { animation-delay: 0.4s; }
        .stagger-5 { animation-delay: 0.5s; }
        .stagger-6 { animation-delay: 0.6s; }
        .stagger-7 { animation-delay: 0.7s; }
        .stagger-8 { animation-delay: 0.8s; }
        .stagger-9 { animation-delay: 0.9s; }
        .stagger-10 { animation-delay: 1.0s; }

        .masonry-grid {
            column-count: 1;
            column-gap: 1.5rem;
        }

        @media (min-width: 640px) {
            .masonry-grid {
                column-count: 2;
            }
        }

        @media (min-width: 1024px) {
            .masonry-grid {
                column-count: 3;
            }
        }

        .masonry-item {
            break-inside: avoid;
            margin-bottom: 1.5rem;
        }

        .confetti {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
        }

        .heart-icon {
            transition: all 0.3s ease;
        }

        .heart-icon:hover {
            transform: scale(1.2);
            color: #ee7410;
        }

        input:focus, textarea:focus {
            outline: none;
            ring: 2px;
            ring-color: #f19135;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen font-body">
    <!-- Decorative Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="decorative-blob absolute -top-40 -right-40 w-96 h-96 bg-warm-200 rounded-full"></div>
        <div class="decorative-blob absolute top-1/2 -left-40 w-80 h-80 bg-sage-200 rounded-full"></div>
        <div class="decorative-blob absolute -bottom-40 right-1/3 w-72 h-72 bg-warm-100 rounded-full"></div>
    </div>

    <!-- Navigation -->
    <nav class="relative z-50 bg-white/80 backdrop-blur-md shadow-sm sticky top-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-warm-400 to-warm-600 rounded-xl flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                    </div>
                    <span class="font-display text-xl font-semibold text-gray-800">Farewell Board</span>
                </div>

                <!-- Login Button -->
                <button id="loginBtn" class="btn-secondary flex items-center space-x-2 px-5 py-2.5 bg-white border-2 border-sage-300 text-sage-700 rounded-full font-medium hover:bg-sage-50 hover:border-sage-400 shadow-sm">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span id="loginText">Sign In</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative z-10 pt-16 pb-12 px-4">
        <div class="max-w-4xl mx-auto text-center">
            <div class="inline-flex items-center space-x-2 bg-warm-100 text-warm-700 px-4 py-2 rounded-full text-sm font-medium mb-6 animate-fade-in">
                <span class="animate-pulse-soft">âœ¨</span>
                <span>A Collection of Heartfelt Goodbyes</span>
            </div>
            <h1 class="font-display text-5xl sm:text-6xl lg:text-7xl font-bold text-gray-800 mb-6 animate-slide-up">
                Until We Meet <span class="text-transparent bg-clip-text bg-gradient-to-r from-warm-500 to-warm-600">Again</span>
            </h1>
            <p class="text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto mb-10 animate-slide-up stagger-1">
                Every ending is a new beginning. Leave your heartfelt messages, cherish the memories, and celebrate the journey we've shared together.
            </p>
            <button id="writeBtn" class="btn-primary inline-flex items-center space-x-3 px-8 py-4 text-white rounded-full font-semibold text-lg shadow-xl animate-slide-up stagger-2">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                </svg>
                <span>Write a Message</span>
            </button>
        </div>
    </header>

    <!-- Messages Grid -->
    <main class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-20">
        <div id="messagesGrid" class="masonry-grid">
            <!-- Messages will be rendered here -->
        </div>
    </main>

    <!-- Write Message Modal -->
    <div id="writeModal" class="fixed inset-0 z-50 hidden">
        <div class="modal-backdrop absolute inset-0 bg-black/40" id="modalBackdrop"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div class="bg-white rounded-3xl shadow-2xl w-full max-w-lg transform transition-all animate-slide-up overflow-hidden">
                <div class="bg-gradient-to-r from-warm-400 to-warm-500 px-6 py-5">
                    <h2 class="font-display text-2xl font-bold text-white">Write Your Message</h2>
                    <p class="text-warm-100 text-sm mt-1">Share your thoughts and wishes</p>
                </div>
                <form id="messageForm" class="p-6 space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Your Name</label>
                        <input type="text" id="authorInput" required
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-warm-400 focus:ring-warm-400 transition-colors"
                               placeholder="Enter your name">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Your Message</label>
                        <textarea id="messageInput" required rows="4"
                                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-warm-400 focus:ring-warm-400 transition-colors resize-none"
                                  placeholder="Write your heartfelt message..."></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select an Image (optional)</label>
                        <div class="grid grid-cols-5 gap-2" id="imageSelector">
                            <!-- Image options will be rendered here -->
                        </div>
                    </div>
                    <div class="flex space-x-3 pt-2">
                        <button type="button" id="cancelBtn"
                                class="flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors">
                            Cancel
                        </button>
                        <button type="submit"
                                class="flex-1 btn-primary px-6 py-3 text-white rounded-xl font-medium">
                            Post Message
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 z-50 hidden">
        <div class="modal-backdrop absolute inset-0 bg-black/40" id="loginModalBackdrop"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div class="bg-white rounded-3xl shadow-2xl w-full max-w-md transform transition-all animate-slide-up overflow-hidden">
                <div class="bg-gradient-to-r from-sage-500 to-sage-600 px-6 py-5">
                    <h2 class="font-display text-2xl font-bold text-white">Welcome Back</h2>
                    <p class="text-sage-100 text-sm mt-1">Sign in to your account</p>
                </div>
                <form id="loginForm" class="p-6 space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="emailInput" required
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-sage-400 focus:ring-sage-400 transition-colors"
                               placeholder="you@example.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="passwordInput" required
                               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-sage-400 focus:ring-sage-400 transition-colors"
                               placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" class="w-4 h-4 rounded border-gray-300 text-sage-500 focus:ring-sage-400">
                            <span class="text-gray-600">Remember me</span>
                        </label>
                        <a href="#" class="text-sage-600 hover:text-sage-700 font-medium">Forgot password?</a>
                    </div>
                    <div class="flex space-x-3 pt-2">
                        <button type="button" id="loginCancelBtn"
                                class="flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors">
                            Cancel
                        </button>
                        <button type="submit"
                                class="flex-1 px-6 py-3 bg-gradient-to-r from-sage-500 to-sage-600 text-white rounded-xl font-medium hover:from-sage-600 hover:to-sage-700 transition-all">
                            Sign In
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div id="confettiContainer"></div>

    <script>
        // Image URLs using picsum.photos for variety
        const imageUrls = [
            'https://picsum.photos/seed/sunset/400/300',
            'https://picsum.photos/seed/nature/400/300',
            'https://picsum.photos/seed/flower/400/300',
            'https://picsum.photos/seed/sky/400/300',
            'https://picsum.photos/seed/beach/400/300',
            'https://picsum.photos/seed/mountain/400/300',
            'https://picsum.photos/seed/forest/400/300',
            'https://picsum.photos/seed/lake/400/300',
            'https://picsum.photos/seed/garden/400/300',
            'https://picsum.photos/seed/stars/400/300',
            'https://picsum.photos/seed/rainbow/400/300',
            'https://picsum.photos/seed/path/400/300',
        ];

        // Pre-posted messages
        const initialMessages = [
            {
                id: 1,
                author: "Sarah Mitchell",
                message: "Working alongside you has been one of the greatest privileges of my career. Your kindness, wisdom, and unwavering support have made every challenge feel conquerable. I'll carry the lessons you've taught me forever. Until we meet again, dear friend! ðŸ’",
                image: imageUrls[0],
                date: "2 days ago",
                likes: 24
            },
            {
                id: 2,
                author: "James Chen",
                message: "Remember when we stayed up all night to finish that project? Those are the moments I'll treasure. You've been more than a colleague â€“ you've been a mentor and a friend. Wishing you all the success in your new adventure!",
                image: imageUrls[1],
                date: "3 days ago",
                likes: 18
            },
            {
                id: 3,
                author: "Emily Rodriguez",
                message: "Your laughter has been the soundtrack of our office. Thank you for bringing joy to even the most stressful days. The team won't be the same without you, but I know you're going to do amazing things. Don't be a stranger! ðŸŒŸ",
                image: imageUrls[2],
                date: "4 days ago",
                likes: 31
            },
            {
                id: 4,
                author: "Michael Thompson",
                message: "From day one, you showed me what it means to lead with empathy and integrity. Your door was always open, your advice always sound. This isn't goodbye â€“ it's see you later. Keep shining!",
                image: null,
                date: "5 days ago",
                likes: 15
            },
            {
                id: 5,
                author: "Lisa Park",
                message: "Every morning coffee chat, every brainstorming session, every celebration â€“ they all have one thing in common: you made them special. Thank you for being authentically you. The world is lucky to have you! â˜•âœ¨",
                image: imageUrls[3],
                date: "5 days ago",
                likes: 22
            },
            {
                id: 6,
                author: "David Wilson",
                message: "You taught me that success isn't just about hitting targets â€“ it's about lifting others as you climb. Your legacy here will live on through everyone you've mentored. Go change the world!",
                image: null,
                date: "6 days ago",
                likes: 27
            },
            {
                id: 7,
                author: "Amanda Foster",
                message: "The plants you gave me still sit on my desk, and every time I water them, I think of your patience and nurturing spirit. You've helped so many of us grow. Sending you all my love and best wishes! ðŸŒ±ðŸ’š",
                image: imageUrls[4],
                date: "1 week ago",
                likes: 19
            },
            {
                id: 8,
                author: "Robert Kim",
                message: "Our debates about the best coffee shops, our shared love for terrible puns, the way you always remembered everyone's birthdays â€“ these little things made big differences. You'll be deeply missed but never forgotten.",
                image: imageUrls[5],
                date: "1 week ago",
                likes: 14
            },
            {
                id: 9,
                author: "Jennifer Adams",
                message: "In a world full of ordinary, you've always been extraordinary. Thank you for pushing me to be better, for believing in me when I didn't believe in myself. Your new team is gaining a treasure! ðŸ’Ž",
                image: null,
                date: "1 week ago",
                likes: 33
            },
            {
                id: 10,
                author: "Christopher Lee",
                message: "As you close this chapter and begin a new one, remember that you've written beautiful stories in the hearts of everyone here. May your next adventure be filled with even more amazing moments. Farewell, friend! ðŸ“–âœ¨",
                image: imageUrls[6],
                date: "2 weeks ago",
                likes: 28
            }
        ];

        let messages = [...initialMessages];
        let selectedImage = null;
        let isLoggedIn = false;

        // Render messages
        function renderMessages() {
            const grid = document.getElementById('messagesGrid');
            grid.innerHTML = messages.map((msg, index) => `
                <div class="masonry-item animate-slide-up stagger-${Math.min(index + 1, 10)}">
                    <div class="message-card card-hover rounded-2xl shadow-lg overflow-hidden border border-gray-100">
                        ${msg.image ? `
                            <div class="relative h-40 overflow-hidden">
                                <img src="${msg.image}" alt="Message image" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"></div>
                            </div>
                        ` : ''}
                        <div class="p-5">
                            <div class="flex items-start justify-between mb-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-warm-400 to-sage-400 flex items-center justify-center text-white font-semibold text-sm shadow-md">
                                        ${msg.author.split(' ').map(n => n[0]).join('')}
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-gray-800">${msg.author}</h3>
                                        <p class="text-xs text-gray-500">${msg.date}</p>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-700 leading-relaxed mb-4">${msg.message}</p>
                            <div class="flex items-center justify-between pt-3 border-t border-gray-100">
                                <button onclick="likeMessage(${msg.id})" class="heart-icon flex items-center space-x-2 text-gray-500 hover:text-warm-500">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                    </svg>
                                    <span class="text-sm font-medium">${msg.likes}</span>
                                </button>
                                <button class="text-gray-400 hover:text-gray-600 transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Render image selector
        function renderImageSelector() {
            const selector = document.getElementById('imageSelector');
            selector.innerHTML = `
                <button type="button" onclick="selectImage(null)"
                        class="image-option aspect-square rounded-lg border-2 ${selectedImage === null ? 'border-warm-500 bg-warm-50' : 'border-gray-200'} flex items-center justify-center hover:border-warm-400 transition-colors">
                    <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                ${imageUrls.slice(0, 9).map((url, i) => `
                    <button type="button" onclick="selectImage('${url}')"
                            class="image-option aspect-square rounded-lg border-2 ${selectedImage === url ? 'border-warm-500' : 'border-gray-200'} overflow-hidden hover:border-warm-400 transition-colors">
                        <img src="${url}" alt="Option ${i + 1}" class="w-full h-full object-cover">
                    </button>
                `).join('')}
            `;
        }

        // Select image
        function selectImage(url) {
            selectedImage = url;
            renderImageSelector();
        }

        // Like message
        function likeMessage(id) {
            messages = messages.map(msg =>
                msg.id === id ? { ...msg, likes: msg.likes + 1 } : msg
            );
            renderMessages();
            createHeartBurst();
        }

        // Create heart burst animation
        function createHeartBurst() {
            const container = document.getElementById('confettiContainer');
            for (let i = 0; i < 5; i++) {
                const heart = document.createElement('div');
                heart.innerHTML = 'â¤ï¸';
                heart.className = 'confetti';
                heart.style.left = Math.random() * window.innerWidth + 'px';
                heart.style.top = window.innerHeight + 'px';
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                heart.style.opacity = '1';
                heart.style.transition = 'all 2s ease-out';
                container.appendChild(heart);

                setTimeout(() => {
                    heart.style.top = '-50px';
                    heart.style.opacity = '0';
                    heart.style.transform = `translateX(${Math.random() * 100 - 50}px) rotate(${Math.random() * 360}deg)`;
                }, 50);

                setTimeout(() => heart.remove(), 2100);
            }
        }

        // Create confetti
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            const colors = ['#ee7410', '#f19135', '#657856', '#839572', '#fad5a6'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * window.innerWidth + 'px';
                confetti.style.top = '-10px';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.opacity = '1';
                confetti.style.transition = `all ${Math.random() * 2 + 2}s ease-out`;
                container.appendChild(confetti);

                setTimeout(() => {
                    confetti.style.top = window.innerHeight + 'px';
                    confetti.style.opacity = '0';
                    confetti.style.transform = `translateX(${Math.random() * 200 - 100}px) rotate(${Math.random() * 720}deg)`;
                }, 50);

                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // Modal handlers
        const writeModal = document.getElementById('writeModal');
        const loginModal = document.getElementById('loginModal');

        document.getElementById('writeBtn').addEventListener('click', () => {
            writeModal.classList.remove('hidden');
            selectedImage = null;
            renderImageSelector();
        });

        document.getElementById('cancelBtn').addEventListener('click', () => {
            writeModal.classList.add('hidden');
        });

        document.getElementById('modalBackdrop').addEventListener('click', () => {
            writeModal.classList.add('hidden');
        });

        document.getElementById('loginBtn').addEventListener('click', () => {
            if (isLoggedIn) {
                isLoggedIn = false;
                document.getElementById('loginText').textContent = 'Sign In';
            } else {
                loginModal.classList.remove('hidden');
            }
        });

        document.getElementById('loginCancelBtn').addEventListener('click', () => {
            loginModal.classList.add('hidden');
        });

        document.getElementById('loginModalBackdrop').addEventListener('click', () => {
            loginModal.classList.add('hidden');
        });

        // Form submissions
        document.getElementById('messageForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const author = document.getElementById('authorInput').value;
            const message = document.getElementById('messageInput').value;

            const newMessage = {
                id: Date.now(),
                author,
                message,
                image: selectedImage,
                date: 'Just now',
                likes: 0
            };

            messages = [newMessage, ...messages];
            renderMessages();
            writeModal.classList.add('hidden');
            document.getElementById('messageForm').reset();
            selectedImage = null;
            createConfetti();

            // Scroll to top to see new message
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            isLoggedIn = true;
            const email = document.getElementById('emailInput').value;
            const userName = email.split('@')[0];
            document.getElementById('loginText').textContent = userName;
            loginModal.classList.add('hidden');
            document.getElementById('loginForm').reset();
        });

        // Keyboard handlers
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                writeModal.classList.add('hidden');
                loginModal.classList.add('hidden');
            }
        });

        // Initial render
        renderMessages();
    </script>
</body>
</html>
