<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Feedback Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .dashboard-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .rating-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .rating-5 { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .rating-4 { background: linear-gradient(135deg, #48bb78, #38a169); color: white; }
        .rating-3 { background: linear-gradient(135deg, #f6ad55, #ed8936); color: white; }
        .rating-2 { background: linear-gradient(135deg, #fc8181, #f56565); color: white; }
        .rating-1 { background: linear-gradient(135deg, #feb2b2, #fc8181); color: white; }

        .table-row {
            transition: all 0.2s ease;
            border-bottom: 1px solid #e2e8f0;
        }

        .table-row:hover {
            background: linear-gradient(90deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            transform: translateX(2px);
        }

        .feedback-cell {
            max-width: 400px;
            line-height: 1.5;
            color: #4a5568;
        }

        .sort-icon {
            transition: all 0.2s ease;
            opacity: 0.3;
        }

        .sort-icon.active {
            opacity: 1;
            color: #667eea;
        }

        .search-input {
            background: white;
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            outline: none;
        }

        .ai-summary {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-left: 4px solid #667eea;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close-btn {
            transition: all 0.2s ease;
        }

        .close-btn:hover {
            transform: rotate(90deg);
            color: #f56565;
        }

        .header-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .star-rating {
            color: #fbbf24;
            margin-left: 0.5rem;
        }

        .empty-state {
            padding: 4rem 2rem;
            text-align: center;
            color: #718096;
        }

        .table-header {
            background: #f7fafc;
            font-weight: 600;
            color: #2d3748;
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .table-container {
            max-height: calc(100vh - 280px);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #cbd5e0 #f7fafc;
        }

        .table-container::-webkit-scrollbar {
            width: 8px;
        }

        .table-container::-webkit-scrollbar-track {
            background: #f7fafc;
        }

        .table-container::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }

        @media (max-width: 768px) {
            .feedback-cell {
                max-width: 200px;
            }
            .table-container {
                max-height: calc(100vh - 350px);
            }
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // Generate realistic dataset
        const generateData = () => {
            const eventNames = [
                'Annual Tech Summit 2024',
                'Product Launch Conference',
                'Leadership Workshop Series',
                'Customer Success Symposium',
                'Innovation Hackathon',
                'Digital Marketing Masterclass',
                'Sales Excellence Training',
                'Q4 Strategy Meeting',
                'Team Building Retreat',
                'AI & Future of Work Forum',
                'Diversity & Inclusion Workshop',
                'Financial Planning Seminar',
                'Project Management Bootcamp',
                'UX Design Conference'
            ];

            const firstNames = ['Sarah', 'Michael', 'Jennifer', 'David', 'Emily', 'James', 'Jessica', 'Robert', 'Lisa', 'Daniel', 'Amanda', 'Christopher', 'Michelle', 'Kevin', 'Laura'];
            const lastNames = ['Johnson', 'Smith', 'Williams', 'Brown', 'Davis', 'Miller', 'Wilson', 'Moore', 'Taylor', 'Anderson', 'Thomas', 'Jackson', 'White', 'Harris', 'Martin'];

            const feedbackTemplates = [
                "Exceptional event! The speakers were incredibly knowledgeable and engaging. The networking opportunities were invaluable, and I made several meaningful connections. The venue was perfect, and the organization was flawless. Looking forward to next year!",
                "Very informative sessions with practical takeaways I can immediately apply to my work. The workshop format encouraged active participation and collaboration. Would have liked more time for Q&A, but overall an excellent experience.",
                "Good content but the schedule felt rushed. Some sessions could have been longer to allow for deeper discussion. The keynote speaker was inspiring, and the breakout sessions were well-structured. Catering was excellent!",
                "The event exceeded my expectations in every way. The diversity of topics covered was impressive, and the quality of presentations was consistently high. The mobile app made navigation easy. Definitely recommending to colleagues.",
                "Solid event with room for improvement. Technical difficulties in the morning session caused delays. However, the afternoon workshops were fantastic, and the panel discussion provided valuable industry insights.",
                "Outstanding organization and execution! Every detail was thoughtfully planned. The interactive elements kept engagement high throughout the day. The resource materials provided are comprehensive and useful.",
                "Mixed experience overall. While some sessions were groundbreaking, others felt repetitive. The networking lunch was too short, but the evening reception made up for it. Venue acoustics could be better.",
                "Brilliant event that delivered on all promises! The balance between theory and practical application was perfect. Loved the hands-on demos and the opportunity to try new tools. The follow-up materials are appreciated.",
                "Adequate but not exceptional. Content was relevant but presentation styles varied greatly in quality. The venue was comfortable, though parking was challenging. Would attend again with adjusted expectations.",
                "Transformative experience! This event has completely changed my perspective on industry trends. The caliber of attendees and speakers was remarkable. Every moment was valuable. Worth every minute invested!",
                "Professional and well-structured event. The agenda flowed smoothly, and time management was excellent. Appreciated the diverse perspectives presented. The virtual attendance option was seamlessly integrated.",
                "Could have been better organized. Registration process was confusing, and some sessions started late. However, the content quality was high, and I gained valuable insights despite the logistical issues.",
                "Impressive lineup of speakers and topics! The blend of strategic thinking and tactical execution was well-balanced. Interactive workshops were the highlight. The event app with live polling enhanced engagement.",
                "Fair event with notable highlights. The keynote was inspiring, but some breakout sessions lacked depth. Networking opportunities were plentiful. The venue was beautiful but slightly hard to navigate.",
                "Absolutely worth attending! Every session provided actionable insights. The organizers clearly put tremendous effort into curating content and ensuring smooth execution. Already marked my calendar for next year!"
            ];

            const data = [];
            const today = new Date();

            for (let i = 0; i < 30; i++) {
                const date = new Date(today);
                date.setDate(date.getDate() - Math.floor(Math.random() * 90));

                data.push({
                    id: i + 1,
                    date: date.toISOString().split('T')[0],
                    eventName: eventNames[Math.floor(Math.random() * eventNames.length)],
                    participantName: `${firstNames[Math.floor(Math.random() * firstNames.length)]} ${lastNames[Math.floor(Math.random() * lastNames.length)]}`,
                    rating: Math.floor(Math.random() * 5) + 1,
                    feedback: feedbackTemplates[Math.floor(Math.random() * feedbackTemplates.length)]
                });
            }

            return data.sort((a, b) => new Date(b.date) - new Date(a.date));
        };

        // Main App Component
        class FeedbackDashboard {
            constructor() {
                this.data = generateData();
                this.filteredData = [...this.data];
                this.sortColumn = null;
                this.sortDirection = 'asc';
                this.searchTerm = '';
                this.showSummary = true;
                this.init();
            }

            init() {
                this.render();
                this.attachEventListeners();
            }

            attachEventListeners() {
                // Search functionality
                document.getElementById('searchInput')?.addEventListener('input', (e) => {
                    this.searchTerm = e.target.value.toLowerCase();
                    this.filterData();
                    this.renderTable();
                });

                // Close summary
                document.getElementById('closeSummary')?.addEventListener('click', () => {
                    this.showSummary = false;
                    this.render();
                });

                // Sort functionality
                document.querySelectorAll('[data-sort]').forEach(header => {
                    header.addEventListener('click', () => {
                        const column = header.dataset.sort;
                        if (this.sortColumn === column) {
                            this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';
                        } else {
                            this.sortColumn = column;
                            this.sortDirection = 'asc';
                        }
                        this.sortData();
                        this.renderTable();
                    });
                });
            }

            filterData() {
                if (!this.searchTerm) {
                    this.filteredData = [...this.data];
                } else {
                    this.filteredData = this.data.filter(item =>
                        item.eventName.toLowerCase().includes(this.searchTerm) ||
                        item.participantName.toLowerCase().includes(this.searchTerm) ||
                        item.feedback.toLowerCase().includes(this.searchTerm) ||
                        item.date.includes(this.searchTerm) ||
                        item.rating.toString().includes(this.searchTerm)
                    );
                }
            }

            sortData() {
                this.filteredData.sort((a, b) => {
                    let aVal = a[this.sortColumn];
                    let bVal = b[this.sortColumn];

                    if (this.sortColumn === 'date') {
                        aVal = new Date(aVal);
                        bVal = new Date(bVal);
                    } else if (this.sortColumn === 'rating') {
                        aVal = Number(aVal);
                        bVal = Number(bVal);
                    } else {
                        aVal = String(aVal).toLowerCase();
                        bVal = String(bVal).toLowerCase();
                    }

                    if (aVal < bVal) return this.sortDirection === 'asc' ? -1 : 1;
                    if (aVal > bVal) return this.sortDirection === 'asc' ? 1 : -1;
                    return 0;
                });
            }

            calculateSummary() {
                const avgRating = (this.data.reduce((sum, item) => sum + item.rating, 0) / this.data.length).toFixed(1);
                const fiveStarCount = this.data.filter(item => item.rating === 5).length;
                const recentEvents = [...new Set(this.data.slice(0, 10).map(item => item.eventName))].length;

                return { avgRating, fiveStarCount, recentEvents, totalFeedback: this.data.length };
            }

            renderTable() {
                const tbody = document.getElementById('tableBody');
                if (!tbody) return;

                if (this.filteredData.length === 0) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="5" class="empty-state">
                                <i class="fas fa-search fa-3x mb-4 text-gray-300"></i>
                                <p class="text-xl font-semibold mb-2">No feedback found</p>
                                <p>Try adjusting your search criteria</p>
                            </td>
                        </tr>
                    `;
                    return;
                }

                tbody.innerHTML = this.filteredData.map(item => `
                    <tr class="table-row">
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                            ${item.date}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                            ${item.eventName}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                            ${item.participantName}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                            <span class="rating-badge rating-${item.rating}">
                                ${item.rating}/5
                                <span class="star-rating">${'â˜…'.repeat(item.rating)}</span>
                            </span>
                        </td>
                        <td class="px-6 py-4 text-sm feedback-cell">
                            ${item.feedback}
                        </td>
                    </tr>
                `).join('');

                // Update sort icons
                document.querySelectorAll('[data-sort]').forEach(header => {
                    const column = header.dataset.sort;
                    const icon = header.querySelector('.sort-icon');
                    if (icon) {
                        if (column === this.sortColumn) {
                            icon.className = `sort-icon active fas fa-chevron-${this.sortDirection === 'asc' ? 'up' : 'down'} ml-2`;
                        } else {
                            icon.className = 'sort-icon fas fa-chevron-down ml-2';
                        }
                    }
                });
            }

            render() {
                const summary = this.calculateSummary();

                document.getElementById('app').innerHTML = `
                    <div class="min-h-screen p-4 md:p-8">
                        <div class="dashboard-container mx-auto max-w-7xl rounded-2xl overflow-hidden">
                            <!-- Header -->
                            <div class="header-gradient p-6 md:p-8">
                                <h1 class="text-3xl md:text-4xl font-bold mb-2">
                                    <i class="fas fa-chart-line mr-3"></i>Event Feedback Dashboard
                                </h1>
                                <p class="text-purple-100">Monitor and analyze participant feedback across all events</p>
                            </div>

                            <!-- AI Summary -->
                            ${this.showSummary ? `
                                <div class="ai-summary mx-6 mt-6 p-6 rounded-lg relative">
                                    <button id="closeSummary" class="close-btn absolute top-4 right-4 text-gray-500 hover:text-red-500">
                                        <i class="fas fa-times text-xl"></i>
                                    </button>
                                    <div class="flex items-center mb-4">
                                        <i class="fas fa-robot text-2xl text-purple-600 mr-3"></i>
                                        <h2 class="text-xl font-semibold text-gray-800">AI-Powered Insights</h2>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                        <div class="bg-white p-4 rounded-lg shadow-sm">
                                            <p class="text-sm text-gray-600 mb-1">Average Rating</p>
                                            <p class="text-2xl font-bold text-purple-600">${summary.avgRating}/5.0</p>
                                        </div>
                                        <div class="bg-white p-4 rounded-lg shadow-sm">
                                            <p class="text-sm text-gray-600 mb-1">5-Star Reviews</p>
                                            <p class="text-2xl font-bold text-green-600">${summary.fiveStarCount}</p>
                                        </div>
                                        <div class="bg-white p-4 rounded-lg shadow-sm">
                                            <p class="text-sm text-gray-600 mb-1">Recent Events</p>
                                            <p class="text-2xl font-bold text-blue-600">${summary.recentEvents}</p>
                                        </div>
                                        <div class="bg-white p-4 rounded-lg shadow-sm">
                                            <p class="text-sm text-gray-600 mb-1">Total Feedback</p>
                                            <p class="text-2xl font-bold text-indigo-600">${summary.totalFeedback}</p>
                                        </div>
                                    </div>
                                    <p class="mt-4 text-sm text-gray-700">
                                        <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                                        <strong>Key Insight:</strong> Participant satisfaction remains high with consistent positive feedback across all event categories. Focus areas include extending networking time and improving session acoustics.
                                    </p>
                                </div>
                            ` : ''}

                            <!-- Search Bar -->
                            <div class="p-6">
                                <div class="relative">
                                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                    <input
                                        id="searchInput"
                                        type="text"
                                        placeholder="Search by event, participant, rating, or feedback..."
                                        class="search-input w-full pl-12 pr-4 py-3 rounded-lg text-gray-700 placeholder-gray-400"
                                    />
                                </div>
                            </div>

                            <!-- Table -->
                            <div class="px-6 pb-6">
                                <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                                    <div class="table-container">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="table-header">
                                                <tr>
                                                    <th data-sort="date" class="px-6 py-4 text-left text-xs uppercase tracking-wider cursor-pointer hover:bg-gray-100">
                                                        Date
                                                        <i class="sort-icon fas fa-chevron-down ml-2"></i>
                                                    </th>
                                                    <th data-sort="eventName" class="px-6 py-4 text-left text-xs uppercase tracking-wider cursor-pointer hover:bg-gray-100">
                                                        Event Name
                                                        <i class="sort-icon fas fa-chevron-down ml-2"></i>
                                                    </th>
                                                    <th data-sort="participantName" class="px-6 py-4 text-left text-xs uppercase tracking-wider cursor-pointer hover:bg-gray-100">
                                                        Participant
                                                        <i class="sort-icon fas fa-chevron-down ml-2"></i>
                                                    </th>
                                                    <th data-sort="rating" class="px-6 py-4 text-left text-xs uppercase tracking-wider cursor-pointer hover:bg-gray-100">
                                                        Rating
                                                        <i class="sort-icon fas fa-chevron-down ml-2"></i>
                                                    </th>
                                                    <th data-sort="feedback" class="px-6 py-4 text-left text-xs uppercase tracking-wider cursor-pointer hover:bg-gray-100">
                                                        Feedback
                                                        <i class="sort-icon fas fa-chevron-down ml-2"></i>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody id="tableBody" class="bg-white divide-y divide-gray-200">
                                                <!-- Table rows will be inserted here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                this.renderTable();
                this.attachEventListeners();
            }
        }

        // Initialize the app when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            new FeedbackDashboard();
        });
    </script>
</body>
</html>