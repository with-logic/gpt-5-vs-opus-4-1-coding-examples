<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Falling Fruit Catcher</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            position: relative;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #gameContainer {
            width: 100%;
            max-width: 800px;
            height: 100vh;
            max-height: 900px;
            position: relative;
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 100%);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        #scoreBoard {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            font-weight: bold;
            z-index: 10;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .score-item {
            font-size: 20px;
            margin: 5px 0;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .score-value {
            color: #4CAF50;
            font-size: 24px;
        }

        .lives {
            display: flex;
            gap: 5px;
            margin-left: 10px;
        }

        .heart {
            font-size: 24px;
            color: #ff4757;
            animation: heartbeat 1s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        #gameOverScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 20;
        }

        .gameOverContent {
            background: white;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            animation: bounceIn 0.5s ease-out;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .gameOverContent h2 {
            color: #ff6b6b;
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .finalScore {
            font-size: 32px;
            color: #4CAF50;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .playButton {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 24px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
            font-weight: bold;
        }

        .playButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }

        #startScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 25;
        }

        .startContent {
            background: white;
            padding: 50px;
            border-radius: 30px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
        }

        .startContent h1 {
            color: #764ba2;
            font-size: 42px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .instructions {
            font-size: 18px;
            color: #666;
            margin: 20px 0 30px;
            line-height: 1.6;
        }

        .fruit-preview {
            font-size: 60px;
            margin: 20px 0;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .controls-info {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 16px;
            color: #555;
        }

        .particle {
            position: absolute;
            pointer-events: none;
            animation: particleFade 1s ease-out forwards;
            font-size: 30px;
        }

        @keyframes particleFade {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-50px) scale(0);
                opacity: 0;
            }
        }

        .combo-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 60px;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            pointer-events: none;
            animation: comboAnimation 1s ease-out forwards;
            z-index: 15;
        }

        @keyframes comboAnimation {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>

        <div id="scoreBoard">
            <div class="score-item">
                üçé Score: <span class="score-value" id="score">0</span>
            </div>
            <div class="score-item">
                Lives: <div class="lives" id="lives"></div>
            </div>
            <div class="score-item">
                üî• Combo: <span class="score-value" id="combo">0</span>
            </div>
        </div>

        <div id="startScreen">
            <div class="startContent">
                <h1>üçé Fruit Catcher üçä</h1>
                <div class="fruit-preview">üçì üçå üçá üçâ</div>
                <p class="instructions">
                    Catch the falling fruits with your basket!<br>
                    Score points for each fruit caught.<br>
                    Don't miss more than 3 fruits!
                </p>
                <div class="controls-info">
                    <strong>Controls:</strong><br>
                    ‚¨ÖÔ∏è ‚û°Ô∏è Arrow Keys or Mouse/Touch
                </div>
                <button class="playButton" onclick="startGame()">Start Game</button>
            </div>
        </div>

        <div id="gameOverScreen">
            <div class="gameOverContent">
                <h2>Game Over!</h2>
                <div class="finalScore">Final Score: <span id="finalScore">0</span></div>
                <button class="playButton" onclick="resetGame()">Play Again</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gameContainer = document.getElementById('gameContainer');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const scoreElement = document.getElementById('score');
        const livesElement = document.getElementById('lives');
        const comboElement = document.getElementById('combo');
        const finalScoreElement = document.getElementById('finalScore');

        // Game variables
        let score = 0;
        let lives = 3;
        let combo = 0;
        let gameRunning = false;
        let animationId = null;
        let lastTime = 0;
        let fruits = [];
        let particles = [];
        let basket = null;
        let mouseX = 0;
        let touchX = 0;

        // Fruit emojis and properties
        const fruitTypes = [
            { emoji: 'üçé', points: 10, speed: 2, size: 50 },
            { emoji: 'üçä', points: 15, speed: 2.5, size: 48 },
            { emoji: 'üçì', points: 20, speed: 3, size: 45 },
            { emoji: 'üçå', points: 25, speed: 3.5, size: 52 },
            { emoji: 'üçá', points: 30, speed: 4, size: 46 },
            { emoji: 'üçâ', points: 35, speed: 2.8, size: 55 },
            { emoji: 'üçë', points: 40, speed: 3.2, size: 48 },
            { emoji: 'üçí', points: 45, speed: 4.5, size: 44 }
        ];

        // Basket class
        class Basket {
            constructor() {
                this.width = 120;
                this.height = 80;
                this.x = canvas.width / 2 - this.width / 2;
                this.y = canvas.height - this.height - 20;
                this.speed = 8;
                this.targetX = this.x;
            }

            update() {
                // Smooth movement towards target
                const diff = this.targetX - this.x;
                this.x += diff * 0.15;

                // Keep basket within bounds
                this.x = Math.max(0, Math.min(canvas.width - this.width, this.x));
            }

            draw() {
                // Draw basket shadow
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fillRect(this.x + 5, this.y + 5, this.width, this.height);

                // Draw basket
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(this.x, this.y, this.width, this.height);

                // Draw basket rim
                ctx.strokeStyle = '#654321';
                ctx.lineWidth = 4;
                ctx.strokeRect(this.x, this.y, this.width, this.height);

                // Draw basket pattern
                ctx.strokeStyle = '#A0522D';
                ctx.lineWidth = 2;
                for (let i = 10; i < this.width; i += 15) {
                    ctx.beginPath();
                    ctx.moveTo(this.x + i, this.y);
                    ctx.lineTo(this.x + i, this.y + this.height);
                    ctx.stroke();
                }
                for (let i = 10; i < this.height; i += 15) {
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y + i);
                    ctx.lineTo(this.x + this.width, this.y + i);
                    ctx.stroke();
                }
            }

            moveLeft() {
                this.targetX -= this.speed * 10;
            }

            moveRight() {
                this.targetX += this.speed * 10;
            }

            setTargetX(x) {
                this.targetX = x - this.width / 2;
            }
        }

        // Fruit class
        class Fruit {
            constructor() {
                const type = fruitTypes[Math.floor(Math.random() * fruitTypes.length)];
                this.emoji = type.emoji;
                this.points = type.points;
                this.size = type.size;
                this.x = Math.random() * (canvas.width - this.size);
                this.y = -this.size;
                this.speed = type.speed + Math.random() * 2;
                this.rotation = 0;
                this.rotationSpeed = (Math.random() - 0.5) * 0.1;
                this.caught = false;
                this.missed = false;
            }

            update(deltaTime) {
                this.y += this.speed * (deltaTime / 16);
                this.rotation += this.rotationSpeed;

                // Check if caught by basket
                if (!this.caught && !this.missed &&
                    this.y + this.size > basket.y &&
                    this.y < basket.y + basket.height &&
                    this.x + this.size > basket.x &&
                    this.x < basket.x + basket.width) {
                    this.caught = true;
                    this.onCatch();
                }

                // Check if missed
                if (!this.caught && !this.missed && this.y > canvas.height) {
                    this.missed = true;
                    this.onMiss();
                }
            }

            draw() {
                ctx.save();
                ctx.translate(this.x + this.size / 2, this.y + this.size / 2);
                ctx.rotate(this.rotation);
                ctx.font = `${this.size}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(this.emoji, 0, 0);
                ctx.restore();
            }

            onCatch() {
                score += this.points * (1 + combo * 0.1);
                combo++;
                updateScore();
                createParticles(this.x + this.size / 2, this.y + this.size / 2, this.emoji);

                // Show combo text for big combos
                if (combo >= 5 && combo % 5 === 0) {
                    showComboText(combo);
                }
            }

            onMiss() {
                lives--;
                combo = 0;
                updateLives();
                updateScore();

                if (lives <= 0) {
                    endGame();
                }
            }
        }

        // Particle system
        function createParticles(x, y, emoji) {
            const particleDiv = document.createElement('div');
            particleDiv.className = 'particle';
            particleDiv.textContent = emoji;
            particleDiv.style.left = x + 'px';
            particleDiv.style.top = y + 'px';
            gameContainer.appendChild(particleDiv);

            setTimeout(() => {
                particleDiv.remove();
            }, 1000);
        }

        function showComboText(comboCount) {
            const comboDiv = document.createElement('div');
            comboDiv.className = 'combo-text';
            comboDiv.textContent = `${comboCount}x COMBO!`;
            gameContainer.appendChild(comboDiv);

            setTimeout(() => {
                comboDiv.remove();
            }, 1000);
        }

        // Game functions
        function resizeCanvas() {
            canvas.width = gameContainer.clientWidth;
            canvas.height = gameContainer.clientHeight;
            if (basket) {
                basket.y = canvas.height - basket.height - 20;
            }
        }

        function updateScore() {
            scoreElement.textContent = Math.floor(score);
            comboElement.textContent = combo;
        }

        function updateLives() {
            livesElement.innerHTML = '';
            for (let i = 0; i < lives; i++) {
                livesElement.innerHTML += '<span class="heart">‚ù§Ô∏è</span>';
            }
        }

        function spawnFruit() {
            if (!gameRunning) return;

            fruits.push(new Fruit());

            // Increase spawn rate as score increases
            const spawnDelay = Math.max(500, 2000 - score * 2);
            setTimeout(spawnFruit, spawnDelay + Math.random() * 1000);
        }

        function gameLoop(currentTime) {
            if (!gameRunning) return;

            const deltaTime = currentTime - lastTime;
            lastTime = currentTime;

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw background gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, 'rgba(135, 206, 235, 0.3)');
            gradient.addColorStop(1, 'rgba(152, 251, 152, 0.3)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update and draw basket
            basket.update();
            basket.draw();

            // Update and draw fruits
            fruits = fruits.filter(fruit => {
                fruit.update(deltaTime);
                if (!fruit.caught && !fruit.missed) {
                    fruit.draw();
                    return true;
                }
                return !fruit.caught && !fruit.missed;
            });

            animationId = requestAnimationFrame(gameLoop);
        }

        function startGame() {
            startScreen.style.display = 'none';
            gameRunning = true;
            score = 0;
            lives = 3;
            combo = 0;
            fruits = [];

            resizeCanvas();
            basket = new Basket();

            updateScore();
            updateLives();

            lastTime = performance.now();
            gameLoop(lastTime);

            // Start spawning fruits
            setTimeout(spawnFruit, 1000);
        }

        function endGame() {
            gameRunning = false;
            cancelAnimationFrame(animationId);
            finalScoreElement.textContent = Math.floor(score);
            gameOverScreen.style.display = 'flex';
        }

        function resetGame() {
            gameOverScreen.style.display = 'none';
            startGame();
        }

        // Event listeners
        document.addEventListener('keydown', (e) => {
            if (!gameRunning || !basket) return;

            if (e.key === 'ArrowLeft') {
                basket.moveLeft();
            } else if (e.key === 'ArrowRight') {
                basket.moveRight();
            }
        });

        // Mouse controls
        canvas.addEventListener('mousemove', (e) => {
            if (!gameRunning || !basket) return;
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            basket.setTargetX(mouseX);
        });

        // Touch controls
        canvas.addEventListener('touchmove', (e) => {
            if (!gameRunning || !basket) return;
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            touchX = e.touches[0].clientX - rect.left;
            basket.setTargetX(touchX);
        });

        canvas.addEventListener('touchstart', (e) => {
            if (!gameRunning || !basket) return;
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            touchX = e.touches[0].clientX - rect.left;
            basket.setTargetX(touchX);
        });

        // Window resize
        window.addEventListener('resize', resizeCanvas);

        // Initialize
        resizeCanvas();
        updateLives();
    </script>
</body>
</html>