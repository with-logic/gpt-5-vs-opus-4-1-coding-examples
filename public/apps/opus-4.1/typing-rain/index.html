<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Rain</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: linear-gradient(to bottom, #0a0e27 0%, #1a237e 50%, #311b92 100%);
            position: relative;
            height: 100vh;
        }

        /* City Skyline */
        .city {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to top, #0a0a0a 0%, transparent 100%);
            z-index: 1;
        }

        .building {
            position: absolute;
            bottom: 0;
            background: #0a0a0a;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .building::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                to right,
                transparent 0%,
                transparent 40%,
                #ffeb3b 40%,
                #ffeb3b 60%,
                transparent 60%,
                transparent 100%
            );
            background-size: 20px 30px;
            opacity: 0.3;
        }

        /* Rain Animation Background */
        .rain-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            z-index: 0;
            opacity: 0.1;
        }

        .rain-line {
            position: absolute;
            width: 2px;
            height: 100px;
            background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.6), transparent);
            animation: rain-fall 1s linear infinite;
        }

        @keyframes rain-fall {
            to {
                transform: translateY(100vh);
            }
        }

        /* Game Container */
        .game-container {
            position: relative;
            z-index: 10;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
        }

        .score-panel {
            display: flex;
            gap: 30px;
            font-size: 18px;
        }

        .score-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .score-label {
            font-size: 12px;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .score-value {
            font-size: 24px;
            font-weight: bold;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }

        /* Game Area */
        .game-area {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        /* Falling Words */
        .word {
            position: absolute;
            padding: 8px 16px;
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.9), rgba(3, 169, 244, 0.9));
            color: white;
            border-radius: 20px;
            font-size: 18px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.5), 0 0 30px rgba(33, 150, 243, 0.3);
            animation: glow 2s ease-in-out infinite alternate;
            transition: all 0.3s ease;
            z-index: 5;
            user-select: none;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        @keyframes glow {
            from {
                box-shadow: 0 4px 15px rgba(33, 150, 243, 0.5), 0 0 30px rgba(33, 150, 243, 0.3);
            }
            to {
                box-shadow: 0 4px 25px rgba(33, 150, 243, 0.8), 0 0 40px rgba(33, 150, 243, 0.5);
            }
        }

        .word.typed {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.9), rgba(139, 195, 74, 0.9));
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.5), 0 0 30px rgba(76, 175, 80, 0.3);
            transform: scale(1.2);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .word.missed {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.9), rgba(239, 83, 80, 0.9));
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.5), 0 0 30px rgba(244, 67, 54, 0.3);
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Input Area */
        .input-container {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
            width: 300px;
        }

        .type-input {
            width: 100%;
            padding: 15px 25px;
            font-size: 20px;
            border: 3px solid rgba(79, 195, 247, 0.7);
            border-radius: 30px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            outline: none;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 20px rgba(79, 195, 247, 0.3), inset 0 0 20px rgba(79, 195, 247, 0.1);
            transition: all 0.3s ease;
        }

        .type-input:focus {
            border-color: #4fc3f7;
            box-shadow: 0 5px 30px rgba(79, 195, 247, 0.5), inset 0 0 30px rgba(79, 195, 247, 0.2);
            transform: scale(1.05);
        }

        /* Game Over Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, #1a237e, #311b92);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            color: white;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(79, 195, 247, 0.5);
            max-width: 400px;
        }

        .modal h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #4fc3f7;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.5);
        }

        .modal-stats {
            margin: 20px 0;
            font-size: 18px;
            line-height: 1.8;
        }

        .modal-stat {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .button {
            padding: 15px 30px;
            font-size: 18px;
            background: linear-gradient(135deg, #4fc3f7, #2196f3);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(79, 195, 247, 0.4);
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 195, 247, 0.6);
        }

        /* Start Screen */
        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0a0e27, #1a237e, #311b92);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
            color: white;
        }

        .start-screen.hide {
            display: none;
        }

        .game-title {
            font-size: 72px;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #4fc3f7, #2196f3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(79, 195, 247, 0.5);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .game-subtitle {
            font-size: 20px;
            opacity: 0.8;
            margin-bottom: 40px;
        }

        /* Difficulty Indicator */
        .difficulty {
            position: absolute;
            top: 80px;
            right: 20px;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            color: white;
            font-size: 16px;
            z-index: 20;
            backdrop-filter: blur(10px);
        }

        .difficulty-level {
            color: #4fc3f7;
            font-weight: bold;
        }

        /* Combo Indicator */
        .combo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
            color: #ffd54f;
            text-shadow: 0 0 30px rgba(255, 213, 79, 0.8);
            opacity: 0;
            z-index: 30;
            pointer-events: none;
        }

        .combo.show {
            animation: comboAnimation 1s ease;
        }

        @keyframes comboAnimation {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.5);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(2);
            }
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <h1 class="game-title">TYPING RAIN</h1>
        <p class="game-subtitle">Type the falling words before they reach the city!</p>
        <button class="button" onclick="startGame()">START GAME</button>
    </div>

    <!-- Rain Background Effect -->
    <div class="rain-bg" id="rainBg"></div>

    <!-- City Skyline -->
    <div class="city" id="city"></div>

    <!-- Game Container -->
    <div class="game-container">
        <!-- Header -->
        <div class="header">
            <div class="score-panel">
                <div class="score-item">
                    <div class="score-label">Score</div>
                    <div class="score-value" id="score">0</div>
                </div>
                <div class="score-item">
                    <div class="score-label">Words</div>
                    <div class="score-value" id="wordsTyped">0</div>
                </div>
                <div class="score-item">
                    <div class="score-label">Accuracy</div>
                    <div class="score-value" id="accuracy">100%</div>
                </div>
                <div class="score-item">
                    <div class="score-label">Combo</div>
                    <div class="score-value" id="comboCount">0</div>
                </div>
            </div>
        </div>

        <!-- Difficulty Indicator -->
        <div class="difficulty">
            Difficulty: <span class="difficulty-level" id="difficultyLevel">1</span>
        </div>

        <!-- Game Area -->
        <div class="game-area" id="gameArea">
            <!-- Combo Indicator -->
            <div class="combo" id="combo"></div>
        </div>

        <!-- Input Container -->
        <div class="input-container">
            <input type="text" class="type-input" id="typeInput" placeholder="Type here..." autocomplete="off" disabled>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal" id="gameOverModal">
        <div class="modal-content">
            <h2>GAME OVER</h2>
            <div class="modal-stats">
                <div class="modal-stat">
                    <span>Final Score:</span>
                    <span id="finalScore">0</span>
                </div>
                <div class="modal-stat">
                    <span>Words Typed:</span>
                    <span id="finalWords">0</span>
                </div>
                <div class="modal-stat">
                    <span>Accuracy:</span>
                    <span id="finalAccuracy">0%</span>
                </div>
                <div class="modal-stat">
                    <span>Best Combo:</span>
                    <span id="finalCombo">0</span>
                </div>
            </div>
            <button class="button" onclick="resetGame()">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        // Word pool for the game
        const wordPool = [
            'rain', 'city', 'night', 'lights', 'storm', 'thunder', 'lightning', 'cloud',
            'water', 'drop', 'splash', 'wind', 'sky', 'dark', 'moon', 'star', 'street',
            'building', 'tower', 'window', 'neon', 'glow', 'flash', 'quick', 'type',
            'fast', 'speed', 'rush', 'flow', 'drift', 'fall', 'cascade', 'pour',
            'drizzle', 'mist', 'fog', 'haze', 'blur', 'shine', 'reflect', 'puddle',
            'umbrella', 'shelter', 'roof', 'weather', 'forecast', 'climate', 'season',
            'autumn', 'winter', 'cold', 'chill', 'freeze', 'frost', 'ice', 'snow'
        ];

        // Game state
        let gameActive = false;
        let score = 0;
        let wordsTyped = 0;
        let wordsMissed = 0;
        let combo = 0;
        let bestCombo = 0;
        let difficulty = 1;
        let wordSpeed = 1;
        let spawnInterval = 2000;
        let activeWords = [];
        let gameLoop;
        let spawnTimer;

        // Initialize city skyline
        function initCity() {
            const city = document.getElementById('city');
            const buildings = 15;

            for (let i = 0; i < buildings; i++) {
                const building = document.createElement('div');
                building.className = 'building';
                building.style.left = `${(i * 100 / buildings)}%`;
                building.style.width = `${Math.random() * 8 + 4}%`;
                building.style.height = `${Math.random() * 60 + 20}%`;
                city.appendChild(building);
            }
        }

        // Initialize rain effect
        function initRain() {
            const rainBg = document.getElementById('rainBg');
            const rainDrops = 50;

            for (let i = 0; i < rainDrops; i++) {
                const drop = document.createElement('div');
                drop.className = 'rain-line';
                drop.style.left = `${Math.random() * 100}%`;
                drop.style.animationDelay = `${Math.random() * 2}s`;
                drop.style.animationDuration = `${Math.random() * 0.5 + 0.5}s`;
                rainBg.appendChild(drop);
            }
        }

        // Create falling word
        function createWord() {
            if (!gameActive) return;

            const gameArea = document.getElementById('gameArea');
            const word = document.createElement('div');
            const text = wordPool[Math.floor(Math.random() * wordPool.length)];

            word.className = 'word';
            word.textContent = text;
            word.style.left = `${Math.random() * (window.innerWidth - 150)}px`;
            word.style.top = '-50px';

            gameArea.appendChild(word);

            activeWords.push({
                element: word,
                text: text,
                y: -50,
                speed: wordSpeed + Math.random() * 0.5
            });
        }

        // Update game
        function updateGame() {
            if (!gameActive) return;

            const gameArea = document.getElementById('gameArea');
            const bottomLimit = window.innerHeight - 150;

            activeWords = activeWords.filter(wordObj => {
                wordObj.y += wordObj.speed;
                wordObj.element.style.top = `${wordObj.y}px`;

                if (wordObj.y > bottomLimit) {
                    wordObj.element.classList.add('missed');
                    setTimeout(() => {
                        if (wordObj.element.parentNode) {
                            wordObj.element.remove();
                        }
                    }, 500);

                    wordsMissed++;
                    combo = 0;
                    updateCombo();
                    updateStats();

                    // Check game over
                    if (wordsMissed >= 10) {
                        endGame();
                    }

                    return false;
                }

                return true;
            });
        }

        // Handle input
        function handleInput() {
            const input = document.getElementById('typeInput');
            const typedWord = input.value.trim().toLowerCase();

            if (!typedWord) return;

            const matchIndex = activeWords.findIndex(w => w.text.toLowerCase() === typedWord);

            if (matchIndex !== -1) {
                const wordObj = activeWords[matchIndex];
                wordObj.element.classList.add('typed');

                setTimeout(() => {
                    if (wordObj.element.parentNode) {
                        wordObj.element.remove();
                    }
                }, 300);

                activeWords.splice(matchIndex, 1);

                // Update score
                score += (10 * difficulty) + (combo * 5);
                wordsTyped++;
                combo++;
                if (combo > bestCombo) bestCombo = combo;

                // Show combo indicator
                if (combo >= 5) {
                    showCombo(combo);
                }

                updateStats();
                updateCombo();

                // Increase difficulty
                if (wordsTyped % 10 === 0) {
                    increaseDifficulty();
                }

                input.value = '';
            }
        }

        // Show combo animation
        function showCombo(comboCount) {
            const comboEl = document.getElementById('combo');
            comboEl.textContent = `${comboCount}x COMBO!`;
            comboEl.classList.add('show');

            setTimeout(() => {
                comboEl.classList.remove('show');
            }, 1000);
        }

        // Update stats display
        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('wordsTyped').textContent = wordsTyped;

            const accuracy = wordsTyped + wordsMissed > 0
                ? Math.round((wordsTyped / (wordsTyped + wordsMissed)) * 100)
                : 100;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
        }

        // Update combo display
        function updateCombo() {
            document.getElementById('comboCount').textContent = combo;
        }

        // Increase difficulty
        function increaseDifficulty() {
            difficulty++;
            wordSpeed += 0.2;
            spawnInterval = Math.max(800, spawnInterval - 100);

            document.getElementById('difficultyLevel').textContent = difficulty;

            // Restart spawn timer with new interval
            clearInterval(spawnTimer);
            spawnTimer = setInterval(createWord, spawnInterval);
        }

        // Start game
        function startGame() {
            document.getElementById('startScreen').classList.add('hide');
            document.getElementById('typeInput').disabled = false;
            document.getElementById('typeInput').focus();

            gameActive = true;
            score = 0;
            wordsTyped = 0;
            wordsMissed = 0;
            combo = 0;
            bestCombo = 0;
            difficulty = 1;
            wordSpeed = 1;
            spawnInterval = 2000;

            updateStats();
            updateCombo();
            document.getElementById('difficultyLevel').textContent = difficulty;

            // Start game loops
            gameLoop = setInterval(updateGame, 20);
            spawnTimer = setInterval(createWord, spawnInterval);

            // Create initial words
            setTimeout(createWord, 500);
            setTimeout(createWord, 1500);
        }

        // End game
        function endGame() {
            gameActive = false;
            clearInterval(gameLoop);
            clearInterval(spawnTimer);

            document.getElementById('typeInput').disabled = true;

            // Show final stats
            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalWords').textContent = wordsTyped;
            const finalAccuracy = wordsTyped + wordsMissed > 0
                ? Math.round((wordsTyped / (wordsTyped + wordsMissed)) * 100)
                : 0;
            document.getElementById('finalAccuracy').textContent = `${finalAccuracy}%`;
            document.getElementById('finalCombo').textContent = bestCombo;

            document.getElementById('gameOverModal').classList.add('show');
        }

        // Reset game
        function resetGame() {
            // Clear active words
            activeWords.forEach(w => {
                if (w.element.parentNode) {
                    w.element.remove();
                }
            });
            activeWords = [];

            document.getElementById('gameOverModal').classList.remove('show');
            document.getElementById('startScreen').classList.remove('hide');
        }

        // Event listeners
        document.getElementById('typeInput').addEventListener('input', handleInput);
        document.getElementById('typeInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleInput();
            }
        });

        // Prevent form submission on Enter
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
            }
        });

        // Initialize on load
        window.addEventListener('load', () => {
            initCity();
            initRain();
        });
    </script>
</body>
</html>