<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Festival Lights Show</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0a0a0a;
            color: white;
            overflow-x: hidden;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid #333;
            position: relative;
            z-index: 100;
        }

        .header h1 {
            font-size: 3rem;
            background: linear-gradient(45deg, #ff006e, #fb5607, #ffbe0b, #8338ec, #3a86ff);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
            margin-bottom: 10px;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .header p {
            color: #ccc;
            font-size: 1.2rem;
        }

        .stage {
            flex: 1;
            position: relative;
            background: radial-gradient(circle at center, #1a1a2e 0%, #0a0a0a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }

        .lights-container {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 20px;
            max-width: 800px;
            width: 100%;
            padding: 40px;
        }

        .light {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #333;
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 3px solid #555;
        }

        .light.on {
            box-shadow: 
                0 0 20px currentColor,
                0 0 40px currentColor,
                0 0 60px currentColor,
                inset 0 0 20px rgba(255, 255, 255, 0.2);
            border-color: currentColor;
            transform: scale(1.1);
        }

        .light::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60%;
            height: 60%;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), transparent 50%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .light.on::before {
            opacity: 1;
        }

        .controls {
            background: rgba(0, 0, 0, 0.95);
            padding: 30px;
            border-top: 2px solid #333;
        }

        .control-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .control-section h3 {
            color: #ff006e;
            margin-bottom: 15px;
            font-size: 1.3rem;
            text-align: center;
        }

        .control-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .color-picker {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid #555;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .color-btn:hover {
            transform: scale(1.1);
            border-color: white;
        }

        .color-btn.active {
            border-color: white;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        .color-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: currentColor;
            border-radius: 50%;
        }

        .btn {
            background: linear-gradient(45deg, #ff006e, #8338ec);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 0, 110, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #3a86ff, #06ffa5);
        }

        .btn-secondary:hover {
            box-shadow: 0 10px 25px rgba(58, 134, 255, 0.3);
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff006e, #ff4757);
        }

        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .pattern-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .pattern-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .pattern-btn.active {
            background: linear-gradient(45deg, #ff006e, #8338ec);
            border-color: #ff006e;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 10px 0;
        }

        .slider-container label {
            min-width: 100px;
            color: #ccc;
            font-size: 0.9rem;
        }

        .slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            transition: all 0.3s;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff006e, #8338ec);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 0, 110, 0.5);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff006e, #8338ec);
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px rgba(255, 0, 110, 0.5);
        }

        .value-display {
            min-width: 40px;
            text-align: center;
            color: #ff006e;
            font-weight: bold;
        }

        .music-sync {
            text-align: center;
            padding: 20px;
            background: rgba(131, 56, 236, 0.1);
            border: 1px solid rgba(131, 56, 236, 0.3);
            border-radius: 10px;
            margin-top: 20px;
        }

        .beat-indicator {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(131, 56, 236, 0.3);
            margin: 15px auto;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .beat-indicator.active {
            background: #8338ec;
            transform: scale(1.2);
            box-shadow: 0 0 30px rgba(131, 56, 236, 0.8);
        }

        .presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .preset-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .preset-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        @media (max-width: 768px) {
            .lights-container {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
                padding: 20px;
            }
            
            .light {
                width: 60px;
                height: 60px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .controls {
                padding: 20px;
            }
            
            .control-row {
                flex-direction: column;
                align-items: center;
            }
            
            .color-picker {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .pattern-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .lights-container {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .light {
                width: 50px;
                height: 50px;
            }
            
            .slider-container {
                flex-direction: column;
                gap: 5px;
            }
            
            .slider-container label {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé™ Festival Lights Show üé™</h1>
            <p>Control your virtual light show with colors, patterns, and music sync!</p>
        </div>

        <div class="stage">
            <div class="lights-container" id="lightsContainer">
                <!-- Lights will be generated by JavaScript -->
            </div>
        </div>

        <div class="controls">
            <div class="control-section">
                <h3>üé® Colors</h3>
                <div class="color-picker" id="colorPicker">
                    <div class="color-btn" style="color: #ff006e" onclick="setColor('#ff006e')"></div>
                    <div class="color-btn" style="color: #fb5607" onclick="setColor('#fb5607')"></div>
                    <div class="color-btn" style="color: #ffbe0b" onclick="setColor('#ffbe0b')"></div>
                    <div class="color-btn" style="color: #06ffa5" onclick="setColor('#06ffa5')"></div>
                    <div class="color-btn" style="color: #3a86ff" onclick="setColor('#3a86ff')"></div>
                    <div class="color-btn" style="color: #8338ec" onclick="setColor('#8338ec')"></div>
                    <div class="color-btn" style="color: #ff4757" onclick="setColor('#ff4757')"></div>
                    <div class="color-btn" style="color: #ffffff" onclick="setColor('#ffffff')"></div>
                </div>
                
                <div class="control-row" style="margin-top: 20px;">
                    <button class="btn" onclick="toggleAllLights()">Toggle All</button>
                    <button class="btn btn-secondary" onclick="randomColors()">Random Colors</button>
                    <button class="btn btn-danger" onclick="clearAll()">Clear All</button>
                </div>
            </div>

            <div class="control-section">
                <h3>‚ú® Patterns</h3>
                <div class="pattern-grid">
                    <button class="pattern-btn" onclick="runPattern('wave')">üåä Wave</button>
                    <button class="pattern-btn" onclick="runPattern('strobe')">‚ö° Strobe</button>
                    <button class="pattern-btn" onclick="runPattern('rainbow')">üåà Rainbow</button>
                    <button class="pattern-btn" onclick="runPattern('pulse')">üíì Pulse</button>
                    <button class="pattern-btn" onclick="runPattern('chase')">üèÉ Chase</button>
                    <button class="pattern-btn" onclick="runPattern('sparkle')">‚ú® Sparkle</button>
                    <button class="pattern-btn" onclick="runPattern('spiral')">üåÄ Spiral</button>
                    <button class="pattern-btn" onclick="runPattern('explosion')">üí• Explosion</button>
                </div>
            </div>

            <div class="control-section">
                <h3>‚öôÔ∏è Settings</h3>
                <div class="slider-container">
                    <label>Speed</label>
                    <input type="range" class="slider" id="speedSlider" min="50" max="1000" value="300">
                    <div class="value-display" id="speedValue">300ms</div>
                </div>
                
                <div class="slider-container">
                    <label>Brightness</label>
                    <input type="range" class="slider" id="brightnessSlider" min="20" max="100" value="100">
                    <div class="value-display" id="brightnessValue">100%</div>
                </div>
            </div>

            <div class="control-section">
                <h3>üéµ Music Sync</h3>
                <div class="music-sync">
                    <div class="beat-indicator" id="beatIndicator">üéµ</div>
                    <div class="control-row">
                        <button class="btn" onclick="startMusicSync()">Start Sync</button>
                        <button class="btn btn-secondary" onclick="stopMusicSync()">Stop Sync</button>
                    </div>
                    <p style="color: #ccc; font-size: 0.9rem; margin-top: 10px;">
                        Simulated music sync - lights pulse to a virtual beat
                    </p>
                </div>
            </div>

            <div class="control-section">
                <h3>üé≠ Presets</h3>
                <div class="presets">
                    <button class="preset-btn" onclick="loadPreset('party')">
                        üéâ<br>Party Mode
                    </button>
                    <button class="preset-btn" onclick="loadPreset('romantic')">
                        üíï<br>Romantic
                    </button>
                    <button class="preset-btn" onclick="loadPreset('energetic')">
                        ‚ö°<br>Energetic
                    </button>
                    <button class="preset-btn" onclick="loadPreset('calm')">
                        üåô<br>Calm
                    </button>
                    <button class="preset-btn" onclick="loadPreset('disco')">
                        üï∫<br>Disco
                    </button>
                    <button class="preset-btn" onclick="loadPreset('christmas')">
                        üéÑ<br>Christmas
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class FestivalLights {
            constructor() {
                this.lights = [];
                this.currentColor = '#ff006e';
                this.speed = 300;
                this.brightness = 100;
                this.activePattern = null;
                this.patternInterval = null;
                this.musicSyncActive = false;
                this.musicInterval = null;
                
                this.colors = [
                    '#ff006e', '#fb5607', '#ffbe0b', '#06ffa5', 
                    '#3a86ff', '#8338ec', '#ff4757', '#ffffff'
                ];
                
                this.initializeLights();
                this.setupEventListeners();
            }
            
            initializeLights() {
                const container = document.getElementById('lightsContainer');
                
                for (let i = 0; i < 64; i++) {
                    const light = document.createElement('div');
                    light.className = 'light';
                    light.dataset.index = i;
                    light.addEventListener('click', () => this.toggleLight(i));
                    
                    container.appendChild(light);
                    this.lights.push({
                        element: light,
                        isOn: false,
                        color: this.currentColor
                    });
                }
            }
            
            setupEventListeners() {
                const speedSlider = document.getElementById('speedSlider');
                const brightnessSlider = document.getElementById('brightnessSlider');
                
                speedSlider.addEventListener('input', (e) => {
                    this.speed = parseInt(e.target.value);
                    document.getElementById('speedValue').textContent = this.speed + 'ms';
                });
                
                brightnessSlider.addEventListener('input', (e) => {
                    this.brightness = parseInt(e.target.value);
                    document.getElementById('brightnessValue').textContent = this.brightness + '%';
                    this.updateBrightness();
                });
            }
            
            toggleLight(index) {
                const light = this.lights[index];
                light.isOn = !light.isOn;
                light.color = this.currentColor;
                this.updateLightDisplay(index);
            }
            
            updateLightDisplay(index) {
                const light = this.lights[index];
                const element = light.element;
                
                if (light.isOn) {
                    element.classList.add('on');
                    element.style.color = light.color;
                } else {
                    element.classList.remove('on');
                    element.style.color = '';
                }
            }
            
            updateBrightness() {
                this.lights.forEach((light, index) => {
                    if (light.isOn) {
                        light.element.style.opacity = this.brightness / 100;
                    }
                });
            }
            
            setColor(color) {
                this.currentColor = color;
                
                // Update active color button
                document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector(`[style*="${color}"]`).classList.add('active');
            }
            
            toggleAllLights() {
                const allOn = this.lights.every(light => light.isOn);
                
                this.lights.forEach((light, index) => {
                    light.isOn = !allOn;
                    light.color = this.currentColor;
                    this.updateLightDisplay(index);
                });
            }
            
            randomColors() {
                this.lights.forEach((light, index) => {
                    light.isOn = Math.random() > 0.3;
                    light.color = this.colors[Math.floor(Math.random() * this.colors.length)];
                    this.updateLightDisplay(index);
                });
            }
            
            clearAll() {
                this.stopPattern();
                this.stopMusicSync();
                
                this.lights.forEach((light, index) => {
                    light.isOn = false;
                    this.updateLightDisplay(index);
                });
            }
            
            stopPattern() {
                if (this.patternInterval) {
                    clearInterval(this.patternInterval);
                    this.patternInterval = null;
                }
                this.activePattern = null;
                
                // Remove active state from pattern buttons
                document.querySelectorAll('.pattern-btn').forEach(btn => btn.classList.remove('active'));
            }
            
            runPattern(patternName) {
                this.stopPattern();
                this.activePattern = patternName;
                
                // Highlight active pattern button
                document.querySelectorAll('.pattern-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
                
                switch (patternName) {
                    case 'wave':
                        this.wavePattern();
                        break;
                    case 'strobe':
                        this.strobePattern();
                        break;
                    case 'rainbow':
                        this.rainbowPattern();
                        break;
                    case 'pulse':
                        this.pulsePattern();
                        break;
                    case 'chase':
                        this.chasePattern();
                        break;
                    case 'sparkle':
                        this.sparklePattern();
                        break;
                    case 'spiral':
                        this.spiralPattern();
                        break;
                    case 'explosion':
                        this.explosionPattern();
                        break;
                }
            }
            
            wavePattern() {
                let position = 0;
                
                this.patternInterval = setInterval(() => {
                    this.lights.forEach((light, index) => {
                        const col = index % 8;
                        const distance = Math.abs(col - position);
                        light.isOn = distance <= 1;
                        light.color = this.currentColor;
                        this.updateLightDisplay(index);
                    });
                    
                    position = (position + 1) % 8;
                }, this.speed);
            }
            
            strobePattern() {
                let isOn = false;
                
                this.patternInterval = setInterval(() => {
                    isOn = !isOn;
                    
                    this.lights.forEach((light, index) => {
                        light.isOn = isOn;
                        light.color = this.currentColor;
                        this.updateLightDisplay(index);
                    });
                }, this.speed / 4);
            }
            
            rainbowPattern() {
                let colorIndex = 0;
                
                this.patternInterval = setInterval(() => {
                    this.lights.forEach((light, index) => {
                        light.isOn = true;
                        light.color = this.colors[(colorIndex + index) % this.colors.length];
                        this.updateLightDisplay(index);
                    });
                    
                    colorIndex = (colorIndex + 1) % this.colors.length;
                }, this.speed);
            }
            
            pulsePattern() {
                let intensity = 0;
                let direction = 1;
                
                this.patternInterval = setInterval(() => {
                    this.lights.forEach((light, index) => {
                        light.isOn = intensity > 0.3;
                        light.color = this.currentColor;
                        light.element.style.opacity = intensity;
                        this.updateLightDisplay(index);
                    });
                    
                    intensity += direction * 0.1;
                    if (intensity >= 1 || intensity <= 0) {
                        direction *= -1;
                    }
                }, this.speed / 10);
            }
            
            chasePattern() {
                let position = 0;
                
                this.patternInterval = setInterval(() => {
                    this.lights.forEach((light, index) => {
                        light.isOn = index === position;
                        light.color = this.currentColor;
                        this.updateLightDisplay(index);
                    });
                    
                    position = (position + 1) % this.lights.length;
                }, this.speed / 4);
            }
            
            sparklePattern() {
                this.patternInterval = setInterval(() => {
                    // Turn off random lights
                    for (let i = 0; i < 10; i++) {
                        const randomIndex = Math.floor(Math.random() * this.lights.length);
                        this.lights[randomIndex].isOn = false;
                        this.updateLightDisplay(randomIndex);
                    }
                    
                    // Turn on random lights
                    for (let i = 0; i < 8; i++) {
                        const randomIndex = Math.floor(Math.random() * this.lights.length);
                        this.lights[randomIndex].isOn = true;
                        this.lights[randomIndex].color = this.colors[Math.floor(Math.random() * this.colors.length)];
                        this.updateLightDisplay(randomIndex);
                    }
                }, this.speed / 2);
            }
            
            spiralPattern() {
                let angle = 0;
                const center = { x: 4, y: 4 };
                const radius = 3;
                
                this.patternInterval = setInterval(() => {
                    this.lights.forEach((light, index) => {
                        const row = Math.floor(index / 8);
                        const col = index % 8;
                        
                        const dx = col - center.x;
                        const dy = row - center.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        const lightAngle = Math.atan2(dy, dx);
                        
                        const targetAngle = angle + (distance * 0.5);
                        const angleDiff = Math.abs(lightAngle - targetAngle);
                        
                        light.isOn = angleDiff < 0.5 || angleDiff > Math.PI * 2 - 0.5;
                        light.color = this.currentColor;
                        this.updateLightDisplay(index);
                    });
                    
                    angle += 0.2;
                }, this.speed / 3);
            }
            
            explosionPattern() {
                let radius = 0;
                const center = { x: 4, y: 4 };
                
                this.patternInterval = setInterval(() => {
                    this.lights.forEach((light, index) => {
                        const row = Math.floor(index / 8);
                        const col = index % 8;
                        
                        const dx = col - center.x;
                        const dy = row - center.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        light.isOn = Math.abs(distance - radius) < 1;
                        light.color = this.colors[Math.floor(radius) % this.colors.length];
                        this.updateLightDisplay(index);
                    });
                    
                    radius += 0.5;
                    if (radius > 6) {
                        radius = 0;
                    }
                }, this.speed / 2);
            }
            
            startMusicSync() {
                this.stopMusicSync();
                this.musicSyncActive = true;
                
                const beatIndicator = document.getElementById('beatIndicator');
                let beatCount = 0;
                
                this.musicInterval = setInterval(() => {
                    // Simulate beat detection
                    beatIndicator.classList.add('active');
                    
                    // Flash lights to the beat
                    if (beatCount % 4 === 0) {
                        // Strong beat - all lights
                        this.lights.forEach((light, index) => {
                            light.isOn = true;
                            light.color = this.colors[beatCount % this.colors.length];
                            this.updateLightDisplay(index);
                        });
                    } else if (beatCount % 2 === 0) {
                        // Medium beat - alternating pattern
                        this.lights.forEach((light, index) => {
                            light.isOn = index % 2 === 0;
                            light.color = this.currentColor;
                            this.updateLightDisplay(index);
                        });
                    } else {
                        // Weak beat - random sparkle
                        const randomIndexes = Array.from({length: 8}, () => 
                            Math.floor(Math.random() * this.lights.length));
                        
                        this.lights.forEach((light, index) => {
                            light.isOn = randomIndexes.includes(index);
                            light.color = this.currentColor;
                            this.updateLightDisplay(index);
                        });
                    }
                    
                    setTimeout(() => {
                        beatIndicator.classList.remove('active');
                    }, 100);
                    
                    beatCount++;
                }, 500); // 120 BPM
            }
            
            stopMusicSync() {
                if (this.musicInterval) {
                    clearInterval(this.musicInterval);
                    this.musicInterval = null;
                }
                this.musicSyncActive = false;
                
                const beatIndicator = document.getElementById('beatIndicator');
                beatIndicator.classList.remove('active');
            }
            
            loadPreset(presetName) {
                this.stopPattern();
                this.stopMusicSync();
                
                switch (presetName) {
                    case 'party':
                        this.setColor('#ff006e');
                        setTimeout(() => this.runPattern('strobe'), 100);
                        break;
                        
                    case 'romantic':
                        this.setColor('#ff4757');
                        this.lights.forEach((light, index) => {
                            light.isOn = Math.random() > 0.5;
                            light.color = '#ff4757';
                            this.updateLightDisplay(index);
                        });
                        setTimeout(() => this.runPattern('pulse'), 100);
                        break;
                        
                    case 'energetic':
                        setTimeout(() => this.runPattern('rainbow'), 100);
                        this.speed = 150;
                        document.getElementById('speedSlider').value = 150;
                        document.getElementById('speedValue').textContent = '150ms';
                        break;
                        
                    case 'calm':
                        this.setColor('#3a86ff');
                        setTimeout(() => this.runPattern('wave'), 100);
                        this.speed = 600;
                        document.getElementById('speedSlider').value = 600;
                        document.getElementById('speedValue').textContent = '600ms';
                        break;
                        
                    case 'disco':
                        setTimeout(() => this.runPattern('sparkle'), 100);
                        this.speed = 200;
                        document.getElementById('speedSlider').value = 200;
                        document.getElementById('speedValue').textContent = '200ms';
                        break;
                        
                    case 'christmas':
                        this.lights.forEach((light, index) => {
                            light.isOn = true;
                            light.color = index % 2 === 0 ? '#ff4757' : '#06ffa5';
                            this.updateLightDisplay(index);
                        });
                        break;
                }
            }
        }
        
        // Initialize the light show
        let lightShow;
        
        // Global functions for onclick handlers
        function setColor(color) {
            lightShow.setColor(color);
        }
        
        function toggleAllLights() {
            lightShow.toggleAllLights();
        }
        
        function randomColors() {
            lightShow.randomColors();
        }
        
        function clearAll() {
            lightShow.clearAll();
        }
        
        function runPattern(pattern) {
            lightShow.runPattern(pattern);
        }
        
        function startMusicSync() {
            lightShow.startMusicSync();
        }
        
        function stopMusicSync() {
            lightShow.stopMusicSync();
        }
        
        function loadPreset(preset) {
            lightShow.loadPreset(preset);
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            lightShow = new FestivalLights();
            
            // Set initial active color
            document.querySelector('.color-btn').classList.add('active');
        });
    </script>
</body>
</html>