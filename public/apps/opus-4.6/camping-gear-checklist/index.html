<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Camping Gear Checklist</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --forest-dark: #1a2e1a;
    --forest: #2d4a2d;
    --forest-light: #3d6b3d;
    --pine: #4a7c59;
    --sage: #6b8f6b;
    --moss: #8baa7e;
    --meadow: #a8c99b;
    --sky: #87CEEB;
    --sunset: #e8a849;
    --ember: #d4763a;
    --campfire: #c0392b;
    --earth: #8B6914;
    --bark: #5c4033;
    --stone: #7a7a6e;
    --sand: #f5f0e1;
    --cream: #faf8f0;
    --parchment: #f0ead6;
    --warm-white: #fefcf5;
    --shadow: rgba(26, 46, 26, 0.12);
    --shadow-md: rgba(26, 46, 26, 0.18);
    --shadow-lg: rgba(26, 46, 26, 0.25);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Outfit', -apple-system, sans-serif;
    background: var(--cream);
    color: var(--forest-dark);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ===== Scenic Header ===== */
  .header {
    position: relative;
    background: linear-gradient(175deg, #1a3a2a 0%, #2d5a3d 40%, #4a7c59 70%, #6b9f6b 100%);
    padding: 2.5rem 1.5rem 3.5rem;
    overflow: hidden;
    text-align: center;
  }

  .header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background:
      radial-gradient(ellipse 120% 80% at 20% 10%, rgba(255,255,255,0.06) 0%, transparent 50%),
      radial-gradient(ellipse 80% 60% at 80% 30%, rgba(255,255,255,0.04) 0%, transparent 50%);
    pointer-events: none;
  }

  /* Mountain silhouettes */
  .mountains {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 80px;
    pointer-events: none;
  }

  .mountains svg {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100%;
  }

  /* Stars */
  .stars {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 40%;
    pointer-events: none;
  }

  .star {
    position: absolute;
    width: 2px; height: 2px;
    background: rgba(255,255,255,0.7);
    border-radius: 50%;
    animation: twinkle 3s ease-in-out infinite;
  }

  @keyframes twinkle {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
  }

  .header-content {
    position: relative;
    z-index: 2;
  }

  .logo-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 56px; height: 56px;
    background: rgba(255,255,255,0.12);
    border-radius: 16px;
    margin-bottom: 0.75rem;
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255,255,255,0.15);
  }

  .logo-icon svg {
    width: 32px; height: 32px;
    fill: none;
    stroke: rgba(255,255,255,0.9);
    stroke-width: 1.5;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

  .header h1 {
    font-family: 'Playfair Display', serif;
    font-weight: 800;
    font-size: 2rem;
    color: #fff;
    letter-spacing: -0.02em;
    text-shadow: 0 2px 12px rgba(0,0,0,0.2);
    margin-bottom: 0.3rem;
  }

  .header p {
    color: rgba(255,255,255,0.7);
    font-size: 0.9rem;
    font-weight: 400;
    letter-spacing: 0.03em;
  }

  /* ===== Main Layout ===== */
  .main-container {
    max-width: 760px;
    margin: -1.5rem auto 3rem;
    padding: 0 1rem;
    position: relative;
    z-index: 5;
  }

  /* ===== Stats Bar ===== */
  .stats-bar {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.75rem;
    margin-bottom: 1.25rem;
  }

  .stat-card {
    background: #fff;
    border-radius: 14px;
    padding: 1rem;
    text-align: center;
    box-shadow: 0 2px 8px var(--shadow), 0 1px 2px rgba(0,0,0,0.04);
    border: 1px solid rgba(107,143,107,0.1);
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .stat-card:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 16px var(--shadow-md);
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--forest);
    line-height: 1.2;
  }

  .stat-label {
    font-size: 0.72rem;
    color: var(--stone);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-top: 0.15rem;
  }

  /* ===== Controls Section ===== */
  .controls-section {
    background: #fff;
    border-radius: 16px;
    padding: 1.25rem;
    margin-bottom: 1rem;
    box-shadow: 0 2px 8px var(--shadow);
    border: 1px solid rgba(107,143,107,0.1);
  }

  .add-item-row {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }

  .add-item-row input[type="text"] {
    flex: 1;
    min-width: 0;
  }

  .add-item-row input[type="number"] {
    width: 90px;
  }

  input[type="text"], input[type="number"], select {
    padding: 0.65rem 0.85rem;
    border: 2px solid #e5e0d5;
    border-radius: 10px;
    font-family: 'Outfit', sans-serif;
    font-size: 0.88rem;
    color: var(--forest-dark);
    background: var(--warm-white);
    transition: border-color 0.2s, box-shadow 0.2s;
    outline: none;
  }

  input:focus, select:focus {
    border-color: var(--pine);
    box-shadow: 0 0 0 3px rgba(74,124,89,0.12);
  }

  input::placeholder { color: #b5b0a3; }

  select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%237a7a6e' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.7rem center;
    padding-right: 2rem;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    padding: 0.65rem 1.1rem;
    border: none;
    border-radius: 10px;
    font-family: 'Outfit', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    text-decoration: none;
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--pine), var(--forest-light));
    color: #fff;
    box-shadow: 0 2px 8px rgba(45,74,45,0.3);
  }
  .btn-primary:hover {
    background: linear-gradient(135deg, var(--forest-light), var(--forest));
    box-shadow: 0 4px 14px rgba(45,74,45,0.35);
    transform: translateY(-1px);
  }

  .btn-secondary {
    background: var(--sand);
    color: var(--forest);
    border: 1px solid #e0dbd0;
  }
  .btn-secondary:hover {
    background: #ebe5d5;
    transform: translateY(-1px);
  }

  .btn-danger {
    background: #fef2f0;
    color: var(--campfire);
    border: 1px solid #f5d5cf;
  }
  .btn-danger:hover { background: #fde8e4; }

  .btn-icon {
    width: 36px; height: 36px;
    padding: 0;
    border-radius: 10px;
    flex-shrink: 0;
  }

  .btn svg {
    width: 16px; height: 16px;
    fill: none;
    stroke: currentColor;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

  /* ===== Toolbar ===== */
  .toolbar {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .toolbar .search-wrap {
    flex: 1;
    min-width: 140px;
    position: relative;
  }

  .toolbar .search-wrap input {
    width: 100%;
    padding-left: 2.2rem;
  }

  .toolbar .search-wrap svg {
    position: absolute;
    left: 0.7rem;
    top: 50%;
    transform: translateY(-50%);
    width: 16px; height: 16px;
    stroke: #b5b0a3;
    fill: none;
    stroke-width: 2;
    pointer-events: none;
  }

  .filter-select {
    min-width: 120px;
  }

  .unit-toggle {
    display: flex;
    background: var(--sand);
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #e0dbd0;
  }

  .unit-toggle button {
    padding: 0.5rem 0.7rem;
    border: none;
    background: transparent;
    font-family: 'Outfit', sans-serif;
    font-size: 0.78rem;
    font-weight: 600;
    color: var(--stone);
    cursor: pointer;
    transition: all 0.2s;
  }

  .unit-toggle button.active {
    background: var(--pine);
    color: #fff;
  }

  /* ===== Saved Lists ===== */
  .saved-lists-section {
    background: #fff;
    border-radius: 16px;
    padding: 1.25rem;
    margin-bottom: 1rem;
    box-shadow: 0 2px 8px var(--shadow);
    border: 1px solid rgba(107,143,107,0.1);
  }

  .section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.85rem;
  }

  .section-title {
    font-size: 0.82rem;
    font-weight: 700;
    color: var(--forest);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }

  .section-title svg {
    width: 16px; height: 16px;
    stroke: var(--pine);
    fill: none;
    stroke-width: 2;
  }

  .saved-list-chips {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .list-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.45rem 0.85rem;
    background: var(--sand);
    border: 2px solid transparent;
    border-radius: 20px;
    font-size: 0.82rem;
    font-weight: 500;
    color: var(--forest);
    cursor: pointer;
    transition: all 0.2s;
  }

  .list-chip:hover { background: #ebe5d5; }
  .list-chip.active {
    background: rgba(74,124,89,0.1);
    border-color: var(--pine);
    color: var(--forest);
  }

  .list-chip .chip-delete {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px; height: 18px;
    border-radius: 50%;
    background: rgba(0,0,0,0.08);
    border: none;
    cursor: pointer;
    font-size: 11px;
    line-height: 1;
    color: var(--stone);
    transition: all 0.15s;
    padding: 0;
  }

  .list-chip .chip-delete:hover {
    background: var(--campfire);
    color: #fff;
  }

  .save-list-row {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.75rem;
  }

  .save-list-row input {
    flex: 1;
    min-width: 0;
  }

  /* ===== Checklist ===== */
  .checklist-section {
    background: #fff;
    border-radius: 16px;
    padding: 1.25rem;
    box-shadow: 0 2px 8px var(--shadow);
    border: 1px solid rgba(107,143,107,0.1);
    margin-bottom: 1rem;
  }

  .category-group {
    margin-bottom: 1rem;
  }

  .category-group:last-child { margin-bottom: 0; }

  .category-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0;
    margin-bottom: 0.35rem;
    cursor: pointer;
    user-select: none;
  }

  .category-icon {
    width: 28px; height: 28px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    flex-shrink: 0;
  }

  .category-name {
    font-size: 0.88rem;
    font-weight: 700;
    color: var(--forest);
    flex: 1;
  }

  .category-count {
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--stone);
    background: var(--sand);
    padding: 0.15rem 0.55rem;
    border-radius: 10px;
  }

  .category-chevron {
    width: 18px; height: 18px;
    stroke: var(--stone);
    fill: none;
    stroke-width: 2;
    transition: transform 0.25s;
  }

  .category-group.collapsed .category-chevron {
    transform: rotate(-90deg);
  }

  .category-group.collapsed .category-items {
    display: none;
  }

  .category-items {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
  }

  /* ===== Checklist Item ===== */
  .checklist-item {
    display: flex;
    align-items: center;
    gap: 0.65rem;
    padding: 0.7rem 0.85rem;
    background: var(--warm-white);
    border: 1px solid #eee9de;
    border-radius: 12px;
    transition: all 0.2s;
    animation: slideIn 0.25s ease-out;
  }

  @keyframes slideIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .checklist-item:hover {
    border-color: #d5d0c5;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  }

  .checklist-item.checked {
    opacity: 0.55;
    background: #f8f6f0;
  }

  .checklist-item.checked .item-name {
    text-decoration: line-through;
    color: var(--stone);
  }

  /* Custom Checkbox */
  .custom-checkbox {
    width: 22px; height: 22px;
    border: 2px solid #c5c0b5;
    border-radius: 6px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    background: #fff;
  }

  .custom-checkbox:hover {
    border-color: var(--pine);
  }

  .custom-checkbox.checked {
    background: var(--pine);
    border-color: var(--pine);
  }

  .custom-checkbox svg {
    width: 14px; height: 14px;
    stroke: #fff;
    fill: none;
    stroke-width: 2.5;
    stroke-linecap: round;
    stroke-linejoin: round;
    opacity: 0;
    transform: scale(0.5);
    transition: all 0.2s;
  }

  .custom-checkbox.checked svg {
    opacity: 1;
    transform: scale(1);
  }

  .item-details {
    flex: 1;
    min-width: 0;
  }

  .item-name {
    font-size: 0.88rem;
    font-weight: 500;
    color: var(--forest-dark);
    line-height: 1.3;
  }

  .item-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.15rem;
  }

  .item-weight {
    font-size: 0.72rem;
    color: var(--stone);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.2rem;
  }

  .item-weight svg {
    width: 12px; height: 12px;
    stroke: var(--stone);
    fill: none;
    stroke-width: 2;
  }

  .item-category-tag {
    font-size: 0.68rem;
    font-weight: 600;
    padding: 0.1rem 0.5rem;
    border-radius: 6px;
    text-transform: uppercase;
    letter-spacing: 0.03em;
  }

  .item-actions {
    display: flex;
    gap: 0.25rem;
    opacity: 0;
    transition: opacity 0.2s;
  }

  .checklist-item:hover .item-actions {
    opacity: 1;
  }

  .item-actions .btn-icon {
    width: 30px; height: 30px;
    background: transparent;
    color: var(--stone);
  }

  .item-actions .btn-icon:hover {
    background: #f0ebe0;
    color: var(--forest);
  }

  .item-actions .btn-icon.delete-btn:hover {
    background: #fef2f0;
    color: var(--campfire);
  }

  /* ===== Weight Summary ===== */
  .weight-summary {
    background: linear-gradient(135deg, var(--forest-dark) 0%, var(--forest) 100%);
    border-radius: 16px;
    padding: 1.5rem;
    color: #fff;
    margin-bottom: 1rem;
    position: relative;
    overflow: hidden;
  }

  .weight-summary::before {
    content: '';
    position: absolute;
    top: -30%; right: -10%;
    width: 180px; height: 180px;
    background: radial-gradient(circle, rgba(255,255,255,0.06), transparent 70%);
    pointer-events: none;
  }

  .weight-summary-title {
    font-size: 0.78rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: rgba(255,255,255,0.6);
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }

  .weight-summary-title svg {
    width: 16px; height: 16px;
    stroke: rgba(255,255,255,0.6);
    fill: none;
    stroke-width: 2;
  }

  .weight-breakdown {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
    gap: 0.75rem;
  }

  .weight-cat {
    background: rgba(255,255,255,0.08);
    border-radius: 10px;
    padding: 0.65rem 0.8rem;
    backdrop-filter: blur(4px);
  }

  .weight-cat-name {
    font-size: 0.72rem;
    color: rgba(255,255,255,0.55);
    font-weight: 500;
    margin-bottom: 0.15rem;
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }

  .weight-cat-value {
    font-size: 1.1rem;
    font-weight: 700;
  }

  /* ===== Progress Bar ===== */
  .progress-section {
    margin-top: 1rem;
  }

  .progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }

  .progress-label {
    font-size: 0.75rem;
    color: rgba(255,255,255,0.55);
    font-weight: 500;
  }

  .progress-pct {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--meadow);
  }

  .progress-track {
    height: 8px;
    background: rgba(255,255,255,0.1);
    border-radius: 4px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--meadow), var(--sunset));
    border-radius: 4px;
    transition: width 0.5s ease;
  }

  /* ===== Empty State ===== */
  .empty-state {
    text-align: center;
    padding: 3rem 1rem;
    color: var(--stone);
  }

  .empty-state svg {
    width: 64px; height: 64px;
    stroke: #d0cbc0;
    fill: none;
    stroke-width: 1.2;
    margin-bottom: 1rem;
  }

  .empty-state h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--forest);
    margin-bottom: 0.3rem;
  }

  .empty-state p {
    font-size: 0.85rem;
    color: var(--stone);
  }

  /* ===== Quick-Add Templates ===== */
  .templates-section {
    background: #fff;
    border-radius: 16px;
    padding: 1.25rem;
    margin-bottom: 1rem;
    box-shadow: 0 2px 8px var(--shadow);
    border: 1px solid rgba(107,143,107,0.1);
  }

  .template-chips {
    display: flex;
    gap: 0.4rem;
    flex-wrap: wrap;
  }

  .template-chip {
    padding: 0.4rem 0.75rem;
    background: linear-gradient(135deg, rgba(74,124,89,0.08), rgba(74,124,89,0.04));
    border: 1px solid rgba(74,124,89,0.15);
    border-radius: 20px;
    font-size: 0.78rem;
    font-weight: 500;
    color: var(--pine);
    cursor: pointer;
    transition: all 0.2s;
  }

  .template-chip:hover {
    background: rgba(74,124,89,0.15);
    transform: translateY(-1px);
  }

  .template-chip .tc-icon { margin-right: 0.2rem; }

  /* ===== Footer ===== */
  .footer {
    text-align: center;
    padding: 1.5rem;
    color: var(--stone);
    font-size: 0.78rem;
    font-weight: 400;
  }

  /* ===== Responsive ===== */
  @media (max-width: 500px) {
    .header h1 { font-size: 1.6rem; }
    .stats-bar { grid-template-columns: repeat(3, 1fr); gap: 0.5rem; }
    .stat-card { padding: 0.75rem 0.5rem; }
    .stat-value { font-size: 1.25rem; }
    .add-item-row { flex-wrap: wrap; }
    .add-item-row input[type="number"] { width: 100%; }
    .toolbar { gap: 0.4rem; }
    .weight-breakdown { grid-template-columns: 1fr 1fr; }
    .item-actions { opacity: 1; }
  }

  /* ===== Notification Toast ===== */
  .toast {
    position: fixed;
    bottom: 1.5rem;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--forest-dark);
    color: #fff;
    padding: 0.75rem 1.25rem;
    border-radius: 12px;
    font-size: 0.85rem;
    font-weight: 500;
    box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    z-index: 1000;
    opacity: 0;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
  }

  .toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }

  /* ===== Drag & Drop ===== */
  .checklist-item.dragging {
    opacity: 0.5;
    transform: scale(0.98);
  }

  /* Modal overlay */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(26,46,26,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s;
    backdrop-filter: blur(4px);
  }

  .modal-overlay.show {
    opacity: 1;
    pointer-events: auto;
  }

  .modal {
    background: #fff;
    border-radius: 18px;
    padding: 1.75rem;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(0,0,0,0.25);
    transform: scale(0.9);
    transition: transform 0.25s;
  }

  .modal-overlay.show .modal {
    transform: scale(1);
  }

  .modal h3 {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--forest);
    margin-bottom: 1rem;
  }

  .modal .form-group {
    margin-bottom: 0.85rem;
  }

  .modal label {
    display: block;
    font-size: 0.78rem;
    font-weight: 600;
    color: var(--stone);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-bottom: 0.3rem;
  }

  .modal input, .modal select {
    width: 100%;
  }

  .modal-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
    margin-top: 1.25rem;
  }
</style>
</head>
<body>

<!-- Header -->
<header class="header">
  <div class="stars" id="stars"></div>
  <div class="mountains">
    <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
      <path d="M0,120 L0,80 L100,45 L200,70 L300,25 L400,60 L500,15 L600,50 L700,30 L800,55 L900,20 L1000,50 L1100,35 L1200,60 L1200,120 Z" fill="rgba(255,255,255,0.05)"/>
      <path d="M0,120 L0,90 L150,55 L300,75 L450,40 L600,65 L750,35 L900,60 L1050,45 L1200,70 L1200,120 Z" fill="var(--cream)"/>
    </svg>
  </div>
  <div class="header-content">
    <div class="logo-icon">
      <svg viewBox="0 0 24 24">
        <path d="M12 2L2 20h20L12 2z"/>
        <path d="M12 2l4 8-4 3-4-3 4-8z" opacity="0.3"/>
        <circle cx="12" cy="6" r="1" fill="rgba(255,255,255,0.7)" stroke="none"/>
      </svg>
    </div>
    <h1>Camping Gear Checklist</h1>
    <p>Pack smart. Adventure awaits.</p>
  </div>
</header>

<!-- Main Content -->
<div class="main-container">

  <!-- Stats Bar -->
  <div class="stats-bar">
    <div class="stat-card">
      <div class="stat-value" id="totalItems">0</div>
      <div class="stat-label">Total Items</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="packedItems">0</div>
      <div class="stat-label">Packed</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="totalWeight">0 lb</div>
      <div class="stat-label">Total Weight</div>
    </div>
  </div>

  <!-- Saved Lists -->
  <div class="saved-lists-section">
    <div class="section-header">
      <span class="section-title">
        <svg viewBox="0 0 24 24"><path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/></svg>
        Saved Lists
      </span>
    </div>
    <div class="saved-list-chips" id="savedListChips">
      <span style="font-size:0.82rem; color:var(--stone);">No saved lists yet</span>
    </div>
    <div class="save-list-row">
      <input type="text" id="listNameInput" placeholder="New list name..." />
      <button class="btn btn-secondary" onclick="saveCurrentList()">
        <svg viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/><polyline points="17,21 17,13 7,13 7,21"/><polyline points="7,3 7,8 15,8"/></svg>
        Save
      </button>
    </div>
  </div>

  <!-- Quick-Add Templates -->
  <div class="templates-section">
    <div class="section-header">
      <span class="section-title">
        <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
        Quick Add Essentials
      </span>
    </div>
    <div class="template-chips" id="templateChips"></div>
  </div>

  <!-- Add Item + Toolbar -->
  <div class="controls-section">
    <div class="add-item-row">
      <input type="text" id="itemNameInput" placeholder="Add new gear item..." />
      <input type="number" id="itemWeightInput" placeholder="Weight" min="0" step="0.1" />
      <select id="itemCategorySelect"></select>
      <button class="btn btn-primary" onclick="addItem()">
        <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
        Add
      </button>
    </div>
    <div class="toolbar">
      <div class="search-wrap">
        <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
        <input type="text" id="searchInput" placeholder="Search gear..." oninput="renderItems()" />
      </div>
      <select class="filter-select" id="filterCategory" onchange="renderItems()">
        <option value="all">All Categories</option>
      </select>
      <select class="filter-select" id="filterStatus" onchange="renderItems()">
        <option value="all">All Status</option>
        <option value="packed">Packed</option>
        <option value="unpacked">Unpacked</option>
      </select>
      <div class="unit-toggle">
        <button id="unitLb" class="active" onclick="setUnit('lb')">lb</button>
        <button id="unitKg" onclick="setUnit('kg')">kg</button>
        <button id="unitOz" onclick="setUnit('oz')">oz</button>
      </div>
    </div>
  </div>

  <!-- Weight Summary -->
  <div class="weight-summary" id="weightSummary" style="display:none;">
    <div class="weight-summary-title">
      <svg viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"/></svg>
      Weight Breakdown by Category
    </div>
    <div class="weight-breakdown" id="weightBreakdown"></div>
    <div class="progress-section">
      <div class="progress-header">
        <span class="progress-label">Packing Progress</span>
        <span class="progress-pct" id="progressPct">0%</span>
      </div>
      <div class="progress-track">
        <div class="progress-fill" id="progressFill" style="width:0%"></div>
      </div>
    </div>
  </div>

  <!-- Checklist Items -->
  <div class="checklist-section" id="checklistSection">
    <div id="checklistContainer"></div>
  </div>

  <!-- Footer -->
  <div class="footer">
    Camping Gear Checklist &mdash; Pack light, go far
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<!-- Edit Modal -->
<div class="modal-overlay" id="editModal">
  <div class="modal">
    <h3>Edit Item</h3>
    <div class="form-group">
      <label>Item Name</label>
      <input type="text" id="editName" />
    </div>
    <div class="form-group">
      <label>Weight</label>
      <input type="number" id="editWeight" min="0" step="0.1" />
    </div>
    <div class="form-group">
      <label>Category</label>
      <select id="editCategory"></select>
    </div>
    <div class="modal-actions">
      <button class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
      <button class="btn btn-primary" onclick="saveEdit()">Save</button>
    </div>
  </div>
</div>

<script>
// ===== Data =====
const CATEGORIES = [
  { id: 'shelter', name: 'Shelter', icon: '‚õ∫', color: '#4a7c59', bg: '#eaf5ed' },
  { id: 'sleep', name: 'Sleep System', icon: 'üåô', color: '#5b6abf', bg: '#eef0fa' },
  { id: 'cooking', name: 'Cooking', icon: 'üî•', color: '#d4763a', bg: '#fdf0e6' },
  { id: 'clothing', name: 'Clothing', icon: 'üß•', color: '#8b6914', bg: '#faf3e0' },
  { id: 'navigation', name: 'Navigation', icon: 'üß≠', color: '#3a8f8f', bg: '#e6f5f5' },
  { id: 'safety', name: 'Safety & First Aid', icon: 'üè•', color: '#c0392b', bg: '#fdeae8' },
  { id: 'hydration', name: 'Hydration', icon: 'üíß', color: '#2980b9', bg: '#e8f4fd' },
  { id: 'tools', name: 'Tools & Repair', icon: 'üîß', color: '#7a7a6e', bg: '#f0efea' },
  { id: 'lighting', name: 'Lighting', icon: 'üî¶', color: '#e8a849', bg: '#fdf5e3' },
  { id: 'personal', name: 'Personal Items', icon: 'üéí', color: '#6b4c8f', bg: '#f0ebf5' },
  { id: 'misc', name: 'Miscellaneous', icon: 'üì¶', color: '#5c4033', bg: '#f2ede8' },
];

const TEMPLATES = [
  { name: 'Tent', weight: 4.5, category: 'shelter', icon: '‚õ∫' },
  { name: 'Sleeping Bag', weight: 2.8, category: 'sleep', icon: 'üåô' },
  { name: 'Sleeping Pad', weight: 1.5, category: 'sleep', icon: 'üõèÔ∏è' },
  { name: 'Camp Stove', weight: 1.2, category: 'cooking', icon: 'üî•' },
  { name: 'Cookware Set', weight: 1.8, category: 'cooking', icon: 'üç≥' },
  { name: 'Water Filter', weight: 0.5, category: 'hydration', icon: 'üíß' },
  { name: 'Headlamp', weight: 0.2, category: 'lighting', icon: 'üî¶' },
  { name: 'First Aid Kit', weight: 0.8, category: 'safety', icon: 'üè•' },
  { name: 'Rain Jacket', weight: 0.9, category: 'clothing', icon: 'üß•' },
  { name: 'Hiking Boots', weight: 2.5, category: 'clothing', icon: 'ü•æ' },
  { name: 'Backpack', weight: 3.2, category: 'personal', icon: 'üéí' },
  { name: 'Map & Compass', weight: 0.3, category: 'navigation', icon: 'üß≠' },
  { name: 'Multi-tool', weight: 0.4, category: 'tools', icon: 'üîß' },
  { name: 'Water Bottles (2L)', weight: 4.4, category: 'hydration', icon: 'üç∂' },
  { name: 'Tarp', weight: 1.0, category: 'shelter', icon: 'üèïÔ∏è' },
  { name: 'Insect Repellent', weight: 0.3, category: 'personal', icon: 'ü¶ü' },
  { name: 'Sunscreen', weight: 0.3, category: 'personal', icon: '‚òÄÔ∏è' },
  { name: 'Camp Chair', weight: 2.0, category: 'misc', icon: 'ü™ë' },
  { name: 'Lantern', weight: 0.8, category: 'lighting', icon: 'üèÆ' },
  { name: 'Fire Starter', weight: 0.1, category: 'tools', icon: 'üî•' },
];

let items = [];
let savedLists = {};
let currentListName = null;
let currentUnit = 'lb'; // lb, kg, oz
let editItemId = null;
let nextId = 1;

// ===== Initialization =====
function init() {
  loadFromStorage();
  populateCategorySelects();
  renderTemplates();
  renderItems();
  renderSavedLists();
  updateStats();
  generateStars();
}

function generateStars() {
  const container = document.getElementById('stars');
  for (let i = 0; i < 30; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.left = Math.random() * 100 + '%';
    star.style.top = Math.random() * 100 + '%';
    star.style.animationDelay = Math.random() * 3 + 's';
    star.style.width = (1 + Math.random() * 2) + 'px';
    star.style.height = star.style.width;
    container.appendChild(star);
  }
}

function populateCategorySelects() {
  const selects = [
    document.getElementById('itemCategorySelect'),
    document.getElementById('editCategory'),
    document.getElementById('filterCategory')
  ];

  CATEGORIES.forEach(cat => {
    selects.forEach((sel, i) => {
      const opt = document.createElement('option');
      opt.value = cat.id;
      opt.textContent = cat.icon + ' ' + cat.name;
      sel.appendChild(opt);
    });
  });
}

function renderTemplates() {
  const container = document.getElementById('templateChips');
  container.innerHTML = '';
  TEMPLATES.forEach(t => {
    const chip = document.createElement('span');
    chip.className = 'template-chip';
    chip.innerHTML = `<span class="tc-icon">${t.icon}</span> ${t.name}`;
    chip.title = `${t.name} ‚Äî ${t.weight} lb`;
    chip.onclick = () => addTemplateItem(t);
    container.appendChild(chip);
  });
}

// ===== Storage =====
function loadFromStorage() {
  try {
    const stored = localStorage.getItem('campingGear_items');
    if (stored) items = JSON.parse(stored);
    const storedLists = localStorage.getItem('campingGear_lists');
    if (storedLists) savedLists = JSON.parse(storedLists);
    const storedUnit = localStorage.getItem('campingGear_unit');
    if (storedUnit) currentUnit = storedUnit;
    const storedNextId = localStorage.getItem('campingGear_nextId');
    if (storedNextId) nextId = parseInt(storedNextId);
    const storedListName = localStorage.getItem('campingGear_currentList');
    if (storedListName) currentListName = storedListName;
  } catch(e) {}
  setUnit(currentUnit);
}

function saveToStorage() {
  try {
    localStorage.setItem('campingGear_items', JSON.stringify(items));
    localStorage.setItem('campingGear_lists', JSON.stringify(savedLists));
    localStorage.setItem('campingGear_unit', currentUnit);
    localStorage.setItem('campingGear_nextId', nextId.toString());
    localStorage.setItem('campingGear_currentList', currentListName || '');
  } catch(e) {}
}

// ===== Item CRUD =====
function addItem() {
  const nameInput = document.getElementById('itemNameInput');
  const weightInput = document.getElementById('itemWeightInput');
  const catSelect = document.getElementById('itemCategorySelect');

  const name = nameInput.value.trim();
  if (!name) {
    nameInput.focus();
    showToast('Please enter an item name');
    return;
  }

  const weightInCurrentUnit = parseFloat(weightInput.value) || 0;
  const weightLb = convertToLb(weightInCurrentUnit, currentUnit);

  items.push({
    id: nextId++,
    name,
    weight: weightLb, // always stored in lb
    category: catSelect.value,
    checked: false
  });

  nameInput.value = '';
  weightInput.value = '';
  nameInput.focus();

  renderItems();
  updateStats();
  saveToStorage();
  showToast(`"${name}" added to your gear list`);
}

function addTemplateItem(template) {
  // Check if it already exists
  const exists = items.find(i => i.name.toLowerCase() === template.name.toLowerCase());
  if (exists) {
    showToast(`"${template.name}" is already in your list`);
    return;
  }

  items.push({
    id: nextId++,
    name: template.name,
    weight: template.weight,
    category: template.category,
    checked: false
  });

  renderItems();
  updateStats();
  saveToStorage();
  showToast(`"${template.name}" added`);
}

function toggleItem(id) {
  const item = items.find(i => i.id === id);
  if (item) {
    item.checked = !item.checked;
    renderItems();
    updateStats();
    saveToStorage();
  }
}

function deleteItem(id) {
  const item = items.find(i => i.id === id);
  items = items.filter(i => i.id !== id);
  renderItems();
  updateStats();
  saveToStorage();
  if (item) showToast(`"${item.name}" removed`);
}

function openEditModal(id) {
  editItemId = id;
  const item = items.find(i => i.id === id);
  if (!item) return;

  document.getElementById('editName').value = item.name;
  document.getElementById('editWeight').value = convertFromLb(item.weight, currentUnit).toFixed(2);
  document.getElementById('editCategory').value = item.category;

  document.getElementById('editModal').classList.add('show');
}

function closeEditModal() {
  document.getElementById('editModal').classList.remove('show');
  editItemId = null;
}

function saveEdit() {
  const item = items.find(i => i.id === editItemId);
  if (!item) return;

  const name = document.getElementById('editName').value.trim();
  if (!name) return;

  item.name = name;
  const weightVal = parseFloat(document.getElementById('editWeight').value) || 0;
  item.weight = convertToLb(weightVal, currentUnit);
  item.category = document.getElementById('editCategory').value;

  closeEditModal();
  renderItems();
  updateStats();
  saveToStorage();
  showToast('Item updated');
}

// ===== Saved Lists =====
function saveCurrentList() {
  const nameInput = document.getElementById('listNameInput');
  const name = nameInput.value.trim();
  if (!name) {
    nameInput.focus();
    showToast('Enter a name for your list');
    return;
  }

  savedLists[name] = JSON.parse(JSON.stringify(items));
  currentListName = name;
  nameInput.value = '';
  renderSavedLists();
  saveToStorage();
  showToast(`List "${name}" saved`);
}

function loadList(name) {
  if (!savedLists[name]) return;
  items = JSON.parse(JSON.stringify(savedLists[name]));
  currentListName = name;

  // recalculate nextId
  let maxId = 0;
  items.forEach(i => { if (i.id > maxId) maxId = i.id; });
  nextId = maxId + 1;

  renderItems();
  renderSavedLists();
  updateStats();
  saveToStorage();
  showToast(`Loaded "${name}"`);
}

function deleteList(name, e) {
  e.stopPropagation();
  delete savedLists[name];
  if (currentListName === name) currentListName = null;
  renderSavedLists();
  saveToStorage();
  showToast(`List "${name}" deleted`);
}

function renderSavedLists() {
  const container = document.getElementById('savedListChips');
  const names = Object.keys(savedLists);

  if (names.length === 0) {
    container.innerHTML = '<span style="font-size:0.82rem; color:var(--stone);">No saved lists yet</span>';
    return;
  }

  container.innerHTML = '';
  names.forEach(name => {
    const chip = document.createElement('span');
    chip.className = 'list-chip' + (name === currentListName ? ' active' : '');
    const count = savedLists[name].length;
    chip.innerHTML = `
      <span>${name}</span>
      <span style="font-size:0.7rem; color:var(--stone);">(${count})</span>
      <button class="chip-delete" onclick="deleteList('${name.replace(/'/g, "\\'")}', event)" title="Delete list">&times;</button>
    `;
    chip.onclick = () => loadList(name);
    container.appendChild(chip);
  });
}

// ===== Unit Conversion =====
function setUnit(unit) {
  currentUnit = unit;
  document.querySelectorAll('.unit-toggle button').forEach(b => b.classList.remove('active'));
  document.getElementById('unit' + unit.charAt(0).toUpperCase() + unit.slice(1)).classList.add('active');
  renderItems();
  updateStats();
  saveToStorage();
}

function convertFromLb(lb, unit) {
  if (unit === 'kg') return lb * 0.453592;
  if (unit === 'oz') return lb * 16;
  return lb;
}

function convertToLb(val, unit) {
  if (unit === 'kg') return val / 0.453592;
  if (unit === 'oz') return val / 16;
  return val;
}

function formatWeight(lbs) {
  const val = convertFromLb(lbs, currentUnit);
  if (val === 0) return `0 ${currentUnit}`;
  if (val < 0.01) return `<0.01 ${currentUnit}`;
  return val < 10 ? `${val.toFixed(2)} ${currentUnit}` : `${val.toFixed(1)} ${currentUnit}`;
}

// ===== Rendering =====
function getFilteredItems() {
  const search = document.getElementById('searchInput').value.toLowerCase().trim();
  const catFilter = document.getElementById('filterCategory').value;
  const statusFilter = document.getElementById('filterStatus').value;

  return items.filter(item => {
    if (search && !item.name.toLowerCase().includes(search)) return false;
    if (catFilter !== 'all' && item.category !== catFilter) return false;
    if (statusFilter === 'packed' && !item.checked) return false;
    if (statusFilter === 'unpacked' && item.checked) return false;
    return true;
  });
}

function renderItems() {
  const container = document.getElementById('checklistContainer');
  const filtered = getFilteredItems();

  if (items.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2L2 20h20L12 2z"/>
          <path d="M4 15h16"/>
          <circle cx="8" cy="18" r="0.5" fill="#d0cbc0"/>
          <circle cx="16" cy="18" r="0.5" fill="#d0cbc0"/>
          <path d="M9 10l2 2 4-4" stroke-width="1.5"/>
        </svg>
        <h3>Your pack is empty</h3>
        <p>Add items above or use Quick Add to get started</p>
      </div>
    `;
    document.getElementById('weightSummary').style.display = 'none';
    return;
  }

  if (filtered.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
        </svg>
        <h3>No matching items</h3>
        <p>Try adjusting your search or filters</p>
      </div>
    `;
    return;
  }

  // Group by category
  const groups = {};
  filtered.forEach(item => {
    if (!groups[item.category]) groups[item.category] = [];
    groups[item.category].push(item);
  });

  container.innerHTML = '';

  // Sort categories by predefined order
  const catOrder = CATEGORIES.map(c => c.id);
  const sortedKeys = Object.keys(groups).sort((a, b) => catOrder.indexOf(a) - catOrder.indexOf(b));

  sortedKeys.forEach(catId => {
    const cat = CATEGORIES.find(c => c.id === catId) || { name: catId, icon: 'üì¶', color: '#5c4033', bg: '#f2ede8' };
    const groupItems = groups[catId];
    const checkedCount = groupItems.filter(i => i.checked).length;

    const groupEl = document.createElement('div');
    groupEl.className = 'category-group';

    groupEl.innerHTML = `
      <div class="category-header" onclick="this.parentElement.classList.toggle('collapsed')">
        <div class="category-icon" style="background:${cat.bg};">${cat.icon}</div>
        <span class="category-name">${cat.name}</span>
        <span class="category-count">${checkedCount}/${groupItems.length}</span>
        <svg class="category-chevron" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
      <div class="category-items"></div>
    `;

    const itemsContainer = groupEl.querySelector('.category-items');
    groupItems.forEach(item => {
      const el = document.createElement('div');
      el.className = 'checklist-item' + (item.checked ? ' checked' : '');
      el.dataset.id = item.id;
      el.draggable = true;

      el.innerHTML = `
        <div class="custom-checkbox ${item.checked ? 'checked' : ''}" onclick="toggleItem(${item.id})">
          <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <div class="item-details">
          <div class="item-name">${escapeHtml(item.name)}</div>
          <div class="item-meta">
            ${item.weight > 0 ? `
              <span class="item-weight">
                <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M6 18L18 6M6 6l12 12" opacity="0"/><circle cx="12" cy="12" r="10"/><path d="M8 12h8M12 8v8"/></svg>
                ${formatWeight(item.weight)}
              </span>
            ` : ''}
            <span class="item-category-tag" style="background:${cat.bg}; color:${cat.color};">${cat.icon} ${cat.name}</span>
          </div>
        </div>
        <div class="item-actions">
          <button class="btn btn-icon" onclick="openEditModal(${item.id})" title="Edit">
            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.83 2.83 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
          </button>
          <button class="btn btn-icon delete-btn" onclick="deleteItem(${item.id})" title="Delete">
            <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
          </button>
        </div>
      `;

      itemsContainer.appendChild(el);
    });

    container.appendChild(groupEl);
  });

  renderWeightSummary();
}

function renderWeightSummary() {
  const summaryEl = document.getElementById('weightSummary');
  if (items.length === 0) {
    summaryEl.style.display = 'none';
    return;
  }

  summaryEl.style.display = 'block';
  const breakdown = document.getElementById('weightBreakdown');

  // Calculate per-category weights
  const catWeights = {};
  let totalLb = 0;
  items.forEach(item => {
    if (!catWeights[item.category]) catWeights[item.category] = 0;
    catWeights[item.category] += item.weight;
    totalLb += item.weight;
  });

  const catOrder = CATEGORIES.map(c => c.id);
  const sortedCats = Object.keys(catWeights).sort((a, b) => catOrder.indexOf(a) - catOrder.indexOf(b));

  // Add total first
  let html = `
    <div class="weight-cat" style="background:rgba(255,255,255,0.14);">
      <div class="weight-cat-name">üìä Total Weight</div>
      <div class="weight-cat-value">${formatWeight(totalLb)}</div>
    </div>
  `;

  sortedCats.forEach(catId => {
    const cat = CATEGORIES.find(c => c.id === catId) || { icon: 'üì¶', name: catId };
    html += `
      <div class="weight-cat">
        <div class="weight-cat-name">${cat.icon} ${cat.name}</div>
        <div class="weight-cat-value">${formatWeight(catWeights[catId])}</div>
      </div>
    `;
  });

  breakdown.innerHTML = html;

  // Progress
  const packed = items.filter(i => i.checked).length;
  const total = items.length;
  const pct = total > 0 ? Math.round((packed / total) * 100) : 0;
  document.getElementById('progressPct').textContent = pct + '%';
  document.getElementById('progressFill').style.width = pct + '%';
}

function updateStats() {
  const total = items.length;
  const packed = items.filter(i => i.checked).length;
  const totalWeightLb = items.reduce((sum, i) => sum + i.weight, 0);

  document.getElementById('totalItems').textContent = total;
  document.getElementById('packedItems').textContent = packed;
  document.getElementById('totalWeight').textContent = formatWeight(totalWeightLb);
}

// ===== Utilities =====
function escapeHtml(text) {
  const el = document.createElement('span');
  el.textContent = text;
  return el.innerHTML;
}

let toastTimer;
function showToast(msg) {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => toast.classList.remove('show'), 2500);
}

// ===== Keyboard Shortcuts =====
document.addEventListener('keydown', (e) => {
  // Enter in item name input adds item
  if (e.key === 'Enter' && document.activeElement === document.getElementById('itemNameInput')) {
    addItem();
  }
  // Enter in list name input saves list
  if (e.key === 'Enter' && document.activeElement === document.getElementById('listNameInput')) {
    saveCurrentList();
  }
  // Escape closes modal
  if (e.key === 'Escape') {
    closeEditModal();
  }
});

// Close modal on overlay click
document.getElementById('editModal').addEventListener('click', (e) => {
  if (e.target === document.getElementById('editModal')) closeEditModal();
});

// ===== Init =====
init();
</script>
</body>
</html>
