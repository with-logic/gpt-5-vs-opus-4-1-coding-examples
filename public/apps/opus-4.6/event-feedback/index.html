<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Event Feedback Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg-primary: #f8f9fb;
    --bg-card: #ffffff;
    --bg-header: #1a1f36;
    --bg-table-header: #f1f3f8;
    --bg-row-hover: #f6f8fc;
    --bg-row-alt: #fafbfd;
    --text-primary: #1a1f36;
    --text-secondary: #5a6178;
    --text-muted: #8b91a8;
    --text-on-dark: #ffffff;
    --border: #e2e6ef;
    --border-light: #eef0f6;
    --accent: #4f6ef7;
    --accent-light: #eef1fe;
    --accent-hover: #3b5ce4;
    --success: #22c55e;
    --warning: #f59e0b;
    --danger: #ef4444;
    --star-filled: #f59e0b;
    --star-empty: #d4d8e4;
    --shadow-sm: 0 1px 3px rgba(26, 31, 54, 0.06);
    --shadow-md: 0 4px 12px rgba(26, 31, 54, 0.08);
    --shadow-lg: 0 8px 30px rgba(26, 31, 54, 0.12);
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 14px;
    --transition: 0.2s ease;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
    min-height: 100vh;
  }

  /* Header */
  .header {
    background: var(--bg-header);
    padding: 0;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 12px rgba(0,0,0,0.15);
  }

  .header-inner {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px 32px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 24px;
  }

  .header-left {
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .header-icon {
    width: 42px;
    height: 42px;
    background: linear-gradient(135deg, var(--accent), #7c5ef7);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    flex-shrink: 0;
  }

  .header h1 {
    font-size: 20px;
    font-weight: 700;
    color: var(--text-on-dark);
    letter-spacing: -0.3px;
  }

  .header-subtitle {
    font-size: 13px;
    color: rgba(255,255,255,0.5);
    font-weight: 400;
    margin-top: 1px;
  }

  .header-stats {
    display: flex;
    gap: 28px;
    align-items: center;
  }

  .header-stat {
    text-align: center;
  }

  .header-stat-value {
    font-size: 22px;
    font-weight: 700;
    color: var(--text-on-dark);
    line-height: 1.2;
  }

  .header-stat-label {
    font-size: 11px;
    color: rgba(255,255,255,0.45);
    text-transform: uppercase;
    letter-spacing: 0.8px;
    font-weight: 500;
  }

  /* Main container */
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 24px 32px 48px;
  }

  /* AI Summary */
  .ai-summary {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 24px 28px;
    margin-bottom: 24px;
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
    animation: slideDown 0.4s ease;
  }

  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .ai-summary::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--accent), #7c5ef7, #a855f7);
  }

  .ai-summary-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
  }

  .ai-summary-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 15px;
    font-weight: 600;
    color: var(--text-primary);
  }

  .ai-badge {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    background: linear-gradient(135deg, var(--accent), #7c5ef7);
    color: white;
    font-size: 11px;
    font-weight: 600;
    padding: 3px 10px;
    border-radius: 20px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  .ai-badge svg {
    width: 12px;
    height: 12px;
  }

  .ai-close-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--border);
    background: var(--bg-primary);
    border-radius: var(--radius-sm);
    cursor: pointer;
    color: var(--text-muted);
    transition: all var(--transition);
    flex-shrink: 0;
  }

  .ai-close-btn:hover {
    background: #fee2e2;
    border-color: #fca5a5;
    color: var(--danger);
  }

  .ai-summary-body {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .ai-summary-text {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.7;
  }

  .ai-summary-text strong {
    color: var(--text-primary);
    font-weight: 600;
  }

  .ai-highlights {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }

  .ai-highlight-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-md);
    padding: 14px 16px;
    text-align: center;
  }

  .ai-highlight-value {
    font-size: 24px;
    font-weight: 700;
    line-height: 1.2;
  }

  .ai-highlight-value.good { color: var(--success); }
  .ai-highlight-value.warn { color: var(--warning); }
  .ai-highlight-value.info { color: var(--accent); }

  .ai-highlight-label {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 500;
    margin-top: 4px;
  }

  .ai-summary-collapsed {
    display: none;
    margin-bottom: 24px;
    animation: slideDown 0.3s ease;
  }

  .ai-summary-collapsed.visible {
    display: block;
  }

  .ai-reopen-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    padding: 10px 18px;
    font-size: 13px;
    font-weight: 500;
    color: var(--accent);
    cursor: pointer;
    transition: all var(--transition);
    box-shadow: var(--shadow-sm);
  }

  .ai-reopen-btn:hover {
    background: var(--accent-light);
    border-color: var(--accent);
    box-shadow: var(--shadow-md);
  }

  /* Search */
  .toolbar {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }

  .search-wrapper {
    position: relative;
    flex: 1;
    min-width: 280px;
  }

  .search-icon {
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    pointer-events: none;
  }

  .search-input {
    width: 100%;
    padding: 11px 14px 11px 42px;
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    font-size: 14px;
    font-family: inherit;
    background: var(--bg-card);
    color: var(--text-primary);
    transition: all var(--transition);
    box-shadow: var(--shadow-sm);
  }

  .search-input::placeholder {
    color: var(--text-muted);
  }

  .search-input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(79, 110, 247, 0.12), var(--shadow-sm);
  }

  .search-clear {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    width: 24px;
    height: 24px;
    display: none;
    align-items: center;
    justify-content: center;
    background: var(--bg-table-header);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    color: var(--text-muted);
    font-size: 14px;
    transition: all var(--transition);
  }

  .search-clear.visible { display: flex; }
  .search-clear:hover { background: var(--border); color: var(--text-primary); }

  .results-count {
    font-size: 13px;
    color: var(--text-muted);
    white-space: nowrap;
    font-weight: 500;
  }

  .results-count span {
    color: var(--text-primary);
    font-weight: 600;
  }

  /* Table Container */
  .table-container {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-md);
  }

  .table-scroll {
    overflow-x: auto;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    min-width: 900px;
  }

  thead {
    position: sticky;
    top: 0;
    z-index: 10;
  }

  thead th {
    background: var(--bg-table-header);
    padding: 14px 18px;
    text-align: left;
    font-size: 11.5px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.7px;
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    user-select: none;
    white-space: nowrap;
    transition: background var(--transition), color var(--transition);
    position: relative;
  }

  thead th:hover {
    background: #e8ecf5;
    color: var(--text-primary);
  }

  thead th.sorted {
    color: var(--accent);
    background: var(--accent-light);
  }

  .th-content {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .sort-icon {
    display: flex;
    flex-direction: column;
    gap: 1px;
    opacity: 0.3;
    transition: opacity var(--transition);
    flex-shrink: 0;
  }

  th:hover .sort-icon { opacity: 0.6; }
  th.sorted .sort-icon { opacity: 1; }

  .sort-arrow {
    width: 0;
    height: 0;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
  }

  .sort-arrow.up {
    border-bottom: 5px solid currentColor;
  }

  .sort-arrow.down {
    border-top: 5px solid currentColor;
  }

  th.sorted .sort-arrow.inactive {
    opacity: 0.2;
  }

  /* Table Body */
  tbody tr {
    transition: background var(--transition);
    animation: fadeInRow 0.3s ease;
  }

  @keyframes fadeInRow {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  tbody tr:hover {
    background: var(--bg-row-hover);
  }

  tbody tr:nth-child(even) {
    background: var(--bg-row-alt);
  }

  tbody tr:nth-child(even):hover {
    background: var(--bg-row-hover);
  }

  tbody td {
    padding: 14px 18px;
    font-size: 13.5px;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-light);
    vertical-align: top;
  }

  /* Column widths */
  th:nth-child(1), td:nth-child(1) { width: 7%; text-align: center; }
  th:nth-child(2), td:nth-child(2) { width: 11%; }
  th:nth-child(3), td:nth-child(3) { width: 19%; }
  th:nth-child(4), td:nth-child(4) { width: 14%; }
  th:nth-child(5), td:nth-child(5) { width: 11%; }
  th:nth-child(6), td:nth-child(6) { width: 38%; }

  /* Row number */
  .row-num {
    font-size: 12px;
    color: var(--text-muted);
    font-weight: 500;
    font-variant-numeric: tabular-nums;
  }

  /* Date cell */
  .date-cell {
    font-variant-numeric: tabular-nums;
    font-size: 13px;
    color: var(--text-secondary);
    white-space: nowrap;
  }

  /* Event name */
  .event-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 13.5px;
  }

  .event-tag {
    display: inline-block;
    font-size: 10.5px;
    font-weight: 500;
    padding: 2px 8px;
    border-radius: 20px;
    margin-top: 4px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
  }

  .tag-conference { background: #ede9fe; color: #7c3aed; }
  .tag-workshop { background: #fef3c7; color: #b45309; }
  .tag-webinar { background: #dbeafe; color: #2563eb; }
  .tag-summit { background: #d1fae5; color: #059669; }
  .tag-meetup { background: #fce7f3; color: #db2777; }
  .tag-seminar { background: #fee2e2; color: #dc2626; }
  .tag-training { background: #e0e7ff; color: #4338ca; }

  /* Participant */
  .participant-cell {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 600;
    color: white;
    flex-shrink: 0;
  }

  .participant-name {
    font-weight: 500;
    font-size: 13.5px;
  }

  /* Star rating */
  .stars {
    display: flex;
    gap: 2px;
    align-items: center;
  }

  .star {
    font-size: 15px;
    line-height: 1;
  }

  .star.filled { color: var(--star-filled); }
  .star.empty { color: var(--star-empty); }

  .rating-num {
    margin-left: 6px;
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    background: var(--bg-primary);
    padding: 1px 7px;
    border-radius: 10px;
  }

  /* Feedback text */
  .feedback-text {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.65;
    max-width: 480px;
  }

  .feedback-text mark {
    background: #fef08a;
    color: var(--text-primary);
    padding: 0 2px;
    border-radius: 2px;
  }

  /* Empty state */
  .empty-state {
    text-align: center;
    padding: 60px 24px;
  }

  .empty-state-icon {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.5;
  }

  .empty-state h3 {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 6px;
  }

  .empty-state p {
    font-size: 14px;
    color: var(--text-muted);
  }

  /* Footer */
  .table-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    border-top: 1px solid var(--border-light);
    background: var(--bg-table-header);
    font-size: 12.5px;
    color: var(--text-muted);
  }

  /* Rating distribution mini bar */
  .rating-dist {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .rating-bar-mini {
    height: 6px;
    border-radius: 3px;
    transition: width 0.4s ease;
  }

  /* Scrollbar */
  .table-scroll::-webkit-scrollbar {
    height: 6px;
  }

  .table-scroll::-webkit-scrollbar-track {
    background: var(--bg-primary);
  }

  .table-scroll::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
  }

  .table-scroll::-webkit-scrollbar-thumb:hover {
    background: var(--text-muted);
  }

  /* Responsive */
  @media (max-width: 900px) {
    .header-inner { padding: 16px 20px; }
    .container { padding: 16px 20px 40px; }
    .header-stats { display: none; }
    .ai-summary-body { grid-template-columns: 1fr; }
    .ai-highlights { grid-template-columns: 1fr 1fr; }
  }

  @media (max-width: 600px) {
    .header h1 { font-size: 17px; }
    .toolbar { flex-direction: column; align-items: stretch; }
    .search-wrapper { min-width: unset; }
  }
</style>
</head>
<body>

<!-- Header -->
<header class="header">
  <div class="header-inner">
    <div class="header-left">
      <div class="header-icon">
        <svg width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="white" stroke-width="2">
          <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
        </svg>
      </div>
      <div>
        <h1>Event Feedback Dashboard</h1>
        <div class="header-subtitle">Participant feedback analysis & insights</div>
      </div>
    </div>
    <div class="header-stats" id="headerStats"></div>
  </div>
</header>

<!-- Main Content -->
<div class="container">

  <!-- AI Summary -->
  <div class="ai-summary" id="aiSummary">
    <div class="ai-summary-header">
      <div class="ai-summary-title">
        <span class="ai-badge">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a4 4 0 014 4c0 1.1-.9 2-2 2h-4a2 2 0 01-2-2 4 4 0 014-4z"/><path d="M8 8v8a4 4 0 004 4 4 4 0 004-4V8"/><path d="M6 12h12"/></svg>
          AI Summary
        </span>
        Automated feedback analysis
      </div>
      <button class="ai-close-btn" onclick="closeSummary()" title="Close AI Summary" aria-label="Close AI Summary">
        <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg>
      </button>
    </div>
    <div class="ai-summary-body">
      <div class="ai-summary-text" id="aiSummaryText"></div>
      <div class="ai-highlights" id="aiHighlights"></div>
    </div>
  </div>

  <!-- Collapsed reopen button -->
  <div class="ai-summary-collapsed" id="aiSummaryCollapsed">
    <button class="ai-reopen-btn" onclick="openSummary()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a4 4 0 014 4c0 1.1-.9 2-2 2h-4a2 2 0 01-2-2 4 4 0 014-4z"/><path d="M8 8v8a4 4 0 004 4 4 4 0 004-4V8"/><path d="M6 12h12"/></svg>
      Show AI Summary
    </button>
  </div>

  <!-- Toolbar -->
  <div class="toolbar">
    <div class="search-wrapper">
      <svg class="search-icon" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
      <input type="text" class="search-input" id="searchInput" placeholder="Search by event, participant, feedback keyword..." oninput="handleSearch()">
      <button class="search-clear" id="searchClear" onclick="clearSearch()" aria-label="Clear search">
        <svg width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path d="M18 6L6 18M6 6l12 12"/></svg>
      </button>
    </div>
    <div class="results-count" id="resultsCount"></div>
  </div>

  <!-- Table -->
  <div class="table-container">
    <div class="table-scroll">
      <table>
        <thead>
          <tr>
            <th data-col="index"><div class="th-content">#</div></th>
            <th data-col="date" onclick="sortBy('date')">
              <div class="th-content">
                Date
                <div class="sort-icon"><div class="sort-arrow up"></div><div class="sort-arrow down"></div></div>
              </div>
            </th>
            <th data-col="event" onclick="sortBy('event')">
              <div class="th-content">
                Event Name
                <div class="sort-icon"><div class="sort-arrow up"></div><div class="sort-arrow down"></div></div>
              </div>
            </th>
            <th data-col="participant" onclick="sortBy('participant')">
              <div class="th-content">
                Participant
                <div class="sort-icon"><div class="sort-arrow up"></div><div class="sort-arrow down"></div></div>
              </div>
            </th>
            <th data-col="rating" onclick="sortBy('rating')">
              <div class="th-content">
                Rating
                <div class="sort-icon"><div class="sort-arrow up"></div><div class="sort-arrow down"></div></div>
              </div>
            </th>
            <th data-col="feedback" onclick="sortBy('feedback')">
              <div class="th-content">
                Feedback
                <div class="sort-icon"><div class="sort-arrow up"></div><div class="sort-arrow down"></div></div>
              </div>
            </th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
    <div class="table-footer" id="tableFooter"></div>
  </div>
</div>

<script>
// =========== DATA GENERATION ===========

const eventTypes = [
  { name: 'Annual Tech Conference 2025', tag: 'conference' },
  { name: 'Product Design Workshop', tag: 'workshop' },
  { name: 'Digital Marketing Webinar', tag: 'webinar' },
  { name: 'Leadership Summit Q4', tag: 'summit' },
  { name: 'Frontend Dev Meetup', tag: 'meetup' },
  { name: 'Data Science Seminar', tag: 'seminar' },
  { name: 'Cloud Architecture Training', tag: 'training' },
  { name: 'UX Research Workshop', tag: 'workshop' },
  { name: 'Agile Transformation Summit', tag: 'summit' },
  { name: 'Cybersecurity Awareness Webinar', tag: 'webinar' },
  { name: 'AI & Machine Learning Conference', tag: 'conference' },
  { name: 'Startup Founders Meetup', tag: 'meetup' },
  { name: 'Project Management Seminar', tag: 'seminar' },
  { name: 'DevOps Best Practices Training', tag: 'training' },
  { name: 'Innovation Strategy Workshop', tag: 'workshop' },
];

const firstNames = ['Alice', 'Benjamin', 'Catherine', 'David', 'Eleanor', 'Frank', 'Grace', 'Henry', 'Isabella', 'James', 'Karen', 'Liam', 'Maria', 'Nathan', 'Olivia', 'Patrick', 'Rachel', 'Samuel', 'Teresa', 'Victor', 'Wendy', 'Xavier', 'Yolanda', 'Zachary', 'Sophia', 'Marcus', 'Diana', 'Robert', 'Nicole', 'Thomas'];
const lastNames = ['Anderson', 'Brooks', 'Chen', 'Davis', 'Evans', 'Fischer', 'Garcia', 'Huang', 'Ito', 'Johnson', 'Kim', 'Lee', 'Martinez', 'Nguyen', 'O\'Brien', 'Patel', 'Quinn', 'Rivera', 'Singh', 'Taylor', 'Ueda', 'Vasquez', 'Williams', 'Xu', 'Yang', 'Zhang', 'Cooper', 'Foster', 'Hayes', 'Morgan'];

const feedbackTemplates = [
  "The event was extremely well-organized and covered topics that are directly relevant to my day-to-day work. The speakers were engaging and brought real-world experience that made the content come alive. I especially appreciated the hands-on breakout sessions where we could apply what we learned immediately.",
  "I found the presentation quality to be outstanding, particularly during the keynote address. The speaker's ability to connect complex technical concepts to practical business outcomes was impressive. However, I would suggest extending the Q&A sessions to allow for more in-depth discussion with the audience.",
  "An excellent learning experience overall. The workshop materials were comprehensive and well-structured, making it easy to follow along even when tackling challenging topics. The networking opportunities during lunch and coffee breaks were equally valuable, and I made several connections that will benefit my team.",
  "While the content was generally informative, I felt that some sessions went into too much detail on introductory material that most attendees already understood. A pre-event survey to gauge participant expertise levels could help tailor the content more effectively and ensure everyone's time is well spent.",
  "This was by far the best professional development event I've attended this year. The diverse range of speakers, each bringing unique perspectives from different industries, created a rich learning environment. The event app was also a nice touch ‚Äî it made scheduling and networking seamless and intuitive.",
  "The event delivered solid content and practical takeaways that I could immediately apply to my current projects. I particularly valued the case study segment where real companies shared their transformation journeys, including the challenges they faced. More real-world examples like these would further strengthen future events.",
  "I appreciated the interactive format of the workshop ‚Äî it was a refreshing change from passive lecture-style events. The facilitator was skilled at encouraging participation and managed group dynamics well. My only suggestion would be to provide digital copies of the workshop materials for reference after the event.",
  "The webinar format worked surprisingly well for this type of content. The production quality was excellent, with clear audio, professional slides, and smooth transitions between speakers. Having the recording available afterward was very helpful for revisiting the key concepts and sharing them with my team members who couldn't attend.",
  "A thought-provoking event that challenged several assumptions I had about our industry's direction. The panel discussion on emerging trends was particularly eye-opening, and I left with a clear set of action items for my team to explore. I'd highly recommend future events in this series to anyone in a leadership role.",
  "Good event with strong technical content, though the venue's Wi-Fi connectivity issues were frustrating and impacted the live demo portions of the presentations. The speakers handled the situation professionally. Content-wise, the deep dive into architecture patterns was particularly relevant and gave me new ideas for our platform.",
  "The training session exceeded my expectations in terms of depth and practical applicability. The instructor was clearly an expert and provided nuanced answers to even the most complex questions. The hands-on lab component was the highlight, and having access to a sandbox environment made experimentation risk-free and productive.",
  "While the networking aspects of the meetup were fantastic, I found the formal presentations somewhat repetitive if you've been following recent industry publications. That said, the informal discussions afterwards were goldmines of practical insight ‚Äî perhaps more structured roundtable discussions could capture this energy even better.",
  "An incredibly polished and professional event from start to finish. Registration was smooth, sessions started on time, and the venue was well-suited to the size of the audience. The organizers clearly put significant effort into every detail, from the curated attendee list to the high-quality catering and comfortable seating.",
  "The seminar provided a comprehensive overview of the subject matter that was accessible to both newcomers and experienced practitioners alike. I especially liked how the speakers connected theoretical frameworks to recent real-world developments, making the content immediately relevant to our strategic planning process.",
  "I was impressed by the quality of the speakers and the relevance of the topics covered at this conference. The interactive workshops were the standout feature ‚Äî they provided safe spaces to experiment with new tools and techniques. The only area for improvement would be better time management between sessions to avoid hallway rushing.",
  "Great content delivered in an engaging and accessible manner. The event struck a perfect balance between high-level strategic discussions and tactical, hands-on learning. I particularly appreciated the diversity of perspectives represented, including speakers from startups, enterprises, academia, and government organizations.",
  "The webinar was information-dense in the best possible way ‚Äî every minute felt valuable and well-utilized. The Q&A at the end was thoughtfully moderated, and the speakers provided candid, specific answers rather than generic platitudes. I've already shared the recording with my entire department as a must-watch resource.",
  "The summit brought together an impressive lineup of speakers who provided genuinely actionable insights rather than abstract theorizing. The small group workshop format allowed for meaningful interaction with the facilitators. I left feeling energized and equipped with new strategies to implement in the coming quarter.",
  "A valuable event that covered emerging trends comprehensively, though I think the agenda tried to cover too many topics in the allotted time. Some sessions felt rushed, and there wasn't enough room for meaningful discussion. Focusing on fewer topics with deeper exploration would enhance the overall learning experience significantly.",
  "Excellent training program with a well-structured curriculum that built knowledge progressively throughout the day. The instructor's real-world anecdotes helped contextualize abstract concepts beautifully. The provided reference materials and cheat sheets are resources I know I'll return to repeatedly in my daily work.",
  "The meetup had an outstanding atmosphere that fostered genuine connections between attendees. The lightning talk format was particularly effective at exposing the group to a wide range of ideas in a short time. Several of the presentations sparked ideas that I've already begun discussing with my team for potential implementation.",
  "I was particularly impressed by the event's emphasis on inclusivity and accessibility. All sessions had live captioning, the venue was fully accessible, and the organizers made genuine efforts to create a welcoming environment for all attendees. The content quality matched this attention to detail ‚Äî thoughtful, thorough, and impactful.",
  "The conference sessions were well-curated and the keynote on digital transformation was one of the most insightful talks I've attended in recent memory. The speaker's framework for evaluating technology investments resonated deeply with challenges our organization is currently facing. I've already recommended it to my C-suite colleagues.",
  "A solid workshop that delivered practical skills I can immediately put to use. The hands-on exercises were challenging but well-scaffolded, and the instructor was patient with questions while keeping the group moving forward at a good pace. I would have appreciated more advanced material as an optional track for experienced participants.",
  "The webinar series has been consistently high-quality, and this installment was no exception. The expert panel format brought diverse perspectives together effectively, and the moderator did an excellent job drawing out specific, actionable recommendations from each panelist. The companion resource guide was also a wonderful bonus.",
  "While the event's production value and speaker quality were top-notch, I felt the ticket price was steep relative to the amount of content delivered. That said, the networking alone may justify the cost ‚Äî I connected with three potential collaborators and two future mentors during the structured networking sessions.",
  "The seminar struck the perfect tone for a mixed-experience audience. Beginners weren't overwhelmed, yet advanced practitioners still found new insights and nuanced takes on familiar topics. The speaker's use of live demonstrations rather than static slides kept the energy high and made complex concepts tangible and approachable.",
  "Attending this summit was one of the best investments of my time this quarter. Every session I attended offered immediately actionable takeaways, and the event materials ‚Äî including slide decks, worksheets, and recommended reading lists ‚Äî extend the value well beyond the event itself. Already signed up for next year.",
  "The training was thorough and well-paced, covering both foundational concepts and advanced techniques seamlessly. What set this apart from similar programs was the instructor's ability to adapt on the fly to participant questions, weaving them into the planned curriculum rather than deferring them to the end. Truly expert facilitation.",
  "A well-executed conference that managed to feel intimate despite the large attendance numbers. The multi-track format meant there was always a session relevant to my interests, and the event app made it easy to plan and adjust my schedule on the go. The closing keynote on the future of work was a perfect finish."
];

const avatarColors = ['#4f6ef7','#7c5ef7','#a855f7','#ec4899','#ef4444','#f59e0b','#22c55e','#06b6d4','#6366f1','#8b5cf6','#d946ef','#f97316','#14b8a6','#3b82f6','#e11d48'];

function seededRandom(seed) {
  let s = seed;
  return function() {
    s = (s * 16807 + 0) % 2147483647;
    return (s - 1) / 2147483646;
  };
}

const rand = seededRandom(42);

function randomDate() {
  const start = new Date(2024, 8, 1);
  const end = new Date(2025, 1, 1);
  const d = new Date(start.getTime() + rand() * (end.getTime() - start.getTime()));
  return d;
}

function formatDate(d) {
  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  return `${months[d.getMonth()]} ${d.getDate()}, ${d.getFullYear()}`;
}

function generateData() {
  const data = [];
  const usedNames = new Set();
  for (let i = 0; i < 30; i++) {
    let firstName, lastName, fullName;
    do {
      firstName = firstNames[Math.floor(rand() * firstNames.length)];
      lastName = lastNames[Math.floor(rand() * lastNames.length)];
      fullName = firstName + ' ' + lastName;
    } while (usedNames.has(fullName));
    usedNames.add(fullName);

    const event = eventTypes[Math.floor(rand() * eventTypes.length)];
    const rating = Math.floor(rand() * 5) + 1;
    // Weight ratings toward 3-5 for realism
    const adjustedRating = Math.min(5, Math.max(1, rating + (rand() > 0.4 ? 1 : 0)));
    const date = randomDate();

    data.push({
      id: i + 1,
      date: date,
      dateStr: formatDate(date),
      event: event.name,
      eventTag: event.tag,
      participant: fullName,
      initials: firstName[0] + lastName[0],
      avatarColor: avatarColors[i % avatarColors.length],
      rating: adjustedRating,
      feedback: feedbackTemplates[i % feedbackTemplates.length]
    });
  }
  return data;
}

const allData = generateData();

// =========== STATE ===========
let currentSort = { col: 'date', dir: 'desc' };
let searchTerm = '';
let filteredData = [...allData];

// =========== SUMMARY ===========
function computeStats(data) {
  const avgRating = data.reduce((s, d) => s + d.rating, 0) / data.length;
  const dist = [0,0,0,0,0];
  data.forEach(d => dist[d.rating - 1]++);
  const topEvent = {};
  data.forEach(d => { topEvent[d.event] = (topEvent[d.event]||0) + 1; });
  const sortedEvents = Object.entries(topEvent).sort((a,b) => b[1]-a[1]);
  const high = data.filter(d => d.rating >= 4).length;
  return { avgRating, dist, sortedEvents, highCount: high, totalCount: data.length };
}

function renderSummary() {
  const stats = computeStats(allData);
  const pct = Math.round(stats.highCount / stats.totalCount * 100);

  document.getElementById('aiSummaryText').innerHTML = `
    <p>Based on analysis of <strong>${stats.totalCount} feedback submissions</strong> across ${stats.sortedEvents.length} events, the overall sentiment is <strong>${stats.avgRating >= 4 ? 'very positive' : stats.avgRating >= 3 ? 'positive' : 'mixed'}</strong>.
    The average rating is <strong>${stats.avgRating.toFixed(1)} out of 5</strong>, with <strong>${pct}% of respondents</strong> giving 4 or 5 stars.</p>
    <p style="margin-top:10px">The most reviewed event is <strong>${stats.sortedEvents[0][0]}</strong> with ${stats.sortedEvents[0][1]} submissions. Key themes include appreciation for hands-on workshops, quality of speakers, and networking opportunities. Areas for improvement center around session timing and content depth calibration.</p>
  `;

  document.getElementById('aiHighlights').innerHTML = `
    <div class="ai-highlight-card">
      <div class="ai-highlight-value good">${stats.avgRating.toFixed(1)}</div>
      <div class="ai-highlight-label">Avg Rating</div>
    </div>
    <div class="ai-highlight-card">
      <div class="ai-highlight-value info">${pct}%</div>
      <div class="ai-highlight-label">Positive (4-5‚òÖ)</div>
    </div>
    <div class="ai-highlight-card">
      <div class="ai-highlight-value warn">${stats.sortedEvents.length}</div>
      <div class="ai-highlight-label">Events Covered</div>
    </div>
    <div class="ai-highlight-card">
      <div class="ai-highlight-value info">${stats.totalCount}</div>
      <div class="ai-highlight-label">Responses</div>
    </div>
  `;

  // Header stats
  document.getElementById('headerStats').innerHTML = `
    <div class="header-stat">
      <div class="header-stat-value">${stats.totalCount}</div>
      <div class="header-stat-label">Responses</div>
    </div>
    <div class="header-stat">
      <div class="header-stat-value">${stats.avgRating.toFixed(1)}</div>
      <div class="header-stat-label">Avg Rating</div>
    </div>
    <div class="header-stat">
      <div class="header-stat-value">${stats.sortedEvents.length}</div>
      <div class="header-stat-label">Events</div>
    </div>
  `;
}

function closeSummary() {
  document.getElementById('aiSummary').style.display = 'none';
  document.getElementById('aiSummaryCollapsed').classList.add('visible');
}

function openSummary() {
  document.getElementById('aiSummaryCollapsed').classList.remove('visible');
  const el = document.getElementById('aiSummary');
  el.style.display = '';
  el.style.animation = 'none';
  void el.offsetHeight;
  el.style.animation = 'slideDown 0.4s ease';
}

// =========== SEARCH ===========
function handleSearch() {
  searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
  const clearBtn = document.getElementById('searchClear');
  clearBtn.classList.toggle('visible', searchTerm.length > 0);
  applyFilters();
}

function clearSearch() {
  document.getElementById('searchInput').value = '';
  searchTerm = '';
  document.getElementById('searchClear').classList.remove('visible');
  applyFilters();
  document.getElementById('searchInput').focus();
}

// =========== SORT ===========
function sortBy(col) {
  if (currentSort.col === col) {
    currentSort.dir = currentSort.dir === 'asc' ? 'desc' : 'asc';
  } else {
    currentSort.col = col;
    currentSort.dir = col === 'rating' ? 'desc' : 'asc';
  }
  applyFilters();
  updateSortHeaders();
}

function updateSortHeaders() {
  document.querySelectorAll('thead th').forEach(th => {
    const col = th.dataset.col;
    th.classList.toggle('sorted', col === currentSort.col);
    const arrows = th.querySelectorAll('.sort-arrow');
    if (col === currentSort.col && arrows.length === 2) {
      if (currentSort.dir === 'asc') {
        arrows[0].classList.remove('inactive');
        arrows[1].classList.add('inactive');
      } else {
        arrows[0].classList.add('inactive');
        arrows[1].classList.remove('inactive');
      }
    } else {
      arrows.forEach(a => a.classList.remove('inactive'));
    }
  });
}

// =========== FILTER & RENDER ===========
function applyFilters() {
  filteredData = allData.filter(row => {
    if (!searchTerm) return true;
    return row.dateStr.toLowerCase().includes(searchTerm)
      || row.event.toLowerCase().includes(searchTerm)
      || row.participant.toLowerCase().includes(searchTerm)
      || row.feedback.toLowerCase().includes(searchTerm)
      || row.rating.toString().includes(searchTerm)
      || row.eventTag.toLowerCase().includes(searchTerm);
  });

  // Sort
  const col = currentSort.col;
  const dir = currentSort.dir;
  filteredData.sort((a, b) => {
    let valA, valB;
    switch(col) {
      case 'date': valA = a.date.getTime(); valB = b.date.getTime(); break;
      case 'event': valA = a.event.toLowerCase(); valB = b.event.toLowerCase(); break;
      case 'participant': valA = a.participant.toLowerCase(); valB = b.participant.toLowerCase(); break;
      case 'rating': valA = a.rating; valB = b.rating; break;
      case 'feedback': valA = a.feedback.toLowerCase(); valB = b.feedback.toLowerCase(); break;
      default: valA = a.date.getTime(); valB = b.date.getTime();
    }
    if (valA < valB) return dir === 'asc' ? -1 : 1;
    if (valA > valB) return dir === 'asc' ? 1 : -1;
    return 0;
  });

  renderTable();
  updateResultsCount();
}

function highlightText(text, term) {
  if (!term) return text;
  const regex = new RegExp(`(${term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
  return text.replace(regex, '<mark>$1</mark>');
}

function renderStars(rating) {
  let html = '<div class="stars">';
  for (let i = 1; i <= 5; i++) {
    html += `<span class="star ${i <= rating ? 'filled' : 'empty'}">‚òÖ</span>`;
  }
  html += `<span class="rating-num">${rating}.0</span></div>`;
  return html;
}

function renderTable() {
  const tbody = document.getElementById('tableBody');

  if (filteredData.length === 0) {
    tbody.innerHTML = `
      <tr>
        <td colspan="6">
          <div class="empty-state">
            <div class="empty-state-icon">üîç</div>
            <h3>No matching feedback found</h3>
            <p>Try adjusting your search terms or clearing the filter.</p>
          </div>
        </td>
      </tr>
    `;
    document.getElementById('tableFooter').innerHTML = `<span>No results</span><span></span>`;
    return;
  }

  let html = '';
  filteredData.forEach((row, idx) => {
    const eventDisplay = highlightText(row.event, searchTerm);
    const participantDisplay = highlightText(row.participant, searchTerm);
    const feedbackDisplay = highlightText(row.feedback, searchTerm);
    const dateDisplay = highlightText(row.dateStr, searchTerm);

    html += `<tr>
      <td><span class="row-num">${idx + 1}</span></td>
      <td><span class="date-cell">${dateDisplay}</span></td>
      <td>
        <div class="event-name">${eventDisplay}</div>
        <span class="event-tag tag-${row.eventTag}">${row.eventTag}</span>
      </td>
      <td>
        <div class="participant-cell">
          <div class="avatar" style="background:${row.avatarColor}">${row.initials}</div>
          <span class="participant-name">${participantDisplay}</span>
        </div>
      </td>
      <td>${renderStars(row.rating)}</td>
      <td><div class="feedback-text">${feedbackDisplay}</div></td>
    </tr>`;
  });

  tbody.innerHTML = html;

  // Footer
  const stats = computeStats(filteredData);
  const maxDist = Math.max(...stats.dist);
  const barColors = ['#ef4444','#f97316','#f59e0b','#84cc16','#22c55e'];
  let distHtml = '<div class="rating-dist">';
  stats.dist.forEach((c, i) => {
    const w = maxDist > 0 ? Math.max(4, (c / maxDist) * 50) : 4;
    distHtml += `<span style="font-size:11px;color:var(--text-muted);width:16px;text-align:right">${i+1}‚òÖ</span><div class="rating-bar-mini" style="width:${w}px;background:${barColors[i]}"></div><span style="font-size:11px;color:var(--text-secondary);width:16px">${c}</span>`;
  });
  distHtml += '</div>';

  document.getElementById('tableFooter').innerHTML = `
    <span>Showing <strong>${filteredData.length}</strong> of <strong>${allData.length}</strong> entries ¬∑ Avg rating: <strong>${stats.avgRating.toFixed(1)}</strong></span>
    <span>${distHtml}</span>
  `;
}

function updateResultsCount() {
  const el = document.getElementById('resultsCount');
  if (searchTerm) {
    el.innerHTML = `<span>${filteredData.length}</span> of ${allData.length} entries`;
  } else {
    el.innerHTML = `<span>${allData.length}</span> entries`;
  }
}

// =========== INIT ===========
function init() {
  renderSummary();
  updateSortHeaders();
  applyFilters();
}

init();
</script>
</body>
</html>
