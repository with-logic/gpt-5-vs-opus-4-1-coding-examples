<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Employee Skills Matrix</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg-primary: #f8f9fc;
  --bg-card: #ffffff;
  --bg-sidebar: #1e293b;
  --bg-sidebar-hover: #334155;
  --text-primary: #1e293b;
  --text-secondary: #64748b;
  --text-muted: #94a3b8;
  --text-on-dark: #f1f5f9;
  --border: #e2e8f0;
  --border-light: #f1f5f9;
  --accent: #6366f1;
  --accent-light: #eef2ff;
  --accent-dark: #4f46e5;
  --success: #10b981;
  --success-light: #ecfdf5;
  --warning: #f59e0b;
  --warning-light: #fffbeb;
  --danger: #ef4444;
  --danger-light: #fef2f2;
  --info: #3b82f6;
  --info-light: #eff6ff;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
  --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -1px rgba(0,0,0,0.04);
  --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.08), 0 4px 6px -2px rgba(0,0,0,0.04);
  --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.08), 0 10px 10px -5px rgba(0,0,0,0.03);
  --radius: 12px;
  --radius-sm: 8px;
  --radius-xs: 6px;
  --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
}

/* Layout */
.app-layout {
  display: flex;
  min-height: 100vh;
}

/* Sidebar */
.sidebar {
  width: 260px;
  background: var(--bg-sidebar);
  color: var(--text-on-dark);
  padding: 0;
  display: flex;
  flex-direction: column;
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  z-index: 100;
  transition: transform var(--transition);
}

.sidebar-header {
  padding: 24px 20px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}

.sidebar-logo {
  display: flex;
  align-items: center;
  gap: 12px;
}

.sidebar-logo-icon {
  width: 40px;
  height: 40px;
  background: var(--accent);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.sidebar-logo-text {
  font-size: 16px;
  font-weight: 700;
  letter-spacing: -0.3px;
}

.sidebar-logo-sub {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 2px;
}

.sidebar-nav {
  padding: 16px 12px;
  flex: 1;
}

.nav-section-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  color: var(--text-muted);
  padding: 8px 12px 6px;
  font-weight: 600;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition);
  font-size: 13.5px;
  font-weight: 500;
  color: #cbd5e1;
  margin-bottom: 2px;
}

.nav-item:hover {
  background: var(--bg-sidebar-hover);
  color: #fff;
}

.nav-item.active {
  background: var(--accent);
  color: #fff;
}

.nav-item svg {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

.sidebar-footer {
  padding: 16px 20px;
  border-top: 1px solid rgba(255,255,255,0.08);
}

.user-info {
  display: flex;
  align-items: center;
  gap: 10px;
}

.user-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent), #a855f7);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  color: white;
}

.user-name {
  font-size: 13px;
  font-weight: 600;
}

.user-role {
  font-size: 11px;
  color: var(--text-muted);
}

/* Main content */
.main-content {
  flex: 1;
  margin-left: 260px;
  min-height: 100vh;
}

/* Top bar */
.topbar {
  background: var(--bg-card);
  border-bottom: 1px solid var(--border);
  padding: 16px 32px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: sticky;
  top: 0;
  z-index: 50;
}

.topbar-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.breadcrumb {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text-secondary);
}

.breadcrumb-sep {
  color: var(--text-muted);
}

.breadcrumb-current {
  color: var(--text-primary);
  font-weight: 600;
}

.topbar-right {
  display: flex;
  align-items: center;
  gap: 12px;
}

.search-box {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 8px 14px;
  width: 260px;
  transition: all var(--transition);
}

.search-box:focus-within {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(99,102,241,0.1);
}

.search-box svg {
  width: 16px;
  height: 16px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.search-box input {
  border: none;
  background: transparent;
  font-size: 13px;
  color: var(--text-primary);
  outline: none;
  width: 100%;
  font-family: inherit;
}

.search-box input::placeholder {
  color: var(--text-muted);
}

/* Page content */
.page-content {
  padding: 28px 32px;
}

/* Stats */
.stats-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  margin-bottom: 28px;
}

.stat-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px 24px;
  display: flex;
  align-items: flex-start;
  gap: 16px;
  transition: all var(--transition);
}

.stat-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.stat-icon {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.stat-icon svg {
  width: 22px;
  height: 22px;
}

.stat-icon.purple { background: var(--accent-light); color: var(--accent); }
.stat-icon.green { background: var(--success-light); color: var(--success); }
.stat-icon.blue { background: var(--info-light); color: var(--info); }
.stat-icon.amber { background: var(--warning-light); color: var(--warning); }

.stat-value {
  font-size: 28px;
  font-weight: 800;
  letter-spacing: -1px;
  line-height: 1;
  margin-bottom: 4px;
}

.stat-label {
  font-size: 12.5px;
  color: var(--text-secondary);
  font-weight: 500;
}

.stat-change {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-size: 11px;
  font-weight: 600;
  margin-top: 6px;
  padding: 2px 8px;
  border-radius: 20px;
}

.stat-change.up {
  background: var(--success-light);
  color: var(--success);
}

.stat-change.down {
  background: var(--danger-light);
  color: var(--danger);
}

/* Toolbar */
.toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
  flex-wrap: wrap;
  gap: 12px;
}

.toolbar-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.toolbar-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 6px;
}

.filter-btn {
  padding: 7px 14px;
  border-radius: var(--radius-xs);
  border: 1px solid var(--border);
  background: var(--bg-card);
  font-size: 12.5px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition);
  font-family: inherit;
  display: flex;
  align-items: center;
  gap: 6px;
}

.filter-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

.filter-btn.active {
  background: var(--accent);
  border-color: var(--accent);
  color: white;
}

.filter-btn svg {
  width: 14px;
  height: 14px;
}

.btn {
  padding: 8px 16px;
  border-radius: var(--radius-sm);
  border: none;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition);
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.btn svg { width: 16px; height: 16px; }

.btn-primary {
  background: var(--accent);
  color: white;
}

.btn-primary:hover {
  background: var(--accent-dark);
  box-shadow: var(--shadow-md);
}

.btn-secondary {
  background: var(--bg-card);
  color: var(--text-primary);
  border: 1px solid var(--border);
}

.btn-secondary:hover {
  border-color: var(--accent);
  color: var(--accent);
}

.btn-ghost {
  background: transparent;
  color: var(--text-secondary);
}

.btn-ghost:hover {
  background: var(--bg-primary);
  color: var(--text-primary);
}

.btn-danger {
  background: var(--danger);
  color: white;
}

.btn-danger:hover {
  background: #dc2626;
}

/* Matrix container */
.matrix-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
}

.matrix-wrapper {
  overflow-x: auto;
  scrollbar-width: thin;
  scrollbar-color: #cbd5e1 transparent;
}

.matrix-wrapper::-webkit-scrollbar {
  height: 6px;
}

.matrix-wrapper::-webkit-scrollbar-track {
  background: transparent;
}

.matrix-wrapper::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}

/* Matrix table */
.matrix-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  min-width: 900px;
}

.matrix-table th,
.matrix-table td {
  padding: 0;
  border-bottom: 1px solid var(--border-light);
  text-align: center;
  vertical-align: middle;
}

.matrix-table thead th {
  background: #f8fafc;
  position: sticky;
  top: 0;
  z-index: 10;
  border-bottom: 1px solid var(--border);
}

.matrix-table thead th:first-child {
  position: sticky;
  left: 0;
  z-index: 20;
  text-align: left;
}

.matrix-table tbody td:first-child {
  position: sticky;
  left: 0;
  background: var(--bg-card);
  z-index: 5;
  text-align: left;
}

.matrix-table tbody tr:hover td {
  background: #fafaff;
}

.matrix-table tbody tr:hover td:first-child {
  background: #fafaff;
}

/* Skill header */
.skill-header {
  padding: 14px 12px;
  min-width: 110px;
}

.skill-header-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.skill-category-badge {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  padding: 2px 6px;
  border-radius: 4px;
}

.cat-technical { background: #ede9fe; color: #7c3aed; }
.cat-soft { background: #fce7f3; color: #db2777; }
.cat-tools { background: #dbeafe; color: #2563eb; }
.cat-domain { background: #d1fae5; color: #059669; }
.cat-leadership { background: #fed7aa; color: #c2410c; }

.skill-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
  line-height: 1.3;
}

.skill-actions {
  display: flex;
  align-items: center;
  gap: 2px;
  opacity: 0;
  transition: opacity var(--transition);
}

.skill-header:hover .skill-actions {
  opacity: 1;
}

.skill-action-btn {
  width: 20px;
  height: 20px;
  border: none;
  background: transparent;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all var(--transition);
}

.skill-action-btn:hover {
  background: var(--border-light);
  color: var(--text-primary);
}

/* Employee cell */
.employee-cell {
  padding: 12px 16px;
  min-width: 200px;
}

.employee-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.emp-avatar {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 700;
  color: white;
  flex-shrink: 0;
  position: relative;
}

.emp-avatar-img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
}

.emp-details {
  min-width: 0;
}

.emp-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.emp-title {
  font-size: 11.5px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.emp-dept {
  font-size: 10px;
  font-weight: 600;
  color: var(--accent);
  background: var(--accent-light);
  padding: 1px 6px;
  border-radius: 4px;
  display: inline-block;
  margin-top: 2px;
}

/* Proficiency cell */
.proficiency-cell {
  padding: 8px 6px;
}

.proficiency-badge {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  padding: 6px 8px;
  border-radius: var(--radius-xs);
  cursor: pointer;
  transition: all var(--transition);
  min-width: 72px;
  position: relative;
}

.proficiency-badge:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-md);
}

.proficiency-dots {
  display: flex;
  gap: 3px;
}

.proficiency-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  transition: all var(--transition);
}

.proficiency-label {
  font-size: 9.5px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Proficiency levels */
.prof-none .proficiency-badge {
  background: #f9fafb;
}
.prof-none .proficiency-dot { background: #e5e7eb; }
.prof-none .proficiency-dot.filled { background: #d1d5db; }
.prof-none .proficiency-label { color: #9ca3af; }

.prof-beginner .proficiency-badge {
  background: #fef3c7;
}
.prof-beginner .proficiency-dot { background: #fde68a; }
.prof-beginner .proficiency-dot.filled { background: #f59e0b; }
.prof-beginner .proficiency-label { color: #b45309; }

.prof-intermediate .proficiency-badge {
  background: #dbeafe;
}
.prof-intermediate .proficiency-dot { background: #bfdbfe; }
.prof-intermediate .proficiency-dot.filled { background: #3b82f6; }
.prof-intermediate .proficiency-label { color: #1d4ed8; }

.prof-advanced .proficiency-badge {
  background: #d1fae5;
}
.prof-advanced .proficiency-dot { background: #a7f3d0; }
.prof-advanced .proficiency-dot.filled { background: #10b981; }
.prof-advanced .proficiency-label { color: #047857; }

.prof-expert .proficiency-badge {
  background: #ede9fe;
}
.prof-expert .proficiency-dot { background: #c4b5fd; }
.prof-expert .proficiency-dot.filled { background: #7c3aed; }
.prof-expert .proficiency-label { color: #5b21b6; }

/* Proficiency picker dropdown */
.prof-picker {
  position: absolute;
  top: calc(100% + 4px);
  left: 50%;
  transform: translateX(-50%);
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-xl);
  z-index: 200;
  padding: 6px;
  min-width: 140px;
  animation: fadeInUp 0.15s ease;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateX(-50%) translateY(-4px); }
  to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

.prof-picker-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: var(--radius-xs);
  cursor: pointer;
  transition: background var(--transition);
  font-size: 12px;
  font-weight: 500;
}

.prof-picker-option:hover {
  background: var(--bg-primary);
}

.prof-picker-option .dots {
  display: flex;
  gap: 2px;
}

.prof-picker-option .dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
}

/* Legend */
.legend {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 14px 20px;
  border-top: 1px solid var(--border-light);
  background: #fafbfc;
}

.legend-title {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.legend-items {
  display: flex;
  gap: 14px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11.5px;
  color: var(--text-secondary);
}

.legend-swatch {
  width: 14px;
  height: 14px;
  border-radius: 4px;
}

/* Modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.5);
  backdrop-filter: blur(4px);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
}

.modal-overlay.active {
  opacity: 1;
  pointer-events: auto;
}

.modal {
  background: var(--bg-card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-xl);
  width: 100%;
  max-width: 480px;
  max-height: 90vh;
  overflow-y: auto;
  transform: scale(0.95) translateY(10px);
  transition: transform 0.2s ease;
}

.modal-overlay.active .modal {
  transform: scale(1) translateY(0);
}

.modal-header {
  padding: 20px 24px;
  border-bottom: 1px solid var(--border-light);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.modal-title {
  font-size: 16px;
  font-weight: 700;
}

.modal-close {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  border-radius: var(--radius-xs);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all var(--transition);
}

.modal-close:hover {
  background: var(--bg-primary);
  color: var(--text-primary);
}

.modal-body {
  padding: 20px 24px;
}

.modal-footer {
  padding: 16px 24px;
  border-top: 1px solid var(--border-light);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
}

/* Form styles */
.form-group {
  margin-bottom: 16px;
}

.form-label {
  display: block;
  font-size: 12.5px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 6px;
}

.form-input,
.form-select {
  width: 100%;
  padding: 9px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius-xs);
  font-size: 13px;
  font-family: inherit;
  color: var(--text-primary);
  background: var(--bg-card);
  transition: all var(--transition);
}

.form-input:focus,
.form-select:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(99,102,241,0.1);
}

.form-input::placeholder {
  color: var(--text-muted);
}

/* Toast */
.toast-container {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 2000;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.toast {
  background: var(--bg-sidebar);
  color: white;
  padding: 12px 20px;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: center;
  gap: 10px;
  animation: toastIn 0.3s ease, toastOut 0.3s ease 2.7s forwards;
  max-width: 360px;
}

.toast svg {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

.toast.success svg { color: var(--success); }
.toast.error svg { color: var(--danger); }
.toast.info svg { color: var(--info); }

@keyframes toastIn {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes toastOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(16px); }
}

/* Team coverage bars */
.coverage-section {
  margin-top: 28px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.coverage-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px 24px;
  box-shadow: var(--shadow-sm);
}

.coverage-card-title {
  font-size: 14px;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.coverage-card-title svg {
  width: 18px;
  height: 18px;
  color: var(--accent);
}

.coverage-bar-item {
  margin-bottom: 12px;
}

.coverage-bar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 5px;
}

.coverage-bar-name {
  font-size: 12.5px;
  font-weight: 500;
  color: var(--text-primary);
}

.coverage-bar-value {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-secondary);
}

.coverage-bar-track {
  height: 8px;
  background: var(--border-light);
  border-radius: 4px;
  overflow: hidden;
}

.coverage-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.6s ease;
}

/* Employee detail panel */
.emp-detail-skills {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 8px;
}

.emp-skill-tag {
  font-size: 11px;
  font-weight: 600;
  padding: 3px 8px;
  border-radius: 4px;
}

/* Responsive adjustments */
@media (max-width: 1200px) {
  .stats-row { grid-template-columns: repeat(2, 1fr); }
  .coverage-section { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
  .sidebar { transform: translateX(-100%); }
  .sidebar.open { transform: translateX(0); }
  .main-content { margin-left: 0; }
  .stats-row { grid-template-columns: 1fr; }
  .topbar { padding: 12px 16px; }
  .page-content { padding: 16px; }
  .search-box { width: 180px; }
}

/* Department filter select */
.dept-select {
  padding: 7px 12px;
  border-radius: var(--radius-xs);
  border: 1px solid var(--border);
  background: var(--bg-card);
  font-size: 12.5px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  font-family: inherit;
}

/* Empty state in proficiency cell */
.proficiency-empty {
  width: 36px;
  height: 36px;
  border: 2px dashed var(--border);
  border-radius: var(--radius-xs);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition);
  color: var(--text-muted);
}

.proficiency-empty:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: var(--accent-light);
}

/* Skill gap indicator */
.gap-indicator {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 4px;
  margin-top: 4px;
}

.gap-critical { background: #fef2f2; color: #dc2626; }
.gap-warning { background: #fffbeb; color: #d97706; }
.gap-good { background: #ecfdf5; color: #059669; }

/* Print styles */
@media print {
  .sidebar, .topbar, .toolbar { display: none !important; }
  .main-content { margin-left: 0 !important; }
  .proficiency-badge { box-shadow: none !important; }
}
</style>
</head>
<body>

<div class="app-layout">
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo">
        <div class="sidebar-logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:22px;height:22px;color:white"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
        </div>
        <div>
          <div class="sidebar-logo-text">SkillMatrix</div>
          <div class="sidebar-logo-sub">HR Talent Platform</div>
        </div>
      </div>
    </div>
    <nav class="sidebar-nav">
      <div class="nav-section-label">Main</div>
      <div class="nav-item active" data-view="matrix">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
        Skills Matrix
      </div>
      <div class="nav-item" data-view="analytics">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
        Analytics
      </div>
      <div class="nav-item" data-view="gaps">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        Skill Gaps
      </div>
      <div class="nav-section-label" style="margin-top:12px">Management</div>
      <div class="nav-item" onclick="openModal('employee')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="20" y1="8" x2="20" y2="14"/><line x1="23" y1="11" x2="17" y2="11"/></svg>
        Add Employee
      </div>
      <div class="nav-item" onclick="openModal('skill')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
        Add Skill
      </div>
    </nav>
    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar">HR</div>
        <div>
          <div class="user-name">Sarah Mitchell</div>
          <div class="user-role">HR Director</div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main content -->
  <main class="main-content">
    <div class="topbar">
      <div class="topbar-left">
        <div class="breadcrumb">
          <span>HR</span>
          <span class="breadcrumb-sep">/</span>
          <span class="breadcrumb-current" id="breadcrumbTitle">Skills Matrix</span>
        </div>
      </div>
      <div class="topbar-right">
        <div class="search-box">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          <input type="text" placeholder="Search employees or skills..." id="searchInput" oninput="handleSearch(this.value)">
        </div>
        <button class="btn btn-secondary" onclick="exportMatrix()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Export
        </button>
      </div>
    </div>

    <div class="page-content" id="pageContent">
      <!-- Dynamic content rendered here -->
    </div>
  </main>
</div>

<!-- Add Employee Modal -->
<div class="modal-overlay" id="employeeModal">
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title" id="employeeModalTitle">Add Employee</div>
      <button class="modal-close" onclick="closeModal('employee')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label class="form-label">Full Name</label>
        <input type="text" class="form-input" id="empName" placeholder="e.g. John Smith">
      </div>
      <div class="form-group">
        <label class="form-label">Job Title</label>
        <input type="text" class="form-input" id="empTitle" placeholder="e.g. Senior Developer">
      </div>
      <div class="form-group">
        <label class="form-label">Department</label>
        <select class="form-select" id="empDept">
          <option value="Engineering">Engineering</option>
          <option value="Design">Design</option>
          <option value="Product">Product</option>
          <option value="Marketing">Marketing</option>
          <option value="Data">Data Science</option>
          <option value="DevOps">DevOps</option>
        </select>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('employee')">Cancel</button>
      <button class="btn btn-primary" onclick="saveEmployee()">Add Employee</button>
    </div>
  </div>
</div>

<!-- Add Skill Modal -->
<div class="modal-overlay" id="skillModal">
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title">Add Skill</div>
      <button class="modal-close" onclick="closeModal('skill')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label class="form-label">Skill Name</label>
        <input type="text" class="form-input" id="skillName" placeholder="e.g. React, Python, Leadership">
      </div>
      <div class="form-group">
        <label class="form-label">Category</label>
        <select class="form-select" id="skillCategory">
          <option value="technical">Technical</option>
          <option value="soft">Soft Skills</option>
          <option value="tools">Tools</option>
          <option value="domain">Domain Knowledge</option>
          <option value="leadership">Leadership</option>
        </select>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal('skill')">Cancel</button>
      <button class="btn btn-primary" onclick="saveSkill()">Add Skill</button>
    </div>
  </div>
</div>

<!-- Toast container -->
<div class="toast-container" id="toastContainer"></div>

<script>
// ==================== DATA ====================
const PROFICIENCY_LEVELS = [
  { key: 'none', label: 'None', level: 0, color: '#d1d5db' },
  { key: 'beginner', label: 'Beginner', level: 1, color: '#f59e0b' },
  { key: 'intermediate', label: 'Intermediate', level: 2, color: '#3b82f6' },
  { key: 'advanced', label: 'Advanced', level: 3, color: '#10b981' },
  { key: 'expert', label: 'Expert', level: 4, color: '#7c3aed' }
];

const AVATAR_COLORS = [
  'linear-gradient(135deg, #6366f1, #8b5cf6)',
  'linear-gradient(135deg, #ec4899, #f43f5e)',
  'linear-gradient(135deg, #14b8a6, #06b6d4)',
  'linear-gradient(135deg, #f97316, #ef4444)',
  'linear-gradient(135deg, #8b5cf6, #d946ef)',
  'linear-gradient(135deg, #0ea5e9, #6366f1)',
  'linear-gradient(135deg, #10b981, #14b8a6)',
  'linear-gradient(135deg, #f59e0b, #f97316)',
  'linear-gradient(135deg, #84cc16, #22c55e)',
  'linear-gradient(135deg, #06b6d4, #3b82f6)',
];

let state = {
  employees: [
    { id: 1, name: 'Alice Chen', title: 'Senior Frontend Dev', dept: 'Engineering', color: 0 },
    { id: 2, name: 'Marcus Johnson', title: 'Backend Engineer', dept: 'Engineering', color: 1 },
    { id: 3, name: 'Priya Patel', title: 'UX Designer', dept: 'Design', color: 2 },
    { id: 4, name: 'David Kim', title: 'Product Manager', dept: 'Product', color: 3 },
    { id: 5, name: 'Elena Rodriguez', title: 'Data Scientist', dept: 'Data', color: 4 },
    { id: 6, name: 'James Wilson', title: 'DevOps Engineer', dept: 'DevOps', color: 5 },
    { id: 7, name: 'Sofia Nguyen', title: 'Full Stack Dev', dept: 'Engineering', color: 6 },
    { id: 8, name: 'Omar Hassan', title: 'ML Engineer', dept: 'Data', color: 7 },
    { id: 9, name: 'Laura Martinez', title: 'Marketing Lead', dept: 'Marketing', color: 8 },
    { id: 10, name: 'Tom Baker', title: 'UI Developer', dept: 'Design', color: 9 },
  ],
  skills: [
    { id: 1, name: 'JavaScript', category: 'technical' },
    { id: 2, name: 'Python', category: 'technical' },
    { id: 3, name: 'React', category: 'technical' },
    { id: 4, name: 'Node.js', category: 'technical' },
    { id: 5, name: 'SQL', category: 'technical' },
    { id: 6, name: 'UI/UX Design', category: 'tools' },
    { id: 7, name: 'Figma', category: 'tools' },
    { id: 8, name: 'Docker', category: 'tools' },
    { id: 9, name: 'AWS', category: 'tools' },
    { id: 10, name: 'Git', category: 'tools' },
    { id: 11, name: 'Communication', category: 'soft' },
    { id: 12, name: 'Team Leadership', category: 'leadership' },
    { id: 13, name: 'Agile/Scrum', category: 'domain' },
    { id: 14, name: 'Data Analysis', category: 'domain' },
    { id: 15, name: 'Machine Learning', category: 'technical' },
  ],
  // proficiency[empId][skillId] = level (0-4)
  proficiency: {},
  currentView: 'matrix',
  searchQuery: '',
  filterDept: 'all',
  filterCategory: 'all',
  openPicker: null, // { empId, skillId }
  nextEmpId: 11,
  nextSkillId: 16,
  editingEmpId: null,
};

// Initialize proficiency data
function initProficiency() {
  const data = {
    1: { 1: 4, 2: 2, 3: 4, 4: 3, 5: 2, 6: 2, 7: 1, 8: 1, 9: 1, 10: 4, 11: 3, 12: 2, 13: 3, 14: 1, 15: 0 },
    2: { 1: 3, 2: 4, 3: 1, 4: 4, 5: 4, 6: 0, 7: 0, 8: 3, 9: 3, 10: 4, 11: 3, 12: 2, 13: 3, 14: 3, 15: 2 },
    3: { 1: 1, 2: 0, 3: 2, 4: 0, 5: 0, 6: 4, 7: 4, 8: 0, 9: 0, 10: 3, 11: 4, 12: 2, 13: 3, 14: 1, 15: 0 },
    4: { 1: 1, 2: 1, 3: 2, 4: 0, 5: 2, 6: 2, 7: 3, 8: 0, 9: 1, 10: 2, 11: 4, 12: 4, 13: 4, 14: 3, 15: 1 },
    5: { 1: 2, 2: 4, 3: 0, 4: 1, 5: 4, 6: 0, 7: 0, 8: 2, 9: 3, 10: 3, 11: 3, 12: 1, 13: 2, 14: 4, 15: 4 },
    6: { 1: 2, 2: 3, 3: 0, 4: 2, 5: 2, 6: 0, 7: 0, 8: 4, 9: 4, 10: 4, 11: 2, 12: 2, 13: 3, 14: 2, 15: 1 },
    7: { 1: 4, 2: 3, 3: 3, 4: 3, 5: 3, 6: 1, 7: 2, 8: 2, 9: 2, 10: 4, 11: 3, 12: 1, 13: 3, 14: 2, 15: 1 },
    8: { 1: 2, 2: 4, 3: 1, 4: 2, 5: 3, 6: 0, 7: 0, 8: 3, 9: 3, 10: 3, 11: 2, 12: 1, 13: 2, 14: 4, 15: 4 },
    9: { 1: 1, 2: 0, 3: 0, 4: 0, 5: 1, 6: 1, 7: 2, 8: 0, 9: 1, 10: 2, 11: 4, 12: 3, 13: 3, 14: 3, 15: 0 },
    10: { 1: 3, 2: 1, 3: 3, 4: 1, 5: 1, 6: 3, 7: 4, 8: 1, 9: 0, 10: 3, 11: 3, 12: 1, 13: 2, 14: 1, 15: 0 },
  };
  state.proficiency = data;
}

initProficiency();

// ==================== HELPERS ====================
function getInitials(name) {
  return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
}

function getProfLevel(empId, skillId) {
  if (!state.proficiency[empId]) return 0;
  return state.proficiency[empId][skillId] || 0;
}

function setProfLevel(empId, skillId, level) {
  if (!state.proficiency[empId]) state.proficiency[empId] = {};
  state.proficiency[empId][skillId] = level;
}

function getCategoryClass(cat) {
  const map = { technical: 'cat-technical', soft: 'cat-soft', tools: 'cat-tools', domain: 'cat-domain', leadership: 'cat-leadership' };
  return map[cat] || 'cat-technical';
}

function getCategoryLabel(cat) {
  const map = { technical: 'Technical', soft: 'Soft Skills', tools: 'Tools', domain: 'Domain', leadership: 'Leadership' };
  return map[cat] || cat;
}

function getFilteredEmployees() {
  let emps = [...state.employees];
  if (state.filterDept !== 'all') {
    emps = emps.filter(e => e.dept === state.filterDept);
  }
  if (state.searchQuery) {
    const q = state.searchQuery.toLowerCase();
    emps = emps.filter(e => e.name.toLowerCase().includes(q) || e.title.toLowerCase().includes(q) || e.dept.toLowerCase().includes(q));
  }
  return emps;
}

function getFilteredSkills() {
  let skills = [...state.skills];
  if (state.filterCategory !== 'all') {
    skills = skills.filter(s => s.category === state.filterCategory);
  }
  if (state.searchQuery) {
    const q = state.searchQuery.toLowerCase();
    const matchedEmps = getFilteredEmployees();
    if (matchedEmps.length === state.employees.length) {
      skills = skills.filter(s => s.name.toLowerCase().includes(q) || getCategoryLabel(s.category).toLowerCase().includes(q));
      if (skills.length === 0) skills = [...state.skills]; // fall back
    }
  }
  return skills;
}

function getDepartments() {
  return [...new Set(state.employees.map(e => e.dept))].sort();
}

function getSkillCoverage(skillId) {
  let total = 0, count = 0;
  state.employees.forEach(emp => {
    const level = getProfLevel(emp.id, skillId);
    if (level > 0) { total += level; count++; }
  });
  return { avgLevel: count > 0 ? total / count : 0, coverage: count / state.employees.length * 100, count };
}

function getEmployeeAvgLevel(empId) {
  let total = 0, count = 0;
  state.skills.forEach(skill => {
    const level = getProfLevel(empId, skill.id);
    if (level > 0) { total += level; count++; }
  });
  return count > 0 ? total / count : 0;
}

function getTeamAvgForSkill(skillId) {
  let total = 0;
  state.employees.forEach(e => { total += getProfLevel(e.id, skillId); });
  return state.employees.length > 0 ? total / state.employees.length : 0;
}

// ==================== TOAST ====================
function showToast(message, type = 'success') {
  const container = document.getElementById('toastContainer');
  const icons = {
    success: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>',
    error: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>',
    info: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>'
  };
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.innerHTML = `${icons[type] || icons.info} ${message}`;
  container.appendChild(toast);
  setTimeout(() => toast.remove(), 3000);
}

// ==================== MODALS ====================
function openModal(type) {
  const modal = document.getElementById(type + 'Modal');
  if (modal) {
    modal.classList.add('active');
    if (type === 'employee') {
      document.getElementById('employeeModalTitle').textContent = state.editingEmpId ? 'Edit Employee' : 'Add Employee';
    }
  }
}

function closeModal(type) {
  const modal = document.getElementById(type + 'Modal');
  if (modal) {
    modal.classList.remove('active');
    // Reset form fields
    if (type === 'employee') {
      document.getElementById('empName').value = '';
      document.getElementById('empTitle').value = '';
      document.getElementById('empDept').value = 'Engineering';
      state.editingEmpId = null;
    } else if (type === 'skill') {
      document.getElementById('skillName').value = '';
      document.getElementById('skillCategory').value = 'technical';
    }
  }
}

function saveEmployee() {
  const name = document.getElementById('empName').value.trim();
  const title = document.getElementById('empTitle').value.trim();
  const dept = document.getElementById('empDept').value;
  if (!name || !title) { showToast('Please fill in all fields', 'error'); return; }

  if (state.editingEmpId) {
    const emp = state.employees.find(e => e.id === state.editingEmpId);
    if (emp) {
      emp.name = name;
      emp.title = title;
      emp.dept = dept;
      showToast(`Updated ${name} successfully`);
    }
  } else {
    const newEmp = {
      id: state.nextEmpId++,
      name, title, dept,
      color: Math.floor(Math.random() * AVATAR_COLORS.length)
    };
    state.employees.push(newEmp);
    state.proficiency[newEmp.id] = {};
    showToast(`Added ${name} to the team`);
  }
  closeModal('employee');
  render();
}

function saveSkill() {
  const name = document.getElementById('skillName').value.trim();
  const category = document.getElementById('skillCategory').value;
  if (!name) { showToast('Please enter a skill name', 'error'); return; }

  const newSkill = { id: state.nextSkillId++, name, category };
  state.skills.push(newSkill);
  showToast(`Added "${name}" skill`);
  closeModal('skill');
  render();
}

function editEmployee(empId) {
  const emp = state.employees.find(e => e.id === empId);
  if (!emp) return;
  state.editingEmpId = empId;
  document.getElementById('empName').value = emp.name;
  document.getElementById('empTitle').value = emp.title;
  document.getElementById('empDept').value = emp.dept;
  openModal('employee');
}

function deleteEmployee(empId) {
  const emp = state.employees.find(e => e.id === empId);
  if (!emp) return;
  if (!confirm(`Remove ${emp.name} from the matrix?`)) return;
  state.employees = state.employees.filter(e => e.id !== empId);
  delete state.proficiency[empId];
  showToast(`Removed ${emp.name}`, 'info');
  render();
}

function deleteSkill(skillId) {
  const skill = state.skills.find(s => s.id === skillId);
  if (!skill) return;
  if (!confirm(`Remove "${skill.name}" from all employees?`)) return;
  state.skills = state.skills.filter(s => s.id !== skillId);
  Object.keys(state.proficiency).forEach(empId => {
    delete state.proficiency[empId][skillId];
  });
  showToast(`Removed "${skill.name}" skill`, 'info');
  render();
}

// ==================== PROFICIENCY PICKER ====================
function togglePicker(empId, skillId, event) {
  event.stopPropagation();
  if (state.openPicker && state.openPicker.empId === empId && state.openPicker.skillId === skillId) {
    state.openPicker = null;
  } else {
    state.openPicker = { empId, skillId };
  }
  render();
}

function selectProficiency(empId, skillId, level, event) {
  event.stopPropagation();
  setProfLevel(empId, skillId, level);
  state.openPicker = null;
  showToast(`Updated proficiency level`, 'success');
  render();
}

// Close picker on outside click
document.addEventListener('click', function(e) {
  if (state.openPicker && !e.target.closest('.proficiency-cell')) {
    state.openPicker = null;
    render();
  }
});

// ==================== SEARCH & FILTER ====================
function handleSearch(query) {
  state.searchQuery = query;
  render();
}

// ==================== EXPORT ====================
function exportMatrix() {
  const employees = state.employees;
  const skills = state.skills;
  let csv = 'Employee,Title,Department,' + skills.map(s => s.name).join(',') + '\n';
  employees.forEach(emp => {
    const row = [emp.name, emp.title, emp.dept];
    skills.forEach(skill => {
      const level = getProfLevel(emp.id, skill.id);
      row.push(PROFICIENCY_LEVELS[level].label);
    });
    csv += row.map(v => `"${v}"`).join(',') + '\n';
  });
  const blob = new Blob([csv], { type: 'text/csv' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'skills-matrix-export.csv';
  a.click();
  showToast('Matrix exported as CSV', 'success');
}

// ==================== RENDER ====================
function render() {
  const page = document.getElementById('pageContent');
  const view = state.currentView;

  if (view === 'matrix') {
    renderMatrix(page);
  } else if (view === 'analytics') {
    renderAnalytics(page);
  } else if (view === 'gaps') {
    renderGaps(page);
  }
}

function renderMatrix(container) {
  const employees = getFilteredEmployees();
  const skills = getFilteredSkills();
  const depts = getDepartments();

  // Stats
  const totalSkills = state.skills.length;
  const totalEmployees = state.employees.length;
  let totalAssessments = 0, totalScore = 0;
  state.employees.forEach(emp => {
    state.skills.forEach(skill => {
      const l = getProfLevel(emp.id, skill.id);
      if (l > 0) { totalAssessments++; totalScore += l; }
    });
  });
  const avgProficiency = totalAssessments > 0 ? (totalScore / totalAssessments).toFixed(1) : '0';
  const coveragePercent = Math.round(totalAssessments / (totalEmployees * totalSkills) * 100);

  let html = '';

  // Stats row
  html += `
  <div class="stats-row">
    <div class="stat-card">
      <div class="stat-icon purple">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
      </div>
      <div>
        <div class="stat-value">${totalEmployees}</div>
        <div class="stat-label">Team Members</div>
        <div class="stat-change up">Active</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon green">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
      </div>
      <div>
        <div class="stat-value">${totalSkills}</div>
        <div class="stat-label">Skills Tracked</div>
        <div class="stat-change up">${state.skills.filter(s=>s.category==='technical').length} technical</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon blue">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
      </div>
      <div>
        <div class="stat-value">${avgProficiency}</div>
        <div class="stat-label">Avg Proficiency</div>
        <div class="stat-change ${parseFloat(avgProficiency) >= 2.5 ? 'up' : 'down'}">${parseFloat(avgProficiency) >= 2.5 ? 'Above target' : 'Below target'}</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon amber">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
      </div>
      <div>
        <div class="stat-value">${coveragePercent}%</div>
        <div class="stat-label">Skills Coverage</div>
        <div class="stat-change ${coveragePercent >= 70 ? 'up' : 'down'}">${totalAssessments} assessed</div>
      </div>
    </div>
  </div>`;

  // Toolbar
  html += `
  <div class="toolbar">
    <div class="toolbar-left">
      <div class="filter-group">
        <select class="dept-select" onchange="state.filterDept=this.value;render()">
          <option value="all" ${state.filterDept==='all'?'selected':''}>All Departments</option>
          ${depts.map(d => `<option value="${d}" ${state.filterDept===d?'selected':''}>${d}</option>`).join('')}
        </select>
        <select class="dept-select" onchange="state.filterCategory=this.value;render()">
          <option value="all" ${state.filterCategory==='all'?'selected':''}>All Categories</option>
          <option value="technical" ${state.filterCategory==='technical'?'selected':''}>Technical</option>
          <option value="tools" ${state.filterCategory==='tools'?'selected':''}>Tools</option>
          <option value="soft" ${state.filterCategory==='soft'?'selected':''}>Soft Skills</option>
          <option value="domain" ${state.filterCategory==='domain'?'selected':''}>Domain</option>
          <option value="leadership" ${state.filterCategory==='leadership'?'selected':''}>Leadership</option>
        </select>
      </div>
    </div>
    <div class="toolbar-right">
      <button class="btn btn-secondary" onclick="openModal('skill')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
        Add Skill
      </button>
      <button class="btn btn-primary" onclick="openModal('employee')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="20" y1="8" x2="20" y2="14"/><line x1="23" y1="11" x2="17" y2="11"/></svg>
        Add Employee
      </button>
    </div>
  </div>`;

  // Matrix table
  html += `<div class="matrix-card"><div class="matrix-wrapper"><table class="matrix-table"><thead><tr>`;
  html += `<th class="employee-cell" style="min-width:220px"><div style="padding:12px 16px;text-align:left;font-size:12px;font-weight:700;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.5px;">Employee</div></th>`;

  skills.forEach(skill => {
    html += `<th class="skill-header">
      <div class="skill-header-inner">
        <span class="skill-category-badge ${getCategoryClass(skill.category)}">${getCategoryLabel(skill.category)}</span>
        <span class="skill-name">${skill.name}</span>
        <div class="skill-actions">
          <button class="skill-action-btn" onclick="deleteSkill(${skill.id})" title="Remove skill">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:12px;height:12px"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          </button>
        </div>
      </div>
    </th>`;
  });

  html += `</tr></thead><tbody>`;

  employees.forEach(emp => {
    html += `<tr>`;
    html += `<td class="employee-cell">
      <div class="employee-info">
        <div class="emp-avatar" style="background:${AVATAR_COLORS[emp.color % AVATAR_COLORS.length]}">${getInitials(emp.name)}</div>
        <div class="emp-details">
          <div class="emp-name">${emp.name}</div>
          <div class="emp-title">${emp.title}</div>
          <span class="emp-dept">${emp.dept}</span>
        </div>
        <div style="margin-left:auto;display:flex;gap:2px;">
          <button class="skill-action-btn" onclick="editEmployee(${emp.id})" title="Edit">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:13px;height:13px"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
          </button>
          <button class="skill-action-btn" onclick="deleteEmployee(${emp.id})" title="Remove">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:13px;height:13px"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
          </button>
        </div>
      </div>
    </td>`;

    skills.forEach(skill => {
      const level = getProfLevel(emp.id, skill.id);
      const prof = PROFICIENCY_LEVELS[level];
      const isOpen = state.openPicker && state.openPicker.empId === emp.id && state.openPicker.skillId === skill.id;

      html += `<td class="proficiency-cell prof-${prof.key}">
        <div style="position:relative;display:inline-block">
          <div class="proficiency-badge" onclick="togglePicker(${emp.id},${skill.id},event)">
            <div class="proficiency-dots">
              ${[1,2,3,4].map(i => `<div class="proficiency-dot ${i <= level ? 'filled' : ''}"></div>`).join('')}
            </div>
            <span class="proficiency-label">${prof.label}</span>
          </div>
          ${isOpen ? renderPicker(emp.id, skill.id) : ''}
        </div>
      </td>`;
    });

    html += `</tr>`;
  });

  html += `</tbody></table></div>`;

  // Legend
  html += `<div class="legend">
    <span class="legend-title">Levels:</span>
    <div class="legend-items">
      ${PROFICIENCY_LEVELS.map(p => `
        <div class="legend-item">
          <div class="legend-swatch" style="background:${p.color}"></div>
          <span>${p.label} (${p.level})</span>
        </div>
      `).join('')}
    </div>
  </div>`;

  html += `</div>`;

  container.innerHTML = html;
}

function renderPicker(empId, skillId) {
  let html = `<div class="prof-picker" onclick="event.stopPropagation()">`;
  PROFICIENCY_LEVELS.forEach(p => {
    const current = getProfLevel(empId, skillId) === p.level;
    html += `<div class="prof-picker-option" onclick="selectProficiency(${empId},${skillId},${p.level},event)" style="${current?'background:var(--accent-light);font-weight:700':''}">
      <div class="dots">${[1,2,3,4].map(i => `<div class="dot" style="background:${i <= p.level ? p.color : '#e5e7eb'}"></div>`).join('')}</div>
      <span>${p.label}</span>
      ${current ? '<span style="margin-left:auto;color:var(--accent);font-size:11px">&#10003;</span>' : ''}
    </div>`;
  });
  html += `</div>`;
  return html;
}

function renderAnalytics(container) {
  const skills = state.skills;
  const employees = state.employees;

  // Skill coverage data
  const skillData = skills.map(s => ({ ...s, ...getSkillCoverage(s.id) })).sort((a, b) => b.coverage - a.coverage);

  // Employee rankings
  const empData = employees.map(e => ({
    ...e,
    avg: getEmployeeAvgLevel(e.id),
    skillCount: skills.filter(s => getProfLevel(e.id, s.id) > 0).length,
    expertCount: skills.filter(s => getProfLevel(e.id, s.id) === 4).length
  })).sort((a, b) => b.avg - a.avg);

  // Department averages
  const deptMap = {};
  employees.forEach(emp => {
    if (!deptMap[emp.dept]) deptMap[emp.dept] = [];
    deptMap[emp.dept].push(getEmployeeAvgLevel(emp.id));
  });
  const deptData = Object.entries(deptMap).map(([dept, avgs]) => ({
    dept,
    avg: avgs.reduce((a, b) => a + b, 0) / avgs.length,
    count: avgs.length
  })).sort((a, b) => b.avg - a.avg);

  // Category breakdown
  const categories = ['technical', 'tools', 'soft', 'domain', 'leadership'];
  const catData = categories.map(cat => {
    const catSkills = skills.filter(s => s.category === cat);
    let total = 0, count = 0;
    catSkills.forEach(s => {
      employees.forEach(e => {
        const l = getProfLevel(e.id, s.id);
        if (l > 0) { total += l; count++; }
      });
    });
    return { category: cat, label: getCategoryLabel(cat), avg: count > 0 ? total / count : 0, skillCount: catSkills.length };
  });

  let html = `
  <div style="margin-bottom:24px">
    <h2 style="font-size:20px;font-weight:800;letter-spacing:-0.5px">Analytics Dashboard</h2>
    <p style="font-size:13px;color:var(--text-secondary);margin-top:4px">Comprehensive view of team competencies and skill distribution</p>
  </div>

  <div class="coverage-section" style="margin-top:0">
    <!-- Skill coverage -->
    <div class="coverage-card">
      <div class="coverage-card-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        Skill Coverage Rates
      </div>
      ${skillData.map(s => `
        <div class="coverage-bar-item">
          <div class="coverage-bar-header">
            <span class="coverage-bar-name">${s.name}</span>
            <span class="coverage-bar-value">${Math.round(s.coverage)}% (${s.count}/${employees.length})</span>
          </div>
          <div class="coverage-bar-track">
            <div class="coverage-bar-fill" style="width:${s.coverage}%;background:${s.coverage >= 80 ? 'var(--success)' : s.coverage >= 50 ? 'var(--info)' : s.coverage >= 30 ? 'var(--warning)' : 'var(--danger)'}"></div>
          </div>
        </div>
      `).join('')}
    </div>

    <!-- Employee rankings -->
    <div class="coverage-card">
      <div class="coverage-card-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
        Employee Proficiency Rankings
      </div>
      ${empData.map((e, i) => `
        <div class="coverage-bar-item">
          <div class="coverage-bar-header">
            <span class="coverage-bar-name" style="display:flex;align-items:center;gap:6px">
              <span style="width:20px;height:20px;border-radius:50%;background:${AVATAR_COLORS[e.color % AVATAR_COLORS.length]};display:inline-flex;align-items:center;justify-content:center;font-size:9px;color:white;font-weight:700;flex-shrink:0">${getInitials(e.name)}</span>
              ${e.name}
              ${i === 0 ? '<span style="font-size:10px;background:var(--warning-light);color:var(--warning);padding:1px 5px;border-radius:3px;font-weight:700">TOP</span>' : ''}
            </span>
            <span class="coverage-bar-value">Avg ${e.avg.toFixed(1)} &middot; ${e.expertCount} expert</span>
          </div>
          <div class="coverage-bar-track">
            <div class="coverage-bar-fill" style="width:${(e.avg / 4 * 100)}%;background:${AVATAR_COLORS[e.color % AVATAR_COLORS.length]}"></div>
          </div>
        </div>
      `).join('')}
    </div>

    <!-- Department averages -->
    <div class="coverage-card">
      <div class="coverage-card-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg>
        Department Averages
      </div>
      ${deptData.map(d => `
        <div class="coverage-bar-item">
          <div class="coverage-bar-header">
            <span class="coverage-bar-name">${d.dept} <span style="color:var(--text-muted);font-size:11px">(${d.count} members)</span></span>
            <span class="coverage-bar-value">${d.avg.toFixed(1)} / 4.0</span>
          </div>
          <div class="coverage-bar-track">
            <div class="coverage-bar-fill" style="width:${(d.avg / 4 * 100)}%;background:var(--accent)"></div>
          </div>
        </div>
      `).join('')}
    </div>

    <!-- Category breakdown -->
    <div class="coverage-card">
      <div class="coverage-card-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
        Skill Category Breakdown
      </div>
      ${catData.map(c => {
        const colors = { technical: '#7c3aed', tools: '#2563eb', soft: '#db2777', domain: '#059669', leadership: '#c2410c' };
        return `
        <div class="coverage-bar-item">
          <div class="coverage-bar-header">
            <span class="coverage-bar-name"><span class="skill-category-badge ${getCategoryClass(c.category)}">${c.label}</span> <span style="color:var(--text-muted);font-size:11px">(${c.skillCount} skills)</span></span>
            <span class="coverage-bar-value">Avg ${c.avg.toFixed(1)}</span>
          </div>
          <div class="coverage-bar-track">
            <div class="coverage-bar-fill" style="width:${(c.avg / 4 * 100)}%;background:${colors[c.category] || 'var(--accent)'}"></div>
          </div>
        </div>`;
      }).join('')}
    </div>
  </div>`;

  container.innerHTML = html;
}

function renderGaps(container) {
  const skills = state.skills;
  const employees = state.employees;

  // Find skill gaps: skills where coverage < 50% or avg < 2
  const gaps = skills.map(s => {
    const cov = getSkillCoverage(s.id);
    const teamAvg = getTeamAvgForSkill(s.id);
    return { ...s, coverage: cov.coverage, count: cov.count, avgLevel: cov.avgLevel, teamAvg };
  }).sort((a, b) => a.teamAvg - b.teamAvg);

  const criticalGaps = gaps.filter(g => g.teamAvg < 1.5);
  const warningGaps = gaps.filter(g => g.teamAvg >= 1.5 && g.teamAvg < 2.5);
  const goodSkills = gaps.filter(g => g.teamAvg >= 2.5);

  // Employees with skill gaps
  const empGaps = employees.map(emp => {
    const lowSkills = skills.filter(s => getProfLevel(emp.id, s.id) < 2);
    const noSkills = skills.filter(s => getProfLevel(emp.id, s.id) === 0);
    return { ...emp, lowSkills, noSkills, gapCount: lowSkills.length };
  }).sort((a, b) => b.gapCount - a.gapCount);

  let html = `
  <div style="margin-bottom:24px">
    <h2 style="font-size:20px;font-weight:800;letter-spacing:-0.5px">Skill Gap Analysis</h2>
    <p style="font-size:13px;color:var(--text-secondary);margin-top:4px">Identify areas where team development is needed</p>
  </div>

  <!-- Summary cards -->
  <div class="stats-row" style="grid-template-columns:repeat(3,1fr)">
    <div class="stat-card">
      <div class="stat-icon" style="background:var(--danger-light);color:var(--danger)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
      </div>
      <div>
        <div class="stat-value">${criticalGaps.length}</div>
        <div class="stat-label">Critical Gaps</div>
        <div class="stat-change down">Needs attention</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon amber">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
      </div>
      <div>
        <div class="stat-value">${warningGaps.length}</div>
        <div class="stat-label">Warning Areas</div>
        <div class="stat-change down">Room to improve</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon green">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
      </div>
      <div>
        <div class="stat-value">${goodSkills.length}</div>
        <div class="stat-label">Well Covered</div>
        <div class="stat-change up">On track</div>
      </div>
    </div>
  </div>

  <div class="coverage-section">
    <!-- Skill gaps detail -->
    <div class="coverage-card">
      <div class="coverage-card-title" style="color:var(--danger)">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        Skills Requiring Development
      </div>
      ${gaps.map(g => {
        const severity = g.teamAvg < 1.5 ? 'critical' : g.teamAvg < 2.5 ? 'warning' : 'good';
        const barColor = severity === 'critical' ? 'var(--danger)' : severity === 'warning' ? 'var(--warning)' : 'var(--success)';
        return `
        <div class="coverage-bar-item">
          <div class="coverage-bar-header">
            <span class="coverage-bar-name" style="display:flex;align-items:center;gap:6px">
              ${g.name}
              <span class="gap-indicator gap-${severity}">${severity === 'critical' ? 'CRITICAL' : severity === 'warning' ? 'WARNING' : 'GOOD'}</span>
            </span>
            <span class="coverage-bar-value">Team avg: ${g.teamAvg.toFixed(1)}/4</span>
          </div>
          <div class="coverage-bar-track">
            <div class="coverage-bar-fill" style="width:${(g.teamAvg / 4 * 100)}%;background:${barColor}"></div>
          </div>
        </div>`;
      }).join('')}
    </div>

    <!-- Employee gaps -->
    <div class="coverage-card">
      <div class="coverage-card-title">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="9" cy="7" r="4"/></svg>
        Employee Development Needs
      </div>
      ${empGaps.map(e => `
        <div style="margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid var(--border-light)">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
            <div class="emp-avatar" style="background:${AVATAR_COLORS[e.color % AVATAR_COLORS.length]};width:32px;height:32px;font-size:12px">${getInitials(e.name)}</div>
            <div>
              <div style="font-size:13px;font-weight:600">${e.name}</div>
              <div style="font-size:11px;color:var(--text-secondary)">${e.title} &middot; ${e.dept}</div>
            </div>
            <span style="margin-left:auto;font-size:11px;font-weight:700;padding:2px 8px;border-radius:4px;${e.gapCount > 8 ? 'background:var(--danger-light);color:var(--danger)' : e.gapCount > 5 ? 'background:var(--warning-light);color:var(--warning)' : 'background:var(--success-light);color:var(--success)'}">${e.gapCount} gaps</span>
          </div>
          <div class="emp-detail-skills">
            ${e.noSkills.slice(0, 5).map(s => `<span class="emp-skill-tag" style="background:var(--danger-light);color:var(--danger)">${s.name}</span>`).join('')}
            ${e.lowSkills.filter(s => getProfLevel(e.id, s.id) === 1).slice(0, 3).map(s => `<span class="emp-skill-tag" style="background:var(--warning-light);color:var(--warning)">${s.name}</span>`).join('')}
            ${e.gapCount > 8 ? `<span class="emp-skill-tag" style="background:var(--border-light);color:var(--text-muted)">+${e.gapCount - 8} more</span>` : ''}
          </div>
        </div>
      `).join('')}
    </div>
  </div>

  <!-- Recommendations -->
  <div class="coverage-card" style="margin-top:20px">
    <div class="coverage-card-title">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
      Recommended Actions
    </div>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px;margin-top:8px">
      ${criticalGaps.slice(0, 3).map(g => `
        <div style="padding:14px;background:var(--danger-light);border-radius:var(--radius-sm);border-left:3px solid var(--danger)">
          <div style="font-size:12px;font-weight:700;color:var(--danger);margin-bottom:4px">Priority: ${g.name}</div>
          <div style="font-size:11.5px;color:#7f1d1d;line-height:1.5">Only ${g.count}/${employees.length} team members have this skill. Consider training programs or hiring for this competency.</div>
        </div>
      `).join('')}
      ${warningGaps.slice(0, 2).map(g => `
        <div style="padding:14px;background:var(--warning-light);border-radius:var(--radius-sm);border-left:3px solid var(--warning)">
          <div style="font-size:12px;font-weight:700;color:var(--warning);margin-bottom:4px">Develop: ${g.name}</div>
          <div style="font-size:11.5px;color:#78350f;line-height:1.5">Team average is ${g.teamAvg.toFixed(1)}/4. Encourage peer learning and structured development plans.</div>
        </div>
      `).join('')}
    </div>
  </div>`;

  container.innerHTML = html;
}

// ==================== NAVIGATION ====================
document.querySelectorAll('.nav-item[data-view]').forEach(item => {
  item.addEventListener('click', function() {
    const view = this.dataset.view;
    state.currentView = view;
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    this.classList.add('active');

    const titles = { matrix: 'Skills Matrix', analytics: 'Analytics', gaps: 'Skill Gaps' };
    document.getElementById('breadcrumbTitle').textContent = titles[view] || 'Skills Matrix';

    render();
  });
});

// ==================== INIT ====================
render();
</script>
</body>
</html>
