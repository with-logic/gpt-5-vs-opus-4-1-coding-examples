<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>American Trivia Quiz</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg-primary: #0f172a;
    --bg-secondary: #1e293b;
    --bg-card: #1e293b;
    --accent: #6366f1;
    --accent-glow: rgba(99, 102, 241, 0.3);
    --correct: #22c55e;
    --correct-glow: rgba(34, 197, 94, 0.3);
    --wrong: #ef4444;
    --wrong-glow: rgba(239, 68, 68, 0.3);
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --text-muted: #64748b;
    --border: #334155;
    --gold: #f59e0b;
    --gold-glow: rgba(245, 158, 11, 0.4);
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-x: hidden;
  }

  /* Animated background */
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background:
      radial-gradient(ellipse 80% 60% at 50% -20%, rgba(99,102,241,0.15), transparent),
      radial-gradient(ellipse 60% 40% at 80% 80%, rgba(139,92,246,0.08), transparent),
      radial-gradient(ellipse 50% 50% at 20% 60%, rgba(59,130,246,0.06), transparent);
    pointer-events: none;
    z-index: 0;
  }

  .app-container {
    position: relative;
    z-index: 1;
    width: 100%;
    max-width: 720px;
    padding: 24px 20px 40px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* Header */
  .header {
    text-align: center;
    margin-bottom: 32px;
  }

  .header h1 {
    font-size: 1.6rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, #818cf8, #6366f1, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 4px;
  }

  .header .subtitle {
    font-size: 0.85rem;
    color: var(--text-muted);
    font-weight: 500;
  }

  /* Progress section */
  .progress-section {
    margin-bottom: 28px;
  }

  .progress-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }

  .progress-label {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .progress-score {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--accent);
  }

  .progress-bar-track {
    width: 100%;
    height: 8px;
    background: var(--bg-secondary);
    border-radius: 99px;
    overflow: hidden;
    border: 1px solid var(--border);
  }

  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #6366f1, #818cf8);
    border-radius: 99px;
    transition: width 0.6s cubic-bezier(0.22, 1, 0.36, 1);
    position: relative;
  }

  .progress-bar-fill::after {
    content: '';
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.2) 50%, transparent 100%);
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  /* Question dots */
  .question-dots {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-top: 14px;
  }

  .q-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--border);
    transition: all 0.4s ease;
    position: relative;
  }

  .q-dot.current {
    background: var(--accent);
    box-shadow: 0 0 10px var(--accent-glow);
    transform: scale(1.2);
  }

  .q-dot.correct {
    background: var(--correct);
    box-shadow: 0 0 8px var(--correct-glow);
  }

  .q-dot.wrong {
    background: var(--wrong);
    box-shadow: 0 0 8px var(--wrong-glow);
  }

  /* Card */
  .card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 36px 32px;
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 24px rgba(0,0,0,0.2), 0 0 0 1px rgba(255,255,255,0.03) inset;
  }

  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
  }

  /* Question */
  .question-number {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 14px;
  }

  .question-text {
    font-size: 1.35rem;
    font-weight: 700;
    line-height: 1.45;
    color: var(--text-primary);
    margin-bottom: 32px;
    letter-spacing: -0.01em;
  }

  /* Answers */
  .answers {
    display: flex;
    flex-direction: column;
    gap: 12px;
    flex: 1;
  }

  .answer-btn {
    display: flex;
    align-items: center;
    gap: 16px;
    width: 100%;
    padding: 16px 20px;
    background: rgba(255,255,255,0.03);
    border: 1.5px solid var(--border);
    border-radius: 14px;
    color: var(--text-primary);
    font-family: inherit;
    font-size: 1rem;
    font-weight: 500;
    text-align: left;
    cursor: pointer;
    transition: all 0.25s ease;
    position: relative;
    overflow: hidden;
  }

  .answer-btn:hover:not(:disabled) {
    border-color: var(--accent);
    background: rgba(99, 102, 241, 0.08);
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(99, 102, 241, 0.12);
  }

  .answer-btn:active:not(:disabled) {
    transform: translateY(0);
  }

  .answer-btn:disabled {
    cursor: default;
  }

  .answer-letter {
    width: 34px;
    height: 34px;
    border-radius: 10px;
    background: rgba(255,255,255,0.06);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.85rem;
    color: var(--text-secondary);
    flex-shrink: 0;
    transition: all 0.3s ease;
  }

  .answer-btn.selected .answer-letter,
  .answer-btn:hover:not(:disabled) .answer-letter {
    background: rgba(99, 102, 241, 0.2);
    color: #818cf8;
  }

  .answer-btn.correct-answer {
    border-color: var(--correct) !important;
    background: rgba(34, 197, 94, 0.1) !important;
    animation: correctPulse 0.6s ease;
  }

  .answer-btn.correct-answer .answer-letter {
    background: var(--correct) !important;
    color: white !important;
  }

  .answer-btn.wrong-answer {
    border-color: var(--wrong) !important;
    background: rgba(239, 68, 68, 0.1) !important;
    animation: wrongShake 0.5s ease;
  }

  .answer-btn.wrong-answer .answer-letter {
    background: var(--wrong) !important;
    color: white !important;
  }

  .answer-btn.dimmed {
    opacity: 0.4;
  }

  @keyframes correctPulse {
    0% { transform: scale(1); }
    30% { transform: scale(1.02); }
    60% { transform: scale(0.99); }
    100% { transform: scale(1); }
  }

  @keyframes wrongShake {
    0%, 100% { transform: translateX(0); }
    15% { transform: translateX(-6px); }
    30% { transform: translateX(6px); }
    45% { transform: translateX(-4px); }
    60% { transform: translateX(4px); }
    75% { transform: translateX(-2px); }
    90% { transform: translateX(2px); }
  }

  /* Feedback overlay */
  .feedback-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    font-size: 100px;
    pointer-events: none;
    z-index: 10;
    opacity: 0;
    filter: drop-shadow(0 0 30px rgba(0,0,0,0.3));
  }

  .feedback-icon.show {
    animation: feedbackPop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  @keyframes feedbackPop {
    0% { transform: translate(-50%, -50%) scale(0) rotate(-15deg); opacity: 0; }
    40% { transform: translate(-50%, -50%) scale(1.2) rotate(5deg); opacity: 0.9; }
    60% { transform: translate(-50%, -50%) scale(0.95) rotate(-2deg); opacity: 0.85; }
    80% { opacity: 0.6; }
    100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 0; }
  }

  /* Next button */
  .next-btn-container {
    margin-top: 24px;
    display: flex;
    justify-content: center;
  }

  .next-btn {
    padding: 14px 40px;
    background: linear-gradient(135deg, #6366f1, #7c3aed);
    border: none;
    border-radius: 12px;
    color: white;
    font-family: inherit;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    opacity: 0;
    transform: translateY(12px);
    box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);
  }

  .next-btn.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .next-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(99, 102, 241, 0.45);
  }

  .next-btn:active {
    transform: translateY(0);
  }

  /* Slide animations */
  .slide-in {
    animation: slideIn 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  }

  .slide-out {
    animation: slideOut 0.35s cubic-bezier(0.55, 0, 1, 0.45) forwards;
  }

  @keyframes slideIn {
    0% { opacity: 0; transform: translateX(40px); }
    100% { opacity: 1; transform: translateX(0); }
  }

  @keyframes slideOut {
    0% { opacity: 1; transform: translateX(0); }
    100% { opacity: 0; transform: translateX(-40px); }
  }

  /* Start Screen */
  .start-screen {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 40px 20px;
  }

  .start-icon {
    font-size: 72px;
    margin-bottom: 20px;
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  .start-title {
    font-size: 2.4rem;
    font-weight: 900;
    letter-spacing: -0.03em;
    background: linear-gradient(135deg, #818cf8, #6366f1, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 12px;
    line-height: 1.2;
  }

  .start-desc {
    font-size: 1.05rem;
    color: var(--text-secondary);
    margin-bottom: 36px;
    max-width: 400px;
    line-height: 1.6;
  }

  .start-btn {
    padding: 16px 52px;
    background: linear-gradient(135deg, #6366f1, #7c3aed);
    border: none;
    border-radius: 14px;
    color: white;
    font-family: inherit;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
    position: relative;
    overflow: hidden;
  }

  .start-btn::before {
    content: '';
    position: absolute;
    top: 0; left: -100%; width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
    transition: left 0.5s ease;
  }

  .start-btn:hover::before {
    left: 100%;
  }

  .start-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 32px rgba(99, 102, 241, 0.5);
  }

  .start-meta {
    margin-top: 20px;
    display: flex;
    gap: 24px;
    color: var(--text-muted);
    font-size: 0.82rem;
    font-weight: 500;
  }

  .start-meta span {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  /* Results Screen */
  .results-screen {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 40px 20px;
    animation: fadeInUp 0.7s ease forwards;
  }

  @keyframes fadeInUp {
    0% { opacity: 0; transform: translateY(30px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  .results-trophy {
    font-size: 80px;
    margin-bottom: 16px;
    animation: trophyBounce 1s ease;
  }

  @keyframes trophyBounce {
    0% { transform: scale(0) rotate(-20deg); }
    50% { transform: scale(1.2) rotate(5deg); }
    70% { transform: scale(0.9) rotate(-3deg); }
    100% { transform: scale(1) rotate(0deg); }
  }

  .results-title {
    font-size: 2rem;
    font-weight: 800;
    margin-bottom: 8px;
    letter-spacing: -0.02em;
  }

  .results-subtitle {
    font-size: 1rem;
    color: var(--text-secondary);
    margin-bottom: 32px;
  }

  .score-ring-container {
    position: relative;
    width: 180px;
    height: 180px;
    margin-bottom: 32px;
  }

  .score-ring {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
  }

  .score-ring-bg {
    fill: none;
    stroke: var(--border);
    stroke-width: 8;
  }

  .score-ring-fill {
    fill: none;
    stroke-width: 8;
    stroke-linecap: round;
    transition: stroke-dashoffset 1.5s cubic-bezier(0.22, 1, 0.36, 1);
  }

  .score-ring-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
  }

  .score-ring-number {
    font-size: 2.8rem;
    font-weight: 900;
    line-height: 1;
    letter-spacing: -0.03em;
  }

  .score-ring-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-top: 4px;
  }

  .results-stats {
    display: flex;
    gap: 32px;
    margin-bottom: 36px;
  }

  .stat {
    text-align: center;
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 800;
    margin-bottom: 2px;
  }

  .stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .stat-correct .stat-value { color: var(--correct); }
  .stat-wrong .stat-value { color: var(--wrong); }

  .play-again-btn {
    padding: 14px 44px;
    background: linear-gradient(135deg, #6366f1, #7c3aed);
    border: none;
    border-radius: 12px;
    color: white;
    font-family: inherit;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);
  }

  .play-again-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(99, 102, 241, 0.45);
  }

  /* Confetti */
  .confetti-piece {
    position: fixed;
    width: 10px;
    height: 10px;
    top: -10px;
    z-index: 100;
    pointer-events: none;
  }

  /* Particles on correct answer */
  .particle {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 20;
  }

  /* Keyboard hint */
  .keyboard-hint {
    margin-top: auto;
    padding-top: 16px;
    text-align: center;
    color: var(--text-muted);
    font-size: 0.72rem;
    font-weight: 500;
    opacity: 0.7;
  }

  .keyboard-hint kbd {
    display: inline-block;
    padding: 2px 7px;
    border: 1px solid var(--border);
    border-radius: 5px;
    font-family: inherit;
    font-size: 0.7rem;
    background: rgba(255,255,255,0.04);
    margin: 0 1px;
  }

  /* Responsive */
  @media (max-width: 600px) {
    .app-container { padding: 16px 14px 32px; }
    .card { padding: 28px 22px; border-radius: 16px; }
    .question-text { font-size: 1.15rem; }
    .answer-btn { padding: 14px 16px; font-size: 0.93rem; }
    .start-title { font-size: 1.9rem; }
    .start-desc { font-size: 0.95rem; }
    .score-ring-container { width: 150px; height: 150px; }
    .score-ring-number { font-size: 2.2rem; }
    .results-stats { gap: 20px; }
  }
</style>
</head>
<body>

<div class="app-container" id="app"></div>

<script>
const QUESTIONS = [
  {
    question: "How many stripes are on the American flag?",
    answers: ["50", "13", "15", "10"],
    correct: 1
  },
  {
    question: "Who was the first President of the United States?",
    answers: ["Thomas Jefferson", "John Adams", "George Washington", "Benjamin Franklin"],
    correct: 2
  },
  {
    question: "What is the national bird of the United States?",
    answers: ["Red-tailed Hawk", "Bald Eagle", "American Robin", "Wild Turkey"],
    correct: 1
  },
  {
    question: "Which U.S. state is the largest by area?",
    answers: ["Texas", "California", "Montana", "Alaska"],
    correct: 3
  },
  {
    question: "What year did the United States declare independence?",
    answers: ["1776", "1783", "1790", "1770"],
    correct: 0
  },
  {
    question: "How many amendments make up the Bill of Rights?",
    answers: ["5", "12", "8", "10"],
    correct: 3
  },
  {
    question: "What is the capital of the United States?",
    answers: ["New York City", "Philadelphia", "Washington, D.C.", "Boston"],
    correct: 2
  },
  {
    question: "Which ocean is on the east coast of the United States?",
    answers: ["Pacific Ocean", "Indian Ocean", "Arctic Ocean", "Atlantic Ocean"],
    correct: 3
  },
  {
    question: "What do the stars on the American flag represent?",
    answers: ["The original colonies", "The 50 states", "The branches of government", "Major U.S. cities"],
    correct: 1
  },
  {
    question: "Which U.S. holiday is celebrated on July 4th?",
    answers: ["Memorial Day", "Veterans Day", "Independence Day", "Labor Day"],
    correct: 2
  }
];

const LETTERS = ['A', 'B', 'C', 'D'];

class TriviaApp {
  constructor() {
    this.container = document.getElementById('app');
    this.questions = [];
    this.currentIndex = 0;
    this.score = 0;
    this.answered = false;
    this.results = [];
    this.showStart();
    this.bindKeyboard();
  }

  shuffleArray(arr) {
    const a = [...arr];
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  initQuiz() {
    this.questions = this.shuffleArray(QUESTIONS);
    this.currentIndex = 0;
    this.score = 0;
    this.answered = false;
    this.results = [];
  }

  bindKeyboard() {
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        if (this.screen === 'start') {
          this.startQuiz();
        } else if (this.screen === 'results') {
          this.startQuiz();
        } else if (this.screen === 'quiz' && this.answered) {
          this.nextQuestion();
        }
      }

      if (this.screen === 'quiz' && !this.answered) {
        const keyMap = { '1': 0, '2': 1, '3': 2, '4': 3, 'a': 0, 'b': 1, 'c': 2, 'd': 3 };
        const idx = keyMap[e.key.toLowerCase()];
        if (idx !== undefined && idx < this.questions[this.currentIndex].answers.length) {
          this.selectAnswer(idx);
        }
      }
    });
  }

  showStart() {
    this.screen = 'start';
    this.container.innerHTML = `
      <div class="start-screen">
        <div class="start-icon">üá∫üá∏</div>
        <h1 class="start-title">American Trivia</h1>
        <p class="start-desc">Test your knowledge of United States history, geography, and culture with 10 questions.</p>
        <button class="start-btn" onclick="app.startQuiz()">Start Quiz</button>
        <div class="start-meta">
          <span>üìù 10 Questions</span>
          <span>‚è± No time limit</span>
          <span>üéØ Basic level</span>
        </div>
      </div>
    `;
  }

  startQuiz() {
    this.initQuiz();
    this.screen = 'quiz';
    this.renderQuestion();
  }

  renderQuestion() {
    this.answered = false;
    const q = this.questions[this.currentIndex];
    const progress = ((this.currentIndex) / this.questions.length) * 100;

    let dotsHtml = '';
    for (let i = 0; i < this.questions.length; i++) {
      let cls = 'q-dot';
      if (i === this.currentIndex) cls += ' current';
      else if (i < this.currentIndex) cls += this.results[i] ? ' correct' : ' wrong';
      dotsHtml += `<div class="${cls}"></div>`;
    }

    let answersHtml = q.answers.map((a, i) => `
      <button class="answer-btn" id="ans-${i}" onclick="app.selectAnswer(${i})">
        <span class="answer-letter">${LETTERS[i]}</span>
        <span>${a}</span>
      </button>
    `).join('');

    this.container.innerHTML = `
      <div class="header">
        <h1>American Trivia</h1>
        <p class="subtitle">How well do you know the USA?</p>
      </div>
      <div class="progress-section">
        <div class="progress-info">
          <span class="progress-label">Question ${this.currentIndex + 1} of ${this.questions.length}</span>
          <span class="progress-score">Score: ${this.score}/${this.currentIndex}</span>
        </div>
        <div class="progress-bar-track">
          <div class="progress-bar-fill" style="width: ${progress}%"></div>
        </div>
        <div class="question-dots">${dotsHtml}</div>
      </div>
      <div class="card" id="quiz-card">
        <div class="question-number">Question ${this.currentIndex + 1}</div>
        <div class="question-text slide-in">${q.question}</div>
        <div class="answers slide-in" style="animation-delay: 0.08s;">
          ${answersHtml}
        </div>
        <div class="feedback-icon" id="feedback-icon"></div>
        <div class="next-btn-container">
          <button class="next-btn" id="next-btn" onclick="app.nextQuestion()">
            ${this.currentIndex < this.questions.length - 1 ? 'Next Question ‚Üí' : 'See Results ‚Üí'}
          </button>
        </div>
        <div class="keyboard-hint">Press <kbd>A</kbd>-<kbd>D</kbd> or <kbd>1</kbd>-<kbd>4</kbd> to answer &middot; <kbd>Enter</kbd> to continue</div>
      </div>
    `;
  }

  selectAnswer(idx) {
    if (this.answered) return;
    this.answered = true;

    const q = this.questions[this.currentIndex];
    const isCorrect = idx === q.correct;

    if (isCorrect) this.score++;
    this.results.push(isCorrect);

    const buttons = document.querySelectorAll('.answer-btn');
    buttons.forEach((btn, i) => {
      btn.disabled = true;
      if (i === q.correct) {
        btn.classList.add('correct-answer');
      } else if (i === idx && !isCorrect) {
        btn.classList.add('wrong-answer');
      } else {
        btn.classList.add('dimmed');
      }
    });

    // Show feedback icon
    const feedbackEl = document.getElementById('feedback-icon');
    if (feedbackEl) {
      feedbackEl.textContent = isCorrect ? '‚úì' : '‚úó';
      feedbackEl.style.color = isCorrect ? 'var(--correct)' : 'var(--wrong)';
      feedbackEl.classList.add('show');
    }

    // Spawn particles on correct
    if (isCorrect) {
      this.spawnParticles(buttons[idx]);
    }

    // Show next button
    setTimeout(() => {
      const nextBtn = document.getElementById('next-btn');
      if (nextBtn) nextBtn.classList.add('visible');
    }, 500);
  }

  spawnParticles(element) {
    const rect = element.getBoundingClientRect();
    const card = document.getElementById('quiz-card');
    const cardRect = card.getBoundingClientRect();
    const colors = ['#22c55e', '#4ade80', '#86efac', '#6366f1', '#f59e0b'];

    for (let i = 0; i < 12; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.background = colors[Math.floor(Math.random() * colors.length)];
      particle.style.left = (rect.left - cardRect.left + rect.width / 2) + 'px';
      particle.style.top = (rect.top - cardRect.top + rect.height / 2) + 'px';

      const angle = (Math.PI * 2 / 12) * i + (Math.random() - 0.5) * 0.5;
      const dist = 40 + Math.random() * 60;
      const dx = Math.cos(angle) * dist;
      const dy = Math.sin(angle) * dist;

      card.appendChild(particle);

      particle.animate([
        { transform: 'translate(0, 0) scale(1)', opacity: 1 },
        { transform: `translate(${dx}px, ${dy}px) scale(0)`, opacity: 0 }
      ], {
        duration: 600 + Math.random() * 300,
        easing: 'cubic-bezier(0, 0.9, 0.3, 1)',
        fill: 'forwards'
      });

      setTimeout(() => particle.remove(), 1000);
    }
  }

  nextQuestion() {
    if (!this.answered) return;

    this.currentIndex++;
    if (this.currentIndex >= this.questions.length) {
      this.showResults();
    } else {
      this.renderQuestion();
    }
  }

  showResults() {
    this.screen = 'results';
    const pct = Math.round((this.score / this.questions.length) * 100);
    const circumference = 2 * Math.PI * 72;
    const offset = circumference - (circumference * pct / 100);
    const wrong = this.questions.length - this.score;

    let trophy, title, subtitle;
    if (pct === 100) {
      trophy = 'üèÜ'; title = 'Perfect Score!'; subtitle = 'You\'re a true American trivia master!';
    } else if (pct >= 80) {
      trophy = 'üåü'; title = 'Great Job!'; subtitle = 'You really know your American trivia!';
    } else if (pct >= 60) {
      trophy = 'üëç'; title = 'Nice Work!'; subtitle = 'You have solid knowledge of American basics.';
    } else if (pct >= 40) {
      trophy = 'üìö'; title = 'Keep Learning!'; subtitle = 'A bit more study and you\'ll ace it next time.';
    } else {
      trophy = 'üí™'; title = 'Room to Grow'; subtitle = 'Try again and see how much you can improve!';
    }

    let ringColor;
    if (pct >= 80) ringColor = 'var(--correct)';
    else if (pct >= 50) ringColor = 'var(--gold)';
    else ringColor = 'var(--wrong)';

    this.container.innerHTML = `
      <div class="header">
        <h1>American Trivia</h1>
        <p class="subtitle">How well do you know the USA?</p>
      </div>
      <div class="progress-section">
        <div class="progress-info">
          <span class="progress-label">Quiz Complete</span>
          <span class="progress-score">Final: ${this.score}/${this.questions.length}</span>
        </div>
        <div class="progress-bar-track">
          <div class="progress-bar-fill" style="width: 100%"></div>
        </div>
        <div class="question-dots">
          ${this.results.map(r => `<div class="q-dot ${r ? 'correct' : 'wrong'}"></div>`).join('')}
        </div>
      </div>
      <div class="results-screen">
        <div class="results-trophy">${trophy}</div>
        <h2 class="results-title">${title}</h2>
        <p class="results-subtitle">${subtitle}</p>
        <div class="score-ring-container">
          <svg class="score-ring" viewBox="0 0 160 160">
            <circle class="score-ring-bg" cx="80" cy="80" r="72" />
            <circle class="score-ring-fill" cx="80" cy="80" r="72"
              stroke="${ringColor}"
              stroke-dasharray="${circumference}"
              stroke-dashoffset="${circumference}"
              id="score-fill" />
          </svg>
          <div class="score-ring-text">
            <div class="score-ring-number" id="score-counter" style="color: ${ringColor}">0%</div>
            <div class="score-ring-label">Score</div>
          </div>
        </div>
        <div class="results-stats">
          <div class="stat stat-correct">
            <div class="stat-value">${this.score}</div>
            <div class="stat-label">Correct</div>
          </div>
          <div class="stat stat-wrong">
            <div class="stat-value">${wrong}</div>
            <div class="stat-label">Wrong</div>
          </div>
        </div>
        <button class="play-again-btn" onclick="app.startQuiz()">Play Again</button>
      </div>
    `;

    // Animate score ring
    requestAnimationFrame(() => {
      setTimeout(() => {
        const fill = document.getElementById('score-fill');
        if (fill) fill.style.strokeDashoffset = offset;

        // Animate counter
        let current = 0;
        const duration = 1500;
        const start = performance.now();
        const counter = document.getElementById('score-counter');

        const tick = (now) => {
          const elapsed = now - start;
          const progress = Math.min(elapsed / duration, 1);
          const eased = 1 - Math.pow(1 - progress, 3);
          current = Math.round(eased * pct);
          if (counter) counter.textContent = current + '%';
          if (progress < 1) requestAnimationFrame(tick);
        };
        requestAnimationFrame(tick);
      }, 100);
    });

    // Confetti for great scores
    if (pct >= 70) {
      this.launchConfetti();
    }
  }

  launchConfetti() {
    const colors = ['#6366f1', '#22c55e', '#f59e0b', '#ef4444', '#a78bfa', '#818cf8', '#fb7185', '#38bdf8'];
    const shapes = ['square', 'circle'];

    for (let i = 0; i < 60; i++) {
      setTimeout(() => {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        const color = colors[Math.floor(Math.random() * colors.length)];
        const shape = shapes[Math.floor(Math.random() * shapes.length)];
        const size = 6 + Math.random() * 8;

        piece.style.width = size + 'px';
        piece.style.height = size + 'px';
        piece.style.background = color;
        piece.style.left = (10 + Math.random() * 80) + 'vw';
        piece.style.borderRadius = shape === 'circle' ? '50%' : '2px';

        document.body.appendChild(piece);

        const drift = (Math.random() - 0.5) * 200;
        const spin = Math.random() * 720 - 360;
        const duration = 2000 + Math.random() * 2000;

        piece.animate([
          { transform: `translateY(0) translateX(0) rotate(0deg)`, opacity: 1 },
          { transform: `translateY(100vh) translateX(${drift}px) rotate(${spin}deg)`, opacity: 0.2 }
        ], {
          duration: duration,
          easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',
          fill: 'forwards'
        });

        setTimeout(() => piece.remove(), duration);
      }, i * 40);
    }
  }
}

const app = new TriviaApp();
</script>
</body>
</html>
