<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Falling Fruit Catcher</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 100%);
            overflow: hidden;
            height: 100vh;
        }
        #gameCanvas { display: block; margin: 0 auto; }
        .ui {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .stat {
            display: inline-block;
            margin: 0 20px;
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 15px;
        }
        .game-over {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            text-align: center;
        }
        .game-over.show { display: block; }
        .game-over h2 {
            font-size: 42px;
            color: #e74c3c;
            margin-bottom: 20px;
        }
        .btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
            margin-top: 20px;
        }
        .btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="ui">
        <div class="stat">Score: <span id="score">0</span></div>
        <div class="stat">Missed: <span id="missed">0</span>/3</div>
    </div>
    <canvas id="gameCanvas"></canvas>
    <div class="game-over" id="gameOver">
        <h2>Game Over!</h2>
        <p style="font-size: 28px; margin: 20px 0;">Final Score: <span id="finalScore">0</span></p>
        <button class="btn" onclick="restartGame()">Play Again</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const fruits = ['ðŸŽ', 'ðŸŠ', 'ðŸŒ', 'ðŸ‡', 'ðŸ“', 'ðŸ’', 'ðŸ‘', 'ðŸ', 'ðŸ¥', 'ðŸ‰'];

        let basket = {
            x: canvas.width / 2,
            y: canvas.height - 80,
            width: 120,
            height: 60,
            speed: 8
        };

        let fallingObjects = [];
        let score = 0;
        let missed = 0;
        let gameActive = true;
        let keys = {};

        class FallingFruit {
            constructor() {
                this.emoji = fruits[Math.floor(Math.random() * fruits.length)];
                this.x = Math.random() * (canvas.width - 80) + 40;
                this.y = -60;
                this.size = 60;
                this.speed = 2 + Math.random() * 2;
            }

            update() {
                this.y += this.speed;
            }

            draw() {
                ctx.font = `${this.size}px Arial`;
                ctx.textAlign = 'center';
                ctx.fillText(this.emoji, this.x, this.y);
            }

            isOffScreen() {
                return this.y > canvas.height;
            }

            collidesWith(basket) {
                return (
                    this.x > basket.x &&
                    this.x < basket.x + basket.width &&
                    this.y + this.size > basket.y &&
                    this.y < basket.y + basket.height
                );
            }
        }

        function spawnFruit() {
            if (Math.random() < 0.02) {
                fallingObjects.push(new FallingFruit());
            }
        }

        function drawBasket() {
            // Basket
            ctx.fillStyle = '#8B4513';
            ctx.beginPath();
            ctx.moveTo(basket.x, basket.y + basket.height);
            ctx.lineTo(basket.x + 20, basket.y);
            ctx.lineTo(basket.x + basket.width - 20, basket.y);
            ctx.lineTo(basket.x + basket.width, basket.y + basket.height);
            ctx.closePath();
            ctx.fill();

            // Basket pattern
            ctx.strokeStyle = '#A0522D';
            ctx.lineWidth = 3;
            for (let i = 0; i < 5; i++) {
                ctx.beginPath();
                ctx.moveTo(basket.x + i * 25, basket.y);
                ctx.lineTo(basket.x + i * 25, basket.y + basket.height);
                ctx.stroke();
            }
        }

        function update() {
            if (!gameActive) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw ground
            ctx.fillStyle = '#90EE90';
            ctx.fillRect(0, canvas.height - 50, canvas.width, 50);

            // Update basket position
            if (keys['ArrowLeft'] && basket.x > 0) {
                basket.x -= basket.speed;
            }
            if (keys['ArrowRight'] && basket.x < canvas.width - basket.width) {
                basket.x += basket.speed;
            }

            drawBasket();

            // Update and draw falling fruits
            spawnFruit();

            fallingObjects.forEach((fruit, index) => {
                fruit.update();
                fruit.draw();

                if (fruit.collidesWith(basket)) {
                    score += 10;
                    document.getElementById('score').textContent = score;
                    fallingObjects.splice(index, 1);

                    // Particle effect
                    for (let i = 0; i < 10; i++) {
                        ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 60%)`;
                        ctx.beginPath();
                        ctx.arc(
                            fruit.x + (Math.random() - 0.5) * 40,
                            fruit.y + (Math.random() - 0.5) * 40,
                            Math.random() * 5 + 2,
                            0,
                            Math.PI * 2
                        );
                        ctx.fill();
                    }
                } else if (fruit.isOffScreen()) {
                    missed++;
                    document.getElementById('missed').textContent = missed;
                    fallingObjects.splice(index, 1);

                    if (missed >= 3) {
                        endGame();
                    }
                }
            });

            requestAnimationFrame(update);
        }

        function endGame() {
            gameActive = false;
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameOver').classList.add('show');
        }

        function restartGame() {
            fallingObjects = [];
            score = 0;
            missed = 0;
            gameActive = true;
            document.getElementById('score').textContent = '0';
            document.getElementById('missed').textContent = '0';
            document.getElementById('gameOver').classList.remove('show');
            basket.x = canvas.width / 2;
            update();
        }

        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // Mouse control
        canvas.addEventListener('mousemove', (e) => {
            basket.x = e.clientX - basket.width / 2;
        });

        // Touch control
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            basket.x = e.touches[0].clientX - basket.width / 2;
        });

        update();
    </script>
</body>
</html>