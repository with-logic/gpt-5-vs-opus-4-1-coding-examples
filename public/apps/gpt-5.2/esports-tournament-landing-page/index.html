<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark" />
    <title>Esports Tournament</title>
    <meta
      name="description"
      content="Neon, high-contrast esports tournament landing page: bracket, schedule, teams, stream preview, venue info, and tickets."
    />
    <style>
      :root {
        --bg0: #060612;
        --bg1: #090a1f;
        --card: rgba(255, 255, 255, 0.06);
        --card2: rgba(255, 255, 255, 0.08);
        --border: rgba(255, 255, 255, 0.12);
        --muted: rgba(255, 255, 255, 0.72);
        --muted2: rgba(255, 255, 255, 0.56);
        --text: rgba(255, 255, 255, 0.92);
        --shadow: 0 18px 60px rgba(0, 0, 0, 0.55);
        --shadow2: 0 10px 30px rgba(0, 0, 0, 0.45);
        --glowC: 0 0 24px rgba(64, 255, 220, 0.35);
        --glowM: 0 0 22px rgba(255, 62, 193, 0.33);
        --glowY: 0 0 22px rgba(255, 234, 138, 0.22);
        --aqua: #3cffd9;
        --mag: #ff3ec1;
        --vio: #8f6bff;
        --yel: #ffe58f;
        --good: #56ff9a;
        --warn: #ffd36a;
        --bad: #ff5b7b;
        --radius: 18px;
        --radius2: 14px;
        --pad: 18px;
        --max: 1160px;
        --ring: 0 0 0 3px rgba(60, 255, 217, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.12) inset;
        --speed: 1;
      }

      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        color: var(--text);
        background: radial-gradient(1200px 600px at 80% 5%, rgba(143, 107, 255, 0.18), transparent 55%),
          radial-gradient(900px 500px at 15% 15%, rgba(60, 255, 217, 0.12), transparent 60%),
          radial-gradient(900px 600px at 50% 80%, rgba(255, 62, 193, 0.1), transparent 60%),
          linear-gradient(180deg, var(--bg0), var(--bg1));
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji",
          "Segoe UI Emoji";
        line-height: 1.25;
        overflow-x: hidden;
      }
      a {
        color: inherit;
        text-decoration: none;
      }
      button,
      input,
      select,
      textarea {
        font: inherit;
        color: inherit;
      }
      ::selection {
        background: rgba(60, 255, 217, 0.25);
      }
      :focus-visible {
        outline: none;
        box-shadow: var(--ring);
        border-color: rgba(60, 255, 217, 0.55) !important;
      }

      .skip {
        position: absolute;
        left: -999px;
        top: 10px;
        padding: 10px 14px;
        background: rgba(0, 0, 0, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.18);
        border-radius: 12px;
        z-index: 9999;
      }
      .skip:focus {
        left: 12px;
      }

      .wrap {
        max-width: var(--max);
        margin: 0 auto;
        padding: 0 18px;
      }

      .topbar {
        position: sticky;
        top: 0;
        z-index: 40;
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        background: linear-gradient(180deg, rgba(8, 8, 24, 0.9), rgba(8, 8, 24, 0.6));
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      .topbar .row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 14px;
        padding: 12px 0;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 220px;
      }
      .badge {
        width: 38px;
        height: 38px;
        border-radius: 12px;
        background: radial-gradient(circle at 30% 20%, rgba(60, 255, 217, 0.9), rgba(255, 62, 193, 0.9) 55%, rgba(143, 107, 255, 0.9));
        box-shadow: var(--glowC), var(--glowM);
        position: relative;
      }
      .badge::after {
        content: "";
        position: absolute;
        inset: 1px;
        border-radius: 11px;
        background: linear-gradient(180deg, rgba(0, 0, 0, 0.25), transparent);
        border: 1px solid rgba(255, 255, 255, 0.18);
      }
      .brand h1 {
        margin: 0;
        font-size: 14px;
        letter-spacing: 0.14em;
        text-transform: uppercase;
      }
      .brand small {
        display: block;
        margin-top: 2px;
        font-size: 12px;
        color: var(--muted2);
        letter-spacing: 0.06em;
      }
      nav {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .navlink {
        font-size: 12px;
        color: var(--muted2);
        padding: 8px 10px;
        border-radius: 12px;
        border: 1px solid transparent;
        transition: background 140ms ease, border-color 140ms ease, color 140ms ease;
      }
      .navlink:hover {
        color: var(--text);
        border-color: rgba(255, 255, 255, 0.12);
        background: rgba(255, 255, 255, 0.05);
      }
      .navright {
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 220px;
        justify-content: flex-end;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(255, 255, 255, 0.06);
        color: var(--text);
        border-radius: 14px;
        padding: 10px 12px;
        cursor: pointer;
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
        transition: transform 140ms ease, background 140ms ease, border-color 140ms ease, box-shadow 140ms ease;
        user-select: none;
        text-transform: uppercase;
        font-size: 12px;
        letter-spacing: 0.12em;
        white-space: nowrap;
      }
      .btn:hover {
        transform: translateY(-1px);
        border-color: rgba(255, 255, 255, 0.22);
        background: rgba(255, 255, 255, 0.085);
        box-shadow: var(--shadow2);
      }
      .btn.primary {
        background: linear-gradient(135deg, rgba(60, 255, 217, 0.22), rgba(255, 62, 193, 0.18));
        border-color: rgba(60, 255, 217, 0.35);
        box-shadow: var(--glowC);
      }
      .btn.primary:hover {
        border-color: rgba(60, 255, 217, 0.55);
        box-shadow: var(--glowC), var(--shadow2);
      }
      .btn.mag {
        background: linear-gradient(135deg, rgba(255, 62, 193, 0.22), rgba(143, 107, 255, 0.15));
        border-color: rgba(255, 62, 193, 0.35);
        box-shadow: var(--glowM);
      }
      .btn.ghost {
        background: rgba(255, 255, 255, 0.04);
      }
      .btn.small {
        padding: 8px 10px;
        border-radius: 12px;
        font-size: 11px;
      }
      .btn.icon {
        width: 40px;
        height: 40px;
        padding: 0;
        border-radius: 14px;
      }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--muted);
        font-size: 12px;
      }

      .hero {
        position: relative;
        padding: 30px 0 32px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }
      .hero .grid {
        position: absolute;
        inset: 0;
        z-index: 0;
        pointer-events: none;
      }
      .hero .scanlines {
        position: absolute;
        inset: 0;
        z-index: 1;
        pointer-events: none;
        background: repeating-linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.06) 0px,
          rgba(255, 255, 255, 0.06) 1px,
          rgba(0, 0, 0, 0) 3px,
          rgba(0, 0, 0, 0) 6px
        );
        opacity: 0.12;
        mix-blend-mode: overlay;
      }
      .hero .noise {
        position: absolute;
        inset: 0;
        z-index: 1;
        pointer-events: none;
        background-image: radial-gradient(rgba(255, 255, 255, 0.22) 1px, rgba(0, 0, 0, 0) 1px);
        background-size: 3px 3px;
        opacity: 0.035;
        filter: blur(0.35px);
      }
      .hero .vignette {
        position: absolute;
        inset: -20px;
        z-index: 1;
        pointer-events: none;
        background: radial-gradient(900px 500px at 50% 20%, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.55));
      }
      .hero .content {
        position: relative;
        z-index: 3;
        display: grid;
        grid-template-columns: 1.3fr 0.7fr;
        gap: 18px;
        align-items: stretch;
        padding: 26px 0 10px;
      }
      .heroCard {
        border-radius: calc(var(--radius) + 6px);
        padding: 24px;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.07), rgba(255, 255, 255, 0.03));
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow);
        position: relative;
        overflow: hidden;
      }
      .heroCard::before {
        content: "";
        position: absolute;
        inset: -2px;
        background: radial-gradient(700px 240px at 30% 10%, rgba(60, 255, 217, 0.2), transparent 55%),
          radial-gradient(700px 240px at 80% 20%, rgba(255, 62, 193, 0.18), transparent 55%);
        opacity: 0.9;
      }
      .heroCard > * {
        position: relative;
        z-index: 1;
      }
      .kicker {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
      }
      .kicker .tag {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        font-size: 12px;
        letter-spacing: 0.14em;
        text-transform: uppercase;
        color: rgba(255, 255, 255, 0.8);
      }
      .kicker .dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        background: var(--aqua);
        box-shadow: var(--glowC);
      }
      .kicker .meta {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        color: var(--muted2);
        font-size: 12px;
      }
      .headline {
        margin: 14px 0 12px;
        font-size: clamp(34px, 4.2vw, 56px);
        letter-spacing: 0.02em;
        line-height: 1.02;
        text-transform: uppercase;
        text-shadow: 0 0 26px rgba(60, 255, 217, 0.15), 0 0 22px rgba(255, 62, 193, 0.12);
      }
      .subhead {
        margin: 0 0 18px;
        max-width: 62ch;
        color: rgba(255, 255, 255, 0.8);
        font-size: 15px;
        line-height: 1.55;
      }
      .heroActions {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
      }
      .heroStats {
        margin-top: 18px;
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 10px;
      }
      .stat {
        border-radius: 16px;
        padding: 12px 12px 10px;
        background: rgba(0, 0, 0, 0.22);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
      .stat strong {
        display: block;
        font-size: 18px;
        letter-spacing: 0.04em;
      }
      .stat span {
        display: block;
        margin-top: 6px;
        font-size: 11px;
        color: var(--muted2);
        text-transform: uppercase;
        letter-spacing: 0.12em;
      }
      .sidePanel {
        border-radius: calc(var(--radius) + 6px);
        padding: 18px;
        background: linear-gradient(180deg, rgba(0, 0, 0, 0.22), rgba(255, 255, 255, 0.03));
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow2);
        position: relative;
        overflow: hidden;
      }
      .sidePanel::after {
        content: "";
        position: absolute;
        inset: -1px;
        background: radial-gradient(520px 240px at 20% 0%, rgba(255, 229, 143, 0.12), transparent 60%),
          radial-gradient(520px 240px at 90% 20%, rgba(143, 107, 255, 0.14), transparent 60%);
        opacity: 0.95;
        pointer-events: none;
      }
      .sidePanel > * {
        position: relative;
        z-index: 1;
      }
      .countdown {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 10px;
        margin-top: 6px;
      }
      .timeBox {
        padding: 12px 10px 10px;
        border-radius: 16px;
        background: rgba(0, 0, 0, 0.24);
        border: 1px solid rgba(255, 255, 255, 0.12);
        text-align: center;
      }
      .timeBox strong {
        display: block;
        font-size: 22px;
        letter-spacing: 0.02em;
      }
      .timeBox span {
        display: block;
        margin-top: 6px;
        font-size: 11px;
        color: var(--muted2);
        text-transform: uppercase;
        letter-spacing: 0.12em;
      }
      .panelTitle {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      .panelTitle h2 {
        margin: 0;
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
      }
      .panelTitle .tz {
        font-size: 12px;
        color: var(--muted2);
      }
      .quickLinks {
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
        margin-top: 12px;
      }
      .miniCard {
        padding: 12px 12px 10px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
        transition: transform 140ms ease, background 140ms ease, border-color 140ms ease;
      }
      .miniCard:hover {
        transform: translateY(-1px);
        background: rgba(255, 255, 255, 0.07);
        border-color: rgba(255, 255, 255, 0.18);
      }
      .miniCard strong {
        display: block;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
      }
      .miniCard span {
        display: block;
        margin-top: 6px;
        color: var(--muted2);
        font-size: 12px;
        line-height: 1.35;
      }

      section {
        padding: 34px 0;
      }
      .sectionHead {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        gap: 14px;
        margin-bottom: 14px;
      }
      .sectionHead h3 {
        margin: 0;
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
      }
      .sectionHead p {
        margin: 0;
        color: var(--muted2);
        font-size: 13px;
        line-height: 1.45;
        max-width: 70ch;
      }
      .sectionBar {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      .field {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 14px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
      .field label {
        font-size: 12px;
        color: var(--muted2);
        text-transform: uppercase;
        letter-spacing: 0.12em;
      }
      select {
        appearance: none;
        -webkit-appearance: none;
        background: rgba(0, 0, 0, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.14);
        border-radius: 12px;
        padding: 8px 32px 8px 10px;
        cursor: pointer;
        min-width: 180px;
      }
      .selectWrap {
        position: relative;
        display: inline-block;
      }
      .selectWrap::after {
        content: "▾";
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-52%);
        font-size: 14px;
        color: rgba(255, 255, 255, 0.7);
        pointer-events: none;
      }

      .card {
        border-radius: var(--radius);
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.03));
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow2);
      }
      .cardPad {
        padding: var(--pad);
      }

      /* Bracket */
      .bracketShell {
        overflow: auto;
        border-radius: var(--radius);
        background: rgba(0, 0, 0, 0.16);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: var(--shadow2);
      }
      .bracket {
        display: grid;
        grid-auto-flow: column;
        grid-auto-columns: 280px;
        gap: 18px;
        padding: 16px;
        min-width: 980px;
      }
      .round {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .roundTitle {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 10px 12px;
        border-radius: 14px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
      .roundTitle strong {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }
      .roundTitle span {
        color: var(--muted2);
        font-size: 12px;
      }
      .match {
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
        overflow: hidden;
        position: relative;
      }
      .match::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(240px 120px at 20% 0%, rgba(60, 255, 217, 0.12), transparent 60%),
          radial-gradient(240px 120px at 90% 20%, rgba(255, 62, 193, 0.1), transparent 60%);
        opacity: 0.9;
        pointer-events: none;
      }
      .matchHead {
        position: relative;
        z-index: 1;
        padding: 10px 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }
      .matchHead small {
        font-size: 11px;
        color: var(--muted2);
        letter-spacing: 0.04em;
      }
      .matchBody {
        position: relative;
        z-index: 1;
        padding: 10px;
        display: grid;
        gap: 8px;
      }
      .slot {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 10px;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: rgba(0, 0, 0, 0.2);
        cursor: pointer;
        transition: transform 140ms ease, border-color 140ms ease, background 140ms ease;
      }
      .slot:hover {
        transform: translateY(-1px);
        border-color: rgba(60, 255, 217, 0.35);
        background: rgba(255, 255, 255, 0.05);
      }
      .slot[data-winner="true"] {
        border-color: rgba(86, 255, 154, 0.45);
        box-shadow: 0 0 0 1px rgba(86, 255, 154, 0.12) inset, 0 0 18px rgba(86, 255, 154, 0.16);
      }
      .slot[data-tbd="true"] {
        cursor: default;
        opacity: 0.72;
      }
      .logo {
        width: 28px;
        height: 28px;
        border-radius: 9px;
        overflow: hidden;
        flex: 0 0 auto;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.14);
      }
      .logo img {
        width: 100%;
        height: 100%;
        display: block;
      }
      .slotMain {
        display: flex;
        flex-direction: column;
        gap: 2px;
        min-width: 0;
      }
      .slotMain strong {
        font-size: 13px;
        letter-spacing: 0.02em;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .slotMain span {
        font-size: 11px;
        color: var(--muted2);
        letter-spacing: 0.04em;
      }
      .chip {
        font-size: 11px;
        padding: 5px 8px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: var(--muted);
        letter-spacing: 0.06em;
      }
      .chip.live {
        color: rgba(255, 255, 255, 0.92);
        border-color: rgba(255, 62, 193, 0.35);
        background: rgba(255, 62, 193, 0.12);
        box-shadow: 0 0 18px rgba(255, 62, 193, 0.16);
      }
      .progress {
        height: 8px;
        border-radius: 999px;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.07);
        border: 1px solid rgba(255, 255, 255, 0.1);
        width: 220px;
      }
      .progress > div {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, rgba(60, 255, 217, 0.75), rgba(255, 62, 193, 0.7), rgba(143, 107, 255, 0.75));
        box-shadow: var(--glowC), var(--glowM);
        transition: width 240ms ease;
      }

      /* Schedule */
      .scheduleGrid {
        display: grid;
        gap: 10px;
      }
      .matchRow {
        display: grid;
        grid-template-columns: 160px 1fr 180px auto;
        gap: 12px;
        align-items: center;
        padding: 12px 12px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
      .when strong {
        display: block;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }
      .when span {
        display: block;
        margin-top: 4px;
        color: var(--muted2);
        font-size: 12px;
      }
      .versus {
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 0;
      }
      .versus .vs {
        color: var(--muted2);
        font-size: 12px;
        letter-spacing: 0.2em;
      }
      .stageCell {
        display: flex;
        justify-content: flex-end;
      }
      .stageCell .chip {
        justify-self: end;
      }

      /* Teams */
      .teamsGrid {
        display: grid;
        grid-template-columns: repeat(12, minmax(0, 1fr));
        gap: 12px;
      }
      .teamCard {
        grid-column: span 4;
        border-radius: var(--radius);
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.03));
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow2);
        overflow: hidden;
        position: relative;
      }
      .teamCard::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(280px 160px at 20% 0%, rgba(60, 255, 217, 0.11), transparent 60%),
          radial-gradient(280px 160px at 90% 20%, rgba(255, 62, 193, 0.1), transparent 60%);
        opacity: 0.85;
        pointer-events: none;
      }
      .teamCard > * {
        position: relative;
        z-index: 1;
      }
      .teamTop {
        padding: 14px 14px 10px;
        display: flex;
        gap: 12px;
        align-items: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }
      .teamTop .logo {
        width: 40px;
        height: 40px;
        border-radius: 14px;
      }
      .teamName {
        min-width: 0;
        display: flex;
        flex-direction: column;
        gap: 3px;
      }
      .teamName strong {
        font-size: 14px;
        letter-spacing: 0.04em;
        text-transform: uppercase;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .teamName span {
        font-size: 12px;
        color: var(--muted2);
      }
      .teamBody {
        padding: 12px 14px 14px;
        display: grid;
        gap: 10px;
      }
      .roster {
        display: grid;
        gap: 6px;
      }
      .player {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        font-size: 12px;
        color: rgba(255, 255, 255, 0.84);
        padding: 8px 10px;
        border-radius: 14px;
        background: rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .player small {
        color: var(--muted2);
        text-transform: uppercase;
        letter-spacing: 0.12em;
        font-size: 11px;
      }
      .form {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
      }
      .form b {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 26px;
        height: 24px;
        border-radius: 10px;
        font-size: 11px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: rgba(255, 255, 255, 0.06);
      }
      .form b.w {
        border-color: rgba(86, 255, 154, 0.35);
        background: rgba(86, 255, 154, 0.12);
      }
      .form b.l {
        border-color: rgba(255, 91, 123, 0.35);
        background: rgba(255, 91, 123, 0.12);
      }
      .teamActions {
        display: flex;
        gap: 10px;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }
      .teamActions .btn {
        flex: 1 1 auto;
      }
      .metrics {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 8px;
      }
      .metric {
        padding: 10px 10px 9px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
      .metric strong {
        display: block;
        font-size: 14px;
      }
      .metric span {
        display: block;
        margin-top: 4px;
        font-size: 11px;
        color: var(--muted2);
        text-transform: uppercase;
        letter-spacing: 0.12em;
      }

      /* Stream */
      .streamGrid {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 12px;
      }
      .playerShell {
        border-radius: var(--radius);
        overflow: hidden;
        background: rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow2);
        position: relative;
      }
      .playerViewport {
        aspect-ratio: 16/9;
        background: radial-gradient(900px 380px at 40% 10%, rgba(60, 255, 217, 0.14), transparent 60%),
          radial-gradient(900px 380px at 70% 30%, rgba(255, 62, 193, 0.12), transparent 65%),
          linear-gradient(135deg, rgba(0, 0, 0, 0.6), rgba(255, 255, 255, 0.05));
        position: relative;
        overflow: hidden;
      }
      .playerViewport::before {
        content: "";
        position: absolute;
        inset: -60px;
        background: radial-gradient(circle at 30% 20%, rgba(60, 255, 217, 0.18), transparent 52%),
          radial-gradient(circle at 70% 30%, rgba(255, 62, 193, 0.16), transparent 55%),
          radial-gradient(circle at 50% 80%, rgba(143, 107, 255, 0.14), transparent 55%);
        filter: blur(10px);
        opacity: 0.85;
      }
      .playerViewport[data-playing="true"]::after {
        content: "";
        position: absolute;
        inset: -30%;
        background: conic-gradient(
          from 120deg,
          rgba(60, 255, 217, 0) 0%,
          rgba(60, 255, 217, 0.14) 12%,
          rgba(255, 62, 193, 0.12) 22%,
          rgba(143, 107, 255, 0.14) 34%,
          rgba(255, 229, 143, 0.12) 48%,
          rgba(60, 255, 217, 0) 60%
        );
        animation: spin calc(9.2s / var(--speed)) linear infinite;
        opacity: 0.7;
        mix-blend-mode: screen;
      }
      .playerHUD {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 14px;
        z-index: 2;
      }
      .hudTop {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      .livePill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 999px;
        background: rgba(255, 62, 193, 0.14);
        border: 1px solid rgba(255, 62, 193, 0.4);
        box-shadow: 0 0 18px rgba(255, 62, 193, 0.2);
        text-transform: uppercase;
        letter-spacing: 0.14em;
        font-size: 11px;
      }
      .blink {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        background: var(--mag);
        box-shadow: 0 0 20px rgba(255, 62, 193, 0.45);
        animation: blink calc(1.2s / var(--speed)) ease-in-out infinite;
      }
      .hudBottom {
        display: grid;
        gap: 10px;
      }
      .ticker {
        padding: 10px 12px;
        border-radius: 16px;
        background: rgba(0, 0, 0, 0.24);
        border: 1px solid rgba(255, 255, 255, 0.12);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        overflow: hidden;
      }
      .ticker strong {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        color: rgba(255, 255, 255, 0.86);
        flex: 0 0 auto;
      }
      .ticker span {
        color: rgba(255, 255, 255, 0.82);
        font-size: 12px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .ticker .nowNext {
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-width: 0;
      }
      .playRow {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }
      .playHint {
        font-size: 12px;
        color: var(--muted2);
        line-height: 1.35;
      }
      .sponsors {
        border-radius: var(--radius);
        background: rgba(0, 0, 0, 0.16);
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow2);
        overflow: hidden;
      }
      .sponsorsHead {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 14px 14px 12px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }
      .sponsorsHead strong {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
      }
      .marquee {
        display: flex;
        gap: 10px;
        padding: 12px 12px 14px;
        overflow: hidden;
        position: relative;
      }
      .marqueeTrack {
        display: flex;
        gap: 10px;
        animation: marquee calc(14s / var(--speed)) linear infinite;
        will-change: transform;
      }
      .slogo {
        flex: 0 0 auto;
        width: 140px;
        height: 54px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.12);
        display: grid;
        place-items: center;
        color: rgba(255, 255, 255, 0.82);
        letter-spacing: 0.12em;
        text-transform: uppercase;
        font-size: 12px;
      }

      /* Venue */
      .venueGrid {
        display: grid;
        grid-template-columns: 1.1fr 0.9fr;
        gap: 12px;
      }
      .mapShell {
        border-radius: var(--radius);
        overflow: hidden;
        background: rgba(0, 0, 0, 0.16);
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow2);
      }
      .mapShell img {
        width: 100%;
        height: auto;
        display: block;
      }
      .list {
        display: grid;
        gap: 10px;
      }
      .listItem {
        padding: 12px 12px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
      }
      .listItem strong {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }
      .listItem span {
        display: block;
        margin-top: 6px;
        color: var(--muted2);
        font-size: 12px;
        line-height: 1.35;
      }
      .notes {
        display: grid;
        gap: 10px;
      }
      .note {
        padding: 12px 12px;
        border-radius: 16px;
        background: rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
      .note strong {
        display: block;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }
      .note span {
        display: block;
        margin-top: 6px;
        color: var(--muted2);
        font-size: 12px;
        line-height: 1.45;
      }

      /* Social */
      .socialGrid {
        display: grid;
        grid-template-columns: 0.9fr 1.1fr;
        gap: 12px;
      }
      .counts {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 10px;
      }
      .countCard {
        padding: 14px 12px 12px;
        border-radius: var(--radius);
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow2);
      }
      .countCard strong {
        display: block;
        font-size: 22px;
      }
      .countCard span {
        display: block;
        margin-top: 6px;
        font-size: 11px;
        color: var(--muted2);
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }
      .testimonials {
        display: grid;
        gap: 10px;
      }
      blockquote {
        margin: 0;
        padding: 14px 14px;
        border-radius: var(--radius);
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow2);
      }
      blockquote p {
        margin: 0;
        color: rgba(255, 255, 255, 0.86);
        line-height: 1.55;
        font-size: 13px;
      }
      blockquote footer {
        margin-top: 10px;
        color: var(--muted2);
        font-size: 12px;
        display: flex;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
      }
      .highlights {
        border-radius: var(--radius);
        background: rgba(0, 0, 0, 0.16);
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: var(--shadow2);
        overflow: hidden;
      }
      .highHead {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 14px 14px 12px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }
      .highHead strong {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
      }
      .carousel {
        position: relative;
        overflow: hidden;
      }
      .track {
        display: flex;
        transition: transform 420ms cubic-bezier(0.2, 0.9, 0.2, 1);
        will-change: transform;
      }
      .slide {
        flex: 0 0 100%;
        padding: 14px;
        display: grid;
        grid-template-columns: 0.9fr 1.1fr;
        gap: 12px;
        align-items: center;
      }
      .thumb {
        border-radius: 18px;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
        aspect-ratio: 16/9;
      }
      .thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .slideText h4 {
        margin: 0;
        font-size: 16px;
        letter-spacing: 0.02em;
      }
      .slideText p {
        margin: 8px 0 12px;
        color: var(--muted2);
        font-size: 13px;
        line-height: 1.5;
      }
      .carBtns {
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: flex-end;
      }

      /* Footer */
      footer {
        padding: 28px 0 80px;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
        background: linear-gradient(180deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.22));
      }
      .footGrid {
        display: grid;
        grid-template-columns: 1.05fr 0.95fr;
        gap: 12px;
      }
      details {
        padding: 12px 12px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
      summary {
        cursor: pointer;
        list-style: none;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }
      summary::-webkit-details-marker {
        display: none;
      }
      details p {
        margin: 10px 0 0;
        color: var(--muted2);
        font-size: 13px;
        line-height: 1.5;
      }
      .formGrid {
        display: grid;
        gap: 10px;
      }
      .formRow {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      input,
      textarea {
        width: 100%;
        padding: 12px 12px;
        border-radius: 16px;
        background: rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.14);
      }
      textarea {
        min-height: 110px;
        resize: vertical;
      }
      .footLinks {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
      }
      .fine {
        margin-top: 14px;
        color: rgba(255, 255, 255, 0.55);
        font-size: 12px;
        line-height: 1.45;
      }

      /* Compare drawer */
      .compare {
        position: fixed;
        left: 12px;
        right: 12px;
        bottom: 12px;
        z-index: 60;
        border-radius: 18px;
        background: rgba(8, 8, 24, 0.88);
        border: 1px solid rgba(255, 255, 255, 0.14);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        box-shadow: 0 26px 90px rgba(0, 0, 0, 0.6);
        display: none;
      }
      .compare[data-open="true"] {
        display: block;
      }
      .compare .inner {
        padding: 12px 12px;
        display: grid;
        gap: 10px;
      }
      .compareTop {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
      }
      .compareTop strong {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
      }
      .compareSlots {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      .compareSlot {
        padding: 10px 10px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }
      .compareSlot .left {
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 0;
      }
      .compareSlot .name {
        min-width: 0;
      }
      .compareSlot .name b {
        display: block;
        font-size: 12px;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .compareSlot .name small {
        display: block;
        margin-top: 3px;
        color: var(--muted2);
        font-size: 12px;
      }
      .compareTable {
        display: grid;
        grid-template-columns: 140px 1fr 1fr;
        gap: 8px;
        align-items: center;
      }
      .compareTable .h {
        color: var(--muted2);
        font-size: 11px;
        letter-spacing: 0.14em;
        text-transform: uppercase;
      }
      .compareTable .cell {
        padding: 10px 10px;
        border-radius: 14px;
        background: rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.12);
        font-size: 12px;
      }

      /* Toast + modal */
      .toast {
        position: fixed;
        right: 14px;
        bottom: 14px;
        z-index: 80;
        min-width: 260px;
        max-width: min(420px, calc(100vw - 28px));
        border-radius: 18px;
        background: rgba(8, 8, 24, 0.9);
        border: 1px solid rgba(255, 255, 255, 0.14);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        box-shadow: 0 26px 80px rgba(0, 0, 0, 0.58);
        padding: 12px 12px;
        display: none;
      }
      .toast[data-open="true"] {
        display: block;
        animation: pop calc(220ms / var(--speed)) ease-out;
      }
      .toast strong {
        display: block;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }
      .toast span {
        display: block;
        margin-top: 6px;
        color: var(--muted2);
        font-size: 13px;
        line-height: 1.45;
      }
      dialog {
        width: min(900px, calc(100vw - 28px));
        border: none;
        padding: 0;
        border-radius: 18px;
        background: rgba(10, 10, 26, 0.92);
        color: var(--text);
        border: 1px solid rgba(255, 255, 255, 0.16);
        box-shadow: 0 28px 120px rgba(0, 0, 0, 0.68);
      }
      dialog::backdrop {
        background: rgba(0, 0, 0, 0.68);
      }
      .modalHead {
        padding: 14px 14px 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      .modalHead strong {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
      }
      .modalBody {
        padding: 14px;
      }
      .modalGrid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      .modalCard {
        padding: 14px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
      .modalCard h4 {
        margin: 0 0 8px;
        font-size: 14px;
        letter-spacing: 0.02em;
      }
      .modalCard p {
        margin: 0 0 12px;
        color: var(--muted2);
        font-size: 13px;
        line-height: 1.5;
      }

      /* Mobile sticky CTA */
      .stickyCta {
        display: none;
        position: fixed;
        left: 12px;
        right: 12px;
        bottom: 12px;
        z-index: 55;
      }
      .stickyCta .bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 10px 10px;
        border-radius: 18px;
        background: rgba(8, 8, 24, 0.88);
        border: 1px solid rgba(255, 255, 255, 0.14);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        box-shadow: 0 26px 90px rgba(0, 0, 0, 0.6);
      }
      .stickyCta .bar span {
        font-size: 12px;
        color: var(--muted2);
      }

      /* Reveal-on-scroll */
      .reveal {
        opacity: 0;
        transform: translateY(10px);
        transition: opacity calc(500ms / var(--speed)) ease, transform calc(500ms / var(--speed)) ease;
      }
      .reveal[data-in="true"] {
        opacity: 1;
        transform: translateY(0px);
      }

      /* Responsive */
      @media (max-width: 980px) {
        .hero .content {
          grid-template-columns: 1fr;
        }
        .heroStats {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        .streamGrid,
        .venueGrid,
        .socialGrid,
        .footGrid {
          grid-template-columns: 1fr;
        }
        .matchRow {
          grid-template-columns: 1fr;
          gap: 10px;
        }
        .stageCell {
          justify-content: flex-start;
        }
        select {
          min-width: 160px;
        }
      }
      @media (max-width: 860px) {
        .teamCard {
          grid-column: span 6;
        }
      }
      @media (max-width: 560px) {
        nav {
          display: none;
        }
        .navright {
          min-width: auto;
        }
        .brand {
          min-width: auto;
        }
        .teamCard {
          grid-column: span 12;
        }
        .stickyCta {
          display: block;
        }
        footer {
          padding-bottom: 130px;
        }
        .compareSlots {
          grid-template-columns: 1fr;
        }
        .compareTable {
          grid-template-columns: 110px 1fr 1fr;
        }
      }

      /* Motion preferences */
      @media (prefers-reduced-motion: reduce) {
        :root {
          --speed: 0.0001;
        }
        * {
          scroll-behavior: auto !important;
          transition: none !important;
          animation: none !important;
        }
      }

      /* Animations */
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      @keyframes blink {
        0%,
        100% {
          transform: scale(0.9);
          opacity: 0.55;
        }
        50% {
          transform: scale(1.1);
          opacity: 1;
        }
      }
      @keyframes marquee {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(-50%);
        }
      }
      @keyframes pop {
        from {
          transform: translateY(6px);
          opacity: 0.2;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <a class="skip" href="#main">Skip to content</a>

    <header class="topbar" role="banner">
      <div class="wrap">
        <div class="row">
          <a class="brand" href="#top" aria-label="Esports Tournament home">
            <span class="badge" aria-hidden="true"></span>
            <span>
              <h1>Esports Tournament</h1>
              <small id="eventMeta">Neon Arena • World Finals</small>
            </span>
          </a>

          <nav aria-label="Primary">
            <a class="navlink" href="#bracket">Bracket</a>
            <a class="navlink" href="#schedule">Schedule</a>
            <a class="navlink" href="#teams">Teams</a>
            <a class="navlink" href="#stream">Stream</a>
            <a class="navlink" href="#venue">Venue</a>
            <a class="navlink" href="#social">Highlights</a>
            <a class="navlink" href="#faq">FAQ</a>
          </nav>

          <div class="navright">
            <button class="btn small ghost" id="btnTheme" type="button" title="Toggle intensity">
              Intensity
            </button>
            <button class="btn small primary" id="btnTicketsTop" type="button">Buy Tickets</button>
          </div>
        </div>
      </div>
    </header>

    <main id="main" tabindex="-1">
      <section class="hero" id="top" aria-label="Hero">
        <canvas class="grid" id="heroCanvas" aria-hidden="true"></canvas>
        <div class="scanlines" aria-hidden="true"></div>
        <div class="noise" aria-hidden="true"></div>
        <div class="vignette" aria-hidden="true"></div>
        <div class="wrap">
          <div class="content">
            <div class="heroCard">
              <div class="kicker">
                <div class="tag">
                  <span class="dot" aria-hidden="true"></span>
                  <span>Neon Arena Invitational</span>
                </div>
                <div class="meta">
                  <span id="eventDatePill" class="pill">Aug 23–25 • Night City</span>
                  <span class="pill" title="Prize pool">$750,000</span>
                </div>
              </div>
              <h2 class="headline">Where Teams Become Legends</h2>
              <p class="subhead">
                High-stakes playoffs. Live crowd energy. Laser-cut production. Your next highlight reel starts here—register your squad,
                lock your seats, or tune in for the live broadcast.
              </p>
              <div class="heroActions" aria-label="Primary actions">
                <button class="btn primary" id="btnRegister" type="button">Register Team</button>
                <button class="btn mag" id="btnTickets" type="button">Get Tickets</button>
                <button class="btn ghost" id="btnWatch" type="button">Watch Live</button>
                <span class="pill" id="tzLabel" title="Times shown in your local timezone">TZ: …</span>
              </div>
              <div class="heroStats" aria-label="Event stats">
                <div class="stat">
                  <strong id="statTeams">16</strong>
                  <span>Teams</span>
                </div>
                <div class="stat">
                  <strong id="statMatches">31</strong>
                  <span>Matches</span>
                </div>
                <div class="stat">
                  <strong id="statStages">4</strong>
                  <span>Stages</span>
                </div>
                <div class="stat">
                  <strong id="statVenue">12K</strong>
                  <span>Seats</span>
                </div>
              </div>
            </div>

            <aside class="sidePanel" aria-label="Countdown and quick info">
              <div class="panelTitle">
                <h2>Countdown</h2>
                <span class="tz" id="tzLong">Local time</span>
              </div>
              <div class="countdown" aria-live="polite">
                <div class="timeBox"><strong id="cdD">--</strong><span>Days</span></div>
                <div class="timeBox"><strong id="cdH">--</strong><span>Hours</span></div>
                <div class="timeBox"><strong id="cdM">--</strong><span>Minutes</span></div>
                <div class="timeBox"><strong id="cdS">--</strong><span>Seconds</span></div>
              </div>
              <div class="quickLinks" style="margin-top: 12px">
                <a class="miniCard" href="#bracket">
                  <strong>Interactive Bracket</strong>
                  <span>Hover for match times, click to advance winners, or enable auto-advance demo mode.</span>
                </a>
                <a class="miniCard" href="#schedule">
                  <strong>Schedule + Calendar</strong>
                  <span>Filter by stage/day and export ICS with one click—timezone-aware by default.</span>
                </a>
                <a class="miniCard" href="#venue">
                  <strong>Venue & Travel</strong>
                  <span>Map, directions, hotels, accessibility + safety notes for a smooth arrival.</span>
                </a>
              </div>
            </aside>
          </div>
        </div>
      </section>

      <section id="bracket" aria-label="Interactive bracket">
        <div class="wrap reveal">
          <div class="sectionHead">
            <div>
              <h3>Interactive Bracket</h3>
              <p>
                Neon-lit bracket with hover states, match times, logos, and a demo mode that auto-advances winners for a live showcase.
              </p>
            </div>
            <div class="sectionBar">
              <span class="field">
                <label for="bracketSize">Size</label>
                <span class="selectWrap">
                  <select id="bracketSize">
                    <option value="16" selected>16 teams</option>
                    <option value="8">8 teams</option>
                  </select>
                </span>
              </span>
              <button class="btn small ghost" id="btnResetBracket" type="button">Reset</button>
              <button class="btn small primary" id="btnDemo" type="button" aria-pressed="false">Demo: Off</button>
              <span class="progress" aria-label="Demo progress"><div id="demoProgress"></div></span>
            </div>
          </div>

          <div class="bracketShell" role="region" aria-label="Bracket scroll area">
            <div class="bracket" id="bracketRoot" aria-live="polite"></div>
          </div>
          <p class="fine" style="margin-top: 10px">
            Tip: Click a team to mark them the winner. Demo mode advances one match every few seconds.
          </p>
        </div>
      </section>

      <section id="schedule" aria-label="Schedule">
        <div class="wrap reveal">
          <div class="sectionHead">
            <div>
              <h3>Schedule</h3>
              <p>
                All times automatically displayed in your timezone. Filter by stage/day and export calendar invites (.ics) for single
                matches or the full event.
              </p>
            </div>
            <div class="sectionBar">
              <span class="field">
                <label for="stageFilter">Stage</label>
                <span class="selectWrap"><select id="stageFilter"></select></span>
              </span>
              <span class="field">
                <label for="dayFilter">Day</label>
                <span class="selectWrap"><select id="dayFilter"></select></span>
              </span>
              <button class="btn small mag" id="btnIcsAll" type="button">Add Full Schedule</button>
            </div>
          </div>
          <div class="card cardPad">
            <div class="scheduleGrid" id="scheduleList"></div>
          </div>
        </div>
      </section>

      <section id="teams" aria-label="Teams">
        <div class="wrap reveal">
          <div class="sectionHead">
            <div>
              <h3>Teams</h3>
              <p>
                Rosters, roles, flags, and recent form. Add up to two teams to the compare bar for quick side-by-side stats.
              </p>
            </div>
            <div class="sectionBar">
              <span class="pill" id="compareHint">Compare: select up to 2 teams</span>
            </div>
          </div>
          <div class="teamsGrid" id="teamsGrid"></div>
        </div>
      </section>

      <section id="stream" aria-label="Stream preview">
        <div class="wrap reveal">
          <div class="sectionHead">
            <div>
              <h3>Stream Preview</h3>
              <p>Embedded-style placeholder player with a Now/Next ticker and a sponsor carousel.</p>
            </div>
            <div class="sectionBar">
              <button class="btn small ghost" id="btnStreamQuality" type="button">Quality: Auto</button>
              <button class="btn small primary" id="btnGoLive" type="button">Open Watch Mode</button>
            </div>
          </div>
          <div class="streamGrid">
            <div class="playerShell" role="region" aria-label="Stream player">
              <div class="playerViewport" id="playerViewport" data-playing="false" role="img" aria-label="Stream placeholder">
                <div class="playerHUD">
                  <div class="hudTop">
                    <span class="livePill"><span class="blink" aria-hidden="true"></span> LIVE</span>
                    <span class="pill" id="viewerCount">Viewers: 0</span>
                  </div>
                  <div class="hudBottom">
                    <div class="ticker" aria-live="polite">
                      <strong>Now/Next</strong>
                      <div class="nowNext" style="min-width: 0">
                        <span id="tickerNow">Loading…</span>
                        <span id="tickerNext" style="color: rgba(255,255,255,0.72)">…</span>
                      </div>
                      <button class="btn small mag" id="btnPlayerToggle" type="button">Play</button>
                    </div>
                    <div class="playRow">
                      <div class="playHint">
                        Click Play to simulate a broadcast pulse and update the ticker from the schedule.
                      </div>
                      <span class="pill" id="broadcastNote">Latency: 3.2s</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <aside class="sponsors" aria-label="Sponsors">
              <div class="sponsorsHead">
                <strong>Powered By</strong>
                <span class="pill">Sponsor carousel</span>
              </div>
              <div class="marquee" aria-hidden="true">
                <div class="marqueeTrack" id="sponsorTrack"></div>
                <div class="marqueeTrack" id="sponsorTrack2"></div>
              </div>
              <div class="cardPad">
                <div class="notes">
                  <div class="note">
                    <strong>Now Streaming</strong>
                    <span id="nowStreaming">Stage feed • Player cams • Tactical replay</span>
                  </div>
                  <div class="note">
                    <strong>Get Notified</strong>
                    <span>Enable reminders via the schedule’s calendar export, then follow your favorite teams.</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>
      </section>

      <section id="venue" aria-label="Venue and travel">
        <div class="wrap reveal">
          <div class="sectionHead">
            <div>
              <h3>Venue & Travel</h3>
              <p>Map image, directions links, hotels, plus accessibility and safety notes.</p>
            </div>
            <div class="sectionBar">
              <a class="btn small ghost" id="dirGoogle" href="#" target="_blank" rel="noreferrer noopener">Google Maps</a>
              <a class="btn small ghost" id="dirApple" href="#" target="_blank" rel="noreferrer noopener">Apple Maps</a>
              <a class="btn small primary" href="#faq">Access & Safety</a>
            </div>
          </div>

          <div class="venueGrid">
            <div class="mapShell card" aria-label="Map">
              <img id="mapImg" loading="lazy" alt="Venue map illustration" />
            </div>
            <div class="card cardPad">
              <div class="list" aria-label="Hotels">
                <div class="listItem">
                  <div>
                    <strong>Neon Harbor Hotel</strong>
                    <span>8 min walk • late check-in • quiet floors • breakfast included</span>
                  </div>
                  <span class="chip">$149+</span>
                </div>
                <div class="listItem">
                  <div>
                    <strong>Skyline Suites</strong>
                    <span>3 stops by metro • gym • accessible rooms • 24/7 concierge</span>
                  </div>
                  <span class="chip">$129+</span>
                </div>
                <div class="listItem">
                  <div>
                    <strong>Arcade District Inn</strong>
                    <span>Ride-share pickup zone • fan-friendly • esports bar nearby</span>
                  </div>
                  <span class="chip">$119+</span>
                </div>
              </div>
              <div class="notes" style="margin-top: 10px">
                <div class="note">
                  <strong>Accessibility</strong>
                  <span>Step-free entry, reserved seating, ASL upon request, and low-sensory viewing areas.</span>
                </div>
                <div class="note">
                  <strong>Safety</strong>
                  <span>Bag checks, water stations, and clearly marked quiet zones. Staff trained for crowd flow and emergencies.</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="social" aria-label="Social proof and highlights">
        <div class="wrap reveal">
          <div class="sectionHead">
            <div>
              <h3>Social Proof</h3>
              <p>Testimonials, follower counts, and a highlights carousel—built to feel alive without overwhelming motion.</p>
            </div>
            <div class="sectionBar">
              <button class="btn small ghost" id="btnShare" type="button">Copy Share Link</button>
              <button class="btn small primary" id="btnOpenHighlights" type="button">Open Highlights</button>
            </div>
          </div>
          <div class="socialGrid">
            <div>
              <div class="counts" aria-label="Follower counts">
                <div class="countCard">
                  <strong data-count="482000" class="countNum">0</strong>
                  <span>Followers</span>
                </div>
                <div class="countCard">
                  <strong data-count="1280000" class="countNum">0</strong>
                  <span>Views (30d)</span>
                </div>
                <div class="countCard">
                  <strong data-count="64000" class="countNum">0</strong>
                  <span>Discord</span>
                </div>
              </div>
              <div class="testimonials" aria-label="Testimonials" style="margin-top: 12px">
                <blockquote>
                  <p>“The production is unreal—every round feels like a final. The bracket UI alone is worth the hype.”</p>
                  <footer>
                    <span>— Mira “Pulse” K.</span>
                    <span>Fan since 2021</span>
                  </footer>
                </blockquote>
                <blockquote>
                  <p>“Scheduling across timezones is usually a nightmare. Here it’s one click to add matches to my calendar.”</p>
                  <footer>
                    <span>— Jay R.</span>
                    <span>Team Manager</span>
                  </footer>
                </blockquote>
                <blockquote>
                  <p>“Fast, clean, and responsive. Looks like a premium landing page on desktop and mobile.”</p>
                  <footer>
                    <span>— Sera T.</span>
                    <span>Creator</span>
                  </footer>
                </blockquote>
              </div>
            </div>

            <div class="highlights" aria-label="Highlights carousel">
              <div class="highHead">
                <strong>Recent Highlights</strong>
                <div class="carBtns">
                  <button class="btn icon ghost" id="carPrev" type="button" aria-label="Previous highlight">‹</button>
                  <button class="btn icon ghost" id="carNext" type="button" aria-label="Next highlight">›</button>
                </div>
              </div>
              <div class="carousel" id="carousel">
                <div class="track" id="highTrack"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer id="faq" aria-label="Footer">
      <div class="wrap reveal">
        <div class="sectionHead">
          <div>
            <h3>FAQ, Rules & Contact</h3>
            <p>Everything you need: FAQs, rules PDF, code of conduct, and a quick contact form.</p>
          </div>
          <div class="sectionBar">
            <a class="btn small ghost" id="rulesPdf" href="#" download="EsportsTournament-Rules.pdf">Rules PDF</a>
            <button class="btn small ghost" id="btnConduct" type="button">Code of Conduct</button>
            <button class="btn small primary" id="btnContactFocus" type="button">Contact</button>
          </div>
        </div>
        <div class="footGrid">
          <div class="card cardPad" aria-label="FAQs">
            <div class="list" style="gap: 10px">
              <details>
                <summary>
                  How do we register a team?
                  <span class="chip">Teams</span>
                </summary>
                <p>
                  Use “Register Team” to open a quick form and receive a demo confirmation. In a real integration, this would submit to
                  tournament ops.
                </p>
              </details>
              <details>
                <summary>
                  What’s the format?
                  <span class="chip">Bracket</span>
                </summary>
                <p>
                  16-team single elimination on stage, with a short group warm-up for seeding. This demo includes a bracket switch for 8
                  teams as well.
                </p>
              </details>
              <details>
                <summary>
                  Are times timezone-aware?
                  <span class="chip">Schedule</span>
                </summary>
                <p>Yes—rendered via <code>Intl.DateTimeFormat</code> and exportable as .ics. You can add individual matches or the full event.</p>
              </details>
              <details>
                <summary>
                  What should I bring?
                  <span class="chip">Venue</span>
                </summary>
                <p>
                  Photo ID, ticket QR code, and a small bag. Water stations are available. Bag checks and accessibility support are onsite.
                </p>
              </details>
              <details>
                <summary>
                  Where do I report issues?
                  <span class="chip">Safety</span>
                </summary>
                <p>
                  Use the contact form or find staff in neon vests. We aim for a safe, inclusive, harassment-free event for everyone.
                </p>
              </details>
            </div>
            <div class="footLinks">
              <a class="btn small ghost" href="#schedule">Schedule</a>
              <a class="btn small ghost" href="#teams">Teams</a>
              <a class="btn small ghost" href="#venue">Travel</a>
              <button class="btn small mag" id="btnTicketsFoot" type="button">Buy Tickets</button>
            </div>
            <p class="fine">
              Demo implementation: interactions and assets are simulated for a fully self-contained single-file experience. Built with
              lazy-loaded images, accessible controls, and reduced-motion support.
            </p>
          </div>

          <div class="card cardPad" aria-label="Contact form">
            <div class="panelTitle" style="margin-bottom: 10px">
              <h2>Contact</h2>
              <span class="tz">Response within 24h (demo)</span>
            </div>
            <form class="formGrid" id="contactForm">
              <div class="formRow">
                <input id="contactName" name="name" autocomplete="name" placeholder="Name" required />
                <input id="contactEmail" name="email" type="email" autocomplete="email" placeholder="Email" required />
              </div>
              <input id="contactTopic" name="topic" placeholder="Topic (tickets, teams, media…)" required />
              <textarea id="contactMsg" name="message" placeholder="Message" required></textarea>
              <div style="display: flex; gap: 10px; align-items: center; justify-content: space-between; flex-wrap: wrap">
                <span class="pill" id="privacyNote">We’ll never sell your data (demo).</span>
                <button class="btn primary" type="submit">Send Message</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </footer>

    <div class="stickyCta" aria-label="Mobile buy tickets">
      <div class="bar">
        <span>Tickets are moving fast</span>
        <button class="btn mag" id="btnStickyTickets" type="button">Buy Tickets</button>
      </div>
    </div>

    <div class="compare" id="compare" data-open="false" aria-label="Team compare bar">
      <div class="inner">
        <div class="compareTop">
          <strong>Quick Compare</strong>
          <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap">
            <span class="pill" id="compareStatus">Select up to 2 teams</span>
            <button class="btn small ghost" id="btnCompareClear" type="button">Clear</button>
          </div>
        </div>
        <div class="compareSlots" id="compareSlots"></div>
        <div class="compareTable" id="compareTable" aria-label="Comparison table"></div>
      </div>
    </div>

    <div class="toast" id="toast" role="status" aria-live="polite" data-open="false">
      <strong id="toastTitle">Saved</strong>
      <span id="toastMsg">Done.</span>
    </div>

    <dialog id="modal">
      <div class="modalHead">
        <strong id="modalTitle">Modal</strong>
        <button class="btn icon ghost" id="modalClose" type="button" aria-label="Close modal">✕</button>
      </div>
      <div class="modalBody" id="modalBody"></div>
    </dialog>

    <script>
      (() => {
        const $ = (sel, root = document) => root.querySelector(sel);
        const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

        const prefersReducedMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

        const formatCompactNumber = (n) =>
          new Intl.NumberFormat(undefined, { notation: "compact", maximumFractionDigits: 1 }).format(n);

        const pad2 = (n) => String(n).padStart(2, "0");
        const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

        const toast = (() => {
          const root = $("#toast");
          const title = $("#toastTitle");
          const msg = $("#toastMsg");
          let t = 0;
          return {
            show: (tTitle, tMsg) => {
              title.textContent = tTitle;
              msg.textContent = tMsg;
              root.dataset.open = "true";
              window.clearTimeout(t);
              t = window.setTimeout(() => (root.dataset.open = "false"), prefersReducedMotion ? 1200 : 2600);
            },
          };
        })();

        // Smooth anchors (avoid if reduced motion)
        document.addEventListener("click", (e) => {
          const a = e.target.closest("a[href^='#']");
          if (!a) return;
          const id = a.getAttribute("href");
          if (!id || id === "#") return;
          const el = document.querySelector(id);
          if (!el) return;
          e.preventDefault();
          el.scrollIntoView({ behavior: prefersReducedMotion ? "auto" : "smooth", block: "start" });
          history.replaceState(null, "", id);
        });

        // Theme intensity toggle (subtle effect without reflow)
        const intensityBtn = $("#btnTheme");
        const intensity = { level: 2 }; // 1 low, 2 high
        intensityBtn.addEventListener("click", () => {
          intensity.level = intensity.level === 2 ? 1 : 2;
          document.documentElement.style.setProperty("--speed", prefersReducedMotion ? "0.0001" : intensity.level === 2 ? "1" : "0.85");
          document.documentElement.style.setProperty("--shadow", intensity.level === 2 ? "0 18px 60px rgba(0,0,0,0.55)" : "0 18px 60px rgba(0,0,0,0.45)");
          toast.show("Intensity", intensity.level === 2 ? "Neon glow: high contrast." : "Neon glow: balanced.");
        });

        // Event data
        const EVENT = {
          name: "Neon Arena Invitational",
          city: "Night City",
          venue: "Neon Arena",
          startUTC: "2026-08-23T18:00:00Z",
          endUTC: "2026-08-25T23:00:00Z",
          mapLat: 37.7849,
          mapLng: -122.4075,
          tzName: (() => {
            try {
              return Intl.DateTimeFormat().resolvedOptions().timeZone || "Local";
            } catch {
              return "Local";
            }
          })(),
        };
        $("#tzLabel").textContent = `TZ: ${EVENT.tzName}`;
        $("#tzLong").textContent = EVENT.tzName;

        const startDate = new Date(EVENT.startUTC);
        const endDate = new Date(EVENT.endUTC);
        const dateFmt = new Intl.DateTimeFormat(undefined, { month: "short", day: "2-digit" });
        $("#eventDatePill").textContent = `${dateFmt.format(startDate)}–${dateFmt.format(endDate)} • ${EVENT.city}`;

        // Countdown
        const cd = {
          d: $("#cdD"),
          h: $("#cdH"),
          m: $("#cdM"),
          s: $("#cdS"),
        };
        const tickCountdown = () => {
          const now = Date.now();
          const target = startDate.getTime();
          const diff = Math.max(0, target - now);
          const sec = Math.floor(diff / 1000);
          const days = Math.floor(sec / 86400);
          const hours = Math.floor((sec % 86400) / 3600);
          const mins = Math.floor((sec % 3600) / 60);
          const secs = Math.floor(sec % 60);
          cd.d.textContent = String(days);
          cd.h.textContent = pad2(hours);
          cd.m.textContent = pad2(mins);
          cd.s.textContent = pad2(secs);
        };
        tickCountdown();
        window.setInterval(tickCountdown, 1000);

        // Canvas hero backdrop (pseudo-3D grid + particles + scan sweep)
        const heroCanvas = $("#heroCanvas");
        const ctx = heroCanvas.getContext("2d", { alpha: true });
        const hero = {
          w: 0,
          h: 0,
          dpr: 1,
          t0: performance.now(),
          mouseX: 0,
          mouseY: 0,
          particles: [],
        };

        const resizeHero = () => {
          const rect = heroCanvas.getBoundingClientRect();
          hero.dpr = Math.min(2, window.devicePixelRatio || 1);
          hero.w = Math.max(1, Math.floor(rect.width));
          hero.h = Math.max(1, Math.floor(rect.height));
          heroCanvas.width = Math.floor(hero.w * hero.dpr);
          heroCanvas.height = Math.floor(hero.h * hero.dpr);
          heroCanvas.style.width = hero.w + "px";
          heroCanvas.style.height = hero.h + "px";
          ctx.setTransform(hero.dpr, 0, 0, hero.dpr, 0, 0);
          const desired = clamp(Math.floor((hero.w * hero.h) / 24000), 18, 80);
          hero.particles = Array.from({ length: desired }, (_, i) => ({
            x: Math.random() * hero.w,
            y: Math.random() * hero.h,
            z: Math.random(),
            r: 1.2 + Math.random() * 1.9,
            s: 0.25 + Math.random() * 0.85,
            hue: i % 3 === 0 ? 175 : i % 3 === 1 ? 315 : 260,
          }));
        };
        resizeHero();
        window.addEventListener("resize", resizeHero);

        const onMove = (e) => {
          const rect = heroCanvas.getBoundingClientRect();
          const x = (e.clientX - rect.left) / Math.max(1, rect.width);
          const y = (e.clientY - rect.top) / Math.max(1, rect.height);
          hero.mouseX = clamp(x, 0, 1);
          hero.mouseY = clamp(y, 0, 1);
        };
        window.addEventListener("pointermove", onMove, { passive: true });

        const drawHero = (t) => {
          if (prefersReducedMotion) {
            // Draw a single static frame once
            if (hero._staticDrawn) return;
            hero._staticDrawn = true;
          }
          const dt = Math.min(0.05, (t - hero.t0) / 1000);
          hero.t0 = t;
          const w = hero.w;
          const h = hero.h;
          ctx.clearRect(0, 0, w, h);

          // Back gradient
          const g = ctx.createLinearGradient(0, 0, w, h);
          g.addColorStop(0, "rgba(60,255,217,0.10)");
          g.addColorStop(0.45, "rgba(143,107,255,0.06)");
          g.addColorStop(1, "rgba(255,62,193,0.09)");
          ctx.fillStyle = g;
          ctx.fillRect(0, 0, w, h);

          // Subtle scan sweep
          const sweep = (Math.sin(t / 1800) * 0.5 + 0.5) * h;
          const sg = ctx.createLinearGradient(0, sweep - 140, 0, sweep + 140);
          sg.addColorStop(0, "rgba(0,0,0,0)");
          sg.addColorStop(0.5, "rgba(255,255,255,0.06)");
          sg.addColorStop(1, "rgba(0,0,0,0)");
          ctx.fillStyle = sg;
          ctx.fillRect(0, 0, w, h);

          // Perspective grid
          const cx = w * (0.5 + (hero.mouseX - 0.5) * 0.06);
          const cy = h * (0.62 + (hero.mouseY - 0.5) * 0.05);
          const horizon = h * 0.28;
          const depth = h * 0.82;
          const baseSpacing = 44;
          const time = t / 1000;
          const drift = (time * 32) % baseSpacing;

          ctx.save();
          ctx.globalAlpha = 0.7;
          ctx.lineWidth = 1;
          for (let i = 0; i < 34; i++) {
            const z = i / 33;
            const y = horizon + Math.pow(z, 1.9) * depth;
            const a = 1 - z;
            ctx.strokeStyle = `rgba(60,255,217,${0.10 * a})`;
            ctx.beginPath();
            ctx.moveTo(0, y + drift * a);
            ctx.lineTo(w, y + drift * a);
            ctx.stroke();
          }

          const cols = 18;
          for (let i = -cols; i <= cols; i++) {
            const x = cx + i * baseSpacing;
            ctx.strokeStyle = i % 3 === 0 ? "rgba(255,62,193,0.08)" : "rgba(143,107,255,0.06)";
            ctx.beginPath();
            ctx.moveTo(x, h);
            const tx = cx + i * baseSpacing * 0.12;
            ctx.lineTo(tx, horizon);
            ctx.stroke();
          }
          ctx.restore();

          // Particles (depth parallax)
          for (const p of hero.particles) {
            p.y += dt * (22 + p.s * 34);
            p.x += dt * ((hero.mouseX - 0.5) * 12) * (0.6 + p.z);
            if (p.y > h + 20) {
              p.y = -20;
              p.x = Math.random() * w;
              p.z = Math.random();
            }
            if (p.x < -40) p.x = w + 40;
            if (p.x > w + 40) p.x = -40;
            const yy = p.y;
            const pr = p.r * (0.7 + p.z);
            ctx.fillStyle = `hsla(${p.hue}, 100%, 72%, ${0.10 + p.z * 0.2})`;
            ctx.beginPath();
            ctx.arc(p.x, yy, pr, 0, Math.PI * 2);
            ctx.fill();
          }

          // Tiny vignette
          const vg = ctx.createRadialGradient(w * 0.5, h * 0.4, h * 0.1, w * 0.5, h * 0.45, h * 0.9);
          vg.addColorStop(0, "rgba(0,0,0,0)");
          vg.addColorStop(1, "rgba(0,0,0,0.45)");
          ctx.fillStyle = vg;
          ctx.fillRect(0, 0, w, h);

          if (!prefersReducedMotion) requestAnimationFrame(drawHero);
        };
        requestAnimationFrame(drawHero);

        // Data: teams
        const TEAMS = [
          { id: "nx", name: "NeonX", country: "US", flag: "🇺🇸", seed: 1, rank: 2, winrate: 64, kd: 1.18, style: "Fast entries, crisp trades", form: "WWLWW",
            roster: [
              { name: "Astra", role: "IGL" },
              { name: "Kite", role: "Entry" },
              { name: "Moss", role: "Support" },
              { name: "Vex", role: "Flex" },
              { name: "Rune", role: "Anchor" },
            ],
          },
          { id: "ob", name: "Obsidian Five", country: "SE", flag: "🇸🇪", seed: 2, rank: 1, winrate: 68, kd: 1.22, style: "Disciplined map control", form: "WWWLW",
            roster: [
              { name: "Nyx", role: "IGL" },
              { name: "Sable", role: "Entry" },
              { name: "Iris", role: "Support" },
              { name: "Kron", role: "Flex" },
              { name: "Eko", role: "Sniper" },
            ],
          },
          { id: "sr", name: "Solar Reign", country: "BR", flag: "🇧🇷", seed: 3, rank: 5, winrate: 58, kd: 1.08, style: "Momentum swings, clutch-heavy", form: "WLWWW",
            roster: [
              { name: "Luma", role: "IGL" },
              { name: "Jett", role: "Entry" },
              { name: "Copo", role: "Support" },
              { name: "Faro", role: "Flex" },
              { name: "Brasa", role: "Anchor" },
            ],
          },
          { id: "vk", name: "Void Kintsugi", country: "JP", flag: "🇯🇵", seed: 4, rank: 4, winrate: 60, kd: 1.12, style: "Utility timing, mid-round reads", form: "WWLLW",
            roster: [
              { name: "Hana", role: "IGL" },
              { name: "Kaio", role: "Entry" },
              { name: "Miso", role: "Support" },
              { name: "Ren", role: "Flex" },
              { name: "Yori", role: "Sentinel" },
            ],
          },
          { id: "hf", name: "HyperFlux", country: "FR", flag: "🇫🇷", seed: 5, rank: 6, winrate: 56, kd: 1.05, style: "Aggressive executes", form: "LWWLW",
            roster: [
              { name: "Raze", role: "IGL" },
              { name: "Volt", role: "Entry" },
              { name: "Nox", role: "Support" },
              { name: "Pico", role: "Flex" },
              { name: "Gale", role: "Anchor" },
            ],
          },
          { id: "ic", name: "Iron Comets", country: "DE", flag: "🇩🇪", seed: 6, rank: 7, winrate: 54, kd: 1.02, style: "Set plays + anti-strats", form: "WLWLW",
            roster: [
              { name: "Brix", role: "IGL" },
              { name: "Schnell", role: "Entry" },
              { name: "Elbe", role: "Support" },
              { name: "Nadir", role: "Flex" },
              { name: "Frost", role: "Anchor" },
            ],
          },
          { id: "ap", name: "Aurora Prime", country: "CA", flag: "🇨🇦", seed: 7, rank: 9, winrate: 51, kd: 0.99, style: "Late-round patience", form: "LWWWL",
            roster: [
              { name: "Nova", role: "IGL" },
              { name: "Skye", role: "Entry" },
              { name: "Prax", role: "Support" },
              { name: "Mint", role: "Flex" },
              { name: "Boreal", role: "Anchor" },
            ],
          },
          { id: "cr", name: "Circuit Riders", country: "KR", flag: "🇰🇷", seed: 8, rank: 3, winrate: 63, kd: 1.16, style: "Micro + rotations", form: "WWWLL",
            roster: [
              { name: "Min", role: "IGL" },
              { name: "Rook", role: "Entry" },
              { name: "Kiri", role: "Support" },
              { name: "Sung", role: "Flex" },
              { name: "Talon", role: "Sniper" },
            ],
          },
          { id: "pb", name: "PulseByte", country: "GB", flag: "🇬🇧", seed: 9, rank: 8, winrate: 53, kd: 1.03, style: "Explosive retakes", form: "WLWWL",
            roster: [
              { name: "Echo", role: "IGL" },
              { name: "Flip", role: "Entry" },
              { name: "Mira", role: "Support" },
              { name: "Chime", role: "Flex" },
              { name: "Lock", role: "Anchor" },
            ],
          },
          { id: "rt", name: "Rift Talons", country: "AU", flag: "🇦🇺", seed: 10, rank: 12, winrate: 49, kd: 0.97, style: "Surprise tempo shifts", form: "LLWWW",
            roster: [
              { name: "Jinx", role: "IGL" },
              { name: "Pry", role: "Entry" },
              { name: "Wisp", role: "Support" },
              { name: "Cairn", role: "Flex" },
              { name: "Dune", role: "Anchor" },
            ],
          },
          { id: "gm", name: "Glimmer Mob", country: "MX", flag: "🇲🇽", seed: 11, rank: 10, winrate: 50, kd: 1.01, style: "Aim duels, fast rotates", form: "WLWLL",
            roster: [
              { name: "Zeta", role: "IGL" },
              { name: "Rio", role: "Entry" },
              { name: "Luz", role: "Support" },
              { name: "Kilo", role: "Flex" },
              { name: "Puma", role: "Anchor" },
            ],
          },
          { id: "sv", name: "Spectral Vortex", country: "PL", flag: "🇵🇱", seed: 12, rank: 11, winrate: 50, kd: 1.00, style: "Utility traps + lurks", form: "LWLWW",
            roster: [
              { name: "Varya", role: "IGL" },
              { name: "Hex", role: "Entry" },
              { name: "Sera", role: "Support" },
              { name: "Marek", role: "Flex" },
              { name: "Kosa", role: "Anchor" },
            ],
          },
          { id: "kt", name: "Karma Tide", country: "IN", flag: "🇮🇳", seed: 13, rank: 13, winrate: 47, kd: 0.95, style: "Eco-round magic", form: "WLLWL",
            roster: [
              { name: "Saff", role: "IGL" },
              { name: "Arun", role: "Entry" },
              { name: "Nila", role: "Support" },
              { name: "Kavi", role: "Flex" },
              { name: "Rooki", role: "Anchor" },
            ],
          },
          { id: "lc", name: "Luminous Core", country: "ES", flag: "🇪🇸", seed: 14, rank: 14, winrate: 46, kd: 0.94, style: "Tight defaults", form: "LLWLW",
            roster: [
              { name: "Sol", role: "IGL" },
              { name: "Fuego", role: "Entry" },
              { name: "Mar", role: "Support" },
              { name: "Niebla", role: "Flex" },
              { name: "Toro", role: "Anchor" },
            ],
          },
          { id: "zn", name: "Zenith Null", country: "TR", flag: "🇹🇷", seed: 15, rank: 15, winrate: 45, kd: 0.93, style: "Risk-reward peaks", form: "WLLLL",
            roster: [
              { name: "Eren", role: "IGL" },
              { name: "Orion", role: "Entry" },
              { name: "Lale", role: "Support" },
              { name: "Mavi", role: "Flex" },
              { name: "Sahin", role: "Anchor" },
            ],
          },
          { id: "ct", name: "Chrome Titans", country: "ZA", flag: "🇿🇦", seed: 16, rank: 16, winrate: 44, kd: 0.92, style: "Hard hits, big swings", form: "LLLWL",
            roster: [
              { name: "Rex", role: "IGL" },
              { name: "Vela", role: "Entry" },
              { name: "Nyala", role: "Support" },
              { name: "Quill", role: "Flex" },
              { name: "Stone", role: "Anchor" },
            ],
          },
        ];

        const teamById = new Map(TEAMS.map((t) => [t.id, t]));
        const countryName = (code) => {
          const map = { US: "United States", SE: "Sweden", BR: "Brazil", JP: "Japan", FR: "France", DE: "Germany", CA: "Canada", KR: "Korea", GB: "United Kingdom", AU: "Australia", MX: "Mexico", PL: "Poland", IN: "India", ES: "Spain", TR: "Türkiye", ZA: "South Africa" };
          return map[code] || code;
        };

        const teamLogoURI = (team) => {
          const seed = team.seed || 10;
          const hueA = (seed * 41) % 360;
          const hueB = (hueA + 120) % 360;
          const hueC = (hueA + 240) % 360;
          const initials = team.name
            .split(/\s+/)
            .slice(0, 2)
            .map((w) => w[0] || "")
            .join("")
            .toUpperCase();
          const svg = `
            <svg xmlns="http://www.w3.org/2000/svg" width="96" height="96" viewBox="0 0 96 96">
              <defs>
                <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="hsl(${hueA} 100% 60%)" stop-opacity="0.95"/>
                  <stop offset="0.55" stop-color="hsl(${hueB} 100% 62%)" stop-opacity="0.95"/>
                  <stop offset="1" stop-color="hsl(${hueC} 100% 62%)" stop-opacity="0.95"/>
                </linearGradient>
                <filter id="s" x="-20%" y="-20%" width="140%" height="140%">
                  <feGaussianBlur stdDeviation="1.6" result="b"/>
                  <feMerge>
                    <feMergeNode in="b"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
              </defs>
              <rect x="6" y="6" width="84" height="84" rx="22" fill="url(#g)"/>
              <path d="M14 54 C 26 40, 42 38, 54 46 C 66 54, 76 52, 82 42" fill="none" stroke="rgba(255,255,255,0.55)" stroke-width="4" stroke-linecap="round"/>
              <path d="M14 66 C 26 52, 42 50, 54 58 C 66 66, 76 64, 82 54" fill="none" stroke="rgba(0,0,0,0.28)" stroke-width="4" stroke-linecap="round" opacity="0.65"/>
              <text x="48" y="54" font-family="ui-sans-serif, system-ui" font-size="28" font-weight="800" text-anchor="middle" fill="rgba(0,0,0,0.35)" filter="url(#s)">${initials}</text>
              <text x="48" y="52" font-family="ui-sans-serif, system-ui" font-size="28" font-weight="800" text-anchor="middle" fill="rgba(255,255,255,0.92)">${initials}</text>
            </svg>
          `.trim();
          return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svg)}`;
        };

        // Venue map SVG (self-contained image via data URI)
        const makeMapURI = () => {
          const svg = `
          <svg xmlns="http://www.w3.org/2000/svg" width="1280" height="760" viewBox="0 0 1280 760">
            <defs>
              <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#070818"/>
                <stop offset="1" stop-color="#0a0b22"/>
              </linearGradient>
              <radialGradient id="glow" cx="50%" cy="35%" r="65%">
                <stop offset="0" stop-color="rgba(60,255,217,0.20)"/>
                <stop offset="0.55" stop-color="rgba(255,62,193,0.10)"/>
                <stop offset="1" stop-color="rgba(0,0,0,0)"/>
              </radialGradient>
              <filter id="blur" x="-20%" y="-20%" width="140%" height="140%">
                <feGaussianBlur stdDeviation="2.2"/>
              </filter>
            </defs>
            <rect width="1280" height="760" fill="url(#bg)"/>
            <rect width="1280" height="760" fill="url(#glow)"/>

            <g opacity="0.85">
              <path d="M80 620 C 280 560, 420 600, 560 520 C 700 440, 820 480, 980 410 C 1100 360, 1180 310, 1220 240"
                fill="none" stroke="rgba(60,255,217,0.35)" stroke-width="10" stroke-linecap="round"/>
              <path d="M120 220 C 260 260, 360 220, 520 260 C 700 308, 840 300, 980 340 C 1140 395, 1200 420, 1240 470"
                fill="none" stroke="rgba(143,107,255,0.24)" stroke-width="8" stroke-linecap="round"/>
              <path d="M220 90 L 300 180 L 520 170 L 660 240 L 840 220 L 1020 290 L 1180 260" fill="none"
                stroke="rgba(255,62,193,0.24)" stroke-width="6" stroke-linecap="round"/>
            </g>

            <g opacity="0.22">
              ${Array.from({ length: 42 }).map((_, i) => {
                const x = 60 + i * 28;
                return `<path d="M${x} 40 L ${x + 120} 720" stroke="rgba(255,255,255,0.18)" stroke-width="1"/>`;
              }).join("")}
            </g>

            <g>
              <rect x="760" y="250" width="410" height="310" rx="28" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.14)" stroke-width="2"/>
              <path d="M800 520 C 860 460, 920 470, 980 430 C 1040 390, 1100 390, 1140 340"
                fill="none" stroke="rgba(60,255,217,0.30)" stroke-width="8" stroke-linecap="round" filter="url(#blur)"/>
              <circle cx="930" cy="420" r="18" fill="rgba(255,62,193,0.85)"/>
              <circle cx="930" cy="420" r="40" fill="rgba(255,62,193,0.18)"/>
              <text x="930" y="410" text-anchor="middle" font-family="ui-sans-serif, system-ui" font-size="14" fill="rgba(255,255,255,0.85)" letter-spacing="0.12em">NEON</text>
              <text x="930" y="430" text-anchor="middle" font-family="ui-sans-serif, system-ui" font-size="14" fill="rgba(255,255,255,0.85)" letter-spacing="0.12em">ARENA</text>
            </g>

            <g opacity="0.85">
              <rect x="110" y="420" width="520" height="240" rx="28" fill="rgba(255,255,255,0.03)" stroke="rgba(255,255,255,0.12)" stroke-width="2"/>
              <text x="150" y="468" font-family="ui-sans-serif, system-ui" font-size="14" fill="rgba(255,255,255,0.80)" letter-spacing="0.14em">METRO LINE</text>
              <g transform="translate(140 500)">
                ${Array.from({ length: 7 }).map((_, i) => {
                  const x = i * 70;
                  return `<circle cx="${x}" cy="0" r="10" fill="rgba(60,255,217,0.55)"/><circle cx="${x}" cy="0" r="22" fill="rgba(60,255,217,0.12)"/>`;
                }).join("")}
                <path d="M0 0 L 420 0" stroke="rgba(60,255,217,0.28)" stroke-width="8" stroke-linecap="round"/>
              </g>
              <text x="150" y="622" font-family="ui-sans-serif, system-ui" font-size="12" fill="rgba(255,255,255,0.70)">Entrance • Ride-share • Accessible drop-off</text>
            </g>
          </svg>`.trim();
          return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svg)}`;
        };
        $("#mapImg").src = makeMapURI();

        // Directions links
        const gMaps = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${EVENT.mapLat},${EVENT.mapLng}`)}`;
        const aMaps = `https://maps.apple.com/?ll=${EVENT.mapLat},${EVENT.mapLng}&q=${encodeURIComponent(EVENT.venue)}`;
        $("#dirGoogle").href = gMaps;
        $("#dirApple").href = aMaps;

        // Schedule data (timezone-aware render; ICS export uses UTC)
        const STAGES = ["Groups", "Quarterfinal", "Semifinal", "Final"];
        const scheduleBase = [
          { id: "g1", stage: "Groups", day: 1, start: "2026-08-23T18:00:00Z", durMin: 60, a: "nx", b: "ct" },
          { id: "g2", stage: "Groups", day: 1, start: "2026-08-23T19:20:00Z", durMin: 60, a: "ob", b: "zn" },
          { id: "g3", stage: "Groups", day: 1, start: "2026-08-23T20:40:00Z", durMin: 60, a: "sr", b: "lc" },
          { id: "g4", stage: "Groups", day: 1, start: "2026-08-23T22:00:00Z", durMin: 60, a: "vk", b: "kt" },
          { id: "g5", stage: "Groups", day: 2, start: "2026-08-24T18:00:00Z", durMin: 60, a: "hf", b: "sv" },
          { id: "g6", stage: "Groups", day: 2, start: "2026-08-24T19:20:00Z", durMin: 60, a: "ic", b: "gm" },
          { id: "g7", stage: "Groups", day: 2, start: "2026-08-24T20:40:00Z", durMin: 60, a: "ap", b: "rt" },
          { id: "g8", stage: "Groups", day: 2, start: "2026-08-24T22:00:00Z", durMin: 60, a: "cr", b: "pb" },
          { id: "q1", stage: "Quarterfinal", day: 3, start: "2026-08-25T18:00:00Z", durMin: 75, a: "nx", b: "pb" },
          { id: "q2", stage: "Quarterfinal", day: 3, start: "2026-08-25T19:30:00Z", durMin: 75, a: "ob", b: "rt" },
          { id: "q3", stage: "Quarterfinal", day: 3, start: "2026-08-25T21:00:00Z", durMin: 75, a: "sr", b: "sv" },
          { id: "q4", stage: "Quarterfinal", day: 3, start: "2026-08-25T22:30:00Z", durMin: 75, a: "vk", b: "ic" },
          { id: "s1", stage: "Semifinal", day: 3, start: "2026-08-25T23:59:00Z", durMin: 90, a: "nx", b: "ob" },
          { id: "s2", stage: "Semifinal", day: 3, start: "2026-08-26T01:40:00Z", durMin: 90, a: "sr", b: "vk" },
          { id: "f1", stage: "Final", day: 3, start: "2026-08-26T03:30:00Z", durMin: 120, a: "ob", b: "vk" },
        ];

        const dtLocalFmt = new Intl.DateTimeFormat(undefined, { weekday: "short", month: "short", day: "2-digit", hour: "2-digit", minute: "2-digit" });
        const timeOnlyFmt = new Intl.DateTimeFormat(undefined, { hour: "2-digit", minute: "2-digit" });

        const schedule = scheduleBase.map((m) => ({
          ...m,
          startDate: new Date(m.start),
          endDate: new Date(new Date(m.start).getTime() + m.durMin * 60 * 1000),
        }));

        // Filters
        const stageSel = $("#stageFilter");
        const daySel = $("#dayFilter");
        const allStages = ["All stages", ...STAGES];
        stageSel.innerHTML = allStages.map((s) => `<option value="${s}">${s}</option>`).join("");
        const days = Array.from(new Set(schedule.map((m) => m.day))).sort((a, b) => a - b);
        const dayOptions = ["All days", ...days.map((d) => `Day ${d}`)];
        daySel.innerHTML = dayOptions.map((d) => `<option value="${d}">${d}</option>`).join("");

        const esc = (s) => String(s).replace(/[&<>"']/g, (c) => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }[c]));

        const ics = (() => {
          const toICSDateUTC = (d) => {
            const z = new Date(d.getTime());
            return (
              z.getUTCFullYear() +
              pad2(z.getUTCMonth() + 1) +
              pad2(z.getUTCDate()) +
              "T" +
              pad2(z.getUTCHours()) +
              pad2(z.getUTCMinutes()) +
              pad2(z.getUTCSeconds()) +
              "Z"
            );
          };
          const foldLine = (line) => {
            // RFC5545 line folding: 75 octets recommended; we'll be conservative in chars
            const limit = 72;
            if (line.length <= limit) return [line];
            const out = [];
            let i = 0;
            while (i < line.length) {
              const chunk = line.slice(i, i + limit);
              out.push((i === 0 ? "" : " ") + chunk);
              i += limit;
            }
            return out;
          };
          const makeEvent = (m) => {
            const a = teamById.get(m.a)?.name || "TBD";
            const b = teamById.get(m.b)?.name || "TBD";
            const uid = `${m.id}@neon-arena.example`;
            const summary = `${a} vs ${b} — ${m.stage}`;
            const desc = `Neon Arena Invitational\\nStage: ${m.stage}\\nVenue: ${EVENT.venue}, ${EVENT.city}\\nTimes are shown in your calendar timezone.`;
            const lines = [
              "BEGIN:VEVENT",
              `UID:${uid}`,
              `DTSTAMP:${toICSDateUTC(new Date())}`,
              `DTSTART:${toICSDateUTC(m.startDate)}`,
              `DTEND:${toICSDateUTC(m.endDate)}`,
              `SUMMARY:${summary}`,
              `DESCRIPTION:${desc}`,
              `LOCATION:${EVENT.venue}, ${EVENT.city}`,
              "END:VEVENT",
            ];
            return lines.flatMap(foldLine);
          };
          const makeCalendar = (matches, name = EVENT.name) => {
            const lines = [
              "BEGIN:VCALENDAR",
              "VERSION:2.0",
              "PRODID:-//Neon Arena//Esports Tournament//EN",
              "CALSCALE:GREGORIAN",
              `X-WR-CALNAME:${name}`,
              "X-WR-TIMEZONE:UTC",
              ...matches.flatMap(makeEvent),
              "END:VCALENDAR",
            ];
            return lines.join("\r\n");
          };
          const download = (text, filename) => {
            const blob = new Blob([text], { type: "text/calendar;charset=utf-8" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
          };
          return { makeCalendar, download };
        })();

        const renderSchedule = () => {
          const stageVal = stageSel.value;
          const dayVal = daySel.value;
          const rows = schedule
            .filter((m) => (stageVal === "All stages" ? true : m.stage === stageVal))
            .filter((m) => (dayVal === "All days" ? true : `Day ${m.day}` === dayVal))
            .sort((a, b) => a.startDate - b.startDate);

          const list = $("#scheduleList");
          if (rows.length === 0) {
            list.innerHTML = `<div class="pill">No matches for these filters.</div>`;
            return;
          }
          list.innerHTML = rows
            .map((m) => {
              const ta = teamById.get(m.a);
              const tb = teamById.get(m.b);
              const isSoon = Math.abs(m.startDate.getTime() - Date.now()) < 36 * 60 * 60 * 1000;
              return `
                <div class="matchRow">
                  <div class="when">
                    <strong>Day ${m.day} • ${esc(m.stage)}</strong>
                    <span>${esc(dtLocalFmt.format(m.startDate))} • ${m.durMin}m</span>
                  </div>
                  <div class="versus" title="${esc(ta?.name || "TBD")} vs ${esc(tb?.name || "TBD")}">
                    <span class="logo"><img loading="lazy" alt="${esc(ta?.name || "TBD")} logo" src="${ta ? teamLogoURI(ta) : ""}" /></span>
                    <strong style="font-size:13px; letter-spacing:0.02em; white-space:nowrap; overflow:hidden; text-overflow:ellipsis">${esc(ta?.name || "TBD")}</strong>
                    <span class="vs">VS</span>
                    <span class="logo"><img loading="lazy" alt="${esc(tb?.name || "TBD")} logo" src="${tb ? teamLogoURI(tb) : ""}" /></span>
                    <strong style="font-size:13px; letter-spacing:0.02em; white-space:nowrap; overflow:hidden; text-overflow:ellipsis">${esc(tb?.name || "TBD")}</strong>
                  </div>
                  <div class="stageCell">
                    <span class="chip ${isSoon ? "live" : ""}">${isSoon ? "Soon" : m.stage}</span>
                  </div>
                  <div style="display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap">
                    <button class="btn small ghost" data-ics="${esc(m.id)}" type="button">Add to calendar</button>
                    <button class="btn small primary" data-scroll="bracket" type="button">View bracket</button>
                  </div>
                </div>
              `;
            })
            .join("");

          $$("button[data-scroll='bracket']", list).forEach((b) => {
            b.addEventListener("click", () => $("#bracket").scrollIntoView({ behavior: prefersReducedMotion ? "auto" : "smooth", block: "start" }));
          });
          $$("button[data-ics]", list).forEach((b) => {
            b.addEventListener("click", () => {
              const id = b.getAttribute("data-ics");
              const m = schedule.find((x) => x.id === id);
              if (!m) return;
              const cal = ics.makeCalendar([m], `${EVENT.name} — ${m.stage}`);
              ics.download(cal, `${EVENT.name.replace(/\s+/g, "")}-${m.id}.ics`);
              toast.show("Calendar", "Downloaded .ics for this match.");
            });
          });
        };
        stageSel.addEventListener("change", renderSchedule);
        daySel.addEventListener("change", renderSchedule);
        $("#btnIcsAll").addEventListener("click", () => {
          const cal = ics.makeCalendar(schedule, EVENT.name);
          ics.download(cal, `${EVENT.name.replace(/\s+/g, "")}-FullSchedule.ics`);
          toast.show("Calendar", "Downloaded full schedule .ics.");
        });
        renderSchedule();

        // Bracket generator (supports 8 or 16)
        const bracketRoot = $("#bracketRoot");
        const bracketSizeSel = $("#bracketSize");
        const demoBtn = $("#btnDemo");
        const demoProgress = $("#demoProgress");
        const resetBracketBtn = $("#btnResetBracket");
        let demoTimer = 0;

        const makeBracket = (size) => {
          const teams = TEAMS.slice(0, size).sort((a, b) => a.seed - b.seed);
          // Standard seeding for 16 or 8
          const seeding = size === 16 ? [1, 16, 8, 9, 5, 12, 4, 13, 6, 11, 3, 14, 7, 10, 2, 15] : [1, 8, 4, 5, 3, 6, 2, 7];
          const seeded = seeding.map((s) => teams.find((t) => t.seed === s) || teams[s - 1]).filter(Boolean);
          const rounds = [];
          const roundNames16 = ["Round of 16", "Quarterfinals", "Semifinals", "Grand Final"];
          const roundNames8 = ["Quarterfinals", "Semifinals", "Grand Final"];
          const names = size === 16 ? roundNames16 : roundNames8;
          const now = Date.now();
          const base = new Date(Math.max(now, startDate.getTime())).getTime();
          const matchGapMin = 45;

          // Round 1 matches
          let matchIndex = 0;
          let cur = seeded.map((t) => t.id);
          for (let r = 0; r < names.length; r++) {
            const matches = [];
            const pairs = Math.max(1, cur.length / 2);
            for (let i = 0; i < pairs; i++) {
              const a = cur[i * 2] || null;
              const b = cur[i * 2 + 1] || null;
              const ms = base + matchIndex * matchGapMin * 60 * 1000;
              matchIndex++;
              matches.push({
                id: `r${r + 1}m${i + 1}`,
                round: r,
                idx: i,
                a,
                b,
                winner: null,
                start: new Date(ms),
              });
            }
            rounds.push({ name: names[r], matches });
            cur = new Array(pairs).fill(null);
          }

          const recompute = (state) => {
            // propagate winners forward
            for (let r = 0; r < state.rounds.length - 1; r++) {
              const curRound = state.rounds[r];
              const nextRound = state.rounds[r + 1];
              for (let i = 0; i < curRound.matches.length; i++) {
                const m = curRound.matches[i];
                const w = m.winner;
                const next = nextRound.matches[Math.floor(i / 2)];
                if (!next) continue;
                if (i % 2 === 0) next.a = w;
                else next.b = w;
                if (next.winner && next.winner !== next.a && next.winner !== next.b) next.winner = null;
              }
            }
          };

          const state = { size, seeded, rounds, recompute };
          // seed first round participants
          for (let i = 0; i < rounds[0].matches.length; i++) {
            rounds[0].matches[i].a = seeded[i * 2]?.id || null;
            rounds[0].matches[i].b = seeded[i * 2 + 1]?.id || null;
          }
          state.recompute(state);
          return state;
        };

        let bracketState = makeBracket(Number(bracketSizeSel.value));

        const matchLabel = (m) => `${timeOnlyFmt.format(m.start)} • BO3`;

        const renderBracket = () => {
          const state = bracketState;
          const totalMatches = state.rounds.reduce((acc, r) => acc + r.matches.length, 0);
          const done = state.rounds.reduce((acc, r) => acc + r.matches.filter((m) => m.winner).length, 0);
          demoProgress.style.width = `${Math.round((done / totalMatches) * 100)}%`;

          bracketRoot.innerHTML = state.rounds
            .map((r, ri) => {
              const count = r.matches.length;
              return `
                <div class="round" data-round="${ri}">
                  <div class="roundTitle">
                    <strong>${esc(r.name)}</strong>
                    <span>${count} match${count === 1 ? "" : "es"}</span>
                  </div>
                  ${r.matches
                    .map((m) => {
                      const ta = m.a ? teamById.get(m.a) : null;
                      const tb = m.b ? teamById.get(m.b) : null;
                      const aIsWinner = m.winner && m.a && m.winner === m.a;
                      const bIsWinner = m.winner && m.b && m.winner === m.b;
                      return `
                        <div class="match" data-mid="${esc(m.id)}" title="Click a team to advance">
                          <div class="matchHead">
                            <small>${esc(matchLabel(m))}</small>
                            <span class="chip">${ri === state.rounds.length - 1 ? "Championship" : "Playoffs"}</span>
                          </div>
                          <div class="matchBody">
                            <div class="slot" role="button" tabindex="0" data-mid="${esc(m.id)}" data-side="a" data-winner="${aIsWinner}" data-tbd="${!ta}">
                              <span class="logo">${ta ? `<img loading="lazy" alt="${esc(ta.name)} logo" src="${teamLogoURI(ta)}" />` : ""}</span>
                              <span class="slotMain">
                                <strong>${esc(ta ? ta.name : "TBD")}</strong>
                                <span>${ta ? `${ta.flag} ${esc(countryName(ta.country))} • Seed #${ta.seed}` : "Awaiting winner"}</span>
                              </span>
                              <span class="chip">${ta ? `#${ta.rank}` : "—"}</span>
                            </div>
                            <div class="slot" role="button" tabindex="0" data-mid="${esc(m.id)}" data-side="b" data-winner="${bIsWinner}" data-tbd="${!tb}">
                              <span class="logo">${tb ? `<img loading="lazy" alt="${esc(tb.name)} logo" src="${teamLogoURI(tb)}" />` : ""}</span>
                              <span class="slotMain">
                                <strong>${esc(tb ? tb.name : "TBD")}</strong>
                                <span>${tb ? `${tb.flag} ${esc(countryName(tb.country))} • Seed #${tb.seed}` : "Awaiting winner"}</span>
                              </span>
                              <span class="chip">${tb ? `#${tb.rank}` : "—"}</span>
                            </div>
                          </div>
                        </div>
                      `;
                    })
                    .join("")}
                </div>
              `;
            })
            .join("");

          const onPick = (mid, side) => {
            const state = bracketState;
            for (const r of state.rounds) {
              const m = r.matches.find((x) => x.id === mid);
              if (!m) continue;
              const chosen = side === "a" ? m.a : m.b;
              if (!chosen) {
                toast.show("Bracket", "That slot is TBD—pick once a team is set.");
                return;
              }
              m.winner = chosen;
              state.recompute(state);
              renderBracket();
              const team = teamById.get(chosen);
              toast.show("Advanced", `${team?.name || "Team"} moves on.`);
              return;
            }
          };

          $$(".slot", bracketRoot).forEach((el) => {
            el.addEventListener("click", () => {
              if (el.dataset.tbd === "true") return;
              onPick(el.dataset.mid, el.dataset.side);
            });
            el.addEventListener("keydown", (e) => {
              if (e.key !== "Enter" && e.key !== " ") return;
              e.preventDefault();
              if (el.dataset.tbd === "true") return;
              onPick(el.dataset.mid, el.dataset.side);
            });
          });
        };

        const stopDemo = () => {
          window.clearInterval(demoTimer);
          demoTimer = 0;
          demoBtn.setAttribute("aria-pressed", "false");
          demoBtn.textContent = "Demo: Off";
        };

        const startDemo = () => {
          if (demoTimer) return;
          demoBtn.setAttribute("aria-pressed", "true");
          demoBtn.textContent = "Demo: On";
          demoTimer = window.setInterval(() => {
            // pick next unresolved match with both teams present, earliest round first
            for (const r of bracketState.rounds) {
              const m = r.matches.find((x) => x.a && x.b && !x.winner);
              if (!m) continue;
              m.winner = Math.random() < 0.5 ? m.a : m.b;
              bracketState.recompute(bracketState);
              renderBracket();
              return;
            }
            // all done -> stop
            stopDemo();
            toast.show("Demo complete", "Bracket auto-advance finished.");
          }, prefersReducedMotion ? 2200 : 1600);
        };

        demoBtn.addEventListener("click", () => {
          if (demoTimer) stopDemo();
          else startDemo();
        });
        resetBracketBtn.addEventListener("click", () => {
          stopDemo();
          bracketState = makeBracket(Number(bracketSizeSel.value));
          renderBracket();
          toast.show("Bracket", "Reset to seeded start.");
        });
        bracketSizeSel.addEventListener("change", () => {
          stopDemo();
          bracketState = makeBracket(Number(bracketSizeSel.value));
          $("#statTeams").textContent = String(Number(bracketSizeSel.value));
          $("#statMatches").textContent = String(Number(bracketSizeSel.value) === 16 ? 31 : 15);
          renderBracket();
          toast.show("Bracket", `Switched to ${bracketSizeSel.value}-team bracket.`);
        });
        renderBracket();

        // Teams grid + compare
        const teamsGrid = $("#teamsGrid");
        const compare = { selected: [] };
        const compareRoot = $("#compare");
        const compareSlots = $("#compareSlots");
        const compareTable = $("#compareTable");
        const compareStatus = $("#compareStatus");
        const sticky = $(".stickyCta");
        const syncSticky = () => {
          const compareOpen = compareRoot.dataset.open === "true";
          sticky.style.bottom = compareOpen ? "114px" : "12px";
        };

        const renderCompare = () => {
          const ids = compare.selected;
          compareRoot.dataset.open = ids.length ? "true" : "false";
          compareStatus.textContent = ids.length === 0 ? "Select up to 2 teams" : ids.length === 1 ? "Pick one more team to compare" : "Comparing 2 teams";

          const slotHTML = (id, idx) => {
            if (!id)
              return `
                <div class="compareSlot">
                  <div class="left">
                    <span class="logo" aria-hidden="true"></span>
                    <div class="name">
                      <b>Empty</b>
                      <small>Select a team</small>
                    </div>
                  </div>
                  <span class="chip">Slot ${idx + 1}</span>
                </div>
              `;
            const t = teamById.get(id);
            return `
              <div class="compareSlot">
                <div class="left">
                  <span class="logo"><img alt="${esc(t.name)} logo" src="${teamLogoURI(t)}" /></span>
                  <div class="name">
                    <b>${esc(t.name)}</b>
                    <small>${t.flag} ${esc(countryName(t.country))} • Seed #${t.seed}</small>
                  </div>
                </div>
                <button class="btn small ghost" data-remove="${esc(id)}" type="button">Remove</button>
              </div>
            `;
          };

          compareSlots.innerHTML = slotHTML(ids[0], 0) + slotHTML(ids[1], 1);
          $$("button[data-remove]", compareSlots).forEach((b) => {
            b.addEventListener("click", () => {
              const id = b.getAttribute("data-remove");
              compare.selected = compare.selected.filter((x) => x !== id);
              renderTeams();
              renderCompare();
              toast.show("Compare", "Removed team from compare.");
            });
          });

          const t1 = ids[0] ? teamById.get(ids[0]) : null;
          const t2 = ids[1] ? teamById.get(ids[1]) : null;
          const rows = [
            ["Global rank", t1 ? `#${t1.rank}` : "—", t2 ? `#${t2.rank}` : "—"],
            ["Win rate", t1 ? `${t1.winrate}%` : "—", t2 ? `${t2.winrate}%` : "—"],
            ["K/D ratio", t1 ? `${t1.kd.toFixed(2)}` : "—", t2 ? `${t2.kd.toFixed(2)}` : "—"],
            ["Playstyle", t1 ? t1.style : "—", t2 ? t2.style : "—"],
            ["Recent form", t1 ? t1.form.split("").join(" ") : "—", t2 ? t2.form.split("").join(" ") : "—"],
          ];
          compareTable.innerHTML =
            `<div class="h">Metric</div><div class="h">Team A</div><div class="h">Team B</div>` +
            rows
              .map(
                ([h, a, b]) =>
                  `<div class="cell h">${esc(h)}</div><div class="cell">${esc(a)}</div><div class="cell">${esc(b)}</div>`
              )
              .join("");
          syncSticky();
        };

        const renderTeams = () => {
          const size = Number(bracketSizeSel.value);
          const visibleTeams = TEAMS.slice(0, size).sort((a, b) => a.seed - b.seed);
          teamsGrid.innerHTML = visibleTeams
            .map((t) => {
              const selected = compare.selected.includes(t.id);
              const canAdd = compare.selected.length < 2 || selected;
              const formHTML = t.form
                .slice(0, 5)
                .split("")
                .map((c) => `<b class="${c.toLowerCase()}">${c}</b>`)
                .join("");
              return `
                <article class="teamCard" aria-label="${esc(t.name)} team card">
                  <div class="teamTop">
                    <span class="logo"><img loading="lazy" alt="${esc(t.name)} logo" src="${teamLogoURI(t)}" /></span>
                    <div class="teamName">
                      <strong>${esc(t.name)}</strong>
                      <span>${t.flag} ${esc(countryName(t.country))} • Seed #${t.seed} • Rank #${t.rank}</span>
                    </div>
                    <span class="chip" title="Win rate">${t.winrate}% WR</span>
                  </div>
                  <div class="teamBody">
                    <div class="metrics" aria-label="Team metrics">
                      <div class="metric"><strong>${t.kd.toFixed(2)}</strong><span>K/D</span></div>
                      <div class="metric"><strong>${t.winrate}%</strong><span>Winrate</span></div>
                      <div class="metric"><strong>${t.seed}</strong><span>Seed</span></div>
                    </div>
                    <div class="roster" aria-label="Roster">
                      ${t.roster
                        .map(
                          (p) =>
                            `<div class="player"><span>${esc(p.name)}</span><small>${esc(p.role)}</small></div>`
                        )
                        .join("")}
                    </div>
                    <div class="teamActions" aria-label="Actions">
                      <span class="pill" title="Recent form">
                        Form <span class="form" aria-hidden="true">${formHTML}</span>
                      </span>
                      <button class="btn small ${selected ? "primary" : "ghost"}" data-compare="${esc(t.id)}" type="button" ${
                        canAdd ? "" : "disabled"
                      }>${selected ? "In Compare" : "Compare"}</button>
                    </div>
                  </div>
                </article>
              `;
            })
            .join("");

          $$("button[data-compare]", teamsGrid).forEach((b) => {
            b.addEventListener("click", () => {
              const id = b.getAttribute("data-compare");
              if (!id) return;
              if (compare.selected.includes(id)) {
                compare.selected = compare.selected.filter((x) => x !== id);
                toast.show("Compare", "Removed from compare.");
              } else {
                if (compare.selected.length >= 2) {
                  toast.show("Compare", "You can compare up to two teams.");
                  return;
                }
                compare.selected = [...compare.selected, id];
                toast.show("Compare", "Added to compare.");
              }
              renderTeams();
              renderCompare();
            });
          });
        };
        renderTeams();
        renderCompare();
        $("#btnCompareClear").addEventListener("click", () => {
          compare.selected = [];
          renderTeams();
          renderCompare();
          toast.show("Compare", "Cleared.");
        });

        // Sponsors marquee (duplicate track for seamless scroll)
        const sponsors = [
          "AURORA",
          "VOLTAGE",
          "NEXUS",
          "PHOTON",
          "HYPERWAVE",
          "SPECTRA",
          "COBALT",
          "NEONBYTE",
        ];
        const makeSponsorNode = (label, idx) => {
          const hue = (idx * 44) % 360;
          return `<div class="slogo" style="box-shadow: 0 0 0 1px rgba(255,255,255,0.08) inset, 0 0 24px hsla(${hue},100%,70%,0.10); border-color: rgba(255,255,255,0.12)">${esc(
            label
          )}</div>`;
        };
        const trackHTML = [...sponsors, ...sponsors].map(makeSponsorNode).join("");
        $("#sponsorTrack").innerHTML = trackHTML;
        $("#sponsorTrack2").innerHTML = trackHTML;

        // Stream preview simulation
        const viewport = $("#playerViewport");
        const btnToggle = $("#btnPlayerToggle");
        const viewerPill = $("#viewerCount");
        let playing = false;
        let viewerTimer = 0;

        const updateViewer = () => {
          const base = playing ? 64000 : 12000;
          const jitter = playing ? 14000 : 5000;
          const v = Math.round(base + (Math.sin(performance.now() / 1200) * 0.5 + 0.5) * jitter + Math.random() * (jitter * 0.35));
          viewerPill.textContent = `Viewers: ${formatCompactNumber(v)}`;
        };

        const computeNowNext = () => {
          const now = new Date();
          const sorted = schedule.slice().sort((a, b) => a.startDate - b.startDate);
          const cur = sorted.find((m) => now >= m.startDate && now < m.endDate);
          const next = sorted.find((m) => m.startDate > now);
          const fmt = (m) => {
            const ta = teamById.get(m.a)?.name || "TBD";
            const tb = teamById.get(m.b)?.name || "TBD";
            return `${m.stage} • ${timeOnlyFmt.format(m.startDate)} • ${ta} vs ${tb}`;
          };
          $("#tickerNow").textContent = cur ? `Now: ${fmt(cur)}` : next ? `Now: Pre-show • starts ${timeOnlyFmt.format(next.startDate)}` : "Now: Off-season showmatch";
          $("#tickerNext").textContent = next ? `Next: ${fmt(next)}` : "Next: Bracket reveal • date TBA";
        };
        computeNowNext();
        window.setInterval(computeNowNext, 30_000);

        const setPlaying = (v) => {
          playing = v;
          viewport.dataset.playing = playing ? "true" : "false";
          btnToggle.textContent = playing ? "Pause" : "Play";
          $("#nowStreaming").textContent = playing ? "Main feed • Observer POV • Instant replay" : "Stage feed • Player cams • Tactical replay";
          updateViewer();
          window.clearInterval(viewerTimer);
          if (playing) viewerTimer = window.setInterval(updateViewer, prefersReducedMotion ? 1600 : 900);
        };
        btnToggle.addEventListener("click", () => {
          setPlaying(!playing);
          toast.show(playing ? "Streaming" : "Paused", playing ? "Now playing stream preview." : "Stream preview paused.");
        });
        $("#btnGoLive").addEventListener("click", () => {
          $("#stream").scrollIntoView({ behavior: prefersReducedMotion ? "auto" : "smooth", block: "start" });
          setPlaying(true);
        });
        $("#btnWatch").addEventListener("click", () => {
          $("#stream").scrollIntoView({ behavior: prefersReducedMotion ? "auto" : "smooth", block: "start" });
          setPlaying(true);
        });

        // Highlights carousel
        const makeThumb = (idx) => {
          const hue = (idx * 55) % 360;
          const svg = `
            <svg xmlns="http://www.w3.org/2000/svg" width="1280" height="720" viewBox="0 0 1280 720">
              <defs>
                <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="hsl(${hue} 100% 58%)" stop-opacity="0.16"/>
                  <stop offset="0.55" stop-color="hsl(${(hue + 120) % 360} 100% 62%)" stop-opacity="0.12"/>
                  <stop offset="1" stop-color="hsl(${(hue + 240) % 360} 100% 62%)" stop-opacity="0.16"/>
                </linearGradient>
                <filter id="b" x="-20%" y="-20%" width="140%" height="140%">
                  <feGaussianBlur stdDeviation="6"/>
                </filter>
              </defs>
              <rect width="1280" height="720" fill="#070818"/>
              <rect width="1280" height="720" fill="url(#g)"/>
              <g opacity="0.8">
                <circle cx="260" cy="260" r="170" fill="hsla(${hue},100%,70%,0.20)" filter="url(#b)"/>
                <circle cx="980" cy="340" r="220" fill="hsla(${(hue + 120) % 360},100%,70%,0.18)" filter="url(#b)"/>
                <circle cx="720" cy="560" r="200" fill="hsla(${(hue + 240) % 360},100%,70%,0.16)" filter="url(#b)"/>
              </g>
              <g opacity="0.22">
                ${Array.from({ length: 34 }).map((_, i) => `<path d="M${-120 + i * 60} 30 L ${220 + i * 60} 690" stroke="rgba(255,255,255,0.22)" stroke-width="1"/>`).join("")}
              </g>
              <rect x="84" y="520" width="1112" height="128" rx="26" fill="rgba(0,0,0,0.28)" stroke="rgba(255,255,255,0.14)" />
              <text x="120" y="575" font-family="ui-sans-serif,system-ui" font-size="28" fill="rgba(255,255,255,0.92)" letter-spacing="0.08em">HIGHLIGHT #${idx + 1}</text>
              <text x="120" y="615" font-family="ui-sans-serif,system-ui" font-size="18" fill="rgba(255,255,255,0.70)" letter-spacing="0.04em">Clutch sequence • fast flick • crowd roar</text>
              <g transform="translate(1040 546)">
                <rect width="128" height="86" rx="18" fill="rgba(255,255,255,0.08)" stroke="rgba(255,255,255,0.14)"/>
                <path d="M50 24 L 88 43 L 50 62 Z" fill="rgba(255,255,255,0.85)"/>
              </g>
            </svg>
          `.trim();
          return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svg)}`;
        };

        const HIGHLIGHTS = [
          { title: "Overtime Reverse Sweep", text: "A two-round deficit turns into a surgical retake chain in OT.", tag: "Playoffs" },
          { title: "Ace Under Pressure", text: "A lone anchor holds the site with pixel-perfect crosshair placement.", tag: "Clutch" },
          { title: "Five-Head Utility Trap", text: "A layered setup catches a full exec and flips the map.", tag: "Tactics" },
        ].map((h, i) => ({ ...h, img: makeThumb(i) }));

        const track = $("#highTrack");
        track.innerHTML = HIGHLIGHTS
          .map(
            (h, i) => `
              <div class="slide" data-idx="${i}">
                <div class="thumb">
                  <img loading="lazy" alt="${esc(h.title)} thumbnail" src="${h.img}" />
                </div>
                <div class="slideText">
                  <h4>${esc(h.title)}</h4>
                  <p>${esc(h.text)}</p>
                  <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap">
                    <span class="chip live">${esc(h.tag)}</span>
                    <button class="btn small primary" data-open-highlight="${i}" type="button">Open</button>
                  </div>
                </div>
              </div>
            `
          )
          .join("");

        let carIdx = 0;
        const setCarousel = (idx) => {
          carIdx = (idx + HIGHLIGHTS.length) % HIGHLIGHTS.length;
          track.style.transform = `translateX(${-carIdx * 100}%)`;
        };
        $("#carPrev").addEventListener("click", () => setCarousel(carIdx - 1));
        $("#carNext").addEventListener("click", () => setCarousel(carIdx + 1));

        let carTimer = 0;
        const startCarousel = () => {
          if (prefersReducedMotion) return;
          window.clearInterval(carTimer);
          carTimer = window.setInterval(() => setCarousel(carIdx + 1), 5200);
        };
        startCarousel();
        $("#carousel").addEventListener("pointerenter", () => window.clearInterval(carTimer));
        $("#carousel").addEventListener("pointerleave", startCarousel);

        // Modal
        const modal = $("#modal");
        const modalTitle = $("#modalTitle");
        const modalBody = $("#modalBody");
        const modalClose = $("#modalClose");
        const openModal = (title, html) => {
          modalTitle.textContent = title;
          modalBody.innerHTML = html;
          if (typeof modal.showModal === "function") modal.showModal();
          else modal.setAttribute("open", "true");
        };
        const closeModal = () => {
          if (typeof modal.close === "function") modal.close();
          else modal.removeAttribute("open");
        };
        modalClose.addEventListener("click", closeModal);
        modal.addEventListener("click", (e) => {
          const rect = modal.getBoundingClientRect();
          const inDialog = e.clientX >= rect.left && e.clientX <= rect.right && e.clientY >= rect.top && e.clientY <= rect.bottom;
          if (!inDialog) closeModal();
        });

        const openTickets = () => {
          openModal(
            "Tickets",
            `
              <div class="modalGrid">
                <div class="modalCard">
                  <h4>General Admission</h4>
                  <p>All-day access, fan zones, merch booth, and live stage view.</p>
                  <div style="display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap">
                    <span class="pill">From $39</span>
                    <button class="btn mag" id="buyGA" type="button">Buy GA</button>
                  </div>
                </div>
                <div class="modalCard">
                  <h4>Premium Pass</h4>
                  <p>Priority entry, reserved seating, and behind-the-scenes tour slot.</p>
                  <div style="display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap">
                    <span class="pill">From $89</span>
                    <button class="btn primary" id="buyVIP" type="button">Buy Premium</button>
                  </div>
                </div>
              </div>
              <div class="modalCard" style="margin-top: 12px">
                <h4>Mobile tickets</h4>
                <p>Instant QR delivery and optional calendar reminder. Seats are limited—secure yours early.</p>
              </div>
            `
          );
          const bind = (id, plan) => {
            const el = $("#" + id);
            if (!el) return;
            el.addEventListener("click", () => {
              toast.show("Tickets", `${plan} reserved (demo).`);
              closeModal();
            });
          };
          bind("buyGA", "General Admission");
          bind("buyVIP", "Premium Pass");
        };

        const openRegister = () => {
          openModal(
            "Register Team",
            `
              <div class="modalGrid">
                <div class="modalCard">
                  <h4>Team Details</h4>
                  <div class="formGrid">
                    <input id="regTeam" placeholder="Team name" required />
                    <input id="regOrg" placeholder="Organization (optional)" />
                    <div class="formRow">
                      <input id="regEmail" type="email" placeholder="Contact email" required />
                      <input id="regRegion" placeholder="Region (NA/EU/APAC…)" required />
                    </div>
                  </div>
                </div>
                <div class="modalCard">
                  <h4>Competitive Info</h4>
                  <div class="formGrid">
                    <input id="regGame" placeholder="Title (FPS/MOBA…)" value="FPS" required />
                    <input id="regSeed" placeholder="Expected seed (1–16)" inputmode="numeric" />
                    <textarea id="regNotes" placeholder="Notes for admins (schedules, accessibility, substitutions…)"></textarea>
                    <button class="btn primary" id="btnSubmitReg" type="button">Submit Registration</button>
                  </div>
                </div>
              </div>
              <p class="fine">Demo form—submits locally and shows a confirmation toast.</p>
            `
          );
          $("#btnSubmitReg")?.addEventListener("click", () => {
            const team = $("#regTeam")?.value?.trim();
            const email = $("#regEmail")?.value?.trim();
            const region = $("#regRegion")?.value?.trim();
            if (!team || !email || !region) {
              toast.show("Missing info", "Fill team name, email, and region.");
              return;
            }
            toast.show("Registered", `Team "${team}" submitted (demo).`);
            closeModal();
          });
        };

        const openConduct = () => {
          openModal(
            "Code of Conduct",
            `
              <div class="modalCard">
                <h4>Be excellent to each other</h4>
                <p>
                  We’re committed to a welcoming, harassment-free experience for attendees, staff, and participants.
                  Respect personal boundaries, follow staff guidance, and report issues immediately.
                </p>
              </div>
              <div class="modalGrid" style="margin-top:12px">
                <div class="modalCard">
                  <h4>Reporting</h4>
                  <p>Find staff in neon vests or use the contact form. Urgent issues are handled on-site immediately.</p>
                </div>
                <div class="modalCard">
                  <h4>Enforcement</h4>
                  <p>We may issue warnings, revoke access, or remove individuals to maintain a safe environment.</p>
                </div>
              </div>
            `
          );
        };

        const openHighlight = (idx) => {
          const h = HIGHLIGHTS[idx];
          openModal(
            "Highlights",
            `
              <div class="modalCard">
                <h4>${esc(h.title)}</h4>
                <p>${esc(h.text)}</p>
              </div>
              <div class="modalCard" style="margin-top:12px">
                <div class="thumb" style="max-width: 100%; aspect-ratio: 16/9">
                  <img alt="${esc(h.title)}" src="${h.img}" />
                </div>
                <div style="display:flex; gap:10px; justify-content:space-between; align-items:center; flex-wrap:wrap; margin-top:12px">
                  <span class="pill">Shareable clip • simulated</span>
                  <button class="btn primary" id="btnCopyClip" type="button">Copy clip link</button>
                </div>
              </div>
            `
          );
          $("#btnCopyClip")?.addEventListener("click", async () => {
            const base = location.href.split("#")[0];
            const url = `${base}#social`;
            try {
              await navigator.clipboard.writeText(url);
              toast.show("Copied", "Link copied to clipboard.");
            } catch {
              toast.show("Copy failed", "Clipboard unavailable in this environment.");
            }
          });
        };

        document.addEventListener("click", (e) => {
          const btn = e.target.closest("[data-open-highlight]");
          if (!btn) return;
          const idx = Number(btn.getAttribute("data-open-highlight"));
          if (!Number.isFinite(idx)) return;
          openHighlight(idx);
        });
        $("#btnOpenHighlights").addEventListener("click", () => openHighlight(carIdx));

        // Buttons: tickets / register / conduct
        const ticketsButtons = ["#btnTickets", "#btnTicketsTop", "#btnTicketsFoot", "#btnStickyTickets"].map((s) => $(s));
        ticketsButtons.forEach((b) => b && b.addEventListener("click", openTickets));
        $("#btnRegister").addEventListener("click", openRegister);
        $("#btnConduct").addEventListener("click", openConduct);

        // Share link
        $("#btnShare").addEventListener("click", async () => {
          const base = location.href.split("#")[0];
          const url = `${base}#top`;
          try {
            await navigator.clipboard.writeText(url);
            toast.show("Copied", "Share link copied to clipboard.");
          } catch {
            toast.show("Copy failed", "Clipboard unavailable in this environment.");
          }
        });

        // Contact form (demo)
        $("#btnContactFocus").addEventListener("click", () => $("#contactName").focus());
        $("#contactForm").addEventListener("submit", (e) => {
          e.preventDefault();
          const name = $("#contactName").value.trim();
          const email = $("#contactEmail").value.trim();
          const topic = $("#contactTopic").value.trim();
          const msg = $("#contactMsg").value.trim();
          if (!name || !email || !topic || !msg) {
            toast.show("Missing info", "Please complete the form.");
            return;
          }
          toast.show("Sent", "Message received (demo).");
          e.target.reset();
        });

        // Rules PDF (data URI - tiny PDF)
        const setRulesPdf = () => {
          // Minimal PDF content (one page). Base64 kept intentionally small.
          const pdfBase64 =
            "JVBERi0xLjQKJeLjz9MKMSAwIG9iago8PCAvVHlwZSAvQ2F0YWxvZyAvUGFnZXMgMiAwIFIgPj4KZW5kb2JqCjIgMCBvYmoKPDwgL1R5cGUgL1BhZ2VzIC9LaWRzIFszIDAgUl0gL0NvdW50IDEgPj4KZW5kb2JqCjMgMCBvYmoKPDwgL1R5cGUgL1BhZ2UgL1BhcmVudCAyIDAgUiAvTWVkaWFCb3ggWzAgMCA2MTIgNzkyXSAvUmVzb3VyY2VzIDw8IC9Gb250IDw8IC9GMSA0IDAgUiA+PiA+PiAvQ29udGVudHMgNSAwIFIgPj4KZW5kb2JqCjQgMCBvYmoKPDwgL1R5cGUgL0ZvbnQgL1N1YnR5cGUgL1R5cGUxIC9CYXNlRm9udCAvSGVsdmV0aWNhID4+CmVuZG9iago1IDAgb2JqCjw8IC9MZW5ndGggMTY4ID4+CnN0cmVhbQpCVCAvRjEgMjAgVGYgNzIgNzIwIFRkIChFc3BvcnRzIFRvdXJuYW1lbnQg4oCTIFJ1bGVzIChEZW1vKSkgVGoKVGQKMCAtMzIgVGQgKEZvcm1hdDogc2luZ2xlLWVsaW0gcGxheW9mZnMuKSBUagowIC0yNCBUZCAoQ29kZSBvZiBjb25kdWN0IHJlcXVpcmVkIGZvciBhbGwuKSBUagowIC0yNCBUZCAoQ2hlYXRpbmc6IHplcm8gdG9sZXJhbmNlLiBSZXBvcnQgaXNzdWVzLiApIFRqCkVUCmVuZHN0cmVhbQplbmRvYmoKeHJlZgowIDYKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDE1IDAwMDAwIG4gCjAwMDAwMDAwNjYgMDAwMDAgbiAKMDAwMDAwMDEyOCAwMDAwMCBuIAowMDAwMDAwMjg5IDAwMDAwIG4gCjAwMDAwMDAzNTUgMDAwMDAgbiAKdHJhaWxlcgo8PCAvU2l6ZSA2IC9Sb290IDEgMCBSID4+CnN0YXJ0eHJlZgo1NzEKJSVFT0YK";
          $("#rulesPdf").href = `data:application/pdf;base64,${pdfBase64}`;
        };
        setRulesPdf();

        // Quality toggle (UI-only)
        const qualityBtn = $("#btnStreamQuality");
        const qualities = ["Auto", "1080p", "720p", "480p"];
        let qIdx = 0;
        qualityBtn.addEventListener("click", () => {
          qIdx = (qIdx + 1) % qualities.length;
          qualityBtn.textContent = `Quality: ${qualities[qIdx]}`;
          toast.show("Stream", `Quality set to ${qualities[qIdx]} (demo).`);
        });

        // Reveal on scroll
        const revealEls = $$(".reveal");
        if ("IntersectionObserver" in window && !prefersReducedMotion) {
          const io = new IntersectionObserver(
            (entries) => {
              for (const e of entries) {
                if (e.isIntersecting) {
                  e.target.dataset.in = "true";
                  io.unobserve(e.target);
                }
              }
            },
            { threshold: 0.12 }
          );
          revealEls.forEach((el) => io.observe(el));
        } else {
          revealEls.forEach((el) => (el.dataset.in = "true"));
        }

        // Counter animation
        const counters = $$(".countNum");
        const animateCount = (el) => {
          const target = Number(el.getAttribute("data-count")) || 0;
          const t0 = performance.now();
          const dur = prefersReducedMotion ? 1 : 900;
          const step = (t) => {
            const p = clamp((t - t0) / dur, 0, 1);
            const eased = 1 - Math.pow(1 - p, 3);
            const val = Math.round(target * eased);
            el.textContent = formatCompactNumber(val);
            if (p < 1) requestAnimationFrame(step);
          };
          requestAnimationFrame(step);
        };
        if ("IntersectionObserver" in window && !prefersReducedMotion) {
          const io = new IntersectionObserver(
            (entries) => {
              for (const e of entries) {
                if (e.isIntersecting) {
                  animateCount(e.target);
                  io.unobserve(e.target);
                }
              }
            },
            { threshold: 0.35 }
          );
          counters.forEach((c) => io.observe(c));
        } else {
          counters.forEach((c) => animateCount(c));
        }

        // Mobile sticky CTA behavior: avoid covering compare drawer
        syncSticky();

        // Minor keyboard niceties: close modal with Escape (native dialog handles, fallback included)
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && modal.hasAttribute("open")) closeModal();
        });

        // Initial toast
        window.setTimeout(() => toast.show("Ready", "Times are shown in your timezone. Try demo mode in the bracket."), 650);
      })();
    </script>
  </body>
</html>
