<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <meta name="theme-color" content="#0b1220" />
    <title>Nonprofit Impact Report</title>
    <meta
      name="description"
      content="Nonprofit Impact Report — a visually engaging, measurable snapshot of programs, outcomes, and stories that move people to act."
    />
    <style>
      :root {
        --bg0: #070b12;
        --bg1: #0b1220;
        --card: rgba(255, 255, 255, 0.07);
        --card2: rgba(255, 255, 255, 0.09);
        --stroke: rgba(255, 255, 255, 0.14);
        --stroke2: rgba(255, 255, 255, 0.18);
        --text: rgba(255, 255, 255, 0.92);
        --muted: rgba(255, 255, 255, 0.68);
        --muted2: rgba(255, 255, 255, 0.54);
        --shadow: 0 24px 70px rgba(0, 0, 0, 0.55);
        --shadow2: 0 16px 40px rgba(0, 0, 0, 0.4);
        --primary: #7cf7d4;
        --primary2: #56d9ff;
        --accent: #f6d365;
        --danger: #ff5876;
        --ok: #40f99b;
        --radius: 18px;
        --radius2: 26px;
        --max: 1160px;
        --grid: rgba(255, 255, 255, 0.06);
        --ring: rgba(124, 247, 212, 0.25);
        --focus: rgba(124, 247, 212, 0.75);
        --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",
          monospace;
        --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji",
          "Segoe UI Emoji";
        --serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
      }

      :root[data-theme="light"] {
        --bg0: #f6f9ff;
        --bg1: #eff6ff;
        --card: rgba(255, 255, 255, 0.8);
        --card2: rgba(255, 255, 255, 0.9);
        --stroke: rgba(10, 18, 32, 0.12);
        --stroke2: rgba(10, 18, 32, 0.18);
        --text: rgba(10, 18, 32, 0.92);
        --muted: rgba(10, 18, 32, 0.66);
        --muted2: rgba(10, 18, 32, 0.52);
        --shadow: 0 24px 70px rgba(10, 18, 32, 0.12);
        --shadow2: 0 16px 40px rgba(10, 18, 32, 0.1);
        --grid: rgba(10, 18, 32, 0.06);
        --ring: rgba(29, 191, 163, 0.18);
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
      }

      body {
        margin: 0;
        font-family: var(--sans);
        color: var(--text);
        background: radial-gradient(1200px 900px at 20% 10%, rgba(124, 247, 212, 0.16), transparent 60%),
          radial-gradient(1000px 900px at 85% 0%, rgba(86, 217, 255, 0.16), transparent 55%),
          radial-gradient(800px 800px at 85% 65%, rgba(246, 211, 101, 0.12), transparent 60%),
          linear-gradient(180deg, var(--bg0), var(--bg1));
        overflow-x: hidden;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      button,
      input {
        font: inherit;
      }

      ::selection {
        background: rgba(124, 247, 212, 0.24);
      }

      .skip-link {
        position: absolute;
        left: 12px;
        top: 10px;
        padding: 10px 12px;
        border-radius: 12px;
        background: var(--card2);
        border: 1px solid var(--stroke);
        transform: translateY(-140%);
        transition: transform 160ms ease;
        z-index: 9999;
      }
      .skip-link:focus {
        transform: translateY(0);
        outline: 3px solid var(--focus);
        outline-offset: 3px;
      }

      .wrap {
        max-width: var(--max);
        margin: 0 auto;
        padding: 0 18px;
      }

      .topline {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 14px;
        padding: 14px 0;
      }

      header {
        position: sticky;
        top: 0;
        z-index: 40;
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        background: linear-gradient(180deg, rgba(8, 12, 20, 0.72), rgba(8, 12, 20, 0.42));
        border-bottom: 1px solid var(--grid);
      }

      :root[data-theme="light"] header {
        background: linear-gradient(180deg, rgba(246, 249, 255, 0.85), rgba(246, 249, 255, 0.6));
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 220px;
      }

      .logo {
        width: 38px;
        height: 38px;
        border-radius: 14px;
        border: 1px solid var(--stroke);
        background: radial-gradient(12px 12px at 30% 30%, rgba(124, 247, 212, 0.95), transparent 60%),
          radial-gradient(14px 14px at 70% 35%, rgba(86, 217, 255, 0.95), transparent 62%),
          radial-gradient(16px 16px at 55% 75%, rgba(246, 211, 101, 0.92), transparent 62%),
          linear-gradient(180deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.03));
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08), 0 12px 24px rgba(0, 0, 0, 0.25);
      }

      .brand h1 {
        margin: 0;
        font-size: 14px;
        line-height: 1.1;
        letter-spacing: 0.2px;
      }

      .brand p {
        margin: 0;
        font-size: 12px;
        color: var(--muted);
      }

      nav {
        display: flex;
        align-items: center;
        gap: 6px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .navlink {
        position: relative;
        padding: 10px 10px;
        border-radius: 12px;
        color: var(--muted);
        font-size: 13px;
        transition: background 160ms ease, color 160ms ease;
      }

      .navlink:hover {
        background: rgba(255, 255, 255, 0.06);
        color: rgba(255, 255, 255, 0.9);
      }
      :root[data-theme="light"] .navlink:hover {
        background: rgba(10, 18, 32, 0.06);
        color: rgba(10, 18, 32, 0.92);
      }

      .navlink[aria-current="page"] {
        color: var(--text);
        background: linear-gradient(180deg, rgba(124, 247, 212, 0.12), rgba(124, 247, 212, 0.05));
        box-shadow: inset 0 0 0 1px rgba(124, 247, 212, 0.16);
      }

      .actions {
        display: flex;
        align-items: center;
        gap: 10px;
        justify-content: flex-end;
        min-width: 220px;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 9px;
        padding: 11px 14px;
        border-radius: 14px;
        border: 1px solid var(--stroke);
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.09), rgba(255, 255, 255, 0.05));
        color: var(--text);
        cursor: pointer;
        box-shadow: var(--shadow2);
        transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease, border-color 150ms ease;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
      }

      .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 18px 44px rgba(0, 0, 0, 0.35);
        border-color: var(--stroke2);
      }

      :root[data-theme="light"] .btn:hover {
        box-shadow: 0 18px 44px rgba(10, 18, 32, 0.14);
      }

      .btn:active {
        transform: translateY(0);
      }

      .btn:focus-visible {
        outline: 3px solid var(--focus);
        outline-offset: 3px;
      }

      .btn.primary {
        border-color: rgba(124, 247, 212, 0.28);
        background: linear-gradient(135deg, rgba(124, 247, 212, 0.18), rgba(86, 217, 255, 0.12));
        box-shadow: 0 20px 54px rgba(86, 217, 255, 0.18);
      }

      .btn.primary:hover {
        box-shadow: 0 22px 62px rgba(86, 217, 255, 0.22);
      }

      .btn.ghost {
        background: transparent;
        box-shadow: none;
      }

      .icon {
        width: 16px;
        height: 16px;
        display: inline-block;
      }

      .hero {
        padding: 48px 0 10px;
        position: relative;
      }

      .hero-grid {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 22px;
        align-items: stretch;
      }

      .panel {
        border-radius: var(--radius2);
        border: 1px solid var(--stroke);
        background: linear-gradient(180deg, var(--card), rgba(255, 255, 255, 0.03));
        box-shadow: var(--shadow);
        overflow: hidden;
        position: relative;
      }

      .panel::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(800px 300px at 30% 10%, rgba(124, 247, 212, 0.16), transparent 60%),
          radial-gradient(600px 320px at 80% 0%, rgba(86, 217, 255, 0.16), transparent 60%),
          radial-gradient(650px 380px at 50% 100%, rgba(246, 211, 101, 0.14), transparent 65%);
        opacity: 0.85;
        pointer-events: none;
      }

      .panel > * {
        position: relative;
      }

      .hero-main {
        padding: 28px 26px 22px;
        display: grid;
        gap: 14px;
      }

      .kicker {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 8px 12px;
        border-radius: 999px;
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.05);
        width: fit-content;
        color: var(--muted);
        font-size: 12px;
      }

      .kicker strong {
        color: var(--text);
        font-weight: 650;
      }

      .hero h2 {
        margin: 0;
        font-size: clamp(30px, 3.6vw, 46px);
        letter-spacing: -0.02em;
        line-height: 1.07;
      }

      .hero h2 .grad {
        background: linear-gradient(90deg, var(--primary), var(--primary2), var(--accent));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      .hero p {
        margin: 0;
        color: var(--muted);
        font-size: 15px;
        line-height: 1.6;
        max-width: 62ch;
      }

      .hero-cta {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 6px;
        align-items: center;
      }

      .meta-row {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: center;
        margin-top: 8px;
        color: var(--muted2);
        font-size: 12px;
      }

      .meta-pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 999px;
        border: 1px solid var(--grid);
        background: rgba(255, 255, 255, 0.04);
      }

      .hero-aside {
        padding: 18px 18px 16px;
        display: grid;
        gap: 12px;
      }

      .aside-top {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        align-items: flex-start;
      }

      .aside-top h3 {
        margin: 0;
        font-size: 14px;
        letter-spacing: 0.2px;
      }

      .aside-top p {
        margin: 2px 0 0;
        font-size: 12px;
        color: var(--muted);
        line-height: 1.5;
      }

      .year-pills {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
      }

      .pill {
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.04);
        color: var(--muted);
        border-radius: 999px;
        padding: 8px 10px;
        font-size: 12px;
        cursor: pointer;
        transition: transform 140ms ease, background 140ms ease, color 140ms ease, border-color 140ms ease;
      }

      .pill:hover {
        transform: translateY(-1px);
        color: var(--text);
        border-color: var(--stroke2);
      }

      .pill[aria-pressed="true"] {
        color: var(--text);
        background: linear-gradient(135deg, rgba(124, 247, 212, 0.16), rgba(86, 217, 255, 0.1));
        border-color: rgba(124, 247, 212, 0.3);
        box-shadow: inset 0 0 0 1px rgba(86, 217, 255, 0.14);
      }

      .impact-mini {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }

      .mini {
        padding: 12px 12px;
        border-radius: var(--radius);
        border: 1px solid var(--grid);
        background: rgba(255, 255, 255, 0.035);
        display: grid;
        gap: 6px;
      }

      .mini strong {
        font-size: 18px;
        letter-spacing: -0.02em;
      }

      .mini span {
        color: var(--muted);
        font-size: 12px;
        line-height: 1.35;
      }

      .mini .spark {
        width: 100%;
        height: 26px;
        opacity: 0.9;
      }

      .section {
        padding: 34px 0;
      }

      .section-head {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        gap: 16px;
        flex-wrap: wrap;
        margin-bottom: 14px;
      }

      .section h3 {
        margin: 0;
        font-size: 18px;
        letter-spacing: -0.01em;
      }

      .section p.lead {
        margin: 0;
        color: var(--muted);
        font-size: 14px;
        line-height: 1.6;
        max-width: 72ch;
      }

      .grid-4 {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 14px;
      }

      .card {
        border-radius: var(--radius2);
        border: 1px solid var(--stroke);
        background: linear-gradient(180deg, var(--card), rgba(255, 255, 255, 0.03));
        box-shadow: var(--shadow2);
        overflow: hidden;
      }

      .card .inner {
        padding: 16px 16px;
        display: grid;
        gap: 12px;
      }

      .stat-top {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 12px;
      }

      .stat-top .label {
        color: var(--muted);
        font-size: 12px;
        line-height: 1.35;
      }

      .badge {
        font-size: 11px;
        color: var(--muted);
        border: 1px solid var(--grid);
        padding: 6px 8px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.04);
        display: inline-flex;
        align-items: center;
        gap: 7px;
        white-space: nowrap;
      }

      .badge b {
        color: var(--text);
        font-weight: 650;
      }

      .big {
        font-size: 28px;
        letter-spacing: -0.02em;
        line-height: 1;
      }

      .sub {
        color: var(--muted);
        font-size: 13px;
        line-height: 1.5;
      }

      .progress {
        height: 10px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid var(--grid);
        overflow: hidden;
      }

      :root[data-theme="light"] .progress {
        background: rgba(10, 18, 32, 0.05);
      }

      .progress > div {
        height: 100%;
        border-radius: 999px;
        background: linear-gradient(90deg, rgba(124, 247, 212, 0.95), rgba(86, 217, 255, 0.9), rgba(246, 211, 101, 0.85));
        width: 0%;
        transition: width 900ms cubic-bezier(0.2, 0.8, 0.2, 1);
      }

      .chart-grid {
        display: grid;
        grid-template-columns: 1.15fr 0.85fr;
        gap: 14px;
      }

      .chart-grid .card {
        min-height: 280px;
      }

      .chart-wrap {
        padding: 16px 16px 12px;
        display: grid;
        gap: 10px;
      }

      .chart-title {
        display: flex;
        justify-content: space-between;
        gap: 14px;
        align-items: center;
      }

      .chart-title strong {
        font-size: 13px;
        letter-spacing: 0.1px;
      }

      .chart-title span {
        color: var(--muted);
        font-size: 12px;
      }

      canvas {
        width: 100% !important;
        height: 220px !important;
      }

      .split {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 14px;
      }

      .map {
        padding: 16px;
        display: grid;
        gap: 12px;
      }

      .map svg {
        width: 100%;
        height: auto;
        border-radius: var(--radius2);
        border: 1px solid var(--grid);
        background: rgba(255, 255, 255, 0.03);
      }

      .tooltip {
        position: fixed;
        inset: auto auto 16px 16px;
        max-width: 360px;
        pointer-events: none;
        opacity: 0;
        transform: translateY(6px);
        transition: opacity 150ms ease, transform 150ms ease;
        z-index: 60;
      }

      .tooltip .tbox {
        border-radius: 16px;
        border: 1px solid var(--stroke);
        background: rgba(15, 20, 30, 0.85);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        box-shadow: var(--shadow2);
        padding: 10px 12px;
        color: rgba(255, 255, 255, 0.92);
        display: grid;
        gap: 6px;
      }

      :root[data-theme="light"] .tooltip .tbox {
        background: rgba(255, 255, 255, 0.95);
        color: rgba(10, 18, 32, 0.92);
      }

      .tooltip strong {
        font-size: 12px;
        letter-spacing: 0.15px;
      }

      .tooltip span {
        color: var(--muted);
        font-size: 12px;
      }

      .tooltip.show {
        opacity: 1;
        transform: translateY(0);
      }

      .stories {
        padding: 14px 0 0;
      }

      .carousel {
        position: relative;
      }

      .track {
        display: grid;
        grid-auto-flow: column;
        grid-auto-columns: minmax(280px, 1fr);
        gap: 14px;
        overflow: auto hidden;
        scroll-snap-type: x mandatory;
        padding-bottom: 6px;
        -webkit-overflow-scrolling: touch;
      }

      .track::-webkit-scrollbar {
        height: 10px;
      }
      .track::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.18);
        border-radius: 999px;
      }
      :root[data-theme="light"] .track::-webkit-scrollbar-thumb {
        background: rgba(10, 18, 32, 0.16);
      }

      .story {
        scroll-snap-align: start;
      }

      .story .inner {
        padding: 16px;
        display: grid;
        gap: 12px;
      }

      .story-top {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .avatar {
        width: 44px;
        height: 44px;
        border-radius: 16px;
        border: 1px solid var(--grid);
        background: linear-gradient(135deg, rgba(124, 247, 212, 0.22), rgba(86, 217, 255, 0.14));
        display: grid;
        place-items: center;
        overflow: hidden;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);
      }

      .avatar svg {
        width: 34px;
        height: 34px;
        opacity: 0.95;
      }

      .story h4 {
        margin: 0;
        font-size: 14px;
      }
      .story .meta {
        margin: 2px 0 0;
        color: var(--muted);
        font-size: 12px;
      }

      .quote {
        margin: 0;
        color: var(--text);
        font-size: 14px;
        line-height: 1.65;
        position: relative;
      }

      .quote::before {
        content: "“";
        position: absolute;
        left: -8px;
        top: -14px;
        font-family: var(--serif);
        font-size: 44px;
        color: rgba(124, 247, 212, 0.28);
      }

      .story .impactline {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-items: center;
      }

      .tag {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        color: var(--muted);
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid var(--grid);
        padding: 7px 9px;
        border-radius: 999px;
      }

      .carousel-controls {
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: space-between;
        margin-top: 10px;
      }

      .dots {
        display: flex;
        gap: 6px;
        align-items: center;
      }

      .dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.18);
        border: 1px solid var(--grid);
        transition: transform 140ms ease, background 140ms ease;
      }

      :root[data-theme="light"] .dot {
        background: rgba(10, 18, 32, 0.16);
      }

      .dot.active {
        transform: scale(1.4);
        background: linear-gradient(90deg, rgba(124, 247, 212, 0.9), rgba(86, 217, 255, 0.9));
      }

      .donate {
        display: grid;
        grid-template-columns: 1.05fr 0.95fr;
        gap: 14px;
      }

      .form-row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
      }

      .seg {
        display: inline-flex;
        gap: 6px;
        align-items: center;
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.04);
        padding: 6px;
        border-radius: 999px;
      }

      .seg button {
        border: 0;
        background: transparent;
        color: var(--muted);
        padding: 8px 10px;
        border-radius: 999px;
        cursor: pointer;
        transition: background 140ms ease, color 140ms ease;
      }

      .seg button[aria-pressed="true"] {
        color: var(--text);
        background: linear-gradient(135deg, rgba(124, 247, 212, 0.16), rgba(86, 217, 255, 0.1));
      }

      .money {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 10px;
        align-items: center;
      }

      .money input {
        width: 100%;
        border-radius: 16px;
        border: 1px solid var(--stroke);
        background: rgba(255, 255, 255, 0.04);
        color: var(--text);
        padding: 12px 12px;
        outline: none;
      }

      .money input:focus-visible {
        outline: 3px solid var(--focus);
        outline-offset: 3px;
      }

      .quick {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .chip {
        border: 1px solid var(--grid);
        background: rgba(255, 255, 255, 0.03);
        color: var(--muted);
        border-radius: 999px;
        padding: 9px 10px;
        font-size: 12px;
        cursor: pointer;
        transition: transform 130ms ease, border-color 130ms ease, color 130ms ease, background 130ms ease;
      }

      .chip:hover {
        transform: translateY(-1px);
        border-color: var(--stroke2);
        color: var(--text);
      }

      .chip[aria-pressed="true"] {
        color: var(--text);
        border-color: rgba(124, 247, 212, 0.32);
        background: rgba(124, 247, 212, 0.11);
      }

      .impact-box {
        padding: 16px;
        display: grid;
        gap: 12px;
      }

      .impact-box .fine {
        color: var(--muted);
        font-size: 12px;
        line-height: 1.5;
      }

      .impact-list {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }

      .impact-item {
        border-radius: 16px;
        border: 1px solid var(--grid);
        background: rgba(255, 255, 255, 0.03);
        padding: 12px;
        display: grid;
        gap: 6px;
      }

      .impact-item strong {
        font-size: 15px;
      }

      .impact-item span {
        color: var(--muted);
        font-size: 12px;
        line-height: 1.35;
      }

      .callout {
        border-radius: var(--radius2);
        border: 1px solid rgba(124, 247, 212, 0.22);
        background: linear-gradient(135deg, rgba(124, 247, 212, 0.14), rgba(86, 217, 255, 0.08));
        padding: 14px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }

      .callout strong {
        font-size: 13px;
        letter-spacing: 0.1px;
      }

      .callout span {
        color: var(--muted);
        font-size: 12px;
        line-height: 1.4;
      }

      .smallprint {
        color: var(--muted2);
        font-size: 12px;
        line-height: 1.55;
      }

      footer {
        padding: 22px 0 36px;
        border-top: 1px solid var(--grid);
        color: var(--muted);
        font-size: 12px;
      }

      .footer-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: center;
        justify-content: space-between;
      }

      .reveal {
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 700ms cubic-bezier(0.2, 0.8, 0.2, 1), transform 700ms cubic-bezier(0.2, 0.8, 0.2, 1);
      }
      .reveal.is-visible {
        opacity: 1;
        transform: translateY(0);
      }

      .divider {
        height: 1px;
        background: var(--grid);
        margin: 22px 0 0;
      }

      .fine-row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
      }

      .kbd {
        font-family: var(--mono);
        font-size: 11px;
        border: 1px solid var(--grid);
        padding: 2px 6px;
        border-radius: 8px;
        color: var(--muted);
        background: rgba(255, 255, 255, 0.04);
      }

      .toast {
        position: fixed;
        right: 16px;
        bottom: 16px;
        z-index: 80;
        width: min(420px, calc(100vw - 32px));
        border-radius: 16px;
        border: 1px solid var(--stroke);
        background: rgba(15, 20, 30, 0.86);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        box-shadow: var(--shadow2);
        padding: 10px 12px;
        display: grid;
        gap: 4px;
        opacity: 0;
        transform: translateY(10px);
        pointer-events: none;
        transition: opacity 170ms ease, transform 170ms ease;
      }

      :root[data-theme="light"] .toast {
        background: rgba(255, 255, 255, 0.96);
      }

      .toast.show {
        opacity: 1;
        transform: translateY(0);
      }

      .toast strong {
        font-size: 12px;
      }
      .toast span {
        font-size: 12px;
        color: var(--muted);
        line-height: 1.4;
      }

      /* Responsive */
      @media (max-width: 980px) {
        .hero-grid {
          grid-template-columns: 1fr;
        }
        .actions {
          min-width: unset;
        }
        .brand {
          min-width: unset;
        }
        .chart-grid {
          grid-template-columns: 1fr;
        }
        .donate {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 860px) {
        .grid-4 {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 520px) {
        .grid-4 {
          grid-template-columns: 1fr;
        }
        .impact-mini {
          grid-template-columns: 1fr;
        }
        .impact-list {
          grid-template-columns: 1fr;
        }
        .money {
          grid-template-columns: 1fr;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        * {
          scroll-behavior: auto !important;
        }
        .reveal {
          transition: none;
        }
        .btn,
        .pill,
        .chip {
          transition: none;
        }
      }
    </style>
  </head>

  <body>
    <a class="skip-link" href="#main">Skip to content</a>

    <header>
      <div class="wrap topline" role="navigation" aria-label="Primary">
        <div class="brand" aria-label="Nonprofit Impact Report">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <h1>Nonprofit Impact Report</h1>
            <p id="orgLine">BrightBridge Foundation • Impact Summary</p>
          </div>
        </div>

        <nav>
          <a class="navlink" href="#overview">Overview</a>
          <a class="navlink" href="#programs">Infographics</a>
          <a class="navlink" href="#stories">Stories</a>
          <a class="navlink" href="#transparency">Transparency</a>
          <a class="navlink" href="#donate">Donate</a>
        </nav>

        <div class="actions">
          <button class="btn ghost" id="themeToggle" type="button" aria-label="Toggle theme" aria-pressed="false">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path
                d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"
                stroke="currentColor"
                stroke-width="1.8"
              />
              <path
                d="M12 2v2.5M12 19.5V22M22 12h-2.5M4.5 12H2M19.8 4.2l-1.8 1.8M6 18l-1.8 1.8M19.8 19.8 18 18M6 6 4.2 4.2"
                stroke="currentColor"
                stroke-width="1.8"
                stroke-linecap="round"
              />
            </svg>
            Theme
          </button>
          <button class="btn" id="printBtn" type="button" aria-label="Print or save as PDF">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path
                d="M7 8V4.5A1.5 1.5 0 0 1 8.5 3h7A1.5 1.5 0 0 1 17 4.5V8"
                stroke="currentColor"
                stroke-width="1.8"
              />
              <path
                d="M7.5 14.5H6a3 3 0 0 1-3-3v-.5A3 3 0 0 1 6 8h12a3 3 0 0 1 3 3v.5a3 3 0 0 1-3 3h-1.5"
                stroke="currentColor"
                stroke-width="1.8"
              />
              <path
                d="M7 14v5.5A1.5 1.5 0 0 0 8.5 21h7a1.5 1.5 0 0 0 1.5-1.5V14H7Z"
                stroke="currentColor"
                stroke-width="1.8"
              />
            </svg>
            Download
          </button>
          <a class="btn primary" href="#donate" id="donateTopCta">
            <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path
                d="M12 21s-7-4.6-9.3-9A6 6 0 0 1 12 5a6 6 0 0 1 9.3 7c-2.3 4.4-9.3 9-9.3 9Z"
                stroke="currentColor"
                stroke-width="1.8"
              />
              Donate
            </a>
        </div>
      </div>
    </header>

    <main id="main">
      <section class="hero wrap" id="overview" aria-label="Overview">
        <div class="hero-grid">
          <div class="panel reveal" style="min-height: 330px">
            <div class="hero-main">
              <div class="kicker">
                <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path
                    d="M20 7 12 3 4 7v10l8 4 8-4V7Z"
                    stroke="currentColor"
                    stroke-width="1.8"
                    stroke-linejoin="round"
                  />
                  <path d="M12 21V11.2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
                  <path
                    d="m20 7-8 4-8-4"
                    stroke="currentColor"
                    stroke-width="1.8"
                    stroke-linecap="round"
                  />
                </svg>
                <strong id="yearKicker">2025 Report</strong>
                <span>measurable outcomes • audited allocation • human stories</span>
              </div>

              <h2>
                Impact you can <span class="grad">see</span>, trust, and share.
              </h2>
              <p>
                This report highlights outcomes from our community programs—food security, youth mentorship, and
                emergency housing—paired with transparent spending and real success stories.
              </p>

              <div class="hero-cta">
                <a class="btn primary" href="#programs">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                      d="M4 12a8 8 0 1 0 16 0 8 8 0 0 0-16 0Z"
                      stroke="currentColor"
                      stroke-width="1.8"
                    />
                    <path d="m10.5 9 5 3-5 3V9Z" fill="currentColor" />
                  </svg>
                  View Infographics
                </a>
                <button class="btn" id="copyLinkBtn" type="button">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                      d="M10 13a5 5 0 0 0 7.1 0l1.4-1.4a5 5 0 0 0-7.1-7.1L10.6 5"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                    />
                    <path
                      d="M14 11a5 5 0 0 0-7.1 0L5.5 12.4a5 5 0 0 0 7.1 7.1L13.4 19"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                    />
                  </svg>
                  Copy share link
                </button>
                <button class="btn ghost" id="liveModeBtn" type="button" aria-pressed="false" title="Toggle live number animation">
                  <span class="kbd">L</span> Live
                </button>
              </div>

              <div class="meta-row" aria-label="Report highlights">
                <span class="meta-pill">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                      d="M7 7h10M7 12h10M7 17h6"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                    />
                    <path
                      d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H8l-4 0V5a2 2 0 0 1 2-2Z"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linejoin="round"
                    />
                  </svg>
                  Updated <span id="updatedDate">—</span>
                </span>
                <span class="meta-pill">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                      d="M12 2v2.2M12 19.8V22M4.2 12H2M22 12h-2.2M6.1 6.1 4.5 4.5M19.5 19.5l-1.6-1.6M17.9 6.1l1.6-1.6M4.5 19.5l1.6-1.6"
                      stroke="currentColor"
                      stroke-width="1.6"
                      stroke-linecap="round"
                    />
                    <path
                      d="M12 6a6 6 0 1 0 6 6"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                    />
                  </svg>
                  <span><b id="beneficiariesCount">—</b> people served</span>
                </span>
                <span class="meta-pill">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                      d="M12 22s8-4.6 8-12V5l-8-3-8 3v5c0 7.4 8 12 8 12Z"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linejoin="round"
                    />
                    <path
                      d="m9.2 12 1.9 1.9 3.8-4"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                  3rd‑party audit: <span><b>clean opinion</b></span>
                </span>
              </div>
            </div>
          </div>

          <aside class="panel reveal" aria-label="Quick snapshot">
            <div class="hero-aside">
              <div class="aside-top">
                <div>
                  <h3>Choose a year</h3>
                  <p>Compare progress across years and see the results shift in real time.</p>
                </div>
                <div class="year-pills" role="group" aria-label="Select report year">
                  <button class="pill" type="button" data-year="2023" aria-pressed="false">2023</button>
                  <button class="pill" type="button" data-year="2024" aria-pressed="false">2024</button>
                  <button class="pill" type="button" data-year="2025" aria-pressed="true">2025</button>
                </div>
              </div>

              <div class="impact-mini" aria-label="Key outcomes">
                <div class="mini">
                  <strong class="count-up" data-key="meals" data-format="compact">0</strong>
                  <span>nutritious meals delivered through partner pantries</span>
                  <svg class="spark" viewBox="0 0 120 26" fill="none" aria-hidden="true">
                    <path
                      d="M2 20 C 18 18, 22 6, 34 10 S 54 24, 66 16 S 82 10, 92 12 S 104 22, 118 8"
                      stroke="rgba(124,247,212,0.95)"
                      stroke-width="2.4"
                      stroke-linecap="round"
                    />
                  </svg>
                </div>
                <div class="mini">
                  <strong class="count-up" data-key="mentorship" data-format="compact">0</strong>
                  <span>hours of mentorship and academic coaching</span>
                  <svg class="spark" viewBox="0 0 120 26" fill="none" aria-hidden="true">
                    <path
                      d="M2 19 C 16 14, 26 18, 36 12 S 56 7, 66 14 S 84 26, 94 18 S 108 12, 118 9"
                      stroke="rgba(86,217,255,0.95)"
                      stroke-width="2.4"
                      stroke-linecap="round"
                    />
                  </svg>
                </div>
                <div class="mini">
                  <strong class="count-up" data-key="shelterNights" data-format="compact">0</strong>
                  <span>safe nights of emergency housing provided</span>
                  <svg class="spark" viewBox="0 0 120 26" fill="none" aria-hidden="true">
                    <path
                      d="M2 18 C 18 22, 26 4, 36 10 S 54 22, 66 15 S 82 8, 92 16 S 104 24, 118 12"
                      stroke="rgba(246,211,101,0.95)"
                      stroke-width="2.4"
                      stroke-linecap="round"
                    />
                  </svg>
                </div>
                <div class="mini">
                  <strong class="count-up" data-key="volunteerHours" data-format="compact">0</strong>
                  <span>volunteer hours powering direct service</span>
                  <svg class="spark" viewBox="0 0 120 26" fill="none" aria-hidden="true">
                    <path
                      d="M2 20 C 12 16, 28 21, 38 13 S 56 7, 66 12 S 84 20, 94 11 S 110 6, 118 10"
                      stroke="rgba(255,88,118,0.78)"
                      stroke-width="2.4"
                      stroke-linecap="round"
                    />
                  </svg>
                </div>
              </div>

              <div class="callout" aria-label="Efficiency statement">
                <div>
                  <strong><span id="programEfficiency">—</span>%</strong>
                  <span>of spending goes directly to programs</span>
                </div>
                <a class="btn primary" href="#donate" style="padding: 10px 12px">Support now</a>
              </div>

              <div class="smallprint">
                Numbers shown are representative for this demo report. Replace the data object in the inlined script
                to match your audited outcomes and spending.
              </div>
            </div>
          </aside>
        </div>
      </section>

      <section class="section wrap" id="snapshot" aria-label="Impact snapshot">
        <div class="section-head">
          <div>
            <h3>Impact Snapshot</h3>
            <p class="lead">
              Clear metrics, built for trust: outcome‑focused indicators, updated charts, and a transparent view of
              where resources go.
            </p>
          </div>
          <div class="fine-row" aria-label="Shortcuts">
            <span class="kbd">↑</span><span class="kbd">↓</span> scroll &nbsp;•&nbsp; <span class="kbd">T</span> theme
            &nbsp;•&nbsp; <span class="kbd">P</span> print
          </div>
        </div>

        <div class="grid-4">
          <article class="card reveal" aria-label="Meals served">
            <div class="inner">
              <div class="stat-top">
                <div class="label">Food Security</div>
                <span class="badge"><b id="mealsYoY">—</b> YoY</span>
              </div>
              <div class="big count-up" data-key="meals" data-format="compact" aria-live="polite">0</div>
              <div class="sub">meals served through 48 community partners</div>
              <div class="progress" aria-label="Progress bar"><div data-bar="meals"></div></div>
            </div>
          </article>

          <article class="card reveal" aria-label="Students supported">
            <div class="inner">
              <div class="stat-top">
                <div class="label">Youth Mentorship</div>
                <span class="badge"><b id="studentsYoY">—</b> YoY</span>
              </div>
              <div class="big count-up" data-key="students" data-format="compact" aria-live="polite">0</div>
              <div class="sub">students supported with tutoring & mentorship</div>
              <div class="progress" aria-label="Progress bar"><div data-bar="students"></div></div>
            </div>
          </article>

          <article class="card reveal" aria-label="Housing stability">
            <div class="inner">
              <div class="stat-top">
                <div class="label">Emergency Housing</div>
                <span class="badge"><b id="housingYoY">—</b> YoY</span>
              </div>
              <div class="big count-up" data-key="housingStability" data-format="percent" aria-live="polite">0</div>
              <div class="sub">housing stability rate after 90 days</div>
              <div class="progress" aria-label="Progress bar"><div data-bar="housingStability"></div></div>
            </div>
          </article>

          <article class="card reveal" aria-label="Community health">
            <div class="inner">
              <div class="stat-top">
                <div class="label">Community Wellness</div>
                <span class="badge"><b id="careYoY">—</b> YoY</span>
              </div>
              <div class="big count-up" data-key="counselingHours" data-format="compact" aria-live="polite">0</div>
              <div class="sub">hours of counseling & care navigation</div>
              <div class="progress" aria-label="Progress bar"><div data-bar="counselingHours"></div></div>
            </div>
          </article>
        </div>
      </section>

      <section class="section wrap" id="programs" aria-label="Infographics">
        <div class="section-head">
          <div>
            <h3>Infographics</h3>
            <p class="lead">
              A data‑rich view of outcomes—program distribution, results over time, and geographic reach. Hover the map
              to see regional outcomes.
            </p>
          </div>
          <div class="badge" id="chartStatus" aria-label="Chart loading status">
            <span aria-hidden="true">●</span> Charts: <b>ready</b>
          </div>
        </div>

        <div class="chart-grid">
          <article class="card reveal" aria-label="Outcomes over time chart">
            <div class="chart-wrap">
              <div class="chart-title">
                <strong>Outcomes Over Time</strong>
                <span>Year-to-year growth across core programs</span>
              </div>
              <canvas id="lineChart" aria-label="Line chart showing outcomes over time" role="img"></canvas>
              <div class="smallprint" id="lineFallback" hidden>
                Chart library unavailable. Values: Meals, Mentorship Hours, Shelter Nights (2023–2025).
              </div>
            </div>
          </article>

          <div class="split">
            <article class="card reveal" aria-label="Funding allocation chart">
              <div class="chart-wrap">
                <div class="chart-title">
                  <strong>Where Funding Goes</strong>
                  <span>Program allocation for the selected year</span>
                </div>
                <canvas id="doughnutChart" aria-label="Doughnut chart showing funding allocation" role="img"></canvas>
                <div class="smallprint" id="doughnutFallback" hidden>
                  Allocation: Food Security, Mentorship, Housing, Wellness, Operations & Compliance.
                </div>
              </div>
            </article>

            <article class="card reveal" aria-label="Efficiency and trust indicators">
              <div class="inner" style="padding: 16px; display: grid; gap: 12px">
                <div class="chart-title" style="margin-bottom: 2px">
                  <strong>Trust Indicators</strong>
                  <span>Transparent by design</span>
                </div>

                <div class="impact-list">
                  <div class="impact-item">
                    <strong><span id="retentionRate">—</span>%</strong>
                    <span>participant retention across multi‑week programs</span>
                  </div>
                  <div class="impact-item">
                    <strong><span id="partnerCount">—</span></strong>
                    <span>partner organizations delivering services</span>
                  </div>
                  <div class="impact-item">
                    <strong><span id="costPerMeal">$—</span></strong>
                    <span>avg. cost per meal served (incl. logistics)</span>
                  </div>
                  <div class="impact-item">
                    <strong><span id="responseTime">—</span>h</strong>
                    <span>median response time for emergency placements</span>
                  </div>
                </div>

                <div class="divider"></div>
                <div class="smallprint">
                  Method note: costs and rates are computed from audited expense categories and participant follow‑ups.
                  Replace with your audited methodology for publication.
                </div>
              </div>
            </article>
          </div>
        </div>

        <div class="divider"></div>

        <section class="map reveal" aria-label="Geographic reach">
          <div class="section-head" style="margin-bottom: 0">
            <div>
              <h3>Geographic Reach</h3>
              <p class="lead">Hover regions to see outcomes and program intensity.</p>
            </div>
            <div class="badge"><b id="reachCities">—</b> communities served</div>
          </div>

          <svg viewBox="0 0 860 260" role="img" aria-label="Abstract map showing service coverage">
            <defs>
              <linearGradient id="gSea" x1="0" x2="1">
                <stop offset="0" stop-color="rgba(124,247,212,0.10)" />
                <stop offset="1" stop-color="rgba(86,217,255,0.08)" />
              </linearGradient>
              <linearGradient id="gLand" x1="0" x2="1">
                <stop offset="0" stop-color="rgba(255,255,255,0.03)" />
                <stop offset="1" stop-color="rgba(255,255,255,0.06)" />
              </linearGradient>
              <filter id="glow" x="-40%" y="-40%" width="180%" height="180%">
                <feGaussianBlur stdDeviation="8" result="blur" />
                <feColorMatrix
                  in="blur"
                  type="matrix"
                  values="1 0 0 0 0.35  0 1 0 0 0.85  0 0 1 0 0.75  0 0 0 0.65 0"
                  result="colorBlur"
                />
                <feMerge>
                  <feMergeNode in="colorBlur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
            </defs>
            <rect x="0" y="0" width="860" height="260" fill="url(#gSea)" />

            <path
              d="M40,200 C120,60 240,40 330,90 C380,120 430,120 480,90 C560,40 680,60 800,150 C780,210 660,240 520,220 C400,200 290,240 170,230 C110,226 70,220 40,200Z"
              fill="url(#gLand)"
              stroke="rgba(255,255,255,0.12)"
            />

            <g id="regions" stroke="rgba(255,255,255,0.16)" stroke-width="1">
              <path
                class="region"
                data-region="North Corridor"
                data-blurb="Mobile pantries + school meal kits"
                data-kpi="Meals: 0 • Students: 0"
                d="M155,110 C190,70 270,60 330,92 C290,140 220,150 155,110Z"
                fill="rgba(124,247,212,0.12)"
              />
              <path
                class="region"
                data-region="Central Metro"
                data-blurb="Mentorship, counseling, and job pathways"
                data-kpi="Mentorship hrs: 0 • Retention: 0%"
                d="M340,95 C395,75 450,80 485,100 C460,145 405,155 345,138 C330,122 330,108 340,95Z"
                fill="rgba(86,217,255,0.12)"
              />
              <path
                class="region"
                data-region="East Ridge"
                data-blurb="Emergency housing coordination"
                data-kpi="Shelter nights: 0 • Response: 0h"
                d="M495,92 C565,55 650,70 728,132 C650,170 572,165 505,130 C490,115 488,102 495,92Z"
                fill="rgba(246,211,101,0.12)"
              />
              <path
                class="region"
                data-region="South Communities"
                data-blurb="Family resource navigation"
                data-kpi="People served: 0 • Partners: 0"
                d="M205,168 C280,148 360,155 430,175 C460,185 490,200 525,220 C390,225 290,240 175,230 C175,200 185,180 205,168Z"
                fill="rgba(255,88,118,0.10)"
              />
            </g>

            <g filter="url(#glow)" opacity="0.95">
              <circle cx="260" cy="115" r="5" fill="rgba(124,247,212,0.9)" />
              <circle cx="410" cy="125" r="5" fill="rgba(86,217,255,0.9)" />
              <circle cx="605" cy="126" r="5" fill="rgba(246,211,101,0.9)" />
              <circle cx="365" cy="195" r="5" fill="rgba(255,88,118,0.75)" />
            </g>
          </svg>
        </section>
      </section>

      <section class="section wrap" id="stories" aria-label="Success stories">
        <div class="section-head">
          <div>
            <h3>Success Stories</h3>
            <p class="lead">
              Metrics show scale; stories show meaning. These anonymized vignettes reflect common outcomes from our
              programs.
            </p>
          </div>
          <div class="badge"><b id="storyCount">4</b> featured stories</div>
        </div>

        <div class="stories">
          <div class="carousel" aria-label="Success story carousel">
            <div class="track" id="track" tabindex="0" aria-label="Scrollable stories">
              <article class="card story reveal">
                <div class="inner">
                  <div class="story-top">
                    <div class="avatar" aria-hidden="true">
                      <svg viewBox="0 0 48 48" fill="none">
                        <path
                          d="M24 7c6.8 0 12.3 5.5 12.3 12.3S30.8 38.6 24 41.8C17.2 38.6 11.7 28 11.7 19.3S17.2 7 24 7Z"
                          fill="rgba(124,247,212,0.18)"
                        />
                        <path
                          d="M24 13.5c3.6 0 6.5 2.9 6.5 6.5S27.6 26.5 24 26.5 17.5 23.6 17.5 20s2.9-6.5 6.5-6.5Z"
                          fill="rgba(124,247,212,0.9)"
                        />
                      </svg>
                    </div>
                    <div>
                      <h4>Maya • Parent & Caregiver</h4>
                      <p class="meta">Food Security • North Corridor</p>
                    </div>
                  </div>
                  <p class="quote">
                    When my hours were cut, groceries became the hardest decision every week. The pantry pickups didn’t
                    just fill a bag—they bought us time to breathe and plan.
                  </p>
                  <div class="impactline">
                    <span class="tag">12 weeks of meal support</span>
                    <span class="tag">Nutrition coaching</span>
                    <span class="tag">School meal kits</span>
                  </div>
                </div>
              </article>

              <article class="card story reveal">
                <div class="inner">
                  <div class="story-top">
                    <div class="avatar" aria-hidden="true">
                      <svg viewBox="0 0 48 48" fill="none">
                        <path
                          d="M10 18c0-5 6.3-9 14-9s14 4 14 9-6.3 9-14 9-14-4-14-9Z"
                          fill="rgba(86,217,255,0.2)"
                        />
                        <path
                          d="M16 32c3-3 7-4.5 8-4.5s5 1.5 8 4.5c-3.4 4-7.4 7-8 7s-4.6-3-8-7Z"
                          fill="rgba(86,217,255,0.9)"
                        />
                      </svg>
                    </div>
                    <div>
                      <h4>Jalen • High School Student</h4>
                      <p class="meta">Mentorship • Central Metro</p>
                    </div>
                  </div>
                  <p class="quote">
                    My mentor didn’t just help me with homework—they helped me picture a future. I applied to internships
                    and learned how to ask for help without feeling small.
                  </p>
                  <div class="impactline">
                    <span class="tag">1:1 tutoring</span>
                    <span class="tag">Career exploration</span>
                    <span class="tag">Scholarship support</span>
                  </div>
                </div>
              </article>

              <article class="card story reveal">
                <div class="inner">
                  <div class="story-top">
                    <div class="avatar" aria-hidden="true">
                      <svg viewBox="0 0 48 48" fill="none">
                        <path
                          d="M12 22 24 12l12 10v14a4 4 0 0 1-4 4H16a4 4 0 0 1-4-4V22Z"
                          fill="rgba(246,211,101,0.22)"
                        />
                        <path
                          d="M20 40V28h8v12"
                          stroke="rgba(246,211,101,0.95)"
                          stroke-width="3"
                          stroke-linejoin="round"
                        />
                      </svg>
                    </div>
                    <div>
                      <h4>Aria • Survivor & Advocate</h4>
                      <p class="meta">Emergency Housing • East Ridge</p>
                    </div>
                  </div>
                  <p class="quote">
                    The housing navigator called me back the same day. Having a safe place meant I could focus on
                    recovery instead of survival. I’m stable now—and paying it forward.
                  </p>
                  <div class="impactline">
                    <span class="tag">Rapid placement</span>
                    <span class="tag">Case management</span>
                    <span class="tag">Safety planning</span>
                  </div>
                </div>
              </article>

              <article class="card story reveal">
                <div class="inner">
                  <div class="story-top">
                    <div class="avatar" aria-hidden="true">
                      <svg viewBox="0 0 48 48" fill="none">
                        <path
                          d="M24 10c7 0 12 5 12 12 0 8-6 15-12 16-6-1-12-8-12-16 0-7 5-12 12-12Z"
                          fill="rgba(255,88,118,0.16)"
                        />
                        <path
                          d="M18.5 23.5c2-4 9-4 11 0"
                          stroke="rgba(255,88,118,0.85)"
                          stroke-width="3"
                          stroke-linecap="round"
                        />
                        <path
                          d="M24 18v11"
                          stroke="rgba(255,88,118,0.7)"
                          stroke-width="3"
                          stroke-linecap="round"
                        />
                      </svg>
                    </div>
                    <div>
                      <h4>Sam • Community Member</h4>
                      <p class="meta">Wellness • South Communities</p>
                    </div>
                  </div>
                  <p class="quote">
                    I didn’t know where to start. The care team helped me navigate benefits, connect to counseling, and
                    stay on track. It felt like someone was finally in my corner.
                  </p>
                  <div class="impactline">
                    <span class="tag">Care navigation</span>
                    <span class="tag">Counseling sessions</span>
                    <span class="tag">Peer support</span>
                  </div>
                </div>
              </article>
            </div>

            <div class="carousel-controls" aria-label="Carousel controls">
              <button class="btn" id="prevStory" type="button" aria-label="Previous story">
                <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path
                    d="M14.5 6 8.5 12l6 6"
                    stroke="currentColor"
                    stroke-width="1.8"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                Prev
              </button>
              <div class="dots" id="dots" aria-label="Story position indicators"></div>
              <button class="btn" id="nextStory" type="button" aria-label="Next story">
                Next
                <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path
                    d="M9.5 6 15.5 12l-6 6"
                    stroke="currentColor"
                    stroke-width="1.8"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </section>

      <section class="section wrap" id="transparency" aria-label="Transparency">
        <div class="section-head">
          <div>
            <h3>Transparency & Accountability</h3>
            <p class="lead">
              Good intentions aren’t enough. We publish what we measure, how we spend, and what we learn.
            </p>
          </div>
          <div class="badge"><b id="auditYear">2025</b> audit summary</div>
        </div>

        <div class="split">
          <article class="card reveal" aria-label="Spending breakdown">
            <div class="inner">
              <div class="chart-title">
                <strong>Spending Breakdown</strong>
                <span>Programs vs. operations</span>
              </div>

              <div class="impact-list">
                <div class="impact-item">
                  <strong><span id="progSpend">—</span>%</strong>
                  <span>direct program delivery</span>
                </div>
                <div class="impact-item">
                  <strong><span id="opsSpend">—</span>%</strong>
                  <span>operations & compliance</span>
                </div>
                <div class="impact-item">
                  <strong><span id="fundSpend">—</span>%</strong>
                  <span>fundraising & community outreach</span>
                </div>
                <div class="impact-item">
                  <strong><span id="reserveMonths">—</span> mo</strong>
                  <span>operating reserves maintained</span>
                </div>
              </div>

              <div class="divider"></div>
              <div class="smallprint">
                Governance: independent board oversight, quarterly reporting, and conflict‑of‑interest policies. Data is
                aggregated and anonymized for privacy.
              </div>
            </div>
          </article>

          <article class="card reveal" aria-label="Evidence and learning">
            <div class="inner">
              <div class="chart-title">
                <strong>Evidence & Learning</strong>
                <span>What we track</span>
              </div>

              <div class="impact-list">
                <div class="impact-item">
                  <strong>Outcome</strong>
                  <span>measurable results, not just services delivered</span>
                </div>
                <div class="impact-item">
                  <strong>Equity</strong>
                  <span>closing gaps by targeting barriers & access</span>
                </div>
                <div class="impact-item">
                  <strong>Quality</strong>
                  <span>participant feedback loops and retention</span>
                </div>
                <div class="impact-item">
                  <strong>Speed</strong>
                  <span>response time for urgent needs</span>
                </div>
              </div>

              <div class="callout" style="margin-top: 10px">
                <div>
                  <strong>Open metrics</strong>
                  <span>Use this report as a template for your own numbers.</span>
                </div>
                <button class="btn" id="copyDataBtn" type="button">Copy data JSON</button>
              </div>
              <div class="smallprint">
                Publication tip: export this page as PDF to share with donors, partners, and your board.
              </div>
            </div>
          </article>
        </div>
      </section>

      <section class="section wrap" id="donate" aria-label="Donation">
        <div class="section-head">
          <div>
            <h3>Donation Link</h3>
            <p class="lead">
              Turn momentum into impact. Choose an amount to see what it can make possible—then continue to a secure
              donation page.
            </p>
          </div>
          <div class="badge">Secure checkout • replace URL for production</div>
        </div>

        <div class="donate">
          <article class="card reveal" aria-label="Donation form">
            <div class="inner">
              <div class="chart-title">
                <strong>Choose your gift</strong>
                <span>One‑time or monthly</span>
              </div>

              <div class="form-row">
                <div class="seg" role="group" aria-label="Donation frequency">
                  <button type="button" data-frequency="once" aria-pressed="true">One‑time</button>
                  <button type="button" data-frequency="monthly" aria-pressed="false">Monthly</button>
                </div>
                <span class="badge" id="freqHint"><b>One‑time</b> gift</span>
              </div>

              <div class="money" aria-label="Donation amount">
                <label class="money" style="grid-column: 1 / -1">
                  <span class="badge">Amount (USD)</span>
                  <input
                    id="amountInput"
                    type="number"
                    inputmode="decimal"
                    min="5"
                    step="1"
                    value="50"
                    aria-label="Donation amount in dollars"
                  />
                </label>
                <button class="btn" id="maxImpactBtn" type="button" title="Pick a high-impact amount">Max impact</button>
              </div>

              <div class="quick" role="group" aria-label="Quick donation amounts">
                <button class="chip" type="button" data-amount="25" aria-pressed="false">$25</button>
                <button class="chip" type="button" data-amount="50" aria-pressed="true">$50</button>
                <button class="chip" type="button" data-amount="100" aria-pressed="false">$100</button>
                <button class="chip" type="button" data-amount="250" aria-pressed="false">$250</button>
                <button class="chip" type="button" data-amount="500" aria-pressed="false">$500</button>
              </div>

              <div class="divider"></div>

              <div class="callout" aria-label="Donation call to action">
                <div>
                  <strong id="donateCtaTitle">Make it happen</strong>
                  <span id="donateCtaSub">Your gift fuels measurable outcomes.</span>
                </div>
                <a class="btn primary" id="donateLink" href="https://brightbridge.org/donate" target="_blank" rel="noreferrer">
                  Continue
                  <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path
                      d="M10 7h7v7"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M17 7 7 17"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </a>
              </div>

              <div class="smallprint">
                If you’re adapting this for a real nonprofit, swap the donation URL to your secure checkout and ensure
                compliance (PCI, privacy, receipts). This demo uses a placeholder domain.
              </div>
            </div>
          </article>

          <article class="card reveal" aria-label="Donation impact">
            <div class="impact-box">
              <div class="chart-title">
                <strong>What your gift unlocks</strong>
                <span>Estimated impact based on audited unit costs</span>
              </div>

              <div class="impact-list" id="impactList">
                <div class="impact-item">
                  <strong id="impactMeals">—</strong>
                  <span>meals served</span>
                </div>
                <div class="impact-item">
                  <strong id="impactKits">—</strong>
                  <span>learning kits for students</span>
                </div>
                <div class="impact-item">
                  <strong id="impactNights">—</strong>
                  <span>safe nights of shelter</span>
                </div>
                <div class="impact-item">
                  <strong id="impactCare">—</strong>
                  <span>hours of counseling & navigation</span>
                </div>
              </div>

              <div class="divider"></div>

              <div class="fine">
                <strong>How we estimate</strong>
                <div class="smallprint" id="estimateNote">
                  We estimate using average unit costs across partners: meals, kits, shelter nights, and counseling.
                  Your gift goes where it’s needed most—these numbers help visualize outcomes.
                </div>
              </div>

              <div class="callout">
                <div>
                  <strong>Share this report</strong>
                  <span>Inspire others with proof of progress.</span>
                </div>
                <button class="btn" id="copyReportBtn" type="button">Copy report link</button>
              </div>
            </div>
          </article>
        </div>
      </section>
    </main>

    <footer>
      <div class="wrap footer-grid">
        <div>
          <strong style="color: var(--text)">BrightBridge Foundation</strong><br />
          <span>Community programs for stability, opportunity, and wellness.</span>
        </div>
        <div class="fine-row">
          <a class="navlink" href="#overview">Back to top</a>
          <span>•</span>
          <a class="navlink" href="#donate">Donate</a>
          <span>•</span>
          <button class="btn ghost" type="button" id="accessibilityBtn" style="padding: 9px 12px">Accessibility</button>
        </div>
      </div>
      <div class="wrap" style="margin-top: 12px">
        <div class="smallprint">
          © <span id="yearNow">—</span> BrightBridge Foundation (demo). Built as a single self-contained HTML report.
        </div>
      </div>
    </footer>

    <div class="tooltip" id="tooltip" role="status" aria-live="polite" aria-atomic="true">
      <div class="tbox">
        <strong id="tipTitle">Region</strong>
        <span id="tipBlurb">—</span>
        <span id="tipKpi">—</span>
      </div>
    </div>

    <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true">
      <strong id="toastTitle">Copied</strong>
      <span id="toastMsg">—</span>
    </div>

    <noscript>
      <div class="wrap" style="padding: 18px 18px 30px">
        <div class="card" style="padding: 16px">
          JavaScript is disabled. You can still read the report, but charts and interactive elements won’t update.
        </div>
      </div>
    </noscript>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script>
      (() => {
        const $ = (sel, el = document) => el.querySelector(sel);
        const $$ = (sel, el = document) => Array.from(el.querySelectorAll(sel));

        const prefersReduced = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
        const fmtCompact = new Intl.NumberFormat(undefined, { notation: "compact", maximumFractionDigits: 1 });
        const fmtNumber = new Intl.NumberFormat(undefined, { maximumFractionDigits: 0 });
        const fmtCurrency = new Intl.NumberFormat(undefined, { style: "currency", currency: "USD", maximumFractionDigits: 0 });

        const impactData = {
          2023: {
            updatedISO: "2023-12-20",
            efficiency: 84,
            beneficiaries: 18850,
            reachCities: 19,
            kpis: { retentionRate: 74, partnerCount: 31, costPerMeal: 2.35, responseTime: 14 },
            yoy: { meals: "+9%", students: "+12%", housingStability: "+4%", counselingHours: "+8%" },
            metrics: {
              meals: 258000,
              mentorship: 19600,
              shelterNights: 12400,
              volunteerHours: 31200,
              students: 910,
              housingStability: 0.72,
              counselingHours: 8300,
            },
            spend: { prog: 84, ops: 9, fund: 7, reserveMonths: 3.2 },
            allocation: {
              labels: ["Food Security", "Mentorship", "Housing", "Wellness", "Operations & Compliance"],
              values: [34, 22, 20, 8, 16],
            },
            timeline: {
              labels: ["2023 Q1", "Q2", "Q3", "Q4", "2024 Q1", "Q2", "Q3", "Q4", "2025 Q1", "Q2", "Q3", "Q4"],
              series: {
                meals: [52000, 58000, 61000, 67000, 69000, 76000, 82000, 89000, 92000, 98000, 104000, 110000],
                mentorship: [3800, 4200, 4600, 5200, 5600, 6100, 6800, 7300, 7600, 8200, 9000, 9800],
                shelter: [2600, 2800, 3000, 3200, 3350, 3600, 3800, 4000, 4300, 4600, 4900, 5200],
              },
            },
            regionKpis: {
              "North Corridor": { meals: 102000, students: 260 },
              "Central Metro": { mentorship: 6200, retention: 74 },
              "East Ridge": { shelterNights: 4600, responseTime: 14 },
              "South Communities": { peopleServed: 5100, partners: 12 },
            },
          },
          2024: {
            updatedISO: "2024-12-18",
            efficiency: 86,
            beneficiaries: 22340,
            reachCities: 24,
            kpis: { retentionRate: 78, partnerCount: 38, costPerMeal: 2.28, responseTime: 12 },
            yoy: { meals: "+11%", students: "+14%", housingStability: "+5%", counselingHours: "+10%" },
            metrics: {
              meals: 304000,
              mentorship: 24100,
              shelterNights: 15800,
              volunteerHours: 40100,
              students: 1150,
              housingStability: 0.76,
              counselingHours: 10150,
            },
            spend: { prog: 86, ops: 8, fund: 6, reserveMonths: 3.8 },
            allocation: {
              labels: ["Food Security", "Mentorship", "Housing", "Wellness", "Operations & Compliance"],
              values: [35, 23, 19, 9, 14],
            },
            timeline: {
              labels: ["2023 Q1", "Q2", "Q3", "Q4", "2024 Q1", "Q2", "Q3", "Q4", "2025 Q1", "Q2", "Q3", "Q4"],
              series: {
                meals: [52000, 58000, 61000, 67000, 72000, 80000, 86000, 94000, 99000, 106000, 112000, 120000],
                mentorship: [3800, 4200, 4600, 5200, 5900, 6600, 7200, 8400, 8800, 9800, 10700, 11600],
                shelter: [2600, 2800, 3000, 3200, 3500, 3800, 4100, 4400, 4700, 5100, 5400, 5800],
              },
            },
            regionKpis: {
              "North Corridor": { meals: 121000, students: 320 },
              "Central Metro": { mentorship: 7800, retention: 78 },
              "East Ridge": { shelterNights: 5600, responseTime: 12 },
              "South Communities": { peopleServed: 6100, partners: 14 },
            },
          },
          2025: {
            updatedISO: "2025-12-12",
            efficiency: 88,
            beneficiaries: 27120,
            reachCities: 31,
            kpis: { retentionRate: 82, partnerCount: 46, costPerMeal: 2.14, responseTime: 10 },
            yoy: { meals: "+13%", students: "+17%", housingStability: "+6%", counselingHours: "+12%" },
            metrics: {
              meals: 361000,
              mentorship: 31200,
              shelterNights: 20400,
              volunteerHours: 52400,
              students: 1460,
              housingStability: 0.81,
              counselingHours: 13400,
            },
            spend: { prog: 88, ops: 7, fund: 5, reserveMonths: 4.1 },
            allocation: {
              labels: ["Food Security", "Mentorship", "Housing", "Wellness", "Operations & Compliance"],
              values: [36, 24, 18, 10, 12],
            },
            timeline: {
              labels: ["2023 Q1", "Q2", "Q3", "Q4", "2024 Q1", "Q2", "Q3", "Q4", "2025 Q1", "Q2", "Q3", "Q4"],
              series: {
                meals: [52000, 58000, 61000, 67000, 72000, 80000, 86000, 94000, 100000, 110000, 124000, 136000],
                mentorship: [3800, 4200, 4600, 5200, 5900, 6600, 7200, 8400, 9200, 10400, 12200, 14000],
                shelter: [2600, 2800, 3000, 3200, 3500, 3800, 4100, 4400, 5100, 5800, 6600, 7200],
              },
            },
            regionKpis: {
              "North Corridor": { meals: 146000, students: 410 },
              "Central Metro": { mentorship: 10300, retention: 82 },
              "East Ridge": { shelterNights: 7400, responseTime: 10 },
              "South Communities": { peopleServed: 7800, partners: 18 },
            },
          },
        };

        let selectedYear = 2025;
        let charts = { line: null, doughnut: null };
        let liveMode = false;
        let liveTimer = null;

        function clamp(n, a, b) {
          return Math.max(a, Math.min(b, n));
        }

        function setTheme(theme) {
          const root = document.documentElement;
          root.dataset.theme = theme;
          localStorage.setItem("nir-theme", theme);
          const isDark = theme === "dark";
          $("#themeToggle").setAttribute("aria-pressed", String(isDark));
          const meta = document.querySelector('meta[name="theme-color"]');
          if (meta) meta.setAttribute("content", isDark ? "#0b1220" : "#eff6ff");
        }

        function initTheme() {
          const saved = localStorage.getItem("nir-theme");
          if (saved === "light" || saved === "dark") return setTheme(saved);
          const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
          setTheme(prefersDark ? "dark" : "light");
        }

        function toast(title, msg) {
          const t = $("#toast");
          $("#toastTitle").textContent = title;
          $("#toastMsg").textContent = msg;
          t.classList.add("show");
          clearTimeout(toast._t);
          toast._t = setTimeout(() => t.classList.remove("show"), 2200);
        }

        function copyText(text, okTitle, okMsg) {
          const fallback = () => {
            const ta = document.createElement("textarea");
            ta.value = text;
            ta.style.position = "fixed";
            ta.style.left = "-9999px";
            document.body.appendChild(ta);
            ta.select();
            try {
              document.execCommand("copy");
              toast(okTitle, okMsg);
            } catch {
              toast("Copy failed", "Your browser blocked clipboard access.");
            } finally {
              ta.remove();
            }
          };

          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard
              .writeText(text)
              .then(() => toast(okTitle, okMsg))
              .catch(fallback);
          } else {
            fallback();
          }
        }

        function formatValue(value, format) {
          if (format === "percent") return `${Math.round(value * 100)}%`;
          if (format === "currency") return fmtCurrency.format(value);
          if (format === "compact") return fmtCompact.format(value);
          return fmtNumber.format(value);
        }

        function animateNumber(el, to, format, duration = 850) {
          const start = performance.now();
          const prev = el.dataset._value;
          let from = 0;
          if (prev != null) {
            from = Number(prev) || 0;
          } else {
            const rawText = String(el.textContent || "").trim();
            const num = Number(rawText.replace(/[^\d.-]/g, "")) || 0;
            from = format === "percent" && rawText.includes("%") ? num / 100 : num;
          }
          el.dataset._value = String(to);

          if (prefersReduced) {
            el.textContent = formatValue(to, format);
            return;
          }

          function tick(now) {
            const t = clamp((now - start) / duration, 0, 1);
            const eased = 1 - Math.pow(1 - t, 3);
            const cur = from + (to - from) * eased;
            el.textContent = formatValue(cur, format);
            if (t < 1) requestAnimationFrame(tick);
          }
          requestAnimationFrame(tick);
        }

        function updateBars(yearObj) {
          const goals = {
            meals: 400000,
            students: 1700,
            housingStability: 0.9,
            counselingHours: 16000,
          };
          const m = yearObj.metrics;
          const ratios = {
            meals: clamp(m.meals / goals.meals, 0, 1),
            students: clamp(m.students / goals.students, 0, 1),
            housingStability: clamp(m.housingStability / goals.housingStability, 0, 1),
            counselingHours: clamp(m.counselingHours / goals.counselingHours, 0, 1),
          };
          $$("[data-bar]").forEach((bar) => {
            const key = bar.getAttribute("data-bar");
            const pct = Math.round(ratios[key] * 100);
            bar.style.width = `${pct}%`;
          });
        }

        function updateRegionLabels(yearObj) {
          const regionNodes = $$("#regions .region");
          regionNodes.forEach((node) => {
            const name = node.getAttribute("data-region");
            const r = yearObj.regionKpis[name] || {};
            let kpi = "";
            if (name === "North Corridor") kpi = `Meals: ${fmtCompact.format(r.meals || 0)} • Students: ${fmtCompact.format(r.students || 0)}`;
            if (name === "Central Metro") kpi = `Mentorship hrs: ${fmtCompact.format(r.mentorship || 0)} • Retention: ${r.retention || 0}%`;
            if (name === "East Ridge") kpi = `Shelter nights: ${fmtCompact.format(r.shelterNights || 0)} • Response: ${r.responseTime || yearObj.kpis.responseTime || 0}h`;
            if (name === "South Communities") kpi = `People served: ${fmtCompact.format(r.peopleServed || 0)} • Partners: ${r.partners || 0}`;
            node.setAttribute("data-kpi", kpi);
          });
        }

        function updateYear(year) {
          selectedYear = year;
          const yearObj = impactData[year];
          if (!yearObj) return;

          $("#yearKicker").textContent = `${year} Report`;
          $("#auditYear").textContent = String(year);

          const d = new Date(yearObj.updatedISO);
          $("#updatedDate").textContent = d.toLocaleDateString(undefined, { year: "numeric", month: "short", day: "numeric" });

          $("#beneficiariesCount").textContent = fmtCompact.format(yearObj.beneficiaries);
          $("#reachCities").textContent = fmtNumber.format(yearObj.reachCities);
          $("#programEfficiency").textContent = fmtNumber.format(yearObj.efficiency);

          $("#mealsYoY").textContent = yearObj.yoy.meals;
          $("#studentsYoY").textContent = yearObj.yoy.students;
          $("#housingYoY").textContent = yearObj.yoy.housingStability;
          $("#careYoY").textContent = yearObj.yoy.counselingHours;

          $("#retentionRate").textContent = fmtNumber.format(yearObj.kpis.retentionRate);
          $("#partnerCount").textContent = fmtNumber.format(yearObj.kpis.partnerCount);
          $("#costPerMeal").textContent = fmtCurrency.format(yearObj.kpis.costPerMeal);
          $("#responseTime").textContent = fmtNumber.format(yearObj.kpis.responseTime);

          $("#progSpend").textContent = fmtNumber.format(yearObj.spend.prog);
          $("#opsSpend").textContent = fmtNumber.format(yearObj.spend.ops);
          $("#fundSpend").textContent = fmtNumber.format(yearObj.spend.fund);
          $("#reserveMonths").textContent = yearObj.spend.reserveMonths.toFixed(1);

          const keys = ["meals", "mentorship", "shelterNights", "volunteerHours", "students", "housingStability", "counselingHours"];
          keys.forEach((key) => {
            $$(`.count-up[data-key="${key}"]`).forEach((el) => {
              const format = el.getAttribute("data-format") || "number";
              animateNumber(el, yearObj.metrics[key], format);
            });
          });

          updateBars(yearObj);
          updateRegionLabels(yearObj);

          if (charts.line) {
            charts.line.data.labels = yearObj.timeline.labels;
            charts.line.data.datasets[0].data = yearObj.timeline.series.meals;
            charts.line.data.datasets[1].data = yearObj.timeline.series.mentorship;
            charts.line.data.datasets[2].data = yearObj.timeline.series.shelter;
            charts.line.update();
          }
          if (charts.doughnut) {
            charts.doughnut.data.labels = yearObj.allocation.labels;
            charts.doughnut.data.datasets[0].data = yearObj.allocation.values;
            charts.doughnut.update();
          }

          $$(".pill[data-year]").forEach((b) => b.setAttribute("aria-pressed", String(Number(b.dataset.year) === year)));
        }

        function initCharts() {
          const status = $("#chartStatus");
          const setStatus = (label, ok) => {
            status.innerHTML = `<span aria-hidden="true">●</span> Charts: <b>${label}</b>`;
            status.style.borderColor = ok ? "rgba(124,247,212,0.26)" : "rgba(255,88,118,0.25)";
            status.style.background = ok
              ? "linear-gradient(135deg, rgba(124,247,212,0.12), rgba(86,217,255,0.06))"
              : "linear-gradient(135deg, rgba(255,88,118,0.12), rgba(255,255,255,0.02))";
          };

          if (!window.Chart) {
            setStatus("fallback", false);
            $("#lineFallback").hidden = false;
            $("#doughnutFallback").hidden = false;
            return;
          }

          const yearObj = impactData[selectedYear];
          setStatus("ready", true);

          const lineCtx = $("#lineChart").getContext("2d");
          const doughnutCtx = $("#doughnutChart").getContext("2d");
          const isLight = document.documentElement.dataset.theme === "light";
          const grid = isLight ? "rgba(10,18,32,0.10)" : "rgba(255,255,255,0.10)";
          const text = isLight ? "rgba(10,18,32,0.72)" : "rgba(255,255,255,0.72)";

          const common = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                labels: { color: text, boxWidth: 10, boxHeight: 10, usePointStyle: true, pointStyle: "circle" },
              },
              tooltip: {
                backgroundColor: isLight ? "rgba(255,255,255,0.96)" : "rgba(10,14,22,0.92)",
                titleColor: isLight ? "rgba(10,18,32,0.92)" : "rgba(255,255,255,0.92)",
                bodyColor: isLight ? "rgba(10,18,32,0.78)" : "rgba(255,255,255,0.78)",
                borderColor: isLight ? "rgba(10,18,32,0.12)" : "rgba(255,255,255,0.14)",
                borderWidth: 1,
              },
            },
            scales: {
              x: { ticks: { color: text }, grid: { color: grid }, border: { color: grid } },
              y: { ticks: { color: text }, grid: { color: grid }, border: { color: grid } },
            },
          };

          charts.line = new Chart(lineCtx, {
            type: "line",
            data: {
              labels: yearObj.timeline.labels,
              datasets: [
                {
                  label: "Meals",
                  data: yearObj.timeline.series.meals,
                  borderColor: "rgba(124,247,212,0.95)",
                  backgroundColor: "rgba(124,247,212,0.14)",
                  pointRadius: 0,
                  tension: 0.35,
                  fill: true,
                },
                {
                  label: "Mentorship hrs",
                  data: yearObj.timeline.series.mentorship,
                  borderColor: "rgba(86,217,255,0.95)",
                  backgroundColor: "rgba(86,217,255,0.12)",
                  pointRadius: 0,
                  tension: 0.35,
                  fill: true,
                },
                {
                  label: "Shelter nights",
                  data: yearObj.timeline.series.shelter,
                  borderColor: "rgba(246,211,101,0.95)",
                  backgroundColor: "rgba(246,211,101,0.10)",
                  pointRadius: 0,
                  tension: 0.35,
                  fill: true,
                },
              ],
            },
            options: {
              ...common,
              interaction: { mode: "index", intersect: false },
              plugins: { ...common.plugins, legend: { ...common.plugins.legend, position: "bottom" } },
            },
          });

          charts.doughnut = new Chart(doughnutCtx, {
            type: "doughnut",
            data: {
              labels: yearObj.allocation.labels,
              datasets: [
                {
                  data: yearObj.allocation.values,
                  borderWidth: 0,
                  backgroundColor: [
                    "rgba(124,247,212,0.88)",
                    "rgba(86,217,255,0.86)",
                    "rgba(246,211,101,0.82)",
                    "rgba(255,88,118,0.72)",
                    "rgba(255,255,255,0.20)",
                  ],
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: { position: "bottom", labels: { color: text, boxWidth: 10, boxHeight: 10 } },
                tooltip: common.plugins.tooltip,
              },
              cutout: "64%",
            },
          });
        }

        function reinitChartsOnThemeChange() {
          if (!window.Chart) return;
          if (charts.line) charts.line.destroy();
          if (charts.doughnut) charts.doughnut.destroy();
          charts = { line: null, doughnut: null };
          initCharts();
          updateYear(selectedYear);
        }

        function initReveal() {
          const els = $$(".reveal");
          const io = new IntersectionObserver(
            (entries) => {
              for (const e of entries) {
                if (e.isIntersecting) {
                  e.target.classList.add("is-visible");
                  io.unobserve(e.target);
                }
              }
            },
            { threshold: 0.12 }
          );
          els.forEach((el) => io.observe(el));
        }

        function initScrollSpy() {
          const links = $$(".navlink[href^='#']");
          const map = new Map();
          links.forEach((a) => {
            const id = a.getAttribute("href").slice(1);
            const sec = document.getElementById(id);
            if (sec) map.set(sec, a);
          });
          const io = new IntersectionObserver(
            (entries) => {
              const visible = entries.filter((e) => e.isIntersecting).sort((a, b) => b.intersectionRatio - a.intersectionRatio)[0];
              if (!visible) return;
              links.forEach((a) => a.removeAttribute("aria-current"));
              const a = map.get(visible.target);
              if (a) a.setAttribute("aria-current", "page");
            },
            { threshold: [0.22, 0.35, 0.55], rootMargin: "-12% 0px -70% 0px" }
          );
          map.forEach((_, sec) => io.observe(sec));
        }

        function initCarousel() {
          const track = $("#track");
          const cards = $$(".story", track);
          const dots = $("#dots");
          dots.innerHTML = "";

          const dotEls = cards.map(() => {
            const d = document.createElement("div");
            d.className = "dot";
            dots.appendChild(d);
            return d;
          });

          function setActive() {
            const w = track.getBoundingClientRect().width;
            const idx = clamp(Math.round(track.scrollLeft / w), 0, cards.length - 1);
            dotEls.forEach((d, i) => d.classList.toggle("active", i === idx));
          }
          setActive();

          track.addEventListener("scroll", () => {
            window.clearTimeout(track._st);
            track._st = window.setTimeout(setActive, 60);
          });

          const scrollByCard = (dir) => {
            const w = track.getBoundingClientRect().width;
            track.scrollBy({ left: dir * w, behavior: prefersReduced ? "auto" : "smooth" });
          };

          $("#prevStory").addEventListener("click", () => scrollByCard(-1));
          $("#nextStory").addEventListener("click", () => scrollByCard(1));

          if (!prefersReduced) {
            let autoplay = true;
            const stop = () => (autoplay = false);
            ["pointerdown", "keydown", "wheel", "touchstart"].forEach((evt) => track.addEventListener(evt, stop, { passive: true }));
            setInterval(() => {
              if (!autoplay) return;
              scrollByCard(1);
            }, 7000);
          }
        }

        function initMapTooltip() {
          const tip = $("#tooltip");
          const title = $("#tipTitle");
          const blurb = $("#tipBlurb");
          const kpi = $("#tipKpi");
          const regions = $$("#regions .region");

          function showAt(x, y) {
            tip.style.left = `${Math.min(x + 14, window.innerWidth - 380)}px`;
            tip.style.top = `${Math.min(y + 14, window.innerHeight - 120)}px`;
            tip.classList.add("show");
          }

          function hide() {
            tip.classList.remove("show");
          }

          regions.forEach((r) => {
            r.style.cursor = "pointer";
            r.addEventListener("pointerenter", (e) => {
              title.textContent = r.getAttribute("data-region") || "Region";
              blurb.textContent = r.getAttribute("data-blurb") || "";
              kpi.textContent = r.getAttribute("data-kpi") || "";
              showAt(e.clientX, e.clientY);
              r.style.filter = "brightness(1.08)";
              r.style.stroke = "rgba(124,247,212,0.55)";
            });
            r.addEventListener("pointermove", (e) => showAt(e.clientX, e.clientY));
            r.addEventListener("pointerleave", () => {
              hide();
              r.style.filter = "";
              r.style.stroke = "";
            });
          });
        }

        function buildDonateLink(amount, frequency) {
          const url = new URL("https://brightbridge.org/donate");
          url.searchParams.set("amount", String(amount));
          url.searchParams.set("frequency", frequency);
          url.searchParams.set("src", "impact-report");
          url.searchParams.set("year", String(selectedYear));
          return url.toString();
        }

        function updateDonationImpact() {
          const amount = clamp(Number($("#amountInput").value || 0), 5, 50000);
          const frequency = $$('[data-frequency]').find((b) => b.getAttribute("aria-pressed") === "true")?.dataset.frequency || "once";

          // Unit costs (demo): keep realistic.
          const unit = { meal: 2.25, kit: 18, night: 34, careHour: 42 };
          const multiplier = frequency === "monthly" ? 12 : 1;
          const annual = amount * multiplier;

          const meals = Math.floor(annual / unit.meal);
          const kits = Math.floor(annual / unit.kit);
          const nights = Math.floor(annual / unit.night);
          const care = Math.floor(annual / unit.careHour);

          $("#impactMeals").textContent = fmtCompact.format(meals);
          $("#impactKits").textContent = fmtCompact.format(kits);
          $("#impactNights").textContent = fmtCompact.format(nights);
          $("#impactCare").textContent = fmtCompact.format(care);

          const link = buildDonateLink(amount, frequency);
          $("#donateLink").href = link;

          const title = frequency === "monthly" ? "Become a monthly champion" : "Make it happen";
          const sub =
            frequency === "monthly"
              ? `That’s about ${fmtCurrency.format(annual)} per year in reliable support.`
              : `Your one-time gift powers immediate support where it’s needed most.`;
          $("#donateCtaTitle").textContent = title;
          $("#donateCtaSub").textContent = sub;
          $("#freqHint").innerHTML = `<b>${frequency === "monthly" ? "Monthly" : "One‑time"}</b> gift`;
        }

        function setAmount(amount) {
          $("#amountInput").value = String(amount);
          $$(".chip[data-amount]").forEach((c) => c.setAttribute("aria-pressed", String(Number(c.dataset.amount) === amount)));
          updateDonationImpact();
        }

        function initDonation() {
          $$("[data-frequency]").forEach((b) => {
            b.addEventListener("click", () => {
              $$("[data-frequency]").forEach((x) => x.setAttribute("aria-pressed", "false"));
              b.setAttribute("aria-pressed", "true");
              updateDonationImpact();
            });
          });

          $$(".chip[data-amount]").forEach((c) => c.addEventListener("click", () => setAmount(Number(c.dataset.amount))));

          $("#amountInput").addEventListener("input", () => {
            $$(".chip[data-amount]").forEach((c) => c.setAttribute("aria-pressed", "false"));
            updateDonationImpact();
          });

          $("#maxImpactBtn").addEventListener("click", () => {
            const cur = clamp(Number($("#amountInput").value || 0), 5, 50000);
            const next = cur < 100 ? 100 : cur < 250 ? 250 : cur < 500 ? 500 : cur < 1000 ? 1000 : 2500;
            setAmount(next);
          });

          updateDonationImpact();
        }

        function initHotkeys() {
          document.addEventListener("keydown", (e) => {
            if (e.altKey || e.metaKey || e.ctrlKey) return;
            if (["INPUT", "TEXTAREA"].includes(document.activeElement?.tagName || "")) return;
            const k = e.key.toLowerCase();
            if (k === "t") {
              $("#themeToggle").click();
            } else if (k === "p") {
              window.print();
            } else if (k === "l") {
              $("#liveModeBtn").click();
            }
          });
        }

        function setLiveMode(on) {
          liveMode = on;
          $("#liveModeBtn").setAttribute("aria-pressed", String(on));
          $("#liveModeBtn").style.borderColor = on ? "rgba(124,247,212,0.28)" : "";
          $("#liveModeBtn").style.background = on ? "rgba(124,247,212,0.10)" : "";
          if (liveTimer) clearInterval(liveTimer);
          if (!on) return;

          liveTimer = setInterval(() => {
            // Gentle shimmer on a few metrics to convey "live".
            const yearObj = impactData[selectedYear];
            const jitter = (n, pct) => Math.round(n * (1 + (Math.random() * 2 - 1) * pct));
            const live = {
              meals: jitter(yearObj.metrics.meals, 0.003),
              mentorship: jitter(yearObj.metrics.mentorship, 0.004),
              volunteerHours: jitter(yearObj.metrics.volunteerHours, 0.004),
            };
            $$(`.count-up[data-key="meals"]`).forEach((el) => (el.textContent = fmtCompact.format(live.meals)));
            $$(`.count-up[data-key="mentorship"]`).forEach((el) => (el.textContent = fmtCompact.format(live.mentorship)));
            $$(`.count-up[data-key="volunteerHours"]`).forEach((el) => (el.textContent = fmtCompact.format(live.volunteerHours)));
          }, 1200);
        }

        function initButtons() {
          $("#themeToggle").addEventListener("click", () => {
            const next = document.documentElement.dataset.theme === "dark" ? "light" : "dark";
            setTheme(next);
            reinitChartsOnThemeChange();
          });

          $("#printBtn").addEventListener("click", () => window.print());

          const reportLink = () => {
            const base = location.href.split("#")[0];
            const hash = location.hash || "#overview";
            return `${base}${hash}`;
          };
          $("#copyLinkBtn").addEventListener("click", () => copyText(reportLink(), "Copied", "Shareable link copied to clipboard."));
          $("#copyReportBtn").addEventListener("click", () => copyText(reportLink(), "Copied", "Report link copied to clipboard."));

          $("#copyDataBtn").addEventListener("click", () => {
            const data = JSON.stringify(impactData[selectedYear], null, 2);
            copyText(data, "Copied", `Selected year (${selectedYear}) data copied as JSON.`);
          });

          $("#liveModeBtn").addEventListener("click", () => setLiveMode(!liveMode));

          $("#accessibilityBtn").addEventListener("click", () => {
            toast(
              "Accessibility",
              "Keyboard: T theme, P print, L live. Carousel is scrollable, and sections are labeled for screen readers."
            );
          });
        }

        function initYearPills() {
          $$(".pill[data-year]").forEach((b) =>
            b.addEventListener("click", () => {
              const y = Number(b.dataset.year);
              updateYear(y);
              updateDonationImpact();
              toast("Updated", `Showing ${y} metrics and charts.`);
            })
          );
        }

        function initSmoothScroll() {
          if (prefersReduced) return;
          document.documentElement.style.scrollBehavior = "smooth";
        }

        function init() {
          initTheme();
          initSmoothScroll();
          initReveal();
          initScrollSpy();
          initButtons();
          initHotkeys();
          initYearPills();
          initCharts();
          initCarousel();
          initMapTooltip();
          initDonation();

          const now = new Date();
          $("#yearNow").textContent = String(now.getFullYear());
          $("#orgLine").textContent = `BrightBridge Foundation • Impact Summary`;
          updateYear(2025);
          setAmount(50);
        }

        init();
      })();
    </script>
  </body>
</html>
