<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChronoWorld | Interactive Clock</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #121212;
            --surface: #1e1e1e;
            --text: #ffffff;
            --accent: #bb86fc;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'DM Sans', sans-serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }

        h1 { margin: 0; font-size: 1.5rem; letter-spacing: 1px; }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        button {
            background: var(--surface);
            color: var(--text);
            border: 1px solid #444;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.2s;
        }
        
        button:hover { background: #333; }
        
        button.primary {
            background: var(--accent);
            color: #000;
            border-color: var(--accent);
            font-weight: 700;
        }

        /* Clock Grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .clock-card {
            background: var(--surface);
            border-radius: 16px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 180px;
            transition: transform 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .clock-card:hover { transform: translateY(-5px); }

        .clock-bg {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0.2;
            z-index: 0;
            transition: background 1s;
        }

        .clock-content {
            position: relative;
            z-index: 1;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .city-name {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .city-date {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .time-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            margin-top: auto;
            align-self: flex-end;
            position: relative;
            z-index: 1;
        }

        .time-period {
            font-size: 1rem;
            opacity: 0.6;
        }

        .remove-btn {
            background: none;
            border: none;
            color: #ff5252;
            font-size: 1.2rem;
            padding: 0;
            cursor: pointer;
            opacity: 0.5;
        }
        
        .remove-btn:hover { opacity: 1; background: none; }

        .icon {
            font-size: 2rem;
        }

        /* Add Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .modal-content {
            background: var(--surface);
            padding: 30px;
            border-radius: 12px;
            width: 300px;
        }
        
        select {
            width: 100%;
            padding: 10px;
            margin: 15px 0;
            background: #000;
            color: #fff;
            border: 1px solid #444;
            border-radius: 4px;
        }

        /* Themes */
        .theme-night { background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364); }
        .theme-dawn { background: linear-gradient(to bottom, #ff5f6d, #ffc371); }
        .theme-day { background: linear-gradient(to bottom, #2980b9, #6dd5fa, #ffffff); }
        .theme-dusk { background: linear-gradient(to bottom, #cc2b5e, #753a88); }

    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>ChronoWorld</h1>
            <div class="controls">
                <button onclick="toggleFormat()" id="formatBtn">24H</button>
                <button class="primary" onclick="openModal()">+ Add City</button>
            </div>
        </header>

        <div class="grid" id="clockGrid">
            <!-- Clocks injected here -->
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <h3>Add City</h3>
            <select id="citySelect">
                <!-- Populated by JS -->
            </select>
            <div style="display: flex; justify-content: flex-end; gap: 10px;">
                <button onclick="closeModal()">Cancel</button>
                <button class="primary" onclick="addCity()">Add</button>
            </div>
        </div>
    </div>

    <script>
        // Data
        const availableZones = [
            { city: 'New York', zone: 'America/New_York' },
            { city: 'London', zone: 'Europe/London' },
            { city: 'Tokyo', zone: 'Asia/Tokyo' },
            { city: 'Sydney', zone: 'Australia/Sydney' },
            { city: 'Paris', zone: 'Europe/Paris' },
            { city: 'Dubai', zone: 'Asia/Dubai' },
            { city: 'Los Angeles', zone: 'America/Los_Angeles' },
            { city: 'Hong Kong', zone: 'Asia/Hong_Kong' },
            { city: 'Mumbai', zone: 'Asia/Kolkata' },
            { city: 'Sao Paulo', zone: 'America/Sao_Paulo' },
            { city: 'Berlin', zone: 'Europe/Berlin' },
            { city: 'Moscow', zone: 'Europe/Moscow' }
        ];

        // State
        let myCities = [
            { city: 'New York', zone: 'America/New_York' },
            { city: 'London', zone: 'Europe/London' },
            { city: 'Tokyo', zone: 'Asia/Tokyo' }
        ];
        
        let is24h = true;

        // Init
        const stored = localStorage.getItem('worldClockCities');
        if(stored) myCities = JSON.parse(stored);
        
        const grid = document.getElementById('clockGrid');
        
        function render() {
            grid.innerHTML = '';
            
            myCities.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'clock-card';
                card.id = `clock-${index}`;
                
                card.innerHTML = `
                    <div class="clock-bg" id="bg-${index}"></div>
                    <div class="clock-content">
                        <div>
                            <div class="city-name">${item.city}</div>
                            <div class="city-date" id="date-${index}">--</div>
                        </div>
                        <button class="remove-btn" onclick="removeCity(${index})">&times;</button>
                    </div>
                    <div class="icon" id="icon-${index}">ðŸŒ™</div>
                    <div class="time-display" id="time-${index}">00:00</div>
                `;
                
                grid.appendChild(card);
            });
            updateClocks();
        }

        function updateClocks() {
            const now = new Date();

            myCities.forEach((item, index) => {
                const timeStr = new Intl.DateTimeFormat('en-US', {
                    timeZone: item.zone,
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: !is24h
                }).format(now);

                const dateStr = new Intl.DateTimeFormat('en-US', {
                    timeZone: item.zone,
                    weekday: 'short',
                    month: 'short',
                    day: 'numeric'
                }).format(now);

                // Get hour 0-23
                const hour24 = parseInt(new Intl.DateTimeFormat('en-US', {
                    timeZone: item.zone,
                    hour: 'numeric',
                    hour12: false
                }).format(now));

                document.getElementById(`time-${index}`).textContent = timeStr;
                document.getElementById(`date-${index}`).textContent = dateStr;

                // Theme Logic
                const bgEl = document.getElementById(`bg-${index}`);
                const iconEl = document.getElementById(`icon-${index}`);
                
                let themeClass = 'theme-night';
                let icon = 'ðŸŒ™';

                if (hour24 >= 5 && hour24 < 8) { themeClass = 'theme-dawn'; icon = 'ðŸŒ…'; }
                else if (hour24 >= 8 && hour24 < 17) { themeClass = 'theme-day'; icon = 'â˜€ï¸'; }
                else if (hour24 >= 17 && hour24 < 20) { themeClass = 'theme-dusk'; icon = 'ðŸŒ‡'; }
                
                bgEl.className = `clock-bg ${themeClass}`;
                iconEl.textContent = icon;
            });
        }

        setInterval(updateClocks, 1000);

        // Actions
        function removeCity(index) {
            myCities.splice(index, 1);
            save();
            render();
        }

        function addCity() {
            const select = document.getElementById('citySelect');
            const city = availableZones[select.selectedIndex];
            myCities.push(city);
            save();
            render();
            closeModal();
        }

        function toggleFormat() {
            is24h = !is24h;
            document.getElementById('formatBtn').textContent = is24h ? '24H' : '12H';
            updateClocks();
        }

        function save() {
            localStorage.setItem('worldClockCities', JSON.stringify(myCities));
        }

        // Modal
        function openModal() {
            const select = document.getElementById('citySelect');
            select.innerHTML = '';
            availableZones.forEach(z => {
                const opt = document.createElement('option');
                opt.textContent = z.city;
                select.appendChild(opt);
            });
            document.getElementById('addModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('addModal').style.display = 'none';
        }

        render();

    </script>
</body>
</html>
