<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Rain</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #0a0a12;
            color: white;
            font-family: 'Roboto Mono', monospace;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        .background {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(to top, #000, transparent);
            z-index: 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        /* Simple CSS City Skyline */
        .city {
            width: 100%;
            height: 100px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 20' preserveAspectRatio='none'%3E%3Cpath d='M0 20 L0 10 L5 10 L5 5 L10 5 L10 15 L15 15 L15 8 L20 8 L20 20 Z M25 20 L25 12 L30 12 L30 6 L35 6 L35 18 L40 18 L40 20 Z M50 20 L50 5 L60 5 L60 20 Z M70 20 L70 10 L80 10 L80 20 Z M90 20 L90 2 L95 2 L95 20 Z' fill='%231a1a2e' /%3E%3C/svg%3E");
            background-size: 500px 100%;
            opacity: 0.8;
        }

        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 2;
            text-shadow: 0 0 5px #000;
        }

        .stat {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        #input-container {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2;
            width: 300px;
        }

        input {
            width: 100%;
            padding: 10px;
            font-family: inherit;
            font-size: 1.5rem;
            background: rgba(0,0,0,0.5);
            border: 2px solid #4d4dff;
            color: #fff;
            text-align: center;
            border-radius: 5px;
            outline: none;
            box-shadow: 0 0 15px #4d4dff;
        }

        #start-screen, #game-over-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        h1 {
            font-size: 4rem;
            color: #4d4dff;
            text-shadow: 0 0 20px #4d4dff;
            margin-bottom: 20px;
        }

        button {
            padding: 15px 40px;
            font-size: 1.5rem;
            background: #4d4dff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            box-shadow: 0 0 20px rgba(77, 77, 255, 0.5);
            transition: transform 0.1s;
        }

        button:hover { transform: scale(1.05); }

        .hidden { display: none !important; }

    </style>
</head>
<body>

    <div class="background"><div class="city"></div></div>
    <canvas id="rainCanvas"></canvas>

    <div id="ui">
        <div class="stat">Score: <span id="score">0</span></div>
        <div class="stat">Lives: <span id="lives" style="color: #ff4d4d">5</span></div>
    </div>

    <div id="input-container">
        <input type="text" id="wordInput" autofocus placeholder="Type here..." autocomplete="off">
    </div>

    <div id="start-screen">
        <h1>TYPING RAIN</h1>
        <p style="font-size: 1.2rem; margin-bottom: 30px; max-width: 600px;">
            Type the falling words before they hit the city. <br>Don't let the rain flood the streets!
        </p>
        <button onclick="startGame()">START MISSION</button>
    </div>

    <div id="game-over-screen" class="hidden">
        <h1 style="color: #ff4d4d; text-shadow: 0 0 20px #ff4d4d;">SYSTEM FAILURE</h1>
        <p style="font-size: 2rem; margin-bottom: 30px;">Final Score: <span id="final-score">0</span></p>
        <button onclick="startGame()">REBOOT</button>
    </div>

    <script>
        const canvas = document.getElementById('rainCanvas');
        const ctx = canvas.getContext('2d');
        const input = document.getElementById('wordInput');
        
        let width, height;
        let words = [];
        let particles = [];
        let score = 0;
        let lives = 5;
        let gameActive = false;
        let spawnRate = 100; // frames
        let frame = 0;
        let speedMultiplier = 1;

        // Word Dictionary
        const dictionary = [
            "code", "data", "byte", "node", "java", "ruby", "perl", "html", "css", "rust",
            "linux", "unix", "shell", "bash", "git", "cloud", "azure", "aws", "stack", "heap",
            "loop", "func", "class", "void", "null", "true", "false", "async", "await", "json",
            "array", "object", "string", "number", "react", "vue", "swift", "kotlin", "pixel",
            "vector", "matrix", "cyber", "neon", "laser", "robot", "droid", "synth", "logic"
        ];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-over-screen').classList.add('hidden');
            
            score = 0;
            lives = 5;
            words = [];
            particles = [];
            speedMultiplier = 1;
            spawnRate = 100;
            frame = 0;
            gameActive = true;
            
            updateUI();
            input.value = '';
            input.focus();
            
            loop();
        }

        function spawnWord() {
            const text = dictionary[Math.floor(Math.random() * dictionary.length)];
            words.push({
                text: text,
                x: Math.random() * (width - 100) + 50,
                y: -30,
                speed: (1 + Math.random()) * speedMultiplier
            });
        }

        // Particle explosion
        function createExplosion(x, y, color) {
            for(let i=0; i<10; i++) {
                particles.push({
                    x: x, y: y,
                    vx: (Math.random() - 0.5) * 5,
                    vy: (Math.random() - 0.5) * 5,
                    life: 30,
                    color: color
                });
            }
        }

        function update() {
            frame++;
            if (frame % 600 === 0) speedMultiplier += 0.1; // Harder over time
            if (frame % Math.floor(spawnRate / speedMultiplier) === 0) spawnWord();

            // Update Words
            for (let i = words.length - 1; i >= 0; i--) {
                let w = words[i];
                w.y += w.speed;

                if (w.y > height - 50) { // Hit ground
                    lives--;
                    createExplosion(w.x, w.y, '#ff4d4d');
                    words.splice(i, 1);
                    updateUI();
                    
                    // Screen shake
                    canvas.style.transform = `translate(${Math.random()*10-5}px, ${Math.random()*10-5}px)`;
                    setTimeout(() => canvas.style.transform = 'none', 50);

                    if (lives <= 0) gameOver();
                }
            }

            // Update Particles
            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life--;
                if(p.life <= 0) particles.splice(i, 1);
            }
        }

        function draw() {
            ctx.clearRect(0, 0, width, height);

            // Draw Rain (Background effect)
            ctx.strokeStyle = 'rgba(77, 77, 255, 0.1)';
            ctx.beginPath();
            for(let i=0; i<20; i++) {
                const rx = Math.random() * width;
                const ry = Math.random() * height;
                ctx.moveTo(rx, ry);
                ctx.lineTo(rx, ry + 20);
            }
            ctx.stroke();

            // Draw Words
            ctx.font = '24px "Roboto Mono"';
            ctx.textAlign = 'center';
            
            words.forEach(w => {
                // Glow
                ctx.shadowBlur = 10;
                ctx.shadowColor = '#4d4dff';
                ctx.fillStyle = '#fff';
                
                // Highlight typed part? (Advanced, skipping for simplicity)
                
                ctx.fillText(w.text, w.x, w.y);
            });
            
            ctx.shadowBlur = 0;

            // Draw Particles
            particles.forEach(p => {
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life / 30;
                ctx.fillRect(p.x, p.y, 3, 3);
            });
            ctx.globalAlpha = 1;
        }

        function loop() {
            if (!gameActive) return;
            update();
            draw();
            requestAnimationFrame(loop);
        }

        input.addEventListener('input', () => {
            const val = input.value.trim().toLowerCase();
            const matchIndex = words.findIndex(w => w.text === val);
            
            if (matchIndex !== -1) {
                const w = words[matchIndex];
                createExplosion(w.x, w.y, '#4d4dff');
                words.splice(matchIndex, 1);
                score += 10;
                input.value = '';
                updateUI();
            }
        });

        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('lives').textContent = lives;
        }

        function gameOver() {
            gameActive = false;
            document.getElementById('final-score').textContent = score;
            document.getElementById('game-over-screen').classList.remove('hidden');
        }

    </script>
</body>
</html>
