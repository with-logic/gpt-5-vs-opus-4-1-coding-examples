<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tea Dunkability Simulator</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0F172A;
            --surface: rgba(255, 255, 255, 0.05);
            --surface-border: rgba(255, 255, 255, 0.1);
            --text: #F1F5F9;
            --text-dim: #94A3B8;
            --accent: #F59E0B;
            --danger: #EF4444;
            --success: #22C55E;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 30px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        h1 span {
            color: var(--accent);
        }

        header p {
            color: var(--text-dim);
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1.5fr 1fr;
            gap: 30px;
        }

        .glass-card {
            background: var(--surface);
            backdrop-filter: blur(20px);
            border: 1px solid var(--surface-border);
            border-radius: 20px;
            padding: 25px;
        }

        .card-title {
            font-size: 0.9rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .control-value {
            color: var(--accent);
            font-weight: 600;
        }

        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
        }

        .biscuit-select {
            display: grid;
            gap: 10px;
        }

        .biscuit-option {
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .biscuit-option:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .biscuit-option.selected {
            border-color: var(--accent);
            background: rgba(245, 158, 11, 0.1);
        }

        .biscuit-name {
            font-weight: 600;
        }

        .biscuit-emoji {
            font-size: 1.5rem;
        }

        .teacup-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }

        .teacup {
            position: relative;
            width: 200px;
            height: 150px;
        }

        .cup-body {
            position: absolute;
            bottom: 0;
            left: 20px;
            width: 160px;
            height: 120px;
            background: linear-gradient(180deg, #E5E7EB, #D1D5DB);
            border-radius: 0 0 80px 80px;
            overflow: hidden;
        }

        .tea-liquid {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 90px;
            background: linear-gradient(180deg, #92400E, #78350F);
            border-radius: 0 0 75px 75px;
            transition: background 0.5s;
        }

        .cup-handle {
            position: absolute;
            right: -15px;
            top: 30px;
            width: 35px;
            height: 60px;
            border: 8px solid #D1D5DB;
            border-left: none;
            border-radius: 0 30px 30px 0;
        }

        .steam {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }

        .steam-particle {
            width: 8px;
            height: 40px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: steamRise 2s infinite ease-out;
        }

        .steam-particle:nth-child(2) { animation-delay: 0.3s; }
        .steam-particle:nth-child(3) { animation-delay: 0.6s; }

        @keyframes steamRise {
            0% {
                transform: translateY(0) scaleY(1);
                opacity: 0.6;
            }
            100% {
                transform: translateY(-30px) scaleY(1.5);
                opacity: 0;
            }
        }

        .biscuit-dunking {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
            transition: transform 0.5s ease-in-out;
            z-index: 10;
        }

        .biscuit-dunking.dunking {
            animation: dunk 2s infinite ease-in-out;
        }

        @keyframes dunk {
            0%, 100% { transform: translateX(-50%) translateY(0) rotate(-10deg); }
            50% { transform: translateX(-50%) translateY(60px) rotate(10deg); }
        }

        .crumbs-container {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 50px;
            pointer-events: none;
        }

        .crumb {
            position: absolute;
            background: #92400E;
            border-radius: 50%;
            animation: crumbleFall 1s ease-out forwards;
        }

        @keyframes crumbleFall {
            0% {
                transform: translateY(-100px);
                opacity: 1;
            }
            100% {
                transform: translateY(0);
                opacity: 0.7;
            }
        }

        .dunk-btn {
            margin-top: 30px;
            padding: 15px 40px;
            background: linear-gradient(135deg, var(--accent), #D97706);
            border: none;
            border-radius: 30px;
            color: white;
            font-family: inherit;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .dunk-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);
        }

        .crumble-meter {
            margin-top: 30px;
        }

        .meter-title {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 10px;
        }

        .meter-bar {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .meter-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s, background 0.5s;
        }

        .meter-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        .status-message {
            text-align: center;
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: 600;
            min-height: 30px;
        }

        .results-panel {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .chart-container {
            flex: 1;
            margin-bottom: 20px;
        }

        .chart {
            width: 100%;
            height: 200px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }

        .chart-line {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
        }

        .chart-point {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
            transform: translate(-50%, 50%);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-dim);
            margin-top: 5px;
        }

        .shortcuts {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--surface-border);
        }

        .shortcuts h4 {
            font-size: 0.8rem;
            color: var(--text-dim);
            margin-bottom: 10px;
        }

        .shortcut-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .shortcut {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8rem;
        }

        .key {
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            font-family: monospace;
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Tea <span>Dunkability</span> Simulator</h1>
            <p>Test the structural integrity of your favorite biscuits</p>
        </header>

        <div class="main-grid">
            <div class="glass-card">
                <h3 class="card-title">Controls</h3>

                <div class="control-group">
                    <div class="control-label">
                        <span>Tea Temperature</span>
                        <span class="control-value" id="tempValue">80¬∞C</span>
                    </div>
                    <input type="range" class="slider" id="tempSlider" min="40" max="100" value="80">
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span>Dunk Time</span>
                        <span class="control-value" id="dunkTimeValue">3s</span>
                    </div>
                    <input type="range" class="slider" id="dunkTimeSlider" min="1" max="10" value="3">
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span>Biscuit Type</span>
                    </div>
                    <div class="biscuit-select" id="biscuitSelect">
                        <div class="biscuit-option selected" data-biscuit="digestive" data-strength="70">
                            <span class="biscuit-name">Digestive</span>
                            <span class="biscuit-emoji">üç™</span>
                        </div>
                        <div class="biscuit-option" data-biscuit="hobnob" data-strength="85">
                            <span class="biscuit-name">Hobnob</span>
                            <span class="biscuit-emoji">ü•Æ</span>
                        </div>
                        <div class="biscuit-option" data-biscuit="rich-tea" data-strength="40">
                            <span class="biscuit-name">Rich Tea</span>
                            <span class="biscuit-emoji">ü´ì</span>
                        </div>
                        <div class="biscuit-option" data-biscuit="bourbon" data-strength="55">
                            <span class="biscuit-name">Bourbon</span>
                            <span class="biscuit-emoji">üç´</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <div class="teacup-container">
                    <div class="teacup">
                        <div class="steam" id="steam">
                            <div class="steam-particle"></div>
                            <div class="steam-particle"></div>
                            <div class="steam-particle"></div>
                        </div>
                        <div class="biscuit-dunking" id="biscuit">üç™</div>
                        <div class="cup-body">
                            <div class="tea-liquid" id="teaLiquid"></div>
                        </div>
                        <div class="cup-handle"></div>
                        <div class="crumbs-container" id="crumbsContainer"></div>
                    </div>
                </div>

                <button class="dunk-btn" id="dunkBtn" onclick="performDunk()">ü´ñ DUNK!</button>

                <div class="crumble-meter">
                    <div class="meter-title">Crumble-O-Meter</div>
                    <div class="meter-bar">
                        <div class="meter-fill" id="crumbleFill" style="width: 30%; background: var(--success);"></div>
                    </div>
                    <div class="meter-labels">
                        <span>Solid</span>
                        <span>Soggy</span>
                        <span>Disaster</span>
                    </div>
                </div>

                <div class="status-message" id="statusMessage">Ready to dunk!</div>
            </div>

            <div class="glass-card results-panel">
                <h3 class="card-title">Structural Integrity</h3>

                <div class="chart-container">
                    <div class="chart" id="integrityChart">
                        <svg width="100%" height="100%" id="chartSvg"></svg>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="totalDunks">0</div>
                        <div class="stat-label">Total Dunks</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="successRate">0%</div>
                        <div class="stat-label">Success Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="perfectDunks">0</div>
                        <div class="stat-label">Perfect Dunks</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="disasters">0</div>
                        <div class="stat-label">Disasters</div>
                    </div>
                </div>

                <div class="shortcuts">
                    <h4>Keyboard Shortcuts</h4>
                    <div class="shortcut-list">
                        <div class="shortcut"><span class="key">Space</span> Dunk</div>
                        <div class="shortcut"><span class="key">‚Üë‚Üì</span> Temp</div>
                        <div class="shortcut"><span class="key">‚Üê‚Üí</span> Time</div>
                        <div class="shortcut"><span class="key">1-4</span> Biscuit</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let stats = {
            totalDunks: 0,
            successfulDunks: 0,
            perfectDunks: 0,
            disasters: 0,
            history: []
        };

        let currentBiscuit = { name: 'digestive', strength: 70, emoji: 'üç™' };
        let isDunking = false;

        const biscuitEmojis = {
            'digestive': 'üç™',
            'hobnob': 'ü•Æ',
            'rich-tea': 'ü´ì',
            'bourbon': 'üç´'
        };

        // Slider controls
        document.getElementById('tempSlider').addEventListener('input', (e) => {
            const temp = e.target.value;
            document.getElementById('tempValue').textContent = temp + '¬∞C';
            updateTeaColor(temp);
            updateSteam(temp);
        });

        document.getElementById('dunkTimeSlider').addEventListener('input', (e) => {
            document.getElementById('dunkTimeValue').textContent = e.target.value + 's';
        });

        function updateTeaColor(temp) {
            const liquid = document.getElementById('teaLiquid');
            const intensity = (temp - 40) / 60;
            const r = Math.round(146 - intensity * 30);
            const g = Math.round(64 - intensity * 20);
            const b = Math.round(14);
            liquid.style.background = `linear-gradient(180deg, rgb(${r}, ${g}, ${b}), rgb(${r-20}, ${g-10}, ${b}))`;
        }

        function updateSteam(temp) {
            const steam = document.getElementById('steam');
            const opacity = (temp - 40) / 60;
            steam.style.opacity = opacity;
        }

        // Biscuit selection
        document.querySelectorAll('.biscuit-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.biscuit-option').forEach(o => o.classList.remove('selected'));
                option.classList.add('selected');
                currentBiscuit = {
                    name: option.dataset.biscuit,
                    strength: parseInt(option.dataset.strength),
                    emoji: option.querySelector('.biscuit-emoji').textContent
                };
                document.getElementById('biscuit').textContent = currentBiscuit.emoji;
            });
        });

        function performDunk() {
            if (isDunking) return;
            isDunking = true;

            const temp = parseInt(document.getElementById('tempSlider').value);
            const dunkTime = parseInt(document.getElementById('dunkTimeSlider').value);
            const biscuit = document.getElementById('biscuit');
            const btn = document.getElementById('dunkBtn');

            btn.disabled = true;
            biscuit.classList.add('dunking');

            // Calculate integrity
            const tempFactor = (temp - 40) / 60; // 0-1
            const timeFactor = dunkTime / 10; // 0-1
            const damage = (tempFactor * 0.4 + timeFactor * 0.6) * 100;
            const integrity = Math.max(0, currentBiscuit.strength - damage);

            document.getElementById('statusMessage').textContent = 'Dunking...';

            setTimeout(() => {
                biscuit.classList.remove('dunking');

                stats.totalDunks++;

                if (integrity < 20) {
                    // Disaster!
                    stats.disasters++;
                    createCrumbs();
                    document.getElementById('statusMessage').textContent = 'üíÄ DISASTER! The biscuit crumbled!';
                } else if (integrity > 60) {
                    // Perfect
                    stats.perfectDunks++;
                    stats.successfulDunks++;
                    document.getElementById('statusMessage').textContent = 'üåü PERFECT! Optimal dunkability achieved!';
                } else {
                    // Success
                    stats.successfulDunks++;
                    document.getElementById('statusMessage').textContent = '‚ú® Nice dunk! Biscuit survived.';
                }

                stats.history.push(integrity);
                if (stats.history.length > 10) stats.history.shift();

                updateCrumbleMeter(integrity);
                updateStats();
                updateChart();

                btn.disabled = false;
                isDunking = false;
            }, dunkTime * 500);
        }

        function createCrumbs() {
            const container = document.getElementById('crumbsContainer');
            for (let i = 0; i < 15; i++) {
                const crumb = document.createElement('div');
                crumb.className = 'crumb';
                crumb.style.width = (Math.random() * 8 + 3) + 'px';
                crumb.style.height = crumb.style.width;
                crumb.style.left = (Math.random() * 150 + 25) + 'px';
                crumb.style.animationDelay = (Math.random() * 0.5) + 's';
                container.appendChild(crumb);

                setTimeout(() => crumb.remove(), 2000);
            }
        }

        function updateCrumbleMeter(integrity) {
            const fill = document.getElementById('crumbleFill');
            const inverseIntegrity = 100 - integrity;
            fill.style.width = inverseIntegrity + '%';

            if (integrity > 60) {
                fill.style.background = 'var(--success)';
            } else if (integrity > 30) {
                fill.style.background = 'var(--accent)';
            } else {
                fill.style.background = 'var(--danger)';
            }
        }

        function updateStats() {
            document.getElementById('totalDunks').textContent = stats.totalDunks;
            document.getElementById('perfectDunks').textContent = stats.perfectDunks;
            document.getElementById('disasters').textContent = stats.disasters;

            const rate = stats.totalDunks > 0
                ? Math.round((stats.successfulDunks / stats.totalDunks) * 100)
                : 0;
            document.getElementById('successRate').textContent = rate + '%';
        }

        function updateChart() {
            const svg = document.getElementById('chartSvg');
            const width = svg.clientWidth;
            const height = svg.clientHeight;

            if (stats.history.length === 0) {
                svg.innerHTML = '';
                return;
            }

            const points = stats.history.map((value, i) => {
                const x = (i / (stats.history.length - 1 || 1)) * (width - 20) + 10;
                const y = height - (value / 100) * (height - 20) - 10;
                return `${x},${y}`;
            });

            svg.innerHTML = `
                <polyline fill="none" stroke="rgba(245, 158, 11, 0.3)" stroke-width="2"
                    points="${points.join(' ')}" />
                ${stats.history.map((value, i) => {
                    const x = (i / (stats.history.length - 1 || 1)) * (width - 20) + 10;
                    const y = height - (value / 100) * (height - 20) - 10;
                    return `<circle cx="${x}" cy="${y}" r="4" fill="#F59E0B" />`;
                }).join('')}
            `;
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            switch(e.code) {
                case 'Space':
                    e.preventDefault();
                    performDunk();
                    break;
                case 'ArrowUp':
                    const tempUp = document.getElementById('tempSlider');
                    tempUp.value = Math.min(100, parseInt(tempUp.value) + 5);
                    tempUp.dispatchEvent(new Event('input'));
                    break;
                case 'ArrowDown':
                    const tempDown = document.getElementById('tempSlider');
                    tempDown.value = Math.max(40, parseInt(tempDown.value) - 5);
                    tempDown.dispatchEvent(new Event('input'));
                    break;
                case 'ArrowRight':
                    const timeUp = document.getElementById('dunkTimeSlider');
                    timeUp.value = Math.min(10, parseInt(timeUp.value) + 1);
                    timeUp.dispatchEvent(new Event('input'));
                    break;
                case 'ArrowLeft':
                    const timeDown = document.getElementById('dunkTimeSlider');
                    timeDown.value = Math.max(1, parseInt(timeDown.value) - 1);
                    timeDown.dispatchEvent(new Event('input'));
                    break;
                case 'Digit1':
                case 'Digit2':
                case 'Digit3':
                case 'Digit4':
                    const idx = parseInt(e.code.slice(-1)) - 1;
                    const options = document.querySelectorAll('.biscuit-option');
                    if (options[idx]) options[idx].click();
                    break;
            }
        });

        // Initialize
        updateTeaColor(80);
        updateSteam(80);
    </script>
</body>
</html>
