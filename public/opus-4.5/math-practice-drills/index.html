<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Practice Drills</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #3b82f6;
            --success: #22c55e;
            --danger: #ef4444;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 600px;
        }

        /* Start Screen */
        .start-screen {
            background: var(--card);
            border-radius: 20px;
            padding: 50px 40px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .start-screen h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .start-screen p {
            color: var(--text-light);
            margin-bottom: 40px;
        }

        .settings-group {
            text-align: left;
            margin-bottom: 30px;
        }

        .settings-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .difficulty-btns {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .diff-btn {
            padding: 15px;
            border: 2px solid var(--bg);
            border-radius: 10px;
            background: var(--bg);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
        }

        .diff-btn:hover {
            border-color: var(--primary);
        }

        .diff-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .diff-btn .level {
            font-weight: 600;
            display: block;
            margin-bottom: 5px;
        }

        .diff-btn .desc {
            font-size: 0.75rem;
            opacity: 0.8;
        }

        .operation-btns {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .op-btn {
            padding: 15px;
            border: 2px solid var(--bg);
            border-radius: 10px;
            background: var(--bg);
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.2s;
        }

        .op-btn:hover {
            border-color: var(--primary);
        }

        .op-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .start-btn {
            width: 100%;
            padding: 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 20px;
        }

        .start-btn:hover {
            filter: brightness(1.1);
            transform: translateY(-2px);
        }

        /* Quiz Screen */
        .quiz-screen {
            display: none;
        }

        .quiz-screen.active {
            display: block;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .timer {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            background: var(--card);
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .timer.warning {
            color: var(--danger);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .score-display {
            background: var(--card);
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .score-display .correct {
            color: var(--success);
            font-weight: 700;
            font-size: 1.5rem;
        }

        .score-display .total {
            color: var(--text-light);
        }

        .problem-card {
            background: var(--card);
            border-radius: 25px;
            padding: 60px 40px;
            text-align: center;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .problem {
            font-size: 4rem;
            font-weight: 700;
            letter-spacing: 5px;
            margin-bottom: 40px;
        }

        .answer-input {
            width: 200px;
            padding: 20px;
            font-size: 2.5rem;
            text-align: center;
            border: 3px solid var(--bg);
            border-radius: 15px;
            outline: none;
            transition: all 0.2s;
        }

        .answer-input:focus {
            border-color: var(--primary);
        }

        .answer-input.correct {
            border-color: var(--success);
            background: #f0fdf4;
        }

        .answer-input.wrong {
            border-color: var(--danger);
            background: #fef2f2;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .submit-btn {
            width: 100%;
            padding: 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .submit-btn:hover {
            filter: brightness(1.1);
        }

        /* Results Screen */
        .results-screen {
            display: none;
            background: var(--card);
            border-radius: 20px;
            padding: 50px 40px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .results-screen.active {
            display: block;
        }

        .results-screen h2 {
            font-size: 2rem;
            margin-bottom: 30px;
        }

        .final-score {
            font-size: 5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .score-label {
            color: var(--text-light);
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-box {
            background: var(--bg);
            padding: 20px;
            border-radius: 15px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text);
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .stat-box.correct .stat-value { color: var(--success); }
        .stat-box.wrong .stat-value { color: var(--danger); }
        .stat-box.accuracy .stat-value { color: var(--primary); }

        .restart-btn {
            padding: 18px 40px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
        }

        .restart-btn:hover {
            filter: brightness(1.1);
        }

        /* High Score */
        .high-score {
            margin-top: 20px;
            padding: 15px;
            background: #fef3c7;
            border-radius: 10px;
            color: #92400e;
        }

        @media (max-width: 600px) {
            .problem {
                font-size: 3rem;
            }

            .answer-input {
                width: 150px;
                font-size: 2rem;
            }

            .difficulty-btns {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Start Screen -->
        <div class="start-screen" id="startScreen">
            <h1>‚ûï Math Drills</h1>
            <p>Improve your speed and accuracy</p>

            <div class="settings-group">
                <label>Difficulty</label>
                <div class="difficulty-btns">
                    <button class="diff-btn active" data-diff="easy">
                        <span class="level">Easy</span>
                        <span class="desc">1-10</span>
                    </button>
                    <button class="diff-btn" data-diff="medium">
                        <span class="level">Medium</span>
                        <span class="desc">1-50</span>
                    </button>
                    <button class="diff-btn" data-diff="hard">
                        <span class="level">Hard</span>
                        <span class="desc">1-100</span>
                    </button>
                </div>
            </div>

            <div class="settings-group">
                <label>Operations</label>
                <div class="operation-btns">
                    <button class="op-btn active" data-op="+">+</button>
                    <button class="op-btn active" data-op="-">‚àí</button>
                    <button class="op-btn" data-op="√ó">√ó</button>
                    <button class="op-btn" data-op="√∑">√∑</button>
                </div>
            </div>

            <button class="start-btn" onclick="startQuiz()">Start Quiz (60s)</button>
        </div>

        <!-- Quiz Screen -->
        <div class="quiz-screen" id="quizScreen">
            <div class="quiz-header">
                <div class="timer" id="timer">60</div>
                <div class="score-display">
                    <span class="correct" id="correctCount">0</span>
                    <span class="total"> / <span id="totalCount">0</span></span>
                </div>
            </div>

            <div class="problem-card">
                <div class="problem" id="problem">5 + 3 = ?</div>
                <input type="number" class="answer-input" id="answerInput" autofocus>
            </div>

            <button class="submit-btn" onclick="submitAnswer()">Submit</button>
        </div>

        <!-- Results Screen -->
        <div class="results-screen" id="resultsScreen">
            <h2>Time's Up! ‚è∞</h2>

            <div class="final-score" id="finalScore">0</div>
            <div class="score-label">Problems Solved</div>

            <div class="stats-grid">
                <div class="stat-box correct">
                    <div class="stat-value" id="statCorrect">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat-box wrong">
                    <div class="stat-value" id="statWrong">0</div>
                    <div class="stat-label">Wrong</div>
                </div>
                <div class="stat-box accuracy">
                    <div class="stat-value" id="statAccuracy">0%</div>
                    <div class="stat-label">Accuracy</div>
                </div>
            </div>

            <div class="high-score" id="highScore" style="display: none;">
                üèÜ New High Score!
            </div>

            <button class="restart-btn" onclick="restart()">Try Again</button>
        </div>
    </div>

    <script>
        // Settings
        let difficulty = 'easy';
        let operations = ['+', '-'];
        let timeLeft = 60;
        let timerInterval;
        let correct = 0;
        let wrong = 0;
        let total = 0;
        let currentAnswer;

        const ranges = {
            easy: { min: 1, max: 10 },
            medium: { min: 1, max: 50 },
            hard: { min: 1, max: 100 }
        };

        // UI Elements
        const startScreen = document.getElementById('startScreen');
        const quizScreen = document.getElementById('quizScreen');
        const resultsScreen = document.getElementById('resultsScreen');
        const timerEl = document.getElementById('timer');
        const problemEl = document.getElementById('problem');
        const answerInput = document.getElementById('answerInput');

        // Difficulty selection
        document.querySelectorAll('.diff-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                difficulty = btn.dataset.diff;
            });
        });

        // Operation selection
        document.querySelectorAll('.op-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                btn.classList.toggle('active');
                const op = btn.dataset.op;
                if (btn.classList.contains('active')) {
                    if (!operations.includes(op)) operations.push(op);
                } else {
                    operations = operations.filter(o => o !== op);
                }

                // Ensure at least one operation is selected
                if (operations.length === 0) {
                    btn.classList.add('active');
                    operations.push(op);
                }
            });
        });

        // Start quiz
        function startQuiz() {
            startScreen.style.display = 'none';
            quizScreen.classList.add('active');
            resultsScreen.classList.remove('active');

            correct = 0;
            wrong = 0;
            total = 0;
            timeLeft = 60;

            updateScore();
            generateProblem();
            startTimer();
            answerInput.focus();
        }

        // Timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;

                if (timeLeft <= 10) {
                    timerEl.classList.add('warning');
                }

                if (timeLeft <= 0) {
                    endQuiz();
                }
            }, 1000);
        }

        // Generate problem
        function generateProblem() {
            const range = ranges[difficulty];
            const op = operations[Math.floor(Math.random() * operations.length)];

            let a, b;

            switch (op) {
                case '+':
                    a = randomInt(range.min, range.max);
                    b = randomInt(range.min, range.max);
                    currentAnswer = a + b;
                    break;
                case '-':
                    a = randomInt(range.min, range.max);
                    b = randomInt(range.min, Math.min(a, range.max));
                    currentAnswer = a - b;
                    break;
                case '√ó':
                    const multMax = difficulty === 'hard' ? 12 : difficulty === 'medium' ? 10 : 5;
                    a = randomInt(1, multMax);
                    b = randomInt(1, multMax);
                    currentAnswer = a * b;
                    break;
                case '√∑':
                    const divMax = difficulty === 'hard' ? 12 : difficulty === 'medium' ? 10 : 5;
                    b = randomInt(1, divMax);
                    currentAnswer = randomInt(1, divMax);
                    a = b * currentAnswer;
                    break;
            }

            problemEl.textContent = `${a} ${op} ${b} = ?`;
            answerInput.value = '';
            answerInput.className = 'answer-input';
        }

        function randomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Submit answer
        function submitAnswer() {
            const userAnswer = parseInt(answerInput.value);
            if (isNaN(userAnswer)) return;

            total++;

            if (userAnswer === currentAnswer) {
                correct++;
                answerInput.classList.add('correct');
            } else {
                wrong++;
                answerInput.classList.add('wrong');
            }

            updateScore();

            setTimeout(() => {
                generateProblem();
                answerInput.focus();
            }, 300);
        }

        // Update score display
        function updateScore() {
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('totalCount').textContent = total;
        }

        // End quiz
        function endQuiz() {
            clearInterval(timerInterval);
            quizScreen.classList.remove('active');
            resultsScreen.classList.add('active');

            const accuracy = total > 0 ? Math.round((correct / total) * 100) : 0;

            document.getElementById('finalScore').textContent = correct;
            document.getElementById('statCorrect').textContent = correct;
            document.getElementById('statWrong').textContent = wrong;
            document.getElementById('statAccuracy').textContent = accuracy + '%';

            // Check high score
            const key = `highscore_${difficulty}_${operations.sort().join('')}`;
            const highScore = localStorage.getItem(key) || 0;

            if (correct > highScore) {
                localStorage.setItem(key, correct);
                document.getElementById('highScore').style.display = 'block';
            } else {
                document.getElementById('highScore').style.display = 'none';
            }
        }

        // Restart
        function restart() {
            resultsScreen.classList.remove('active');
            startScreen.style.display = 'block';
            timerEl.classList.remove('warning');
        }

        // Enter key to submit
        answerInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                submitAnswer();
            }
        });
    </script>
</body>
</html>
