<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Practice Drills</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }
        .settings {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .setting-group {
            flex: 1;
            min-width: 200px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        .problem {
            text-align: center;
            font-size: 4rem;
            font-weight: bold;
            color: #333;
            margin: 40px 0;
            min-height: 100px;
        }
        .answer-input {
            width: 100%;
            padding: 20px;
            font-size: 2rem;
            text-align: center;
            border: 3px solid #ddd;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        .answer-input:focus {
            outline: none;
            border-color: #667eea;
        }
        .answer-input.correct {
            border-color: #2ecc71;
            animation: correct 0.5s;
        }
        .answer-input.wrong {
            border-color: #e74c3c;
            animation: shake 0.5s;
        }
        @keyframes correct {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); background: #d5f4e6; }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }
        .stat {
            text-align: center;
        }
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }
        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }
        button {
            width: 100%;
            padding: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        .feedback {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 20px;
            min-height: 40px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§® Math Practice</h1>

        <div class="settings">
            <div class="setting-group">
                <label for="operation">Operation:</label>
                <select id="operation" onchange="newProblem()">
                    <option value="add">Addition</option>
                    <option value="subtract">Subtraction</option>
                    <option value="multiply">Multiplication</option>
                    <option value="divide">Division</option>
                    <option value="mixed">Mixed</option>
                </select>
            </div>
            <div class="setting-group">
                <label for="difficulty">Difficulty:</label>
                <select id="difficulty" onchange="newProblem()">
                    <option value="easy">Easy (1-10)</option>
                    <option value="medium" selected>Medium (1-50)</option>
                    <option value="hard">Hard (1-100)</option>
                </select>
            </div>
        </div>

        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Score</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">Streak</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="timer">0</div>
                <div class="stat-label">Time (s)</div>
            </div>
        </div>

        <div class="problem" id="problem"></div>
        <input type="number" class="answer-input" id="answer" placeholder="Your answer" onkeypress="if(event.key==='Enter') checkAnswer()" autofocus>
        <div class="feedback" id="feedback"></div>
        <button onclick="newProblem()">Skip Problem</button>
    </div>

    <script>
        let score = 0;
        let streak = 0;
        let time = 0;
        let timerInterval = null;
        let currentAnswer = 0;

        const ranges = {
            easy: [1, 10],
            medium: [1, 50],
            hard: [1, 100]
        };

        function startTimer() {
            if (!timerInterval) {
                timerInterval = setInterval(() => {
                    time++;
                    document.getElementById('timer').textContent = time;
                }, 1000);
            }
        }

        function getRandom(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function newProblem() {
            startTimer();

            const difficulty = document.getElementById('difficulty').value;
            const operation = document.getElementById('operation').value;
            const [min, max] = ranges[difficulty];

            let a = getRandom(min, max);
            let b = getRandom(min, max);
            let op = operation;

            if (op === 'mixed') {
                const ops = ['add', 'subtract', 'multiply', 'divide'];
                op = ops[Math.floor(Math.random() * ops.length)];
            }

            let symbol, answer;

            switch(op) {
                case 'add':
                    symbol = '+';
                    answer = a + b;
                    break;
                case 'subtract':
                    if (b > a) [a, b] = [b, a]; // Make sure result is positive
                    symbol = '-';
                    answer = a - b;
                    break;
                case 'multiply':
                    a = getRandom(min, Math.min(max, 20));
                    b = getRandom(min, Math.min(max, 20));
                    symbol = 'Ã—';
                    answer = a * b;
                    break;
                case 'divide':
                    b = getRandom(2, Math.min(max, 12));
                    answer = getRandom(min, Math.floor(max / b));
                    a = answer * b; // Ensure whole number result
                    symbol = 'Ã·';
                    break;
            }

            currentAnswer = answer;
            document.getElementById('problem').textContent = `${a} ${symbol} ${b} = ?`;
            document.getElementById('answer').value = '';
            document.getElementById('answer').className = 'answer-input';
            document.getElementById('feedback').textContent = '';
        }

        function checkAnswer() {
            const userAnswer = parseInt(document.getElementById('answer').value);
            const input = document.getElementById('answer');
            const feedback = document.getElementById('feedback');

            if (isNaN(userAnswer)) {
                feedback.textContent = 'Please enter a number!';
                feedback.style.color = '#e67e22';
                return;
            }

            if (userAnswer === currentAnswer) {
                score++;
                streak++;
                input.classList.add('correct');
                feedback.textContent = 'âœ“ Correct!';
                feedback.style.color = '#2ecc71';

                document.getElementById('score').textContent = score;
                document.getElementById('streak').textContent = streak;

                setTimeout(newProblem, 1000);
            } else {
                streak = 0;
                input.classList.add('wrong');
                feedback.textContent = `âœ— Wrong! Answer is ${currentAnswer}`;
                feedback.style.color = '#e74c3c';

                document.getElementById('streak').textContent = streak;

                setTimeout(newProblem, 2000);
            }
        }

        // Initialize
        newProblem();
    </script>
</body>
</html>