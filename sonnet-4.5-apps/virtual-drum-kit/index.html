<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Drum Kit</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            font-family: Arial, sans-serif;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255,255,255,0.5);
        }
        .controls {
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
        }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: #e74c3c;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        button:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }
        button.recording {
            background: #e74c3c;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
        }
        .drum-kit {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            max-width: 800px;
        }
        .drum-pad {
            width: 150px;
            height: 150px;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            user-select: none;
        }
        .drum-pad:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.6);
        }
        .drum-pad:active, .drum-pad.active {
            transform: scale(0.95);
            box-shadow: 0 2px 8px rgba(0,0,0,0.8);
        }
        .key {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .label {
            font-size: 0.9rem;
        }
        @media (max-width: 768px) {
            .drum-kit {
                grid-template-columns: repeat(2, 1fr);
            }
            .drum-pad {
                width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <h1>ü•Å Virtual Drum Kit</h1>

    <div class="controls">
        <button id="recordBtn" onclick="toggleRecord()">‚è∫ Record</button>
        <button id="playBtn" onclick="playRecording()" disabled>‚ñ∂ Play</button>
        <button onclick="clearRecording()">üóëÔ∏è Clear</button>
    </div>

    <div class="drum-kit">
        <div class="drum-pad" style="background: #e74c3c;" data-key="q" onclick="playSound('kick')">
            <div class="key">Q</div>
            <div class="label">KICK</div>
        </div>
        <div class="drum-pad" style="background: #3498db;" data-key="w" onclick="playSound('snare')">
            <div class="key">W</div>
            <div class="label">SNARE</div>
        </div>
        <div class="drum-pad" style="background: #2ecc71;" data-key="e" onclick="playSound('hihat')">
            <div class="key">E</div>
            <div class="label">HI-HAT</div>
        </div>
        <div class="drum-pad" style="background: #f39c12;" data-key="a" onclick="playSound('tom1')">
            <div class="key">A</div>
            <div class="label">TOM 1</div>
        </div>
        <div class="drum-pad" style="background: #9b59b6;" data-key="s" onclick="playSound('tom2')">
            <div class="key">S</div>
            <div class="label">TOM 2</div>
        </div>
        <div class="drum-pad" style="background: #e67e22;" data-key="d" onclick="playSound('tom3')">
            <div class="key">D</div>
            <div class="label">TOM 3</div>
        </div>
        <div class="drum-pad" style="background: #16a085;" data-key="z" onclick="playSound('crash')">
            <div class="key">Z</div>
            <div class="label">CRASH</div>
        </div>
        <div class="drum-pad" style="background: #8e44ad;" data-key="x" onclick="playSound('ride')">
            <div class="key">X</div>
            <div class="label">RIDE</div>
        </div>
        <div class="drum-pad" style="background: #c0392b;" data-key="c" onclick="playSound('clap')">
            <div class="key">C</div>
            <div class="label">CLAP</div>
        </div>
    </div>

    <script>
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let isRecording = false;
        let recording = [];
        let recordingStartTime = 0;

        const sounds = {
            kick: { freq: 60, type: 'sine', decay: 0.5 },
            snare: { freq: 200, type: 'triangle', decay: 0.2 },
            hihat: { freq: 8000, type: 'square', decay: 0.05 },
            tom1: { freq: 130, type: 'sine', decay: 0.3 },
            tom2: { freq: 100, type: 'sine', decay: 0.35 },
            tom3: { freq: 80, type: 'sine', decay: 0.4 },
            crash: { freq: 4000, type: 'sawtooth', decay: 0.8 },
            ride: { freq: 3000, type: 'square', decay: 0.6 },
            clap: { freq: 1000, type: 'triangle', decay: 0.15 }
        };

        function playSound(soundName) {
            const sound = sounds[soundName];
            const now = audioContext.currentTime;

            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            const filter = audioContext.createBiquadFilter();

            osc.type = sound.type;
            osc.frequency.setValueAtTime(sound.freq, now);

            if (soundName === 'kick') {
                osc.frequency.exponentialRampToValueAtTime(40, now + 0.1);
            }

            filter.type = 'lowpass';
            filter.frequency.value = sound.freq * 2;

            gain.gain.setValueAtTime(0.3, now);
            gain.gain.exponentialRampToValueAtTime(0.01, now + sound.decay);

            // Add noise for snare/hihat/clap
            if (['snare', 'hihat', 'clap', 'crash', 'ride'].includes(soundName)) {
                const noise = createNoise();
                const noiseSource = audioContext.createBufferSource();
                const noiseGain = audioContext.createGain();

                noiseSource.buffer = noise;
                noiseGain.gain.setValueAtTime(0.2, now);
                noiseGain.gain.exponentialRampToValueAtTime(0.01, now + sound.decay);

                noiseSource.connect(noiseGain);
                noiseGain.connect(audioContext.destination);
                noiseSource.start(now);
                noiseSource.stop(now + sound.decay);
            }

            osc.connect(filter);
            filter.connect(gain);
            gain.connect(audioContext.destination);

            osc.start(now);
            osc.stop(now + sound.decay);

            // Visual feedback
            const pad = document.querySelector(`[data-key="${Object.keys(sounds).indexOf(soundName) < 3 ? 'qwe'[Object.keys(sounds).indexOf(soundName)] : 'asd'[Object.keys(sounds).indexOf(soundName) - 3] || 'zxc'[Object.keys(sounds).indexOf(soundName) - 6]}"]`);
            if (pad) {
                pad.classList.add('active');
                setTimeout(() => pad.classList.remove('active'), 100);
            }

            // Record if recording
            if (isRecording) {
                recording.push({
                    sound: soundName,
                    time: Date.now() - recordingStartTime
                });
            }
        }

        function createNoise() {
            const bufferSize = audioContext.sampleRate * 0.2;
            const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
            const data = buffer.getChannelData(0);

            for (let i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }

            return buffer;
        }

        function toggleRecord() {
            isRecording = !isRecording;
            const btn = document.getElementById('recordBtn');

            if (isRecording) {
                recording = [];
                recordingStartTime = Date.now();
                btn.textContent = '‚èπ Stop';
                btn.classList.add('recording');
            } else {
                btn.textContent = '‚è∫ Record';
                btn.classList.remove('recording');
                document.getElementById('playBtn').disabled = recording.length === 0;
            }
        }

        function playRecording() {
            if (recording.length === 0) return;

            recording.forEach(note => {
                setTimeout(() => playSound(note.sound), note.time);
            });
        }

        function clearRecording() {
            recording = [];
            document.getElementById('playBtn').disabled = true;
            if (isRecording) {
                toggleRecord();
            }
        }

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            const key = e.key.toLowerCase();
            const keyMap = {
                'q': 'kick',
                'w': 'snare',
                'e': 'hihat',
                'a': 'tom1',
                's': 'tom2',
                'd': 'tom3',
                'z': 'crash',
                'x': 'ride',
                'c': 'clap'
            };

            if (keyMap[key]) {
                e.preventDefault();
                playSound(keyMap[key]);
            }
        });
    </script>
</body>
</html>