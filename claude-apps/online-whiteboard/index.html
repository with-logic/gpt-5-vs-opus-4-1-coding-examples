<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Whiteboard - Collaborative Drawing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #f0f0f0;
            overflow: hidden;
            height: 100vh;
        }

        #canvas {
            display: block;
            background: white;
            cursor: crosshair;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }

        .toolbar {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border-radius: 25px;
            padding: 15px 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 1000;
            flex-wrap: wrap;
            justify-content: center;
        }

        .tool-group {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 0 10px;
            border-right: 1px solid #e0e0e0;
        }

        .tool-group:last-child {
            border-right: none;
        }

        .tool-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            min-width: 40px;
            text-align: center;
        }

        .tool-btn:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .tool-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .color-picker {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .color-picker:hover {
            transform: scale(1.1);
        }

        .size-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .size-slider {
            width: 80px;
        }

        .size-display {
            min-width: 30px;
            text-align: center;
            font-weight: bold;
            color: #495057;
        }

        .opacity-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .opacity-slider {
            width: 60px;
        }

        .opacity-display {
            min-width: 35px;
            text-align: center;
            font-size: 12px;
            color: #495057;
        }

        .action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 8px 16px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .action-btn.danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .action-btn.danger:hover {
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }

        .preset-colors {
            display: flex;
            gap: 5px;
        }

        .preset-color {
            width: 25px;
            height: 25px;
            border: 2px solid #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .preset-color:hover {
            transform: scale(1.2);
        }

        .info-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 12px;
            font-size: 14px;
            max-width: 250px;
            z-index: 1000;
        }

        .coordinates {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 12px;
            color: #495057;
            font-family: monospace;
        }

        .drawing-mode-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 123, 255, 0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .touch-controls {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            display: none;
        }

        @media (max-width: 768px) {
            .toolbar {
                position: fixed;
                bottom: 10px;
                top: auto;
                left: 10px;
                right: 10px;
                transform: none;
                padding: 10px;
                gap: 8px;
            }

            .tool-group {
                padding: 0 5px;
                gap: 5px;
            }

            .tool-btn {
                padding: 6px 8px;
                font-size: 12px;
                min-width: 30px;
            }

            .size-slider, .opacity-slider {
                width: 60px;
            }

            .info-panel {
                bottom: 80px;
                right: 10px;
                left: 10px;
                max-width: none;
            }

            .touch-controls {
                display: block;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <div class="toolbar">
        <div class="tool-group">
            <button class="tool-btn active" id="penTool" title="Pen Tool">‚úèÔ∏è</button>
            <button class="tool-btn" id="eraserTool" title="Eraser">üßπ</button>
            <button class="tool-btn" id="rectangleTool" title="Rectangle">‚¨ú</button>
            <button class="tool-btn" id="circleTool" title="Circle">‚≠ï</button>
            <button class="tool-btn" id="lineTool" title="Line">üìè</button>
        </div>
        
        <div class="tool-group">
            <input type="color" class="color-picker" id="colorPicker" value="#000000" title="Color Picker">
            <div class="preset-colors">
                <div class="preset-color" style="background: #000000" onclick="setColor('#000000')"></div>
                <div class="preset-color" style="background: #ff0000" onclick="setColor('#ff0000')"></div>
                <div class="preset-color" style="background: #00ff00" onclick="setColor('#00ff00')"></div>
                <div class="preset-color" style="background: #0000ff" onclick="setColor('#0000ff')"></div>
                <div class="preset-color" style="background: #ffff00" onclick="setColor('#ffff00')"></div>
            </div>
        </div>
        
        <div class="tool-group">
            <div class="size-control">
                <span>üìè</span>
                <input type="range" class="size-slider" id="sizeSlider" min="1" max="50" value="5">
                <span class="size-display" id="sizeDisplay">5</span>
            </div>
        </div>
        
        <div class="tool-group">
            <div class="opacity-control">
                <span>üå´Ô∏è</span>
                <input type="range" class="opacity-slider" id="opacitySlider" min="0.1" max="1" step="0.1" value="1">
                <span class="opacity-display" id="opacityDisplay">100%</span>
            </div>
        </div>
        
        <div class="tool-group">
            <button class="action-btn" onclick="undo()" title="Undo">‚Ü∂</button>
            <button class="action-btn" onclick="redo()" title="Redo">‚Ü∑</button>
        </div>
        
        <div class="tool-group">
            <button class="action-btn danger" onclick="clearCanvas()" title="Clear All">üóëÔ∏è</button>
            <button class="action-btn" onclick="saveImage()" title="Save Image">üíæ</button>
        </div>
    </div>
    
    <div class="drawing-mode-indicator" id="modeIndicator">Drawing Mode: Pen</div>
    
    <div class="coordinates" id="coordinates">X: 0, Y: 0</div>
    
    <div class="info-panel">
        <strong>Online Whiteboard</strong><br>
        ‚Ä¢ Left click/tap to draw<br>
        ‚Ä¢ Use toolbar to switch tools<br>
        ‚Ä¢ Adjust size and opacity<br>
        ‚Ä¢ Save your artwork when done
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const coordinatesDisplay = document.getElementById('coordinates');
        const modeIndicator = document.getElementById('modeIndicator');
        
        // Canvas setup
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        // Drawing state
        let isDrawing = false;
        let currentTool = 'pen';
        let currentColor = '#000000';
        let currentSize = 5;
        let currentOpacity = 1;
        let startX, startY;
        
        // History for undo/redo
        let history = [];
        let historyStep = -1;
        
        // Save initial state
        saveState();
        
        function saveState() {
            historyStep++;
            if (historyStep < history.length) {
                history.length = historyStep;
            }
            history.push(canvas.toDataURL());
        }
        
        function undo() {
            if (historyStep > 0) {
                historyStep--;
                restoreState();
            }
        }
        
        function redo() {
            if (historyStep < history.length - 1) {
                historyStep++;
                restoreState();
            }
        }
        
        function restoreState() {
            const img = new Image();
            img.onload = function() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0);
            };
            img.src = history[historyStep];
        }
        
        // Tool selection
        document.querySelectorAll('.tool-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                currentTool = this.id.replace('Tool', '');
                updateModeIndicator();
                updateCursor();
            });
        });
        
        function updateModeIndicator() {
            const modes = {
                pen: 'Drawing Mode: Pen',
                eraser: 'Drawing Mode: Eraser',
                rectangle: 'Drawing Mode: Rectangle',
                circle: 'Drawing Mode: Circle',
                line: 'Drawing Mode: Line'
            };
            modeIndicator.textContent = modes[currentTool];
        }
        
        function updateCursor() {
            const cursors = {
                pen: 'crosshair',
                eraser: 'grab',
                rectangle: 'crosshair',
                circle: 'crosshair',
                line: 'crosshair'
            };
            canvas.style.cursor = cursors[currentTool];
        }
        
        // Color and size controls
        document.getElementById('colorPicker').addEventListener('change', function() {
            currentColor = this.value;
        });
        
        document.getElementById('sizeSlider').addEventListener('input', function() {
            currentSize = this.value;
            document.getElementById('sizeDisplay').textContent = this.value;
        });
        
        document.getElementById('opacitySlider').addEventListener('input', function() {
            currentOpacity = parseFloat(this.value);
            document.getElementById('opacityDisplay').textContent = Math.round(this.value * 100) + '%';
        });
        
        function setColor(color) {
            currentColor = color;
            document.getElementById('colorPicker').value = color;
        }
        
        // Drawing functions
        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            startX = (e.clientX || e.touches[0].clientX) - rect.left;
            startY = (e.clientY || e.touches[0].clientY) - rect.top;
            
            if (currentTool === 'pen' || currentTool === 'eraser') {
                ctx.beginPath();
                ctx.moveTo(startX, startY);
            }
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            const currentX = (e.clientX || e.touches[0].clientX) - rect.left;
            const currentY = (e.clientY || e.touches[0].clientY) - rect.top;
            
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            if (currentTool === 'pen') {
                ctx.globalCompositeOperation = 'source-over';
                ctx.strokeStyle = currentColor;
                ctx.lineWidth = currentSize;
                ctx.globalAlpha = currentOpacity;
                ctx.lineTo(currentX, currentY);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(currentX, currentY);
            } else if (currentTool === 'eraser') {
                ctx.globalCompositeOperation = 'destination-out';
                ctx.lineWidth = currentSize;
                ctx.lineTo(currentX, currentY);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(currentX, currentY);
            }
            
            updateCoordinates(currentX, currentY);
        }
        
        function stopDrawing(e) {
            if (!isDrawing) return;
            isDrawing = false;
            
            const rect = canvas.getBoundingClientRect();
            const endX = (e.clientX || e.changedTouches[0].clientX) - rect.left;
            const endY = (e.clientY || e.changedTouches[0].clientY) - rect.top;
            
            ctx.globalCompositeOperation = 'source-over';
            ctx.globalAlpha = currentOpacity;
            
            if (currentTool === 'rectangle') {
                const width = endX - startX;
                const height = endY - startY;
                ctx.strokeStyle = currentColor;
                ctx.lineWidth = currentSize;
                ctx.strokeRect(startX, startY, width, height);
            } else if (currentTool === 'circle') {
                const radius = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
                ctx.strokeStyle = currentColor;
                ctx.lineWidth = currentSize;
                ctx.beginPath();
                ctx.arc(startX, startY, radius, 0, 2 * Math.PI);
                ctx.stroke();
            } else if (currentTool === 'line') {
                ctx.strokeStyle = currentColor;
                ctx.lineWidth = currentSize;
                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.stroke();
            }
            
            saveState();
        }
        
        function updateCoordinates(x, y) {
            coordinatesDisplay.textContent = `X: ${Math.round(x)}, Y: ${Math.round(y)}`;
        }
        
        // Mouse events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', function(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            updateCoordinates(x, y);
            draw(e);
        });
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);
        
        // Touch events for mobile
        canvas.addEventListener('touchstart', function(e) {
            e.preventDefault();
            startDrawing(e);
        });
        
        canvas.addEventListener('touchmove', function(e) {
            e.preventDefault();
            draw(e);
        });
        
        canvas.addEventListener('touchend', function(e) {
            e.preventDefault();
            stopDrawing(e);
        });
        
        // Utility functions
        function clearCanvas() {
            if (confirm('Are you sure you want to clear the canvas?')) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                saveState();
            }
        }
        
        function saveImage() {
            const link = document.createElement('a');
            link.download = 'whiteboard-' + new Date().getTime() + '.png';
            link.href = canvas.toDataURL();
            link.click();
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'z':
                        e.preventDefault();
                        if (e.shiftKey) {
                            redo();
                        } else {
                            undo();
                        }
                        break;
                    case 'y':
                        e.preventDefault();
                        redo();
                        break;
                    case 's':
                        e.preventDefault();
                        saveImage();
                        break;
                }
            }
            
            // Tool shortcuts
            switch(e.key) {
                case '1':
                    document.getElementById('penTool').click();
                    break;
                case '2':
                    document.getElementById('eraserTool').click();
                    break;
                case '3':
                    document.getElementById('rectangleTool').click();
                    break;
                case '4':
                    document.getElementById('circleTool').click();
                    break;
                case '5':
                    document.getElementById('lineTool').click();
                    break;
            }
        });
        
        // Prevent scrolling on touch devices
        document.body.addEventListener('touchstart', function(e) {
            if (e.target === canvas) {
                e.preventDefault();
            }
        }, { passive: false });
        
        document.body.addEventListener('touchend', function(e) {
            if (e.target === canvas) {
                e.preventDefault();
            }
        }, { passive: false });
        
        document.body.addEventListener('touchmove', function(e) {
            if (e.target === canvas) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Initialize
        updateModeIndicator();
        updateCursor();
        
        // Add some helpful startup animations
        window.addEventListener('load', function() {
            // Fade in the interface
            document.querySelector('.toolbar').style.opacity = '0';
            document.querySelector('.toolbar').style.transform = 'translateX(-50%) translateY(-20px)';
            
            setTimeout(() => {
                document.querySelector('.toolbar').style.transition = 'all 0.5s ease';
                document.querySelector('.toolbar').style.opacity = '1';
                document.querySelector('.toolbar').style.transform = 'translateX(-50%) translateY(0)';
            }, 100);
        });
    </script>
</body>
</html>