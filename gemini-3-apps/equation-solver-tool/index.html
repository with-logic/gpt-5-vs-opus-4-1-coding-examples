<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equation Solver</title>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Libre Baskerville', serif;
            background-color: #fdfdfd;
            color: #333;
            line-height: 1.6;
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            border-bottom: 2px solid #333;
            padding-bottom: 0.5rem;
            margin-bottom: 2rem;
        }

        .input-section {
            background: #f4f4f4;
            padding: 2rem;
            border-radius: 4px;
            margin-bottom: 2rem;
            border: 1px solid #ddd;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .equation-inputs {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            font-size: 1.2rem;
        }

        input[type="number"] {
            width: 80px;
            padding: 0.5rem;
            font-family: inherit;
            font-size: 1.1rem;
            border: 1px solid #aaa;
            text-align: center;
        }

        button {
            background-color: #333;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            font-family: inherit;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 1rem;
            transition: background 0.2s;
        }

        button:hover {
            background-color: #555;
        }

        button.secondary {
            background-color: white;
            color: #333;
            border: 1px solid #333;
        }
        
        button.secondary:hover {
            background-color: #eee;
        }

        .solution-section {
            display: none;
            border-top: 1px solid #eee;
            margin-top: 2rem;
            padding-top: 2rem;
        }

        .step {
            margin-bottom: 1.5rem;
            padding-left: 1rem;
            border-left: 3px solid #eee;
        }

        .math-display {
            font-style: italic;
            font-size: 1.1rem;
            background: #fff;
            padding: 0.5rem 0;
        }

        .result-box {
            background: #e6fffa;
            border: 1px solid #b2f5ea;
            padding: 1rem;
            margin-top: 1rem;
            font-weight: bold;
            color: #2c7a7b;
        }

        /* Math formatting helpers */
        sup {
            font-size: 0.7em;
            vertical-align: super;
        }
        
        .fraction {
            display: inline-block;
            vertical-align: middle;
            text-align: center;
            font-size: 0.9em;
        }
        .fraction > span {
            display: block;
            padding: 0 0.2em;
        }
        .fraction span.fdn {
            border-top: 1px solid black;
        }

        @media (max-width: 600px) {
            .equation-inputs { font-size: 1rem; }
            input[type="number"] { width: 60px; }
        }

    </style>
</head>
<body>

    <h1>Quadratic Equation Solver</h1>
    <p>Solve equations of the form <i>ax</i><sup>2</sup> + <i>bx</i> + <i>c</i> = 0</p>

    <div class="input-section">
        <div class="equation-inputs">
            <input type="number" id="val-a" placeholder="a"> <i>x</i><sup>2</sup>
            <span>+</span>
            <input type="number" id="val-b" placeholder="b"> <i>x</i>
            <span>+</span>
            <input type="number" id="val-c" placeholder="c">
            <span>= 0</span>
        </div>
        <button onclick="solve()">Calculate Solution</button>
        <button class="secondary" onclick="exportSolution()">Export Result</button>
    </div>

    <div id="solution" class="solution-section">
        <h2>Step-by-Step Breakdown</h2>
        <div id="steps-container"></div>
    </div>

    <script>
        function solve() {
            const a = parseFloat(document.getElementById('val-a').value);
            const b = parseFloat(document.getElementById('val-b').value);
            const c = parseFloat(document.getElementById('val-c').value);
            
            const container = document.getElementById('steps-container');
            container.innerHTML = '';
            
            const solSection = document.getElementById('solution');
            solSection.style.display = 'block';

            if (isNaN(a) || isNaN(b) || isNaN(c)) {
                container.innerHTML = '<div class="result-box" style="background:#fff5f5; color:#c53030; border-color:#feb2b2;">Please enter valid numbers for coefficients a, b, and c.</div>';
                return;
            }

            if (a === 0) {
                // Linear
                addStep("Since <i>a</i> = 0, this is a linear equation: " + formatLinear(b, c));
                if (b === 0) {
                    if (c === 0) {
                        addResult("0 = 0. Infinite solutions.");
                    } else {
                        addResult(`${c} = 0. No solution.`);
                    }
                } else {
                    addStep(`Subtract ${c} from both sides: <i>${b}x = ${-c}</i>`);
                    addStep(`Divide by ${b}: <i>x = ${-c}/${b}</i>`);
                    addResult(`x = ${-c/b}`);
                }
                return;
            }

            // Quadratic
            addStep(`Identify coefficients: <i>a = ${a}, b = ${b}, c = ${c}</i>`);
            
            const discriminant = (b * b) - (4 * a * c);
            addStep(`Calculate the discriminant (&#916;): <br>
                     &#916; = <i>b</i><sup>2</sup> - 4<i>ac</i> <br>
                     &#916; = (${b})<sup>2</sup> - 4(${a})(${c}) <br>
                     &#916; = ${b*b} - (${4*a*c}) <br>
                     &#916; = ${discriminant}`);

            if (discriminant > 0) {
                addStep("Since &#916; > 0, there are two distinct real roots.");
                
                const sqrtDisc = Math.sqrt(discriminant);
                const root1 = (-b + sqrtDisc) / (2 * a);
                const root2 = (-b - sqrtDisc) / (2 * a);
                
                addStep(`Apply the Quadratic Formula: <br>
                         <div class="math-display">
                            x = <div class="fraction"><span>-b &#177; &#8730;&#916;</span><span class="fdn">2a</span></div>
                         </div>
                         <div class="math-display">
                            x = <div class="fraction"><span>${-b} &#177; ${sqrtDisc.toFixed(4)}</span><span class="fdn">${2*a}</span></div>
                         </div>`);
                
                addResult(`x<sub>1</sub> = ${root1.toFixed(4)}, x<sub>2</sub> = ${root2.toFixed(4)}`);

            } else if (discriminant === 0) {
                addStep("Since &#916; = 0, there is exactly one real root.");
                const root = -b / (2 * a);
                addResult(`x = ${root}`);
            } else {
                addStep("Since &#916; < 0, there are no real roots (complex roots exist).");
                const realPart = (-b / (2 * a)).toFixed(4);
                const imagPart = (Math.sqrt(-discriminant) / (2 * a)).toFixed(4);
                addResult(`x = ${realPart} &#177; ${imagPart}<i>i</i>`);
            }
        }

        function formatLinear(b, c) {
            let str = "";
            if (b === 1) str += "x";
            else if (b === -1) str += "-x";
            else str += b + "x";
            
            if (c > 0) str += " + " + c;
            else if (c < 0) str += " - " + Math.abs(c);
            
            str += " = 0";
            return `<i>${str}</i>`;
        }

        function addStep(html) {
            const div = document.createElement('div');
            div.className = 'step';
            div.innerHTML = html;
            document.getElementById('steps-container').appendChild(div);
        }

        function addResult(html) {
            const div = document.createElement('div');
            div.className = 'result-box';
            div.innerHTML = html;
            document.getElementById('steps-container').appendChild(div);
        }

        function exportSolution() {
            const content = document.getElementById('solution').innerText;
            if (!content) {
                alert("Solve an equation first.");
                return;
            }
            const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = "solution.txt";
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
