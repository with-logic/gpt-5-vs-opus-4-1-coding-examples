<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenAI.fm | Neural Radio</title>
    <style>
        body {
            margin: 0;
            background-color: #000;
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        #ui-layer {
            position: relative;
            z-index: 1;
            text-align: center;
            pointer-events: none;
        }

        h1 {
            font-size: 3rem;
            letter-spacing: 10px;
            text-transform: uppercase;
            margin-bottom: 1rem;
            mix-blend-mode: difference;
        }

        .controls {
            pointer-events: auto;
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        button {
            background: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 10px 20px;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        button:hover {
            background: #fff;
            color: #000;
        }

        .status {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 10px;
            letter-spacing: 2px;
        }

        /* Glitch effect for text */
        .glitch {
            position: relative;
        }
        
        .glitch::before, .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.8;
        }

        .glitch::before {
            color: #ff00c1;
            z-index: -1;
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }

        .glitch::after {
            color: #00fff9;
            z-index: -2;
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip-path: inset(20% 0 80% 0); transform: translate(-2px,0); }
            20% { clip-path: inset(60% 0 10% 0); transform: translate(2px,0); }
            40% { clip-path: inset(40% 0 50% 0); transform: translate(-2px,0); }
            60% { clip-path: inset(80% 0 5% 0); transform: translate(2px,0); }
            80% { clip-path: inset(10% 0 60% 0); transform: translate(-2px,0); }
            100% { clip-path: inset(30% 0 30% 0); transform: translate(2px,0); }
        }

        @keyframes glitch-anim-2 {
            0% { clip-path: inset(10% 0 60% 0); transform: translate(2px,0); }
            20% { clip-path: inset(30% 0 20% 0); transform: translate(-2px,0); }
            40% { clip-path: inset(70% 0 10% 0); transform: translate(2px,0); }
            60% { clip-path: inset(20% 0 50% 0); transform: translate(-2px,0); }
            80% { clip-path: inset(50% 0 30% 0); transform: translate(2px,0); }
            100% { clip-path: inset(0% 0 80% 0); transform: translate(-2px,0); }
        }

    </style>
</head>
<body>

    <canvas id="canvas-container"></canvas>

    <div id="ui-layer">
        <h1 class="glitch" data-text="NEURAL.FM">NEURAL.FM</h1>
        <div class="status" id="track-info">WAITING FOR SIGNAL...</div>
        
        <div class="controls">
            <button id="playBtn">CONNECT</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas-container');
        const ctx = canvas.getContext('2d');
        let width, height;

        // Audio
        let audioCtx;
        let analyser;
        let bufferLength;
        let dataArray;
        let isPlaying = false;
        let oscillator;
        let gainNode;

        // Resize
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // Visualization Loop
        function draw() {
            requestAnimationFrame(draw);

            // Clear with fade
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, width, height);

            if (!isPlaying) {
                // Idle animation (Sine wave)
                ctx.beginPath();
                ctx.moveTo(0, height / 2);
                for (let i = 0; i < width; i++) {
                    ctx.lineTo(i, height / 2 + Math.sin(i * 0.01 + Date.now() * 0.002) * 50);
                }
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 1;
                ctx.stroke();
                return;
            }

            analyser.getByteTimeDomainData(dataArray);

            ctx.lineWidth = 2;
            ctx.strokeStyle = '#00ff00';
            ctx.beginPath();

            const sliceWidth = width * 1.0 / bufferLength;
            let x = 0;

            for (let i = 0; i < bufferLength; i++) {
                const v = dataArray[i] / 128.0;
                const y = v * height / 2;

                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);

                x += sliceWidth;
            }

            ctx.lineTo(width, height / 2);
            ctx.stroke();
            
            // Add some "particles" based on frequency
            // Just random glitch dots for style
            if(Math.random() > 0.9) {
                ctx.fillStyle = '#fff';
                ctx.fillRect(Math.random() * width, Math.random() * height, 2, 2);
            }
        }

        draw();

        // Audio Logic
        document.getElementById('playBtn').addEventListener('click', togglePlay);

        function togglePlay() {
            if (isPlaying) {
                stopAudio();
            } else {
                startAudio();
            }
        }

        function startAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioCtx.createAnalyser();
                analyser.fftSize = 2048;
                bufferLength = analyser.frequencyBinCount;
                dataArray = new Uint8Array(bufferLength);
            }
            
            if (audioCtx.state === 'suspended') audioCtx.resume();

            // Create a drone sound + LFO
            oscillator = audioCtx.createOscillator();
            oscillator.type = 'sawtooth';
            oscillator.frequency.value = 50; // Low drone

            const lfo = audioCtx.createOscillator();
            lfo.frequency.value = 0.2; // Slow modulation
            const lfoGain = audioCtx.createGain();
            lfoGain.gain.value = 200;

            lfo.connect(lfoGain);
            lfoGain.connect(oscillator.frequency);

            gainNode = audioCtx.createGain();
            gainNode.gain.value = 0.1;

            oscillator.connect(gainNode);
            gainNode.connect(analyser);
            analyser.connect(audioCtx.destination);

            oscillator.start();
            lfo.start();

            isPlaying = true;
            document.getElementById('playBtn').textContent = "DISCONNECT";
            document.getElementById('track-info').textContent = "RECEIVING TRANSMISSION // SYNTHWAVE_DRONE_01";
            document.getElementById('track-info').style.color = "#00ff00";
        }

        function stopAudio() {
            if (oscillator) {
                oscillator.stop();
                oscillator.disconnect();
            }
            isPlaying = false;
            document.getElementById('playBtn').textContent = "CONNECT";
            document.getElementById('track-info').textContent = "SIGNAL LOST";
            document.getElementById('track-info').style.color = "#ff0000";
        }

    </script>
</body>
</html>
